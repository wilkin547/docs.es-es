---
title: Trabajar con el modelo semántico del SDK de .NET Compiler Platform
description: En este tema se proporciona una descripción del tipo que se usa para entender y manipular el modelo semántico del código.
ms.date: 10/15/2017
ms.custom: mvc
ms.openlocfilehash: f0d254045a168f82888c5cc77a34f194a68aed0e
ms.sourcegitcommit: 8299abfbd5c49b596d61f1e4d09bc6b8ba055b36
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/27/2021
ms.locfileid: "98899131"
---
# <a name="work-with-semantics"></a><span data-ttu-id="b02cc-103">Trabajar con semántica</span><span class="sxs-lookup"><span data-stu-id="b02cc-103">Work with semantics</span></span>

<span data-ttu-id="b02cc-104">Los [árboles de sintaxis](work-with-syntax.md) representan la estructura léxica y sintáctica del código fuente.</span><span class="sxs-lookup"><span data-stu-id="b02cc-104">[Syntax trees](work-with-syntax.md) represent the lexical and syntactic structure of source code.</span></span> <span data-ttu-id="b02cc-105">Aunque esta información por sí misma basta para describir todas las declaraciones y la lógica del origen, no es suficiente para identificar aquello a lo que se hace referencia.</span><span class="sxs-lookup"><span data-stu-id="b02cc-105">Although this information alone is enough to describe all the declarations and logic in the source, it is not enough information to identify what is being referenced.</span></span> <span data-ttu-id="b02cc-106">Un nombre puede representar:</span><span class="sxs-lookup"><span data-stu-id="b02cc-106">A name may represent:</span></span>

- <span data-ttu-id="b02cc-107">un tipo</span><span class="sxs-lookup"><span data-stu-id="b02cc-107">a type</span></span>
- <span data-ttu-id="b02cc-108">un campo</span><span class="sxs-lookup"><span data-stu-id="b02cc-108">a field</span></span>
- <span data-ttu-id="b02cc-109">un método</span><span class="sxs-lookup"><span data-stu-id="b02cc-109">a method</span></span>
- <span data-ttu-id="b02cc-110">una variable local</span><span class="sxs-lookup"><span data-stu-id="b02cc-110">a local variable</span></span>

<span data-ttu-id="b02cc-111">Aunque cada uno de ellos es exclusivamente diferente, determinar a cuál hace referencia realmente un identificador suele exigir una comprensión profunda de las reglas del lenguaje.</span><span class="sxs-lookup"><span data-stu-id="b02cc-111">Although each of these is uniquely different, determining which one an identifier actually refers to often requires a deep understanding of the language rules.</span></span>

<span data-ttu-id="b02cc-112">Hay elementos de programa representados en el código fuente y, además, los programas pueden hacer referencia a bibliotecas compiladas anteriormente, empaquetadas en archivos de ensamblado.</span><span class="sxs-lookup"><span data-stu-id="b02cc-112">There are program elements represented in source code, and programs can also refer to previously compiled libraries, packaged in assembly files.</span></span> <span data-ttu-id="b02cc-113">Aunque no hay ningún código fuente y, por tanto, ningún nodo ni árbol de sintaxis, disponible para los ensamblados, los programas aún pueden hacer referencia a los elementos incluidos en ellos.</span><span class="sxs-lookup"><span data-stu-id="b02cc-113">Although no source code, and therefore no syntax nodes or trees, are available for assemblies, programs can still refer to elements inside them.</span></span>

<span data-ttu-id="b02cc-114">Para esas tareas necesita el **modelo semántico**.</span><span class="sxs-lookup"><span data-stu-id="b02cc-114">For those tasks, you need the **Semantic model**.</span></span>

<span data-ttu-id="b02cc-115">Además de un modelo sintáctico del código fuente, un modelo semántico encapsula las reglas del lenguaje, lo que le ofrece una manera sencilla de combinar correctamente los identificadores con el elemento de programa correcto al que se hace referencia.</span><span class="sxs-lookup"><span data-stu-id="b02cc-115">In addition to a syntactic model of the source code, a semantic model encapsulates the language rules, giving you an easy way to correctly match identifiers with the correct program element being referenced.</span></span>

## <a name="compilation"></a><span data-ttu-id="b02cc-116">Compilación</span><span class="sxs-lookup"><span data-stu-id="b02cc-116">Compilation</span></span>

<span data-ttu-id="b02cc-117">Una compilación es una representación de todo lo necesario para compilar un programa de C# o Visual Basic, lo que incluye todas las referencias de ensamblado, las opciones de compilador y los archivos de origen.</span><span class="sxs-lookup"><span data-stu-id="b02cc-117">A compilation is a representation of everything needed to compile a C# or Visual Basic program, which includes all the assembly references, compiler options, and source files.</span></span>

<span data-ttu-id="b02cc-118">Dado que toda esta información está en un solo lugar, los elementos incluidos en el código fuente pueden describirse con más detalle.</span><span class="sxs-lookup"><span data-stu-id="b02cc-118">Because all this information is in one place, the elements contained in the source code can be described in more detail.</span></span> <span data-ttu-id="b02cc-119">La compilación representa cada tipo declarado, miembro o variable como un símbolo.</span><span class="sxs-lookup"><span data-stu-id="b02cc-119">The compilation represents each declared type, member, or variable as a symbol.</span></span> <span data-ttu-id="b02cc-120">La compilación contiene una serie de métodos que ayudan a encontrar y relacionar los símbolos que se han declarado en el código fuente o importado como metadatos desde un ensamblado.</span><span class="sxs-lookup"><span data-stu-id="b02cc-120">The compilation contains a variety of methods that help you find and relate the symbols that have either been declared in the source code or imported as metadata from an assembly.</span></span>

<span data-ttu-id="b02cc-121">Al igual que los árboles de sintaxis, las compilaciones son inmutables.</span><span class="sxs-lookup"><span data-stu-id="b02cc-121">Similar to syntax trees, compilations are immutable.</span></span> <span data-ttu-id="b02cc-122">Después de crear una compilación, ni el usuario ni nadie con quien la comparta puede modificarla.</span><span class="sxs-lookup"><span data-stu-id="b02cc-122">After you create a compilation, it cannot be changed by you or anyone else you might be sharing it with.</span></span> <span data-ttu-id="b02cc-123">Pero puede crear una nueva compilación a partir de una existente, al especificar un cambio a medida que lo realiza.</span><span class="sxs-lookup"><span data-stu-id="b02cc-123">However, you can create a new compilation from an existing compilation, specifying a change as you do so.</span></span> <span data-ttu-id="b02cc-124">Por ejemplo, podría crear una compilación igual en todos los sentidos a una compilación existente, salvo que podría incluir un archivo de origen adicional o una referencia de ensamblado.</span><span class="sxs-lookup"><span data-stu-id="b02cc-124">For example, you might create a compilation that is the same in every way as an existing compilation, except it may include an additional source file or assembly reference.</span></span>

## <a name="symbols"></a><span data-ttu-id="b02cc-125">Símbolos</span><span class="sxs-lookup"><span data-stu-id="b02cc-125">Symbols</span></span>

<span data-ttu-id="b02cc-126">Un símbolo representa un elemento diferenciado declarado por el código fuente o importado desde un ensamblado como metadatos.</span><span class="sxs-lookup"><span data-stu-id="b02cc-126">A symbol represents a distinct element declared by the source code or imported from an assembly as metadata.</span></span> <span data-ttu-id="b02cc-127">Cada espacio de nombres, tipo, método, propiedad, campo, evento, parámetro o variable local se representa mediante un símbolo.</span><span class="sxs-lookup"><span data-stu-id="b02cc-127">Every namespace, type, method, property, field, event, parameter, or local variable is represented by a symbol.</span></span>

<span data-ttu-id="b02cc-128">Una serie de métodos y propiedades del tipo <xref:Microsoft.CodeAnalysis.Compilation> ayudan a encontrar símbolos.</span><span class="sxs-lookup"><span data-stu-id="b02cc-128">A variety of methods and properties on the <xref:Microsoft.CodeAnalysis.Compilation> type help you find symbols.</span></span> <span data-ttu-id="b02cc-129">Por ejemplo, puede buscar el símbolo de un tipo declarado por su nombre de metadatos común.</span><span class="sxs-lookup"><span data-stu-id="b02cc-129">For example, you can find a symbol for a declared type by its common metadata name.</span></span> <span data-ttu-id="b02cc-130">También puede acceder a la tabla de símbolos completa como un árbol de símbolos enraizado por el espacio de nombres global.</span><span class="sxs-lookup"><span data-stu-id="b02cc-130">You can also access the entire symbol table as a tree of symbols rooted by the global namespace.</span></span>

<span data-ttu-id="b02cc-131">Los símbolos también contienen información adicional que el compilador determina desde el origen o los metadatos, como otros símbolos referenciados.</span><span class="sxs-lookup"><span data-stu-id="b02cc-131">Symbols also contain additional information that the compiler determines from the source or metadata, such as other referenced symbols.</span></span> <span data-ttu-id="b02cc-132">Cada tipo de símbolo se representa mediante una interfaz independiente derivada de <xref:Microsoft.CodeAnalysis.ISymbol>, cada una con sus propios métodos y propiedades que detallan la información recopilada por el compilador.</span><span class="sxs-lookup"><span data-stu-id="b02cc-132">Each kind of symbol is represented by a separate interface derived from <xref:Microsoft.CodeAnalysis.ISymbol>, each with its own methods and properties detailing the information the compiler has gathered.</span></span> <span data-ttu-id="b02cc-133">Muchas de estas propiedades hacen referencia directamente a otros símbolos.</span><span class="sxs-lookup"><span data-stu-id="b02cc-133">Many of these properties directly reference other symbols.</span></span> <span data-ttu-id="b02cc-134">Por ejemplo, la propiedad <xref:Microsoft.CodeAnalysis.IMethodSymbol.ReturnType?displayProperty=nameWithType> indica el símbolo de tipo real que devuelve el método.</span><span class="sxs-lookup"><span data-stu-id="b02cc-134">For example, the <xref:Microsoft.CodeAnalysis.IMethodSymbol.ReturnType?displayProperty=nameWithType> property tells you the actual type symbol that the method returns.</span></span>

<span data-ttu-id="b02cc-135">Los símbolos presentan una representación común de espacios de nombres, tipos y miembros, entre el código fuente y los metadatos.</span><span class="sxs-lookup"><span data-stu-id="b02cc-135">Symbols present a common representation of namespaces, types, and members, between source code and metadata.</span></span> <span data-ttu-id="b02cc-136">Por ejemplo, un método que se ha declarado en el código fuente y un método que se ha importado desde los metadatos se representan mediante un elemento <xref:Microsoft.CodeAnalysis.IMethodSymbol> con las mismas propiedades.</span><span class="sxs-lookup"><span data-stu-id="b02cc-136">For example, a method that was declared in source code and a method that was imported from metadata are both represented by an <xref:Microsoft.CodeAnalysis.IMethodSymbol> with the same properties.</span></span>

<span data-ttu-id="b02cc-137">Los símbolos son similares en concepto al sistema de tipos de CLR representado por la API <xref:System.Reflection>, aunque son mejores en el aspecto de que modelan algo más que tipos.</span><span class="sxs-lookup"><span data-stu-id="b02cc-137">Symbols are similar in concept to the CLR type system as represented by the <xref:System.Reflection> API, yet they are richer in that they model more than just types.</span></span> <span data-ttu-id="b02cc-138">Los espacios de nombres, las variables locales y las etiquetas son todos símbolos.</span><span class="sxs-lookup"><span data-stu-id="b02cc-138">Namespaces, local variables, and labels are all symbols.</span></span> <span data-ttu-id="b02cc-139">Además, los símbolos son una representación de conceptos del lenguaje, no de conceptos de CLR.</span><span class="sxs-lookup"><span data-stu-id="b02cc-139">In addition, symbols are a representation of language concepts, not CLR concepts.</span></span> <span data-ttu-id="b02cc-140">Hay mucha superposición, pero también muchas distinciones significativas.</span><span class="sxs-lookup"><span data-stu-id="b02cc-140">There is a lot of overlap, but there are many meaningful distinctions as well.</span></span> <span data-ttu-id="b02cc-141">Por ejemplo, un método Iterator de C# o Visual Basic es un único símbolo.</span><span class="sxs-lookup"><span data-stu-id="b02cc-141">For instance, an iterator method in C# or Visual Basic is a single symbol.</span></span> <span data-ttu-id="b02cc-142">Pero si el método Iterator se traduce a metadatos de CLR, es un tipo y varios métodos.</span><span class="sxs-lookup"><span data-stu-id="b02cc-142">However, when the iterator method is translated to CLR metadata, it is a type and multiple methods.</span></span>

## <a name="semantic-model"></a><span data-ttu-id="b02cc-143">Modelo semántico</span><span class="sxs-lookup"><span data-stu-id="b02cc-143">Semantic model</span></span>

<span data-ttu-id="b02cc-144">Un modelo semántico representa toda la información semántica de un solo archivo de origen.</span><span class="sxs-lookup"><span data-stu-id="b02cc-144">A semantic model represents all the semantic information for a single source file.</span></span> <span data-ttu-id="b02cc-145">Puede usarlo para descubrir lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="b02cc-145">You can use it to discover the following:</span></span>

- <span data-ttu-id="b02cc-146">Los símbolos a los que se hace referencia en una ubicación concreta del origen.</span><span class="sxs-lookup"><span data-stu-id="b02cc-146">The symbols referenced at a specific location in source.</span></span>
- <span data-ttu-id="b02cc-147">El tipo resultante de cualquier expresión.</span><span class="sxs-lookup"><span data-stu-id="b02cc-147">The resultant type of any expression.</span></span>
- <span data-ttu-id="b02cc-148">Todos los diagnósticos, que son errores y advertencias.</span><span class="sxs-lookup"><span data-stu-id="b02cc-148">All diagnostics, which are errors and warnings.</span></span>
- <span data-ttu-id="b02cc-149">Cómo fluyen las variables hacia y desde las regiones del origen.</span><span class="sxs-lookup"><span data-stu-id="b02cc-149">How variables flow in and out of regions of source.</span></span>
- <span data-ttu-id="b02cc-150">Las respuestas a preguntas más especulativas.</span><span class="sxs-lookup"><span data-stu-id="b02cc-150">The answers to more speculative questions.</span></span>
