---
title: Sintaxis de consultas y sintaxis de métodos en LINQ (C#)
ms.date: 07/20/2015
helpviewer_keywords:
- LINQ [C#], query syntax vs. method syntax
- queries [LINQ in C#], syntax comparisons
ms.assetid: eedd6dd9-fec2-428c-9581-5b8783810ded
ms.openlocfilehash: 17280daaf98010245bbd019652a2a46d7f66ab59
ms.sourcegitcommit: 7bc6887ab658550baa78f1520ea735838249345e
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/03/2020
ms.locfileid: "75635501"
---
# <a name="query-syntax-and-method-syntax-in-linq-c"></a><span data-ttu-id="1bfad-102">Sintaxis de consultas y sintaxis de métodos en LINQ (C#)</span><span class="sxs-lookup"><span data-stu-id="1bfad-102">Query Syntax and Method Syntax in LINQ (C#)</span></span>
<span data-ttu-id="1bfad-103">La mayoría de las consultas de la documentación introductoria de Language Integrated Query (LINK) se escribe con la sintaxis de consulta declarativa de LINQ.</span><span class="sxs-lookup"><span data-stu-id="1bfad-103">Most queries in the introductory Language Integrated Query (LINQ) documentation are written by using the LINQ declarative query syntax.</span></span> <span data-ttu-id="1bfad-104">Pero la sintaxis de consulta debe traducirse en llamadas de método para .NET Common Language Runtime (CLR) al compilar el código.</span><span class="sxs-lookup"><span data-stu-id="1bfad-104">However, the query syntax must be translated into method calls for the .NET common language runtime (CLR) when the code is compiled.</span></span> <span data-ttu-id="1bfad-105">Estas llamadas de método invocan los operadores de consulta estándar, que tienen nombres tales como `Where`, `Select`, `GroupBy`, `Join`, `Max` y `Average`.</span><span class="sxs-lookup"><span data-stu-id="1bfad-105">These method calls invoke the standard query operators, which have names such as `Where`, `Select`, `GroupBy`, `Join`, `Max`, and `Average`.</span></span> <span data-ttu-id="1bfad-106">Puede llamarlas directamente con la sintaxis de método en lugar de la sintaxis de consulta.</span><span class="sxs-lookup"><span data-stu-id="1bfad-106">You can call them directly by using method syntax instead of query syntax.</span></span>  
  
 <span data-ttu-id="1bfad-107">La sintaxis de consulta y la sintaxis de método son idénticas desde el punto de vista semántico, pero muchos usuarios creen que la sintaxis de consulta es mucho más sencilla y fácil de leer.</span><span class="sxs-lookup"><span data-stu-id="1bfad-107">Query syntax and method syntax are semantically identical, but many people find query syntax simpler and easier to read.</span></span> <span data-ttu-id="1bfad-108">Algunos métodos deben expresarse como llamadas de método.</span><span class="sxs-lookup"><span data-stu-id="1bfad-108">Some queries must be expressed as method calls.</span></span> <span data-ttu-id="1bfad-109">Por ejemplo, debe usar una llamada de método para expresar una consulta que recupera el número de elementos que cumplen una condición especificada.</span><span class="sxs-lookup"><span data-stu-id="1bfad-109">For example, you must use a method call to express a query that retrieves the number of elements that match a specified condition.</span></span> <span data-ttu-id="1bfad-110">También debe usar una llamada de método para una consulta que recupera el elemento que tiene el valor máximo de una secuencia de origen.</span><span class="sxs-lookup"><span data-stu-id="1bfad-110">You also must use a method call for a query that retrieves the element that has the maximum value in a source sequence.</span></span> <span data-ttu-id="1bfad-111">La documentación de referencia de los operadores de consulta estándar del espacio de nombres <xref:System.Linq> generalmente usa la sintaxis de método.</span><span class="sxs-lookup"><span data-stu-id="1bfad-111">The reference documentation for the standard query operators in the <xref:System.Linq> namespace generally uses method syntax.</span></span> <span data-ttu-id="1bfad-112">Por consiguiente, incluso cuando empiece a escribir consultas de LINK, resulta útil estar familiarizado con el uso de la sintaxis de método en las consultas y en las propias expresiones de consulta.</span><span class="sxs-lookup"><span data-stu-id="1bfad-112">Therefore, even when getting started writing LINQ queries, it is useful to be familiar with how to use method syntax in queries and in query expressions themselves.</span></span>  
  
## <a name="standard-query-operator-extension-methods"></a><span data-ttu-id="1bfad-113">Métodos de extensión de operador de consulta estándar</span><span class="sxs-lookup"><span data-stu-id="1bfad-113">Standard Query Operator Extension Methods</span></span>  
 <span data-ttu-id="1bfad-114">En el ejemplo siguiente se muestra una *expresión de consulta* sencilla y la consulta equivalente desde el punto de vista semántico que se escribe como *consulta basada en métodos*.</span><span class="sxs-lookup"><span data-stu-id="1bfad-114">The following example shows a simple *query expression* and the semantically equivalent query written as a *method-based query*.</span></span>  
  
 [!code-csharp[csLINQGettingStarted#22](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#22)]  
  
 <span data-ttu-id="1bfad-115">El resultado de los dos ejemplos es idéntico.</span><span class="sxs-lookup"><span data-stu-id="1bfad-115">The output from the two examples is identical.</span></span> <span data-ttu-id="1bfad-116">Como puede ver, el tipo de variable de consulta es el mismo en ambos formularios: <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="1bfad-116">You can see that the type of the query variable is the same in both forms: <xref:System.Collections.Generic.IEnumerable%601>.</span></span>  
  
 <span data-ttu-id="1bfad-117">Para entender la consulta basada en métodos, vamos a examinarla más detenidamente.</span><span class="sxs-lookup"><span data-stu-id="1bfad-117">To understand the method-based query, let's examine it more closely.</span></span> <span data-ttu-id="1bfad-118">En el lado derecho de la expresión, observe que la cláusula `where` ahora se expresa como un método de instancia en el objeto `numbers`, que, como recordará, tiene un tipo de `IEnumerable<int>`.</span><span class="sxs-lookup"><span data-stu-id="1bfad-118">On the right side of the expression, notice that the `where` clause is now expressed as an instance method on the `numbers` object, which as you will recall has a type of `IEnumerable<int>`.</span></span> <span data-ttu-id="1bfad-119">Si está familiarizado con la interfaz genérica <xref:System.Collections.Generic.IEnumerable%601>, sabe que no tiene un método `Where`.</span><span class="sxs-lookup"><span data-stu-id="1bfad-119">If you are familiar with the generic <xref:System.Collections.Generic.IEnumerable%601> interface, you know that it does not have a `Where` method.</span></span> <span data-ttu-id="1bfad-120">Pero si se invoca la lista de finalización de IntelliSense en el IDE de Visual Studio, verá no solo un método `Where`, sino muchos otros métodos tales como `Select`, `SelectMany`, `Join` y `Orderby`.</span><span class="sxs-lookup"><span data-stu-id="1bfad-120">However, if you invoke the IntelliSense completion list in the Visual Studio IDE, you will see not only a `Where` method, but many other methods such as `Select`, `SelectMany`, `Join`, and `Orderby`.</span></span> <span data-ttu-id="1bfad-121">Estos son todos los operadores de consulta estándar.</span><span class="sxs-lookup"><span data-stu-id="1bfad-121">These are all the standard query operators.</span></span>  
  
 ![Captura de pantalla en la que se muestran todos los operadores de consulta estándar de IntelliSense.](./media/query-syntax-and-method-syntax-in-linq/standard-query-operators.png)  
  
 <span data-ttu-id="1bfad-123">Aunque parece que <xref:System.Collections.Generic.IEnumerable%601> se haya redefinido para incluir estos métodos adicionales, en realidad no es el caso.</span><span class="sxs-lookup"><span data-stu-id="1bfad-123">Although it looks as if <xref:System.Collections.Generic.IEnumerable%601> has been redefined to include these additional methods, in fact this is not the case.</span></span> <span data-ttu-id="1bfad-124">Los operadores de consulta estándar se implementan como un nuevo tipo de método denominado *método de extensión*.</span><span class="sxs-lookup"><span data-stu-id="1bfad-124">The standard query operators are implemented as a new kind of method called *extension methods*.</span></span> <span data-ttu-id="1bfad-125">Los métodos de extensión "extienden" un tipo existente; se pueden llamar como si fueran métodos de instancia en el tipo.</span><span class="sxs-lookup"><span data-stu-id="1bfad-125">Extensions methods "extend" an existing type; they can be called as if they were instance methods on the type.</span></span> <span data-ttu-id="1bfad-126">Los operadores de consulta estándar extienden <xref:System.Collections.Generic.IEnumerable%601> y esta es la razón por la que la puede escribir `numbers.Where(...)`.</span><span class="sxs-lookup"><span data-stu-id="1bfad-126">The standard query operators extend <xref:System.Collections.Generic.IEnumerable%601> and that is why you can write `numbers.Where(...)`.</span></span>  
  
 <span data-ttu-id="1bfad-127">Para empezar a usar LINK, lo único que realmente debe saber sobre los métodos de extensión es cómo incluirlos en el ámbito de la aplicación mediante el uso correcto de directivas `using`.</span><span class="sxs-lookup"><span data-stu-id="1bfad-127">To get started using LINQ, all that you really have to know about extension methods is how to bring them into scope in your application by using the correct `using` directives.</span></span> <span data-ttu-id="1bfad-128">Desde el punto de vista de la aplicación, un método de extensión y un método de instancia normal son iguales.</span><span class="sxs-lookup"><span data-stu-id="1bfad-128">From your application's point of view, an extension method and a regular instance method are the same.</span></span>  
  
 <span data-ttu-id="1bfad-129">Para obtener más información sobre los métodos de extensión, vea [Extension Methods](../../classes-and-structs/extension-methods.md) (Métodos de extensión).</span><span class="sxs-lookup"><span data-stu-id="1bfad-129">For more information about extension methods, see [Extension Methods](../../classes-and-structs/extension-methods.md).</span></span> <span data-ttu-id="1bfad-130">Para obtener más información sobre los operadores de consulta estándar, vea [Información general sobre operadores de consulta estándar (C#)](./standard-query-operators-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1bfad-130">For more information about standard query operators, see [Standard Query Operators Overview (C#)](./standard-query-operators-overview.md).</span></span> <span data-ttu-id="1bfad-131">Algunos proveedores de LINK, como [!INCLUDE[vbtecdlinq](~/includes/vbtecdlinq-md.md)] y [!INCLUDE[sqltecxlinq](~/includes/sqltecxlinq-md.md)], implementan sus propios operadores de consulta estándar y otros métodos de extensión además de <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="1bfad-131">Some LINQ providers, such as [!INCLUDE[vbtecdlinq](~/includes/vbtecdlinq-md.md)] and [!INCLUDE[sqltecxlinq](~/includes/sqltecxlinq-md.md)], implement their own standard query operators and additional extension methods for other types besides <xref:System.Collections.Generic.IEnumerable%601>.</span></span>  
  
## <a name="lambda-expressions"></a><span data-ttu-id="1bfad-132">Expresiones lambda</span><span class="sxs-lookup"><span data-stu-id="1bfad-132">Lambda Expressions</span></span>  
 <span data-ttu-id="1bfad-133">En el ejemplo anterior, observe que la expresión condicional (`num % 2 == 0`) se pasa como argumento insertado al método `Where`: `Where(num => num % 2 == 0).` Esta expresión insertada se denomina expresión lambda.</span><span class="sxs-lookup"><span data-stu-id="1bfad-133">In the previous example, notice that the conditional expression (`num % 2 == 0`) is passed as an in-line argument to the `Where` method: `Where(num => num % 2 == 0).` This inline expression is called a lambda expression.</span></span> <span data-ttu-id="1bfad-134">Se trata de una forma cómoda de escribir código que, de lo contrario, tendría que escribirse de forma más compleja como un método anónimo, un delegado genérico o un árbol de expresión.</span><span class="sxs-lookup"><span data-stu-id="1bfad-134">It is a convenient way to write code that would otherwise have to be written in more cumbersome form as an anonymous method or a generic delegate or an expression tree.</span></span> <span data-ttu-id="1bfad-135">En C#, `=>` es el operador lambda, que se lee como "va a".</span><span class="sxs-lookup"><span data-stu-id="1bfad-135">In C# `=>` is the lambda operator, which is read as "goes to".</span></span> <span data-ttu-id="1bfad-136">La `num` situada a la izquierda del operador es la variable de entrada que corresponde a `num` en la expresión de consulta.</span><span class="sxs-lookup"><span data-stu-id="1bfad-136">The `num` on the left of the operator is the input variable which corresponds to `num` in the query expression.</span></span> <span data-ttu-id="1bfad-137">El compilador puede deducir el tipo de `num` porque sabe que `numbers` es un tipo <xref:System.Collections.Generic.IEnumerable%601> genérico.</span><span class="sxs-lookup"><span data-stu-id="1bfad-137">The compiler can infer the type of `num` because it knows that `numbers` is a generic <xref:System.Collections.Generic.IEnumerable%601> type.</span></span> <span data-ttu-id="1bfad-138">El cuerpo de la expresión lambda es exactamente igual que la expresión de la sintaxis de consulta o de cualquier otra expresión o instrucción de C#; puede incluir llamadas de método y otra lógica compleja.</span><span class="sxs-lookup"><span data-stu-id="1bfad-138">The body of the lambda is just the same as the expression in query syntax or in any other C# expression or statement; it can include method calls and other complex logic.</span></span> <span data-ttu-id="1bfad-139">El "valor devuelto" es simplemente el resultado de la expresión.</span><span class="sxs-lookup"><span data-stu-id="1bfad-139">The "return value" is just the expression result.</span></span>  
  
 <span data-ttu-id="1bfad-140">Para empezar a usar LINK, no es necesario emplear muchas expresiones lambda.</span><span class="sxs-lookup"><span data-stu-id="1bfad-140">To get started using LINQ, you do not have to use lambdas extensively.</span></span> <span data-ttu-id="1bfad-141">Pero determinadas consultas solo se pueden expresar en sintaxis de método y algunas requieren expresiones lambda.</span><span class="sxs-lookup"><span data-stu-id="1bfad-141">However, certain queries can only be expressed in method syntax and some of those require lambda expressions.</span></span> <span data-ttu-id="1bfad-142">Cuando esté más familiarizado con las expresiones lambda, verá que se trata de una herramienta eficaz y flexible del cuadro de herramientas de LINK.</span><span class="sxs-lookup"><span data-stu-id="1bfad-142">After you become more familiar with lambdas, you will find that they are a powerful and flexible tool in your LINQ toolbox.</span></span> <span data-ttu-id="1bfad-143">Para obtener más información, vea [Expresiones lambda](../../statements-expressions-operators/lambda-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="1bfad-143">For more information, see [Lambda Expressions](../../statements-expressions-operators/lambda-expressions.md).</span></span>  
  
## <a name="composability-of-queries"></a><span data-ttu-id="1bfad-144">Capacidad de composición de consultas</span><span class="sxs-lookup"><span data-stu-id="1bfad-144">Composability of Queries</span></span>  
 <span data-ttu-id="1bfad-145">En el ejemplo de código anterior, tenga en cuenta que el método `OrderBy` se invoca mediante el operador de punto en la llamada a `Where`.</span><span class="sxs-lookup"><span data-stu-id="1bfad-145">In the previous code example, note that the `OrderBy` method is invoked by using the dot operator on the call to `Where`.</span></span> <span data-ttu-id="1bfad-146">`Where` crea una secuencia filtrada y, luego, `Orderby` actúa en dicha secuencia ordenándola.</span><span class="sxs-lookup"><span data-stu-id="1bfad-146">`Where` produces a filtered sequence, and then `Orderby` operates on that sequence by sorting it.</span></span> <span data-ttu-id="1bfad-147">Dado que las consultas devuelven un `IEnumerable`, redáctelas con la sintaxis de método encadenando las llamadas de método.</span><span class="sxs-lookup"><span data-stu-id="1bfad-147">Because queries return an `IEnumerable`, you compose them in method syntax by chaining the method calls together.</span></span> <span data-ttu-id="1bfad-148">Es lo que el compilador hace en segundo plano cuando se escriben consultas con la sintaxis de consulta.</span><span class="sxs-lookup"><span data-stu-id="1bfad-148">This is what the compiler does behind the scenes when you write queries by using query syntax.</span></span> <span data-ttu-id="1bfad-149">Y dado que una variable de consulta no almacena los resultados de la consulta, puede modificarla o usarla como base para una nueva consulta en cualquier momento, incluso después de que se haya ejecutado.</span><span class="sxs-lookup"><span data-stu-id="1bfad-149">And because a query variable does not store the results of the query, you can modify it or use it as the basis for a new query at any time, even after it has been executed.</span></span>  
