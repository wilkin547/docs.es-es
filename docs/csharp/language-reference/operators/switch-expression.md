---
title: 'Expresión switch: referencia de C#'
description: Obtenga información sobre cómo usar la expresión switch de C# para la coincidencia de patrones y otra introspección de datos
ms.date: 01/14/2021
ms.openlocfilehash: 55fef8d351b178fd0ec23847e81e6c56eb1367b0
ms.sourcegitcommit: 3a8f1979a98c6c19217a1930e0af5908988eb8ba
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/16/2021
ms.locfileid: "98536091"
---
# <a name="switch-expression-c-reference"></a><span data-ttu-id="674f1-103">Expresión switch (referencia de C#)</span><span class="sxs-lookup"><span data-stu-id="674f1-103">switch expression (C# reference)</span></span>

<span data-ttu-id="674f1-104">En este artículo se trata la expresión `switch`, introducida en C# 8.0.</span><span class="sxs-lookup"><span data-stu-id="674f1-104">This article covers the `switch` expression, introduced in C# 8.0.</span></span> <span data-ttu-id="674f1-105">Para obtener información sobre la instrucción `switch`, consulte el artículo sobre la [instrucción `switch`](../keywords/switch.md) en la sección [Instrucciones](../keywords/index.md).</span><span class="sxs-lookup"><span data-stu-id="674f1-105">For information on the `switch` statement, see the article on the [`switch` statement](../keywords/switch.md) in the [statements](../keywords/index.md) section.</span></span>

## <a name="basic-example"></a><span data-ttu-id="674f1-106">Ejemplo básico</span><span class="sxs-lookup"><span data-stu-id="674f1-106">Basic example</span></span>

<span data-ttu-id="674f1-107">La expresión `switch` se proporciona para una semántica similar a `switch` en un contexto de expresión.</span><span class="sxs-lookup"><span data-stu-id="674f1-107">The `switch` expression provides for `switch`-like semantics in an expression context.</span></span> <span data-ttu-id="674f1-108">Proporciona una sintaxis concisa cuando los segmentos modificadores producen un valor.</span><span class="sxs-lookup"><span data-stu-id="674f1-108">It provides a concise syntax when the switch arms produce a value.</span></span> <span data-ttu-id="674f1-109">En el ejemplo siguiente se muestra la estructura de una expresión switch.</span><span class="sxs-lookup"><span data-stu-id="674f1-109">The following example shows the structure of a switch expression.</span></span> <span data-ttu-id="674f1-110">Traslada los valores desde una `enum` que representa las direcciones visuales de un mapa en línea hasta la dirección cardinal correspondiente:</span><span class="sxs-lookup"><span data-stu-id="674f1-110">It translates values from an `enum` representing visual directions in an online map to the corresponding cardinal direction:</span></span>

:::code language="csharp" source="snippets/shared/SwitchExpressions.cs" id="SnippetBasicStructure":::

<span data-ttu-id="674f1-111">En el ejemplo anterior se muestran los elementos básicos de una expresión switch:</span><span class="sxs-lookup"><span data-stu-id="674f1-111">The preceding sample shows the basic elements of a switch expression:</span></span>

- <span data-ttu-id="674f1-112">La *expresión de intervalo*: En el ejemplo anterior se usa la variable `direction` como expresión de intervalo.</span><span class="sxs-lookup"><span data-stu-id="674f1-112">The *range expression*: The preceding example uses the variable `direction` as the range expression.</span></span>
- <span data-ttu-id="674f1-113">Los *segmentos de expresión switch*: Cada segmento de expresión switch contiene un *patrón*, una *restricción de caso*, el token `=>` y una *expressión*.</span><span class="sxs-lookup"><span data-stu-id="674f1-113">The *switch expression arms*: Each switch expression arm contains a *pattern*, an optional *case guard*, the `=>` token, and an *expression*.</span></span>

<span data-ttu-id="674f1-114">El resultado de la *expresión switch* es el valor de la expresión del primer *segmento de expresión switch* cuyo *patrón* coincide con la *expresión de intervalo* y cuya *restricción de caso*, en caso de estar presente, se evalúa como `true`.</span><span class="sxs-lookup"><span data-stu-id="674f1-114">The result of the *switch expression* is the value of the expression of the first *switch expression arm* whose *pattern* matches the *range expression* and whose *case guard*, if present, evaluates to `true`.</span></span> <span data-ttu-id="674f1-115">La *expresión* situada a la derecha del token `=>` no puede ser una instrucción de expresión.</span><span class="sxs-lookup"><span data-stu-id="674f1-115">The *expression* on the right of the `=>` token can't be an expression statement.</span></span>

<span data-ttu-id="674f1-116">Los *segmentos de expresión switch* se evalúan en orden de texto.</span><span class="sxs-lookup"><span data-stu-id="674f1-116">The *switch expression arms* are evaluated in text order.</span></span> <span data-ttu-id="674f1-117">El compilador emite un error cuando no se puede elegir un *segmento de expresión switch* inferior porque un *segmento de expresión switch* superior coincide con todos sus valores.</span><span class="sxs-lookup"><span data-stu-id="674f1-117">The compiler issues an error when a lower *switch expression arm* can't be chosen because a higher *switch expression arm* matches all its values.</span></span>

## <a name="patterns-and-case-guards"></a><span data-ttu-id="674f1-118">Patrones y restricciones de caso</span><span class="sxs-lookup"><span data-stu-id="674f1-118">Patterns and case guards</span></span>

<span data-ttu-id="674f1-119">Muchos patrones se admiten en los segmentos de expresión switch.</span><span class="sxs-lookup"><span data-stu-id="674f1-119">Many patterns are supported in switch expression arms.</span></span> <span data-ttu-id="674f1-120">En el ejemplo anterior se usa un *patrón de constante*.</span><span class="sxs-lookup"><span data-stu-id="674f1-120">The preceding example uses a *constant pattern*.</span></span> <span data-ttu-id="674f1-121">Un *patrón de constante* compara la expresión de intervalo con un valor.</span><span class="sxs-lookup"><span data-stu-id="674f1-121">A *constant pattern* compares the range expression to a value.</span></span> <span data-ttu-id="674f1-122">Ese valor debe ser una constante de tiempo de compilación.</span><span class="sxs-lookup"><span data-stu-id="674f1-122">That value must be a compile-time constant.</span></span> <span data-ttu-id="674f1-123">El *patrón de valor* compara la expresión de intervalo con un tipo conocido.</span><span class="sxs-lookup"><span data-stu-id="674f1-123">The *type pattern* compares the range expression to a known type.</span></span> <span data-ttu-id="674f1-124">En el siguiente ejemplo se recupera el tercer elemento de una secuencia.</span><span class="sxs-lookup"><span data-stu-id="674f1-124">The following example retrieves the third element from a sequence.</span></span> <span data-ttu-id="674f1-125">Usa distintos métodos en función del tipo de la secuencia:</span><span class="sxs-lookup"><span data-stu-id="674f1-125">It uses different methods based on the type of the sequence:</span></span>

:::code language="csharp" source="snippets/shared/SwitchExpressions.cs" id="SnippetTypePattern":::

<span data-ttu-id="674f1-126">Los patrones pueden ser recursivos, donde un patrón prueba un tipo, y si ese tipo coincide, el patrón coincide con uno o varios valores de propiedad en la expresión de intervalo.</span><span class="sxs-lookup"><span data-stu-id="674f1-126">Patterns can be recursive, where a pattern tests a type, and if that type matches, the pattern matches one or more property values on the range expression.</span></span> <span data-ttu-id="674f1-127">Puede usar patrones recursivos para ampliar el ejemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="674f1-127">You can use recursive patterns to extend the preceding example.</span></span> <span data-ttu-id="674f1-128">Agregue segmentos de expresión switch para matrices que tengan menos de tres elementos.</span><span class="sxs-lookup"><span data-stu-id="674f1-128">You add switch expression arms for arrays that have fewer than 3 elements.</span></span> <span data-ttu-id="674f1-129">Los patrones recursivos se muestran en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="674f1-129">Recursive patterns are shown in the following example:</span></span>

:::code language="csharp" source="snippets/shared/SwitchExpressions.cs" id="SnippetRecursivePattern":::

<span data-ttu-id="674f1-130">Los patrones recursivos pueden examinar las propiedades de la expresión de intervalo, pero no pueden ejecutar código arbitrario.</span><span class="sxs-lookup"><span data-stu-id="674f1-130">Recursive patterns can examine properties of the range expression, but can't execute arbitrary code.</span></span> <span data-ttu-id="674f1-131">Puede usar una *restricción de caso*, especificada en una cláusula `when`, para proporcionar comprobaciones similares para otros tipos de secuencia:</span><span class="sxs-lookup"><span data-stu-id="674f1-131">You can use a *case guard*, specified in a `when` clause, to provide similar checks for other sequence types:</span></span>

:::code language="csharp" source="snippets/shared/SwitchExpressions.cs" id="SnippetGuardCase":::

<span data-ttu-id="674f1-132">Por último, puede agregar los patrones `_` y `null` para detectar argumentos no procesados por ningún otro segmento de expresión switch.</span><span class="sxs-lookup"><span data-stu-id="674f1-132">Finally, you can add the `_` pattern and the `null` pattern to catch arguments that aren't processed by any other switch expression arm.</span></span> <span data-ttu-id="674f1-133">Eso hace que la expresión switch sea *exhaustiva*, lo que significa que se controla cualquier valor posible de la expresión de intervalo.</span><span class="sxs-lookup"><span data-stu-id="674f1-133">That makes the switch expression *exhaustive*, meaning any possible value of the range expression is handled.</span></span> <span data-ttu-id="674f1-134">En el siguiente ejemplo se agregan esos segmentos de expresión:</span><span class="sxs-lookup"><span data-stu-id="674f1-134">The following example adds those expression arms:</span></span>

:::code language="csharp" source="snippets/shared/SwitchExpressions.cs" id="SnippetExhaustive":::

<span data-ttu-id="674f1-135">En el ejemplo anterior se agrega un patrón `null` y se cambia el patrón de tipo `IEnumerable<T>` a un patrón `_`.</span><span class="sxs-lookup"><span data-stu-id="674f1-135">The preceding example adds a `null` pattern, and changes the `IEnumerable<T>` type pattern to a `_` pattern.</span></span> <span data-ttu-id="674f1-136">El patrón `null` proporciona una comprobación de NULL como segmento de expresión switch.</span><span class="sxs-lookup"><span data-stu-id="674f1-136">The `null` pattern provides a null check as a switch expression arm.</span></span> <span data-ttu-id="674f1-137">La expresión para ese segmento inicia una excepción <xref:System.ArgumentNullException>.</span><span class="sxs-lookup"><span data-stu-id="674f1-137">The expression for that arm throws an <xref:System.ArgumentNullException>.</span></span> <span data-ttu-id="674f1-138">El patrón `_` coincide con todas las entradas que no han coincidido con segmentos anteriores.</span><span class="sxs-lookup"><span data-stu-id="674f1-138">The `_` pattern matches all inputs that haven't been matched by previous arms.</span></span> <span data-ttu-id="674f1-139">Debe aparecer después de la comprobación `null` o coincidiría con las entradas `null`.</span><span class="sxs-lookup"><span data-stu-id="674f1-139">It must come after the `null` check, or it would match `null` inputs.</span></span>

## <a name="non-exhaustive-switch-expressions"></a><span data-ttu-id="674f1-140">Expresiones switch no exhaustivas</span><span class="sxs-lookup"><span data-stu-id="674f1-140">Non-exhaustive switch expressions</span></span>

<span data-ttu-id="674f1-141">Si ninguno de los patrones de una expresión switch detecta un argumento, el entorno de ejecución produce una excepción.</span><span class="sxs-lookup"><span data-stu-id="674f1-141">If none of a switch expression's patterns catches an argument, the runtime throws an exception.</span></span> <span data-ttu-id="674f1-142">En .NET Core 3.0 y versiones posteriores, la excepción es <xref:System.Runtime.CompilerServices.SwitchExpressionException?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="674f1-142">In .NET Core 3.0 and later versions, the exception is a <xref:System.Runtime.CompilerServices.SwitchExpressionException?displayProperty=nameWithType>.</span></span> <span data-ttu-id="674f1-143">En .NET Framework, la excepción es <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="674f1-143">In .NET Framework, the exception is an <xref:System.InvalidOperationException>.</span></span>

## <a name="see-also"></a><span data-ttu-id="674f1-144">Consulte también</span><span class="sxs-lookup"><span data-stu-id="674f1-144">See also</span></span>

- [<span data-ttu-id="674f1-145">Propuesta de especificación del lenguaje C# para patrones recursivos</span><span class="sxs-lookup"><span data-stu-id="674f1-145">C# language spec proposal for recursive patterns</span></span>](~/_csharplang/proposals/csharp-8.0/patterns.md#switch-expression)
- [<span data-ttu-id="674f1-146">Referencia de C#</span><span class="sxs-lookup"><span data-stu-id="674f1-146">C# reference</span></span>](../index.md)
- [<span data-ttu-id="674f1-147">Operadores y expresiones de C#</span><span class="sxs-lookup"><span data-stu-id="674f1-147">C# operators and expressions</span></span>](index.md)
- [<span data-ttu-id="674f1-148">Coincidencia de patrones</span><span class="sxs-lookup"><span data-stu-id="674f1-148">Pattern matching</span></span>](../../pattern-matching.md)
