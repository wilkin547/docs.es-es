---
description: Opciones del compilador de C# para la seguridad. Estas opciones controlan la firma de ensamblados o el diseño del espacio de direcciones.
title: 'Opciones del compilador de C#: opciones de seguridad'
ms.date: 03/12/2021
f1_keywords:
- cs.build.options
helpviewer_keywords:
- PublicSign compiler option [C#]
- DelaySign compiler option [C#]
- KeyFile compiler option [C#]
- KeyContainer compiler option [C#]
- HighEntropyVA compiler option [C#]
ms.openlocfilehash: db7b612fa2e4ddb566ac2ba5ef9e4e66c5f0b0ab
ms.sourcegitcommit: 0bb8074d524e0dcf165430b744bb143461f17026
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/15/2021
ms.locfileid: "103482469"
---
# <a name="c-compiler-options-for-security-options"></a><span data-ttu-id="e840b-104">Opciones del compilador de C# para opciones de seguridad</span><span class="sxs-lookup"><span data-stu-id="e840b-104">C# Compiler Options for security options</span></span>

<span data-ttu-id="e840b-105">Las opciones siguientes controlan las opciones de seguridad del compilador.</span><span class="sxs-lookup"><span data-stu-id="e840b-105">The following options control compiler security options.</span></span> <span data-ttu-id="e840b-106">La nueva sintaxis de MSBuild se muestra en **negrita**.</span><span class="sxs-lookup"><span data-stu-id="e840b-106">The new MSBuild syntax is shown in **Bold**.</span></span> <span data-ttu-id="e840b-107">La sintaxis de *csc.exe* anterior se muestra en `code style`.</span><span class="sxs-lookup"><span data-stu-id="e840b-107">The older *csc.exe* syntax is shown in `code style`.</span></span>

- <span data-ttu-id="e840b-108">**PublicSign** / `-publicsign`: se firma el ensamblado públicamente.</span><span class="sxs-lookup"><span data-stu-id="e840b-108">**PublicSign** / `-publicsign`: Publicly sign the assembly.</span></span>
- <span data-ttu-id="e840b-109">**DelaySign** / `-delaysign`: se retrasa la firma del ensamblado usando solo la parte pública de la clave de nombre seguro.</span><span class="sxs-lookup"><span data-stu-id="e840b-109">**DelaySign** / `-delaysign`: Delay-sign the assembly using only the public portion of the strong name key.</span></span>
- <span data-ttu-id="e840b-110">**KeyFile** / `-keyfile`: se especifica un archivo de clave con nombre seguro.</span><span class="sxs-lookup"><span data-stu-id="e840b-110">**KeyFile** / `-keyfile` : Specify a strong name key file.</span></span>
- <span data-ttu-id="e840b-111">**KeyContainer** / `-keycontainer`: se especifica un contenedor de claves con nombre seguro.</span><span class="sxs-lookup"><span data-stu-id="e840b-111">**KeyContainer** / `-keycontainer`: Specify a strong name key container.</span></span>
- <span data-ttu-id="e840b-112">**HighEntropyVA**  /  `-highentropyva`: se habilita la selección aleatoria del diseño del espacio de direcciones (ASLR) de alta entropía.</span><span class="sxs-lookup"><span data-stu-id="e840b-112">**HighEntropyVA** / `-highentropyva`: Enable high-entropy Address Space Layout Randomization (ASLR)</span></span>

## <a name="publicsign"></a><span data-ttu-id="e840b-113">PublicSign</span><span class="sxs-lookup"><span data-stu-id="e840b-113">PublicSign</span></span>

<span data-ttu-id="e840b-114">Esta opción hace que el compilador aplique una clave pública pero no firma el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="e840b-114">This option causes the compiler to apply a public key but doesn't actually sign the assembly.</span></span> <span data-ttu-id="e840b-115">La opción **PublicSign** también establece un bit en el ensamblado que indica al entorno de ejecución que el archivo está firmado.</span><span class="sxs-lookup"><span data-stu-id="e840b-115">The **PublicSign** option also sets a bit in the assembly that tells the runtime that the file is signed.</span></span>

```xml
<PublicSign>true</PublicSign>
```

<span data-ttu-id="e840b-116">Para la opción **PublicSign** es necesario usar la opción [**KeyFile**](#keyfile) o [**KeyContainer**](#keycontainer).</span><span class="sxs-lookup"><span data-stu-id="e840b-116">The **PublicSign** option requires the use of the [**KeyFile**](#keyfile) or [**KeyContainer**](#keycontainer) option.</span></span> <span data-ttu-id="e840b-117">Las opciones **keyFile** y **KeyContainer** especifican la clave pública.</span><span class="sxs-lookup"><span data-stu-id="e840b-117">The **keyFile** and **KeyContainer** options specify the public key.</span></span> <span data-ttu-id="e840b-118">Las opciones **PublicSign** y **PublicSign** son mutuamente excluyentes.</span><span class="sxs-lookup"><span data-stu-id="e840b-118">The **PublicSign** and **PublicSign** options are mutually exclusive.</span></span> <span data-ttu-id="e840b-119">A veces llamada "firma falsa" o "firma OSS", la firma pública incluye la clave pública en un ensamblado de salida y establece la marca "signed".</span><span class="sxs-lookup"><span data-stu-id="e840b-119">Sometimes called "fake sign" or "OSS sign", public signing includes the public key in an output assembly and sets the "signed" flag.</span></span> <span data-ttu-id="e840b-120">La firma pública no firma realmente el ensamblado con una clave privada.</span><span class="sxs-lookup"><span data-stu-id="e840b-120">Public signing doesn't actually sign the assembly with a private key.</span></span> <span data-ttu-id="e840b-121">Los desarrolladores usan el signo público para los proyectos de código abierto.</span><span class="sxs-lookup"><span data-stu-id="e840b-121">Developers use public sign for open-source projects.</span></span>  <span data-ttu-id="e840b-122">Los usuarios crean ensamblados que son compatibles con los ensamblados "totalmente firmados" publicados cuando no tienen acceso a la clave privada utilizada para firmar los ensamblados.</span><span class="sxs-lookup"><span data-stu-id="e840b-122">People build assemblies that are compatible with the released "fully signed" assemblies when they don' have access to the private key used to sign the assemblies.</span></span> <span data-ttu-id="e840b-123">Como prácticamente ningún consumidor necesita realmente comprobar si el ensamblado está firmado de forma completa, estos ensamblados creados de forma pública se pueden utilizar en casi todos los escenarios en los que se utilizaría el ensamblado totalmente firmado.</span><span class="sxs-lookup"><span data-stu-id="e840b-123">Since few consumers actually need to check if the assembly is fully signed, these publicly built assemblies are useable in almost every scenario where the fully signed one would be used.</span></span>

## <a name="delaysign"></a><span data-ttu-id="e840b-124">DelaySign</span><span class="sxs-lookup"><span data-stu-id="e840b-124">DelaySign</span></span>

<span data-ttu-id="e840b-125">Esta opción hace que el compilador reserve espacio en el archivo de salida de manera que se pueda agregar una firma digital más adelante.</span><span class="sxs-lookup"><span data-stu-id="e840b-125">This option causes the compiler to reserve space in the output file so that a digital signature can be added later.</span></span>

```xml
<DelaySign>true</DelaySign>
```

<span data-ttu-id="e840b-126">Use **DelaySign-** si quiere un ensamblado completamente firmado.</span><span class="sxs-lookup"><span data-stu-id="e840b-126">Use **DelaySign-** if you want a fully signed assembly.</span></span> <span data-ttu-id="e840b-127">Use **DelaySign** si solo quiere incluir la clave pública en el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="e840b-127">Use **DelaySign** if you only want to place the public key in the assembly.</span></span> <span data-ttu-id="e840b-128">La opción **DelaySign** no tiene ningún efecto a menos que se use con [**KeyFile**](#keyfile) o [**KeyContainer**](#keycontainer).</span><span class="sxs-lookup"><span data-stu-id="e840b-128">The **DelaySign** option has no effect unless used with [**KeyFile**](#keyfile) or [**KeyContainer**](#keycontainer).</span></span> <span data-ttu-id="e840b-129">Las opciones [**KeyContainer**](#keycontainer) y [**PublicSign**](#publicsign) son mutuamente excluyentes.</span><span class="sxs-lookup"><span data-stu-id="e840b-129">The [**KeyContainer**](#keycontainer) and [**PublicSign**](#publicsign) options are mutually exclusive.</span></span> <span data-ttu-id="e840b-130">Cuando se solicita un ensamblado totalmente firmado, el compilador genera un valor hash para el archivo que contiene el manifiesto (metadatos del ensamblado) y firma dicho valor mediante la clave privada.</span><span class="sxs-lookup"><span data-stu-id="e840b-130">When you request a fully signed assembly, the compiler hashes the file that contains the manifest (assembly metadata) and signs that hash with the private key.</span></span> <span data-ttu-id="e840b-131">Esta operación crea una firma digital que se almacena en el archivo que contiene el manifiesto.</span><span class="sxs-lookup"><span data-stu-id="e840b-131">That operation creates a digital signature that is stored in the file that contains the manifest.</span></span> <span data-ttu-id="e840b-132">Cuando se retrasa la firma de un ensamblado, el compilador no procesa ni almacena la firma.</span><span class="sxs-lookup"><span data-stu-id="e840b-132">When an assembly is delay signed, the compiler doesn't compute and store the signature.</span></span> <span data-ttu-id="e840b-133">En su lugar, reserva espacio en el archivo para que la firma se pueda agregar después.</span><span class="sxs-lookup"><span data-stu-id="e840b-133">Instead, the compiler but reserves space in the file so the signature can be added later.</span></span>

<span data-ttu-id="e840b-134">El uso de **DelaySign** permite a un evaluador colocar el ensamblado en la caché global.</span><span class="sxs-lookup"><span data-stu-id="e840b-134">Using **DelaySign** allows a tester to put the assembly in the global cache.</span></span> <span data-ttu-id="e840b-135">Después de realizar las pruebas, coloque la clave privada en el ensamblado mediante la utilidad [Assembly Linker](../../../framework/tools/al-exe-assembly-linker.md) para firmar el ensamblado por completo.</span><span class="sxs-lookup"><span data-stu-id="e840b-135">After testing, you can fully sign the assembly by placing the private key in the assembly using the [Assembly Linker](../../../framework/tools/al-exe-assembly-linker.md) utility.</span></span> <span data-ttu-id="e840b-136">Para obtener más información, vea [Crear y usar ensamblados con nombre seguro](../../../standard/assembly/create-use-strong-named.md) y [Retraso de la firma de un ensamblado](../../../standard/assembly/delay-sign.md).</span><span class="sxs-lookup"><span data-stu-id="e840b-136">For more information, see [Creating and Using Strong-Named Assemblies](../../../standard/assembly/create-use-strong-named.md) and [Delay Signing an Assembly](../../../standard/assembly/delay-sign.md).</span></span>

## <a name="keyfile"></a><span data-ttu-id="e840b-137">KeyFile</span><span class="sxs-lookup"><span data-stu-id="e840b-137">KeyFile</span></span>

<span data-ttu-id="e840b-138">Especifica el nombre de archivo que contiene la clave criptográfica.</span><span class="sxs-lookup"><span data-stu-id="e840b-138">Specifies the filename containing the cryptographic key.</span></span>

```xml
<KeyFile>filename</KeyFile>
```

<span data-ttu-id="e840b-139">`file` es el nombre del archivo que contiene la clave de nombre seguro.</span><span class="sxs-lookup"><span data-stu-id="e840b-139">`file` is the name of the file containing the strong name key.</span></span> <span data-ttu-id="e840b-140">Cuando se usa esta opción, el compilador inserta la clave pública del archivo especificado en el manifiesto del ensamblado y, después, firma el último ensamblado con la clave privada.</span><span class="sxs-lookup"><span data-stu-id="e840b-140">When this option is used, the compiler inserts the public key from the specified file into the assembly manifest and then signs the final assembly with the private key.</span></span> <span data-ttu-id="e840b-141">Para generar un archivo de claves, escriba `sn -k file` en la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="e840b-141">To generate a key file, type `sn -k file` at the command line.</span></span> <span data-ttu-id="e840b-142">Si se compila con [ **-target:module**](output.md#targettype), el nombre del archivo de claves se mantiene en el módulo y se incorpora en el ensamblado que se crea al compilarlo con [**AddModules**](inputs.md#addmodules).</span><span class="sxs-lookup"><span data-stu-id="e840b-142">If you compile with [**-target:module**](output.md#targettype), the name of the key file is held in the module and incorporated into the assembly created when you compile an assembly with [**AddModules**](inputs.md#addmodules).</span></span> <span data-ttu-id="e840b-143">También puede pasar la información de cifrado al compilador con [**Keycontainer**](#keycontainer).</span><span class="sxs-lookup"><span data-stu-id="e840b-143">You can also pass your encryption information to the compiler with [**Keycontainer**](#keycontainer).</span></span> <span data-ttu-id="e840b-144">Use [**DelaySign**](#delaysign) si quiere firmar el ensamblado de forma parcial.</span><span class="sxs-lookup"><span data-stu-id="e840b-144">Use [**DelaySign**](#delaysign) if you want a partially signed assembly.</span></span> <span data-ttu-id="e840b-145">Si se especifica tanto **KeyFile** como **KeyContainer** en la misma compilación, el compilador probará primero el contenedor de claves.</span><span class="sxs-lookup"><span data-stu-id="e840b-145">In case both **KeyFile** and **KeyContainer** are specified in the same compilation, the compiler will first try the key container.</span></span> <span data-ttu-id="e840b-146">Si lo consigue, el ensamblado se firma con la información del contenedor de claves.</span><span class="sxs-lookup"><span data-stu-id="e840b-146">If that succeeds, then the assembly is signed with the information in the key container.</span></span> <span data-ttu-id="e840b-147">Si el compilador no encuentra el contenedor de claves, probará el archivo especificado con [**KeyFile**](#keyfile).</span><span class="sxs-lookup"><span data-stu-id="e840b-147">If the compiler doesn't find the key container, it will try the file specified with [**KeyFile**](#keyfile).</span></span> <span data-ttu-id="e840b-148">Si la operación es correcta, el ensamblado se firma con la información del archivo de clave y la información de la clave se instalará en el contenedor de claves.</span><span class="sxs-lookup"><span data-stu-id="e840b-148">If that succeeds, the assembly is signed with the information in the key file and the key information will be installed in the key container.</span></span> <span data-ttu-id="e840b-149">En la siguiente compilación, el contenedor de claves será válido.</span><span class="sxs-lookup"><span data-stu-id="e840b-149">On the next compilation, the key container will be valid.</span></span> <span data-ttu-id="e840b-150">Es posible que un archivo de clave solo contenga la clave pública.</span><span class="sxs-lookup"><span data-stu-id="e840b-150">A key file might contain only the public key.</span></span> <span data-ttu-id="e840b-151">Para obtener más información, vea [Crear y usar ensamblados con nombre seguro](../../../standard/assembly/create-use-strong-named.md) y [Retraso de la firma de un ensamblado](../../../standard/assembly/delay-sign.md).</span><span class="sxs-lookup"><span data-stu-id="e840b-151">For more information, see [Creating and Using Strong-Named Assemblies](../../../standard/assembly/create-use-strong-named.md) and [Delay Signing an Assembly](../../../standard/assembly/delay-sign.md).</span></span>

## <a name="keycontainer"></a><span data-ttu-id="e840b-152">KeyContainer</span><span class="sxs-lookup"><span data-stu-id="e840b-152">KeyContainer</span></span>

<span data-ttu-id="e840b-153">Especifica el nombre del contenedor de claves criptográficas.</span><span class="sxs-lookup"><span data-stu-id="e840b-153">Specifies the name of the cryptographic key container.</span></span>

```xml
<KeyContainer>container</KeyContainer>
```

<span data-ttu-id="e840b-154">`container` es el nombre del contenedor de claves de nombre seguro.</span><span class="sxs-lookup"><span data-stu-id="e840b-154">`container` is the name of the strong name key container.</span></span> <span data-ttu-id="e840b-155">Cuando se usa la opción **KeyContainer**, el compilador crea un componente que se puede compartir.</span><span class="sxs-lookup"><span data-stu-id="e840b-155">When the **KeyContainer** option is used, the compiler creates a sharable component.</span></span> <span data-ttu-id="e840b-156">El compilador inserta una clave pública del contenedor especificado en el manifiesto del ensamblado y firma el último ensamblado con la clave privada.</span><span class="sxs-lookup"><span data-stu-id="e840b-156">The compiler inserts a public key from the specified container into the assembly manifest and signs the final assembly with the private key.</span></span> <span data-ttu-id="e840b-157">Para generar un archivo de claves, escriba `sn -k file` en la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="e840b-157">To generate a key file, type `sn -k file` at the command line.</span></span> <span data-ttu-id="e840b-158">`sn -i` instala el par de claves en un contenedor.</span><span class="sxs-lookup"><span data-stu-id="e840b-158">`sn -i` installs the key pair into a container.</span></span> <span data-ttu-id="e840b-159">Esta opción no se admite cuando el compilador se ejecuta en CoreCLR.</span><span class="sxs-lookup"><span data-stu-id="e840b-159">This option isn't supported when the compiler runs on CoreCLR.</span></span> <span data-ttu-id="e840b-160">Para firmar un ensamblado al compilar en CoreCLR, use la opción [**KeyFile**](#keyfile).</span><span class="sxs-lookup"><span data-stu-id="e840b-160">To sign an assembly when building on CoreCLR, use the [**KeyFile**](#keyfile) option.</span></span> <span data-ttu-id="e840b-161">Si realiza la compilación con [**TargetType**](output.md#targettype), el nombre del archivo de claves se mantiene en el módulo y se incorpora al ensamblado al compilar este módulo en un ensamblado con [**AddModules**](inputs.md#addmodules).</span><span class="sxs-lookup"><span data-stu-id="e840b-161">If you compile with [**TargetType**](output.md#targettype), the name of the key file is held in the module and incorporated into the assembly when you compile this module into an assembly with [**AddModules**](inputs.md#addmodules).</span></span> <span data-ttu-id="e840b-162">También se puede especificar esta opción como un atributo personalizado (<xref:System.Reflection.AssemblyKeyNameAttribute?displayProperty=nameWithType>) en el código fuente de cualquier módulo del Lenguaje Intermedio de Microsoft (MSIL).</span><span class="sxs-lookup"><span data-stu-id="e840b-162">You can also specify this option as a custom attribute (<xref:System.Reflection.AssemblyKeyNameAttribute?displayProperty=nameWithType>) in the source code for any Microsoft intermediate language (MSIL) module.</span></span> <span data-ttu-id="e840b-163">También se puede pasar la información de cifrado al compilador con [**KeyFile**](#keyfile).</span><span class="sxs-lookup"><span data-stu-id="e840b-163">You can also pass your encryption information to the compiler with [**KeyFile**](#keyfile).</span></span> <span data-ttu-id="e840b-164">Use [**DelaySign**](#delaysign) para agregar la clave pública al manifiesto del ensamblado pero firmarlo cuando se haya probado.</span><span class="sxs-lookup"><span data-stu-id="e840b-164">Use [**DelaySign**](#delaysign) to add the public key  to the assembly manifest but signing the assembly until it has been tested.</span></span> <span data-ttu-id="e840b-165">Para obtener más información, vea [Crear y usar ensamblados con nombre seguro](../../../standard/assembly/create-use-strong-named.md) y [Retraso de la firma de un ensamblado](../../../standard/assembly/delay-sign.md).</span><span class="sxs-lookup"><span data-stu-id="e840b-165">For more information, see [Creating and Using Strong-Named Assemblies](../../../standard/assembly/create-use-strong-named.md) and [Delay Signing an Assembly](../../../standard/assembly/delay-sign.md).</span></span>

## <a name="highentropyva"></a><span data-ttu-id="e840b-166">HighEntropyVA</span><span class="sxs-lookup"><span data-stu-id="e840b-166">HighEntropyVA</span></span>

<span data-ttu-id="e840b-167">La opción del compilador **HighEntropyVA** indica al kernel de Windows si un archivo ejecutable determinado admite la selección aleatoria del diseño del espacio de direcciones (ASLR) de alta entropía.</span><span class="sxs-lookup"><span data-stu-id="e840b-167">The **HighEntropyVA** compiler option tells the Windows kernel whether a particular executable supports high entropy Address Space Layout Randomization (ASLR).</span></span>

```xml
<HighEntropyVA>true</HighEntropyVA>
```

<span data-ttu-id="e840b-168">Esta opción especifica que un archivo ejecutable de 64 bits o un archivo ejecutable marcado con la opción del compilador [**PlatformTarget**](output.md#platformtarget) admite un espacio de direcciones virtuales de alta entropía.</span><span class="sxs-lookup"><span data-stu-id="e840b-168">This option specifies that a 64-bit executable or an executable that is marked by the [**PlatformTarget**](output.md#platformtarget) compiler option supports a high entropy virtual address space.</span></span> <span data-ttu-id="e840b-169">La opción está deshabilitada de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="e840b-169">The option is disabled by default.</span></span> <span data-ttu-id="e840b-170">Use **HighEntropyVA** para habilitarla.</span><span class="sxs-lookup"><span data-stu-id="e840b-170">Use **HighEntropyVA** to enable it.</span></span>

<span data-ttu-id="e840b-171">La opción **HighEntropyVA** habilita las versiones compatibles del kernel de Windows para usar niveles superiores de entropía al aleatorizar el diseño del espacio de direcciones de un proceso como parte de ASLR.</span><span class="sxs-lookup"><span data-stu-id="e840b-171">The **HighEntropyVA** option enables compatible versions of the Windows kernel to use higher degrees of entropy when randomizing the address space layout of a process as part of ASLR.</span></span> <span data-ttu-id="e840b-172">El uso de niveles superiores de entropía significa que un mayor número de direcciones se puede asignar a las regiones de memoria como pilas y montones.</span><span class="sxs-lookup"><span data-stu-id="e840b-172">Using higher degrees of entropy means a larger number of addresses can be allocated to memory regions such as stacks and heaps.</span></span> <span data-ttu-id="e840b-173">Como resultado, la ubicación de un área de memoria concreta es más difícil de adivinar.</span><span class="sxs-lookup"><span data-stu-id="e840b-173">As a result, it's more difficult to guess the location of a particular memory region.</span></span> <span data-ttu-id="e840b-174">La opción del compilador **HighEntropyVA** necesita que el archivo ejecutable de destino y todos los módulos de los que depende puedan controlar los valores de puntero superiores a 4 gigabytes (GB), cuando se ejecutan como un proceso de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="e840b-174">The **HighEntropyVA** compiler option requires the target executable and any modules that it depends can handle pointer values larger than 4 gigabytes (GB) when they're running as a 64-bit process.</span></span>
