---
description: Opciones del compilador de C# para controlar la generación de código. Las opciones afectan al código generado por el compilador para una compilación determinada.
title: 'Opciones del compilador de C#: opciones de generación de código'
ms.date: 03/12/2021
f1_keywords:
- cs.build.options
helpviewer_keywords:
- DebugType compiler option [C#]
- Optimize compiler option [C#]
- Deterministic compiler option [C#]
- ProduceOnlyReferenceAssembly compiler option [C#]
ms.openlocfilehash: a846bc515c501ec5a14069dd3b312b5e2df43d25
ms.sourcegitcommit: 5ce37699c2a51ed173171813be68ef7577b1aba5
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/23/2021
ms.locfileid: "104881150"
---
# <a name="c-compiler-options-that-control-code-generation"></a><span data-ttu-id="47929-104">Opciones del compilador de C# para controlar la generación de código</span><span class="sxs-lookup"><span data-stu-id="47929-104">C# Compiler Options that control code generation</span></span>

<span data-ttu-id="47929-105">Las opciones siguientes controlan la generación de código mediante el compilador.</span><span class="sxs-lookup"><span data-stu-id="47929-105">The following options control code generation by the compiler.</span></span> <span data-ttu-id="47929-106">La nueva sintaxis de MSBuild se muestra en **negrita**.</span><span class="sxs-lookup"><span data-stu-id="47929-106">The new MSBuild syntax is shown in **Bold**.</span></span> <span data-ttu-id="47929-107">La sintaxis de *csc.exe* anterior se muestra en `code style`.</span><span class="sxs-lookup"><span data-stu-id="47929-107">The older *csc.exe* syntax is shown in `code style`.</span></span>

- <span data-ttu-id="47929-108">**DebugType** / `-debug`: se emite (o no se emite) información de depuración.</span><span class="sxs-lookup"><span data-stu-id="47929-108">**DebugType** / `-debug`: Emit (or don't emit) debugging information.</span></span>
- <span data-ttu-id="47929-109">**Optimize** / `-optimize`: se habilitan las optimizaciones.</span><span class="sxs-lookup"><span data-stu-id="47929-109">**Optimize** / `-optimize`: Enable optimizations.</span></span>
- <span data-ttu-id="47929-110">**Deterministic** / `-deterministic`: se genera una salida equivalente byte a byte del mismo origen de entrada.</span><span class="sxs-lookup"><span data-stu-id="47929-110">**Deterministic** / `-deterministic`: Produce byte-for-byte equivalent output from the same input source.</span></span>
- <span data-ttu-id="47929-111">**ProduceOnlyReferenceAssembly** / `-refonly`: se genera un ensamblado de referencia, en lugar de un ensamblado completo, como resultado principal.</span><span class="sxs-lookup"><span data-stu-id="47929-111">**ProduceOnlyReferenceAssembly** / `-refonly`: Produce a reference assembly, instead of a full assembly, as the primary output.</span></span>

## <a name="debugtype"></a><span data-ttu-id="47929-112">DebugType</span><span class="sxs-lookup"><span data-stu-id="47929-112">DebugType</span></span>

<span data-ttu-id="47929-113">La opción **DebugType** hace que el compilador genere información de depuración y la incluya en el archivo o los archivos de salida.</span><span class="sxs-lookup"><span data-stu-id="47929-113">The **DebugType** option causes the compiler to generate debugging information and place it in the output file or files.</span></span> <span data-ttu-id="47929-114">La información de depuración se agrega de forma predeterminada para la configuración de compilación de *depuración*.</span><span class="sxs-lookup"><span data-stu-id="47929-114">Debugging information is added by default for the *Debug* build configuration.</span></span> <span data-ttu-id="47929-115">Está desactivada de forma predeterminada para la configuración de compilación de *versión*.</span><span class="sxs-lookup"><span data-stu-id="47929-115">It is off by default for the *Release* build configuration.</span></span>

```xml
<DebugType>pdbonly</DebugType>
```

<span data-ttu-id="47929-116">En todas las versiones del compilador a partir de C# 6.0, no hay ninguna diferencia entre *pdbonly* y *full*.</span><span class="sxs-lookup"><span data-stu-id="47929-116">For all compiler versions starting with C# 6.0, there is no difference between *pdbonly* and *full*.</span></span> <span data-ttu-id="47929-117">Elija *pdbonly*.</span><span class="sxs-lookup"><span data-stu-id="47929-117">Choose *pdbonly*.</span></span> <span data-ttu-id="47929-118">Para cambiar la ubicación del archivo *.pdb*, vea [**PdbFile**](./advanced.md#pdbfile).</span><span class="sxs-lookup"><span data-stu-id="47929-118">To change the location of the *.pdb* file, see [**PdbFile**](./advanced.md#pdbfile).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="47929-119">Esta sección se aplica solo a los compiladores anteriores a C# 6.0.</span><span class="sxs-lookup"><span data-stu-id="47929-119">This section applies only to compilers older than C# 6.0.</span></span>
> <span data-ttu-id="47929-120">El valor de este elemento puede ser `full` o `pdbonly`.</span><span class="sxs-lookup"><span data-stu-id="47929-120">The value of this element can be either `full` or `pdbonly`.</span></span> <span data-ttu-id="47929-121">El argumento *full*, que es la opción predeterminada si no se especifica *pdbonly*, permite adjuntar un depurador al programa en ejecución.</span><span class="sxs-lookup"><span data-stu-id="47929-121">The *full* argument, which is in effect if you don't specify *pdbonly*, enables attaching a debugger to the running program.</span></span> <span data-ttu-id="47929-122">Al especificar *pdbonly* se permite depurar el código fuente cuando se inicia el programa en el depurador, pero solo se mostrará el ensamblador cuando el programa en ejecución se adjunta al depurador.</span><span class="sxs-lookup"><span data-stu-id="47929-122">Specifying *pdbonly* allows source code debugging when the program is started in the debugger but will only display assembler when the running program is attached to the debugger.</span></span> <span data-ttu-id="47929-123">Use esta opción para crear versiones de depuración.</span><span class="sxs-lookup"><span data-stu-id="47929-123">Use this option to create debug builds.</span></span> <span data-ttu-id="47929-124">Si usa *Full*, tenga en cuenta que se producirá cierto impacto en la velocidad y el tamaño del código optimizado por JIT y un pequeño impacto en la calidad del código con *full*.</span><span class="sxs-lookup"><span data-stu-id="47929-124">If you use *Full*, be aware that there's some impact on the speed and size of JIT optimized code and a small impact on code quality with *full*.</span></span> <span data-ttu-id="47929-125">Se recomienda *pdbonly* o ningún PDB para generar el código de la versión de lanzamiento.</span><span class="sxs-lookup"><span data-stu-id="47929-125">We recommend *pdbonly* or no PDB for generating release code.</span></span> <span data-ttu-id="47929-126">Una diferencia entre *pdbonly* y *full* es que con *full* el compilador emite una instancia de <xref:System.Diagnostics.DebuggableAttribute>, que se usa para indicar al compilador JIT que la información de depuración está disponible.</span><span class="sxs-lookup"><span data-stu-id="47929-126">One difference between *pdbonly* and *full* is that with *full* the compiler emits a <xref:System.Diagnostics.DebuggableAttribute>, which is used to tell the JIT compiler that debug information is available.</span></span> <span data-ttu-id="47929-127">Por tanto, aparecerá un error si el código contiene <xref:System.Diagnostics.DebuggableAttribute> establecido en false cuando se usa *full*.</span><span class="sxs-lookup"><span data-stu-id="47929-127">Therefore, you will get an error if your code contains the <xref:System.Diagnostics.DebuggableAttribute> set to false if you use *full*.</span></span> <span data-ttu-id="47929-128">Para obtener más información sobre cómo configurar el rendimiento de depuración de una aplicación, vea [Facilitar la depuración de una imagen](../../../framework/debug-trace-profile/making-an-image-easier-to-debug.md).</span><span class="sxs-lookup"><span data-stu-id="47929-128">For more information on how to configure the debug performance of an application, see [Making an Image Easier to Debug](../../../framework/debug-trace-profile/making-an-image-easier-to-debug.md).</span></span>

## <a name="optimize"></a><span data-ttu-id="47929-129">Optimización</span><span class="sxs-lookup"><span data-stu-id="47929-129">Optimize</span></span>

<span data-ttu-id="47929-130">La opción **Optimización** habilita o deshabilita las optimizaciones realizadas por el compilador para que el archivo de salida sea menor, más rápido y más eficaz.</span><span class="sxs-lookup"><span data-stu-id="47929-130">The **Optimize** option enables or disables optimizations performed by the compiler to make your output file smaller, faster, and more efficient.</span></span> <span data-ttu-id="47929-131">La opción *Optimización* está habilitada de forma predeterminada para una configuración de compilación de *versión*.</span><span class="sxs-lookup"><span data-stu-id="47929-131">The *Optimize* option is enabled by default for a *Release* build configuration.</span></span> <span data-ttu-id="47929-132">Está desactivada de forma predeterminada para una configuración de compilación de *depuración*.</span><span class="sxs-lookup"><span data-stu-id="47929-132">It is off by default for a *Debug* build configuration.</span></span>

```xml
<Optimize>true</Optimize>
```

<span data-ttu-id="47929-133">La opción **Optimización** se establece en la página de propiedades de **compilación** del proyecto en Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="47929-133">You set the **Optimize** option from **Build** properties page for your project in Visual Studio.</span></span>

<span data-ttu-id="47929-134">**Optimización** también indica a Common Language Runtime que optimice el código en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="47929-134">**Optimize** also tells the common language runtime to optimize code at runtime.</span></span> <span data-ttu-id="47929-135">De forma predeterminada, las optimizaciones están deshabilitadas.</span><span class="sxs-lookup"><span data-stu-id="47929-135">By default, optimizations are disabled.</span></span> <span data-ttu-id="47929-136">Especifique **Optimize+** para habilitar las optimizaciones.</span><span class="sxs-lookup"><span data-stu-id="47929-136">Specify **Optimize+** to enable optimizations.</span></span> <span data-ttu-id="47929-137">Al compilar un módulo para que lo use un ensamblado, use la misma configuración de **Optimización** que la del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="47929-137">When building a module to be used by an assembly, use the same **Optimize** settings as used by the assembly.</span></span> <span data-ttu-id="47929-138">Se pueden combinar las opciones **Optimización** y [**Depuración**](#debugtype).</span><span class="sxs-lookup"><span data-stu-id="47929-138">It's possible to combine the **Optimize** and [**Debug**](#debugtype) options.</span></span>

## <a name="deterministic"></a><span data-ttu-id="47929-139">Determinista</span><span class="sxs-lookup"><span data-stu-id="47929-139">Deterministic</span></span>

<span data-ttu-id="47929-140">Hace que el compilador genere un ensamblado cuya salida byte a byte es idéntica en todas las compilaciones para las entradas idénticas.</span><span class="sxs-lookup"><span data-stu-id="47929-140">Causes the compiler to produce an assembly whose byte-for-byte output is identical across compilations for identical inputs.</span></span>

```xml
<Deterministic>true</Deterministic>
```

<span data-ttu-id="47929-141">De forma predeterminada, la salida del compilador de un conjunto dado de entradas es única, ya que el compilador agrega una marca de tiempo y un MVID que se genera a partir de números aleatorios.</span><span class="sxs-lookup"><span data-stu-id="47929-141">By default, compiler output from a given set of inputs is unique, since the compiler adds a timestamp and an MVID that is generated from random numbers.</span></span> <span data-ttu-id="47929-142">Use la opción `<Deterministic>` para generar un *ensamblado determinista*, cuyo contenido binario es idéntico en todas las compilaciones, siempre y cuando la entrada siga siendo la misma.</span><span class="sxs-lookup"><span data-stu-id="47929-142">You use the `<Deterministic>` option to produce a *deterministic assembly*, one whose binary content is identical across compilations as long as the input remains the same.</span></span> <span data-ttu-id="47929-143">En este tipo de compilación, los campos timestamp y MVID se reemplazarán por los valores derivados de un hash de todas las entradas de la compilación.</span><span class="sxs-lookup"><span data-stu-id="47929-143">In such a build, the timestamp and MVID fields will be replaced with values derived from a hash of all the compilation inputs.</span></span> <span data-ttu-id="47929-144">El compilador tiene en cuenta las siguientes entradas que afectan al determinismo:</span><span class="sxs-lookup"><span data-stu-id="47929-144">The compiler considers the following inputs that affect determinism:</span></span>

- <span data-ttu-id="47929-145">La secuencia de parámetros de la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="47929-145">The sequence of command-line parameters.</span></span>
- <span data-ttu-id="47929-146">El contenido del archivo de respuesta .rsp del compilador.</span><span class="sxs-lookup"><span data-stu-id="47929-146">The contents of the compiler's .rsp response file.</span></span>
- <span data-ttu-id="47929-147">La versión exacta del compilador que se usa y los ensamblados a los que se hace referencia.</span><span class="sxs-lookup"><span data-stu-id="47929-147">The precise version of the compiler used, and its referenced assemblies.</span></span>
- <span data-ttu-id="47929-148">La ruta de acceso del directorio actual.</span><span class="sxs-lookup"><span data-stu-id="47929-148">The current directory path.</span></span>
- <span data-ttu-id="47929-149">El contenido binario de todos los archivos pasados explícitamente al compilador, ya sea de manera directa o indirecta, incluidos los siguientes:</span><span class="sxs-lookup"><span data-stu-id="47929-149">The binary contents of all files explicitly passed to the compiler either directly or indirectly, including:</span></span>
  - <span data-ttu-id="47929-150">Archivos de código fuente</span><span class="sxs-lookup"><span data-stu-id="47929-150">Source files</span></span>
  - <span data-ttu-id="47929-151">Ensamblados a los que se hace referencia</span><span class="sxs-lookup"><span data-stu-id="47929-151">Referenced assemblies</span></span>
  - <span data-ttu-id="47929-152">Módulos a los que se hace referencia</span><span class="sxs-lookup"><span data-stu-id="47929-152">Referenced modules</span></span>
  - <span data-ttu-id="47929-153">Recursos</span><span class="sxs-lookup"><span data-stu-id="47929-153">Resources</span></span>
  - <span data-ttu-id="47929-154">Archivo de clave de nombre seguro</span><span class="sxs-lookup"><span data-stu-id="47929-154">The strong name key file</span></span>
  - <span data-ttu-id="47929-155">Archivos de respuesta @</span><span class="sxs-lookup"><span data-stu-id="47929-155">@ response files</span></span>
  - <span data-ttu-id="47929-156">Analizadores</span><span class="sxs-lookup"><span data-stu-id="47929-156">Analyzers</span></span>
  - <span data-ttu-id="47929-157">Conjuntos de reglas</span><span class="sxs-lookup"><span data-stu-id="47929-157">Rulesets</span></span>
  - <span data-ttu-id="47929-158">Otros archivos que pueden usar los analizadores</span><span class="sxs-lookup"><span data-stu-id="47929-158">Other files that may be used by analyzers</span></span>
- <span data-ttu-id="47929-159">La referencia cultural actual (para el idioma en el que se producen los diagnósticos y los mensajes de excepción).</span><span class="sxs-lookup"><span data-stu-id="47929-159">The current culture (for the language in which diagnostics and exception messages are produced).</span></span>
- <span data-ttu-id="47929-160">La codificación predeterminada (o página de códigos actual) si no se especifica la codificación.</span><span class="sxs-lookup"><span data-stu-id="47929-160">The default encoding (or the current code page) if the encoding isn't specified.</span></span>
- <span data-ttu-id="47929-161">La existencia (o la inexistencia) de archivos y su contenido en las rutas de búsqueda del compilador (especificada, por ejemplo, mediante `-lib` o `-recurse`).</span><span class="sxs-lookup"><span data-stu-id="47929-161">The existence, non-existence, and contents of files on the compiler's search paths (specified, for example, by `-lib` or `-recurse`).</span></span>
- <span data-ttu-id="47929-162">La plataforma de Common Language Runtime (CLR) en la que se ejecuta el compilador.</span><span class="sxs-lookup"><span data-stu-id="47929-162">The Common Language Runtime (CLR) platform on which the compiler is run.</span></span>
- <span data-ttu-id="47929-163">El valor de `%LIBPATH%`, que pueden afectar a la carga de dependencias del analizador.</span><span class="sxs-lookup"><span data-stu-id="47929-163">The value of `%LIBPATH%`, which can affect analyzer dependency loading.</span></span>

<span data-ttu-id="47929-164">Se puede usar la compilación determinista para establecer si un archivo binario se compila a partir de un origen de confianza.</span><span class="sxs-lookup"><span data-stu-id="47929-164">Deterministic compilation can be used for establishing whether a binary is compiled from a trusted source.</span></span> <span data-ttu-id="47929-165">La salida determinista puede ser útil cuando el origen está disponible públicamente.</span><span class="sxs-lookup"><span data-stu-id="47929-165">Deterministic output can be useful when the source is publicly available.</span></span> <span data-ttu-id="47929-166">También puede determinar si los pasos de compilación dependen de los cambios en los binarios que se usan en el proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="47929-166">It can also determine whether build steps that are dependent on changes to binary used in the build process.</span></span>

## <a name="produceonlyreferenceassembly"></a><span data-ttu-id="47929-167">ProduceOnlyReferenceAssembly</span><span class="sxs-lookup"><span data-stu-id="47929-167">ProduceOnlyReferenceAssembly</span></span>

<span data-ttu-id="47929-168">La opción **ProduceOnlyReferenceAssembly** indica que un ensamblado de referencia se debe mostrar en lugar de un ensamblado de implementación, como el resultado principal.</span><span class="sxs-lookup"><span data-stu-id="47929-168">The **ProduceOnlyReferenceAssembly** option indicates that a reference assembly should be output instead of an implementation assembly, as the primary output.</span></span> <span data-ttu-id="47929-169">El parámetro **ProduceOnlyReferenceAssembly** deshabilita de forma automática la generación de archivos PDB, ya que los ensamblados de referencia no se pueden ejecutar.</span><span class="sxs-lookup"><span data-stu-id="47929-169">The **ProduceOnlyReferenceAssembly** parameter silently disables outputting PDBs, as reference assemblies cannot be executed.</span></span>

```xml
<ProduceOnlyReferenceAssembly>true</ProduceOnlyReferenceAssembly>
```

<span data-ttu-id="47929-170">Los ensamblados de referencia son un tipo especial de ensamblado.</span><span class="sxs-lookup"><span data-stu-id="47929-170">Reference assemblies are a special type of assembly.</span></span> <span data-ttu-id="47929-171">Los ensamblados de referencia solo contienen la cantidad mínima de metadatos necesarios para representar la superficie de API públicas de la biblioteca.</span><span class="sxs-lookup"><span data-stu-id="47929-171">Reference assemblies contain only the minimum amount of metadata required to represent the library's public API surface.</span></span> <span data-ttu-id="47929-172">Incluyen declaraciones para todos los miembros que son significativos al hacer referencia a un ensamblado en las herramientas de compilación, pero excluyen todas las implementaciones de miembros y las declaraciones de miembros privados que no tienen ningún impacto observable en su contrato de API.</span><span class="sxs-lookup"><span data-stu-id="47929-172">They include declarations for all members that are significant when referencing an assembly in build tools, but exclude all member implementations and declarations of private members that have no observable impact on their API contract.</span></span> <span data-ttu-id="47929-173">Para obtener más información, vea [Ensamblados de referencia](../../../standard/assembly/reference-assemblies.md).</span><span class="sxs-lookup"><span data-stu-id="47929-173">For more information, see [Reference assemblies](../../../standard/assembly/reference-assemblies.md).</span></span>

<span data-ttu-id="47929-174">Las opciones **ProduceOnlyReferenceAssembly** y [**ProduceReferenceAssembly**](output.md#producereferenceassembly) son mutuamente excluyentes.</span><span class="sxs-lookup"><span data-stu-id="47929-174">The **ProduceOnlyReferenceAssembly** and [**ProduceReferenceAssembly**](output.md#producereferenceassembly) options are mutually exclusive.</span></span>
