---
description: Opciones del compilador de C# para controlar los archivos de entrada para la compilación. Estas opciones especifican cómo el compilador lee los metadatos de los ensamblados y módulos dependientes.
title: 'Opciones del compilador de C#: opciones de archivo de entrada'
ms.date: 03/12/2021
f1_keywords:
- cs.build.options
helpviewer_keywords:
- References compiler option [C#]
- AddModules compiler option [C#]
- EmbedInteropTypes compiler option [C#]
ms.openlocfilehash: 819e2322720782b94bd744e00c602221f023c0d8
ms.sourcegitcommit: 0bb8074d524e0dcf165430b744bb143461f17026
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/15/2021
ms.locfileid: "103482502"
---
# <a name="c-compiler-options-that-specify-inputs"></a><span data-ttu-id="c0d57-104">Opciones del compilador de C# que especifican entradas</span><span class="sxs-lookup"><span data-stu-id="c0d57-104">C# Compiler Options that specify inputs</span></span>

<span data-ttu-id="c0d57-105">Las opciones siguientes controlan las entradas del compilador.</span><span class="sxs-lookup"><span data-stu-id="c0d57-105">The following options control compiler inputs.</span></span> <span data-ttu-id="c0d57-106">La nueva sintaxis de MSBuild se muestra en **negrita**.</span><span class="sxs-lookup"><span data-stu-id="c0d57-106">The new MSBuild syntax is shown in **Bold**.</span></span> <span data-ttu-id="c0d57-107">La sintaxis de *csc.exe* anterior se muestra en `code style`.</span><span class="sxs-lookup"><span data-stu-id="c0d57-107">The older *csc.exe* syntax is shown in `code style`.</span></span>

- <span data-ttu-id="c0d57-108">**References** / `-reference` o `-references`: se hace referencia a los metadatos de los archivos de ensamblado especificados.</span><span class="sxs-lookup"><span data-stu-id="c0d57-108">**References** / `-reference` or `-references`: Reference metadata from the specified assembly file or files.</span></span>
- <span data-ttu-id="c0d57-109">**AddModules** / `-addmodule`: se agrega un módulo (creado con `target:module` para este ensamblado).</span><span class="sxs-lookup"><span data-stu-id="c0d57-109">**AddModules** / `-addmodule`: Add a module (created with `target:module` to this assembly.)</span></span>
- <span data-ttu-id="c0d57-110">**EmbedInteropTypes** / `-link`: se insertan metadatos de los archivos de ensamblado de interoperabilidad especificados.</span><span class="sxs-lookup"><span data-stu-id="c0d57-110">**EmbedInteropTypes** / `-link`: Embed metadata from the specified interop assembly files.</span></span>

## <a name="references"></a><span data-ttu-id="c0d57-111">Referencias</span><span class="sxs-lookup"><span data-stu-id="c0d57-111">References</span></span>

<span data-ttu-id="c0d57-112">La opción **References** hace que el compilador importe información de tipo [public](../keywords/public.md) del archivo especificado al proyecto actual, lo que permite hacer referencia a metadatos de los archivos de ensamblado especificados.</span><span class="sxs-lookup"><span data-stu-id="c0d57-112">The **References** option causes the compiler to import [public](../keywords/public.md) type information in the specified file into the current project, enabling you to reference metadata from the specified assembly files.</span></span>

```xml
<Reference Include="filename" />
```

 <span data-ttu-id="c0d57-113">`filename` es el nombre de un archivo que contiene un manifiesto del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="c0d57-113">`filename` is the name of a file that contains an assembly manifest.</span></span> <span data-ttu-id="c0d57-114">Para importar más de un archivo, incluya un elemento **Reference** diferente para cada archivo.</span><span class="sxs-lookup"><span data-stu-id="c0d57-114">To import more than one file, include a separate **Reference** element for each file.</span></span> <span data-ttu-id="c0d57-115">Puede definir un alias como un elemento secundario del elemento **Reference**:</span><span class="sxs-lookup"><span data-stu-id="c0d57-115">You can define an alias as a child element of the **Reference** element:</span></span>

```xml
<Reference Include="filename.dll">
  <Aliases>LS</Aliases>
</Reference>
```

<span data-ttu-id="c0d57-116">En el ejemplo anterior, `LS` es el identificador de C# válido que representa un espacio de nombres raíz que contendrá todos los espacios de nombres en el archivo *filename.dll* del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="c0d57-116">In the previous example, `LS` is the valid C# identifier that represents a root namespace that will contain all namespaces in the assembly *filename.dll*.</span></span> <span data-ttu-id="c0d57-117">Los archivos que importe deben contener un manifiesto.</span><span class="sxs-lookup"><span data-stu-id="c0d57-117">The files you import must contain a manifest.</span></span> <span data-ttu-id="c0d57-118">Use [**AdditionalLibPaths**](advanced.md#additionallibpaths) para especificar el directorio en el que se encuentran una o varias de las referencias de ensamblado.</span><span class="sxs-lookup"><span data-stu-id="c0d57-118">Use [**AdditionalLibPaths**](advanced.md#additionallibpaths) to specify the directory in which one or more of your assembly references is located.</span></span> <span data-ttu-id="c0d57-119">En el tema [**AdditionalLibPaths**](advanced.md#additionallibpaths) también se describen los directorios en los que el compilador busca ensamblados.</span><span class="sxs-lookup"><span data-stu-id="c0d57-119">The [**AdditionalLibPaths**](advanced.md#additionallibpaths) topic also discusses the directories in which the compiler searches for assemblies.</span></span> <span data-ttu-id="c0d57-120">Para que el compilador reconozca un tipo de un ensamblado (y no de un módulo), debe obligársele a que resuelva el tipo, lo que se puede conseguir si se define una instancia del tipo.</span><span class="sxs-lookup"><span data-stu-id="c0d57-120">In order for the compiler to recognize a type in an assembly, and not in a module, it needs to be forced to resolve the type, which you can do by defining an instance of the type.</span></span> <span data-ttu-id="c0d57-121">Existen otras formas de que el compilador resuelva nombres de tipos en un ensamblado; por ejemplo, si se hereda de un tipo de un ensamblado, el compilador reconocerá el nombre del tipo.</span><span class="sxs-lookup"><span data-stu-id="c0d57-121">There are other ways to resolve type names in an assembly for the compiler: for example, if you inherit from a type in an assembly, the type name will then be recognized by the compiler.</span></span> <span data-ttu-id="c0d57-122">A veces es necesario hacer referencia a dos versiones diferentes del mismo componente desde un ensamblado.</span><span class="sxs-lookup"><span data-stu-id="c0d57-122">Sometimes it is necessary to reference two different versions of the same component from within one assembly.</span></span> <span data-ttu-id="c0d57-123">Para ello, use el elemento **Aliases** del elemento **References** de cada archivo para distinguir entre los dos archivos.</span><span class="sxs-lookup"><span data-stu-id="c0d57-123">To do this, use the **Aliases** element on the **References** element for each file to distinguish between the two files.</span></span> <span data-ttu-id="c0d57-124">Este alias se usará como calificador para el nombre del componente y se resolverá en el componente de uno de los archivos.</span><span class="sxs-lookup"><span data-stu-id="c0d57-124">This alias will be used as a qualifier for the component name, and will resolve to the component in one of the files.</span></span>

> [!NOTE]
> <span data-ttu-id="c0d57-125">En Visual Studio, use el comando **Agregar referencia**.</span><span class="sxs-lookup"><span data-stu-id="c0d57-125">In Visual Studio, use the **Add Reference** command.</span></span> <span data-ttu-id="c0d57-126">Para obtener más información, consulta [Procedimiento para agregar o quitar referencias mediante el Administrador de referencias](/visualstudio/ide/how-to-add-or-remove-references-by-using-the-reference-manager).</span><span class="sxs-lookup"><span data-stu-id="c0d57-126">For more information, see [How to: Add or Remove References By Using the Reference Manager](/visualstudio/ide/how-to-add-or-remove-references-by-using-the-reference-manager).</span></span>

## <a name="addmodules"></a><span data-ttu-id="c0d57-127">AddModules</span><span class="sxs-lookup"><span data-stu-id="c0d57-127">AddModules</span></span>

<span data-ttu-id="c0d57-128">Esta opción agrega un módulo que se ha creado con el modificador `<TargetType>module</TargetType>` para la compilación actual:</span><span class="sxs-lookup"><span data-stu-id="c0d57-128">This option adds a module that was created with the `<TargetType>module</TargetType>` switch to the current compilation:</span></span>

```xml
<AddModule Include=file1 />
<AddModule Include=file2 />
```

<span data-ttu-id="c0d57-129">Donde `file`, `file2` son archivos de salida que contienen metadatos.</span><span class="sxs-lookup"><span data-stu-id="c0d57-129">Where `file`, `file2` are output files that contain metadata.</span></span> <span data-ttu-id="c0d57-130">El archivo no puede contener un manifiesto del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="c0d57-130">The file can't contain an assembly manifest.</span></span> <span data-ttu-id="c0d57-131">Para importar más de un archivo, hay que separar los nombres de archivo con una coma o un punto y coma.</span><span class="sxs-lookup"><span data-stu-id="c0d57-131">To import more than one file, separate file names with either a comma or a semicolon.</span></span> <span data-ttu-id="c0d57-132">Todos los módulos agregados con **AddModules** deben encontrarse en el mismo directorio que el archivo de salida en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="c0d57-132">All modules added with **AddModules** must be in the same directory as the output file at run time.</span></span> <span data-ttu-id="c0d57-133">Es decir, puede especificar un módulo de cualquier directorio en el momento de la compilación, pero el módulo debe encontrarse en el directorio de la aplicación en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="c0d57-133">That is, you can specify a module in any directory at compile time but the module must be in the application directory at run time.</span></span> <span data-ttu-id="c0d57-134">Si el módulo no se encuentra en el directorio de la aplicación en tiempo de ejecución, obtendrá <xref:System.TypeLoadException>.</span><span class="sxs-lookup"><span data-stu-id="c0d57-134">If the module isn't in the application directory at run time, you'll get a <xref:System.TypeLoadException>.</span></span> <span data-ttu-id="c0d57-135">`file` no puede contener ningún ensamblado.</span><span class="sxs-lookup"><span data-stu-id="c0d57-135">`file` can't contain an assembly.</span></span> <span data-ttu-id="c0d57-136">Por ejemplo, si el archivo de salida se ha creado con la opción [**TargetType**](output.md#targettype) de **module**, sus metadatos se pueden importar con **AddModules**.</span><span class="sxs-lookup"><span data-stu-id="c0d57-136">For example, if the output file was created with [**TargetType**](output.md#targettype) option of **module**, its metadata can be imported with **AddModules**.</span></span>

<span data-ttu-id="c0d57-137">Si el archivo de salida se ha creado con una opción [**TargetType**](output.md#targettype) diferente de **module**, no se podrán importar sus metadatos con **AddModules**, pero sí con [**References**](#references).</span><span class="sxs-lookup"><span data-stu-id="c0d57-137">If the output file was created with a [**TargetType**](output.md#targettype) option other than **module**, its metadata cannot be imported with **AddModules** but can be imported with the [**References**](#references) option.</span></span>

## <a name="embedinteroptypes"></a><span data-ttu-id="c0d57-138">EmbedInteropTypes</span><span class="sxs-lookup"><span data-stu-id="c0d57-138">EmbedInteropTypes</span></span>

<span data-ttu-id="c0d57-139">Hace que el compilador facilite al proyecto que se está compilando información de tipos COM en los ensamblados especificados.</span><span class="sxs-lookup"><span data-stu-id="c0d57-139">Causes the compiler to make COM type information in the specified assemblies available to the project that you are currently compiling.</span></span>

```xml
<References>
  <EmbedInteropTypes>file1;file2;file3</EmbedInteropTypes>
</References>
```

<span data-ttu-id="c0d57-140">Donde `file1;file2;file3` es una lista de nombres de archivo de ensamblado delimitados por signos de punto y coma.</span><span class="sxs-lookup"><span data-stu-id="c0d57-140">Where  `file1;file2;file3` is a semicolon-delimited list of assembly file names.</span></span> <span data-ttu-id="c0d57-141">Si el nombre de archivo contiene un espacio, escríbalo entre comillas.</span><span class="sxs-lookup"><span data-stu-id="c0d57-141">If the file name contains a space, enclose the name in quotation marks.</span></span> <span data-ttu-id="c0d57-142">La opción **EmbedInteropTypes** permite implementar una aplicación que tiene información de tipo insertada.</span><span class="sxs-lookup"><span data-stu-id="c0d57-142">The **EmbedInteropTypes** option enables you to deploy an application that has embedded type information.</span></span> <span data-ttu-id="c0d57-143">La aplicación puede usar los tipos de un ensamblado en tiempo de ejecución que implementan la información de tipo incrustada sin necesidad de una referencia al ensamblado en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="c0d57-143">The application can then use types in a runtime assembly that implement the embedded type information without requiring a reference to the runtime assembly.</span></span> <span data-ttu-id="c0d57-144">Si hay varias versiones del ensamblado en tiempo de ejecución publicadas, la aplicación que contiene la información de tipo incrustada puede trabajar con las distintas versiones sin tener que volver a compilar.</span><span class="sxs-lookup"><span data-stu-id="c0d57-144">If various versions of the runtime assembly are published, the application that contains the embedded type information can work with the various versions without having to be recompiled.</span></span> <span data-ttu-id="c0d57-145">Para obtener un ejemplo, vea [Tutorial: Insertar los tipos de los ensamblados administrados](../../../standard/assembly/embed-types-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="c0d57-145">For an example, see [Walkthrough: Embedding Types from Managed Assemblies](../../../standard/assembly/embed-types-visual-studio.md).</span></span>

<span data-ttu-id="c0d57-146">La opción **EmbedInteropTypes** resulta de especial utilidad cuando se trabaja con la interoperabilidad COM.</span><span class="sxs-lookup"><span data-stu-id="c0d57-146">Using the **EmbedInteropTypes** option is especially useful when you're working with COM interop.</span></span> <span data-ttu-id="c0d57-147">Puede incrustar tipos COM para que la aplicación ya no necesite un ensamblado de interoperabilidad primario (PIA) en el equipo de destino.</span><span class="sxs-lookup"><span data-stu-id="c0d57-147">You can embed COM types so that your application no longer requires a primary interop assembly (PIA) on the target computer.</span></span> <span data-ttu-id="c0d57-148">La opción **EmbedInteropTypes** indica al compilador que inserte la información de tipo COM del ensamblado de interoperabilidad al que se hace referencia en el código compilado resultante.</span><span class="sxs-lookup"><span data-stu-id="c0d57-148">The **EmbedInteropTypes** option instructs the compiler to embed the COM type information from the referenced interop assembly into the resulting compiled code.</span></span> <span data-ttu-id="c0d57-149">El tipo COM se identifica mediante el valor de CLSID (GUID).</span><span class="sxs-lookup"><span data-stu-id="c0d57-149">The COM type is identified by the CLSID (GUID) value.</span></span> <span data-ttu-id="c0d57-150">Como resultado, la aplicación se puede ejecutar en un equipo de destino que tenga instalados los mismos tipos COM con los mismos valores de CLSID.</span><span class="sxs-lookup"><span data-stu-id="c0d57-150">As a result, your application can run on a target computer that has installed the same COM types with the same CLSID values.</span></span> <span data-ttu-id="c0d57-151">Las aplicaciones que automatizan Microsoft Office son un buen ejemplo.</span><span class="sxs-lookup"><span data-stu-id="c0d57-151">Applications that automate Microsoft Office are a good example.</span></span> <span data-ttu-id="c0d57-152">Dado que las aplicaciones como Office suelen mantener el mismo valor de CLSID en las distintas versiones, la aplicación puede usar los tipos COM a los que se hace referencia siempre que .NET Framework 4 o posterior esté instalado en el equipo de destino y la aplicación emplee métodos, propiedades o eventos que estén incluidos en los tipos COM a los que se hace referencia.</span><span class="sxs-lookup"><span data-stu-id="c0d57-152">Because applications like Office usually keep the same CLSID value across different versions, your application can use the referenced COM types as long as .NET Framework 4 or later is installed on the target computer and your application uses methods, properties, or events that are included in the referenced COM types.</span></span> <span data-ttu-id="c0d57-153">La opción **EmbedInteropTypes** solo inserta interfaces, estructuras y delegados.</span><span class="sxs-lookup"><span data-stu-id="c0d57-153">The **EmbedInteropTypes** option embeds only interfaces, structures, and delegates.</span></span> <span data-ttu-id="c0d57-154">No se admite la inserción de clases COM.</span><span class="sxs-lookup"><span data-stu-id="c0d57-154">Embedding COM classes isn't supported.</span></span>

> [!NOTE]
> <span data-ttu-id="c0d57-155">Cuando se crea una instancia de un tipo COM incrustado en el código, hay que crear la instancia mediante la interfaz adecuada.</span><span class="sxs-lookup"><span data-stu-id="c0d57-155">When you create an instance of an embedded COM type in your code, you must create the instance by using the appropriate interface.</span></span> <span data-ttu-id="c0d57-156">Si se intenta crear una instancia de un tipo COM incrustado mediante la coclase, se produce un error.</span><span class="sxs-lookup"><span data-stu-id="c0d57-156">Attempting to create an instance of an embedded COM type by using the CoClass causes an error.</span></span>

<span data-ttu-id="c0d57-157">Como sucede con la [opción del compilador **References**](#references), la opción del compilador **EmbedInteropTypes** usa el archivo de respuesta Csc.rsp, que hace referencia a ensamblados de .NET usados con frecuencia.</span><span class="sxs-lookup"><span data-stu-id="c0d57-157">Like the [**References**](#references) compiler option, the **EmbedInteropTypes** compiler option uses the Csc.rsp response file, which references frequently used .NET assemblies.</span></span> <span data-ttu-id="c0d57-158">Use la opción del compilador [**NoConfig**](miscellaneous.md#noconfig) si no quiere que el compilador utilice el archivo Csc.rsp.</span><span class="sxs-lookup"><span data-stu-id="c0d57-158">Use the [**NoConfig**](miscellaneous.md#noconfig) compiler option if you don't want the compiler to use the Csc.rsp file.</span></span>

[!code-csharp[VbLinkCompilerCS#1](~/samples/snippets/csharp/VS_Snippets_VBCSharp/vblinkcompilercs/cs/program.cs#1)]

<span data-ttu-id="c0d57-159">Los tipos que tienen un parámetro genérico cuyo tipo se ha incrustado desde un ensamblado de interoperabilidad no se pueden usar si ese tipo pertenece a un ensamblado externo.</span><span class="sxs-lookup"><span data-stu-id="c0d57-159">Types that have a generic parameter whose type is embedded from an interop assembly cannot be used if that type is from an external assembly.</span></span> <span data-ttu-id="c0d57-160">Esta restricción no se aplica a las interfaces.</span><span class="sxs-lookup"><span data-stu-id="c0d57-160">This restriction doesn't apply to interfaces.</span></span> <span data-ttu-id="c0d57-161">Por ejemplo, considere la interfaz <xref:Microsoft.Office.Interop.Excel.Range> que se define en el ensamblado <xref:Microsoft.Office.Interop.Excel>.</span><span class="sxs-lookup"><span data-stu-id="c0d57-161">For example, consider the <xref:Microsoft.Office.Interop.Excel.Range> interface that is defined in the <xref:Microsoft.Office.Interop.Excel> assembly.</span></span> <span data-ttu-id="c0d57-162">Si una biblioteca inserta tipos de interoperabilidad desde el ensamblado <xref:Microsoft.Office.Interop.Excel> y expone un método que devuelve un tipo genérico que tiene un parámetro cuyo tipo es la interfaz <xref:Microsoft.Office.Interop.Excel.Range>, ese método debe devolver una interfaz genérica, como se muestra en el ejemplo de código siguiente.</span><span class="sxs-lookup"><span data-stu-id="c0d57-162">If a library embeds interop types from the <xref:Microsoft.Office.Interop.Excel> assembly and exposes a method that returns a generic type that has a parameter whose type is the <xref:Microsoft.Office.Interop.Excel.Range> interface, that method must return a generic interface, as shown in the following code example.</span></span>

[!code-csharp[VbLinkCompilerCS#2](~/samples/snippets/csharp/VS_Snippets_VBCSharp/vblinkcompilercs/cs/utility.cs)]

<span data-ttu-id="c0d57-163">En el ejemplo siguiente, el código de cliente puede llamar al método que devuelve la interfaz genérica <xref:System.Collections.IList> sin errores.</span><span class="sxs-lookup"><span data-stu-id="c0d57-163">In the following example, client code can call the method that returns the <xref:System.Collections.IList> generic interface without error.</span></span>

[!code-csharp[VbLinkCompilerCS#5](~/samples/snippets/csharp/VS_Snippets_VBCSharp/vblinkcompilercs/cs/program.cs#5)]
