---
title: Programación orientada a objetos (C#)
description: C# proporciona compatibilidad completa para la programación orientada a objetos incluida la abstracción, la encapsulación, la herencia y el polimorfismo.
ms.date: 09/30/2020
ms.openlocfilehash: b778b7c42bbfb1f20bdd2d83b9cb10512ea3f41b
ms.sourcegitcommit: 4d5e25a46aa7cd0d29b4b9227b92987354d444c4
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/26/2021
ms.locfileid: "98794851"
---
# <a name="object-oriented-programming-c"></a><span data-ttu-id="0211c-103">Programación orientada a objetos (C#)</span><span class="sxs-lookup"><span data-stu-id="0211c-103">Object-Oriented programming (C#)</span></span>

<span data-ttu-id="0211c-104">C# es un lenguaje orientado a objetos.</span><span class="sxs-lookup"><span data-stu-id="0211c-104">C# is an object-oriented language.</span></span> <span data-ttu-id="0211c-105">Cuatro de las técnicas clave que se usan en la programación orientada a objetos son:</span><span class="sxs-lookup"><span data-stu-id="0211c-105">Four of the key techniques used in object-oriented programming are:</span></span>

- <span data-ttu-id="0211c-106">La *abstracción* significa ocultar los detalles innecesarios de los consumidores de tipos.</span><span class="sxs-lookup"><span data-stu-id="0211c-106">*Abstraction* means hiding the unnecessary details from type consumers.</span></span>
- <span data-ttu-id="0211c-107">La *encapsulación* significa que un grupo de propiedades, métodos y otros miembros relacionados se tratan como una sola unidad u objeto.</span><span class="sxs-lookup"><span data-stu-id="0211c-107">*Encapsulation* means that a group of related properties, methods, and other members are treated as a single unit or object.</span></span>
- <span data-ttu-id="0211c-108">La *herencia* describe la posibilidad de crear nuevas clases basadas en una clase existente.</span><span class="sxs-lookup"><span data-stu-id="0211c-108">*Inheritance* describes the ability to create new classes based on an existing class.</span></span>
- <span data-ttu-id="0211c-109">El *polimorfismo* significa que puede tener múltiples clases que se pueden usar de manera intercambiable, aunque cada clase implementa las mismas propiedades o los mismos métodos de maneras diferentes.</span><span class="sxs-lookup"><span data-stu-id="0211c-109">*Polymorphism* means that you can have multiple classes that can be used interchangeably, even though each class implements the same properties or methods in different ways.</span></span>

<span data-ttu-id="0211c-110">En el tutorial anterior, [Introducción a las clases](introduction-to-classes.md) se trató la *abstracción* y la *encapsulación*.</span><span class="sxs-lookup"><span data-stu-id="0211c-110">In the preceding tutorial, [introduction to classes](introduction-to-classes.md) you saw both *abstraction* and *encapsulation*.</span></span> <span data-ttu-id="0211c-111">La clase `BankAccount` proporcionó una abstracción para el concepto de una cuenta bancaria.</span><span class="sxs-lookup"><span data-stu-id="0211c-111">The `BankAccount` class provided an abstraction for the concept of a bank account.</span></span> <span data-ttu-id="0211c-112">Puede modificar su implementación sin que afecte para nada al código que usó la clase `BankAccount`.</span><span class="sxs-lookup"><span data-stu-id="0211c-112">You could modify its implementation without affecting any of the code that used the `BankAccount` class.</span></span> <span data-ttu-id="0211c-113">Las clases `BankAccount` y `Transaction` proporcionan encapsulación de los componentes necesarios para describir esos conceptos en el código.</span><span class="sxs-lookup"><span data-stu-id="0211c-113">Both the `BankAccount` and `Transaction` classes provide encapsulation of the components needed to describe those concepts in code.</span></span>

<span data-ttu-id="0211c-114">En este tutorial, ampliará la aplicación para hacer uso de la *herencia* y el *polimorfismo* para agregar nuevas características.</span><span class="sxs-lookup"><span data-stu-id="0211c-114">In this tutorial, you'll extend that application to make use of *inheritance* and *polymorphism* to add new features.</span></span> <span data-ttu-id="0211c-115">También agregará características a la clase `BankAccount`, aprovechando las técnicas de *abstracción* y *encapsulación* que aprendió en el tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="0211c-115">You'll also add features to the `BankAccount` class, taking advantage of the *abstraction* and *encapsulation* techniques you learned in the preceding tutorial.</span></span>

## <a name="create-different-types-of-accounts"></a><span data-ttu-id="0211c-116">Creación de diferentes tipos de cuentas</span><span class="sxs-lookup"><span data-stu-id="0211c-116">Create different types of accounts</span></span>

<span data-ttu-id="0211c-117">Después de compilar este programa, recibirá solicitudes para agregarle características.</span><span class="sxs-lookup"><span data-stu-id="0211c-117">After building this program, you get requests to add features to it.</span></span> <span data-ttu-id="0211c-118">Funciona bien en situaciones en las que solo hay un tipo de cuenta bancaria.</span><span class="sxs-lookup"><span data-stu-id="0211c-118">It works great in the situation where there is only one bank account type.</span></span> <span data-ttu-id="0211c-119">Con el tiempo, las necesidades cambian y se solicitan tipos de cuenta relacionados:</span><span class="sxs-lookup"><span data-stu-id="0211c-119">Over time, needs change, and related account types are requested:</span></span>

- <span data-ttu-id="0211c-120">Una cuenta que devenga intereses que genera beneficios al final de cada mes.</span><span class="sxs-lookup"><span data-stu-id="0211c-120">An interest earning account that accrues interest at the end of each month.</span></span>
- <span data-ttu-id="0211c-121">Una línea de crédito que puede tener un saldo negativo, pero cuando sea así, se producirá un cargo por intereses cada mes.</span><span class="sxs-lookup"><span data-stu-id="0211c-121">A line of credit that can have a negative balance, but when there's a balance, there's an interest charge each month.</span></span>
- <span data-ttu-id="0211c-122">Una cuenta de tarjeta de regalo de prepago que comienza con un único depósito y solo se puede liquidar.</span><span class="sxs-lookup"><span data-stu-id="0211c-122">A pre-paid gift card account that starts with a single deposit, and only can be paid off.</span></span> <span data-ttu-id="0211c-123">Se puede recargar una vez al principio de cada mes.</span><span class="sxs-lookup"><span data-stu-id="0211c-123">It can be refilled once at the start of each month.</span></span>

<span data-ttu-id="0211c-124">Todas estas cuentas diferentes son similares a la clase `BankAccount` definida en el tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="0211c-124">All of these different accounts are similar to `BankAccount` class defined in the earlier tutorial.</span></span> <span data-ttu-id="0211c-125">Podría copiar ese código, cambiar el nombre de las clases y realizar modificaciones.</span><span class="sxs-lookup"><span data-stu-id="0211c-125">You could copy that code, rename the classes, and make modifications.</span></span> <span data-ttu-id="0211c-126">Esa técnica funcionaría a corto plazo, pero a la larga supondría más trabajo.</span><span class="sxs-lookup"><span data-stu-id="0211c-126">That technique would work in the short term, but it would be more work over time.</span></span> <span data-ttu-id="0211c-127">Cualquier cambio se copiará en todas las clases afectadas.</span><span class="sxs-lookup"><span data-stu-id="0211c-127">Any changes would be copied across all the affected classes.</span></span>

<span data-ttu-id="0211c-128">En su lugar, puede crear nuevos tipos de cuenta bancaria que hereden métodos y datos de la clase `BankAccount` creada en el tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="0211c-128">Instead, you can create new bank account types that inherit methods and data from the `BankAccount` class created in the preceding tutorial.</span></span> <span data-ttu-id="0211c-129">Estas clases nuevas pueden extender la clase `BankAccount` con el comportamiento específico necesario para cada tipo:</span><span class="sxs-lookup"><span data-stu-id="0211c-129">These new classes can extend the `BankAccount` class with the specific behavior needed for each type:</span></span>

```csharp
public class InterestEarningAccount : BankAccount
{
}

public class LineOfCreditAccount : BankAccount
{
}

public class GiftCardAccount : BankAccount
{
}
```

<span data-ttu-id="0211c-130">Cada una de estas clases *hereda* el comportamiento compartido de su *clase base* compartida, la clase `BankAccount`.</span><span class="sxs-lookup"><span data-stu-id="0211c-130">Each of these classes *inherits* the shared behavior from their shared *base class*, the `BankAccount` class.</span></span> <span data-ttu-id="0211c-131">Escriba las implementaciones para la funcionalidad nueva y diferente en cada una de las *clases derivadas*.</span><span class="sxs-lookup"><span data-stu-id="0211c-131">Write the implementations for new and different functionality in each of the *derived classes*.</span></span>  <span data-ttu-id="0211c-132">Estas clases derivadas ya tienen todo el comportamiento definido en la clase `BankAccount`.</span><span class="sxs-lookup"><span data-stu-id="0211c-132">These derived classes already have all the behavior defined in the `BankAccount` class.</span></span>

<span data-ttu-id="0211c-133">Es recomendable crear cada clase nueva en un archivo de código fuente diferente.</span><span class="sxs-lookup"><span data-stu-id="0211c-133">It's a good practice to create each new class in a different source file.</span></span> <span data-ttu-id="0211c-134">En [Visual Studio](https://visualstudio.com), puede hacer clic con el botón derecho en el proyecto y seleccionar *Agregar clase* para agregar una clase nueva en un archivo nuevo.</span><span class="sxs-lookup"><span data-stu-id="0211c-134">In [Visual Studio](https://visualstudio.com), you can right-click on the project, and select *add class* to add a new class in a new file.</span></span> <span data-ttu-id="0211c-135">En [Visual Studio Code](https://code.visualstudio.com), seleccione *Archivo* y luego *Nuevo* para crear un nuevo archivo de código fuente.</span><span class="sxs-lookup"><span data-stu-id="0211c-135">In [Visual Studio Code](https://code.visualstudio.com), select *File* then *New* to create a new source file.</span></span> <span data-ttu-id="0211c-136">En cualquier herramienta, ponga un nombre al archivo que coincida con la clase: *InterestEarningAccount.cs*, *LineOfCreditAccount.cs* y *GiftCardAccount.cs*.</span><span class="sxs-lookup"><span data-stu-id="0211c-136">In either tool, name the file to match the class: *InterestEarningAccount.cs*, *LineOfCreditAccount.cs*, and *GiftCardAccount.cs*.</span></span>

<span data-ttu-id="0211c-137">Cuando cree las clases como se muestra en el ejemplo anterior, observará que ninguna de las clases derivadas se compila.</span><span class="sxs-lookup"><span data-stu-id="0211c-137">When you create the classes as shown in the preceding sample, you'll find that none of your derived classes compile.</span></span> <span data-ttu-id="0211c-138">La inicialización de un objeto es responsabilidad de un constructor.</span><span class="sxs-lookup"><span data-stu-id="0211c-138">A constructor is responsible for initializing an object.</span></span> <span data-ttu-id="0211c-139">Un constructor de clase derivada debe inicializar la clase derivada y proporcionar instrucciones sobre cómo inicializar el objeto de la clase base incluido en la clase derivada.</span><span class="sxs-lookup"><span data-stu-id="0211c-139">A derived class constructor must initialize the derived class, and provide instructions on how to initialize the base class object included in the derived class.</span></span> <span data-ttu-id="0211c-140">Normalmente, se produce una inicialización correcta sin ningún código adicional.</span><span class="sxs-lookup"><span data-stu-id="0211c-140">The proper initialization normally happens without any extra code.</span></span> <span data-ttu-id="0211c-141">La clase `BankAccount` declara un constructor público con la siguiente firma:</span><span class="sxs-lookup"><span data-stu-id="0211c-141">The `BankAccount` class declares one public constructor with the following signature:</span></span>

```csharp
public BankAccount(string name, decimal initialBalance)
```

<span data-ttu-id="0211c-142">El compilador no genera un constructor predeterminado al definir un constructor.</span><span class="sxs-lookup"><span data-stu-id="0211c-142">The compiler doesn't generate a default constructor when you define a constructor yourself.</span></span> <span data-ttu-id="0211c-143">Esto significa que cada clase derivada debe llamar explícitamente a este constructor.</span><span class="sxs-lookup"><span data-stu-id="0211c-143">That means each derived class must explicitly call this constructor.</span></span> <span data-ttu-id="0211c-144">Se declara un constructor que puede pasar argumentos al constructor de la clase base.</span><span class="sxs-lookup"><span data-stu-id="0211c-144">You declare a constructor that can pass arguments to the base class constructor.</span></span>  <span data-ttu-id="0211c-145">En el código siguiente se muestra el constructor de `InterestEarningAccount`:</span><span class="sxs-lookup"><span data-stu-id="0211c-145">The following code shows the constructor for the `InterestEarningAccount`:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/InterestEarningAccount.cs" ID="DerivedConstructor":::

<span data-ttu-id="0211c-146">Los parámetros de este nuevo constructor coinciden con el tipo de parámetro y los nombres del constructor de clase base.</span><span class="sxs-lookup"><span data-stu-id="0211c-146">The parameters to this new constructor match the parameter type and names of the base class constructor.</span></span> <span data-ttu-id="0211c-147">Utilice la sintaxis de `: base()` para indicar una llamada a un constructor de clase base.</span><span class="sxs-lookup"><span data-stu-id="0211c-147">You use the `: base()` syntax to indicate a call to a base class constructor.</span></span> <span data-ttu-id="0211c-148">Algunas clases definen varios constructores, y esta sintaxis le permite elegir el constructor de clase base al que llama.</span><span class="sxs-lookup"><span data-stu-id="0211c-148">Some classes define multiple constructors, and this syntax enables you to pick which base class constructor you call.</span></span> <span data-ttu-id="0211c-149">Una vez que haya actualizado los constructores, puede desarrollar el código para cada una de las clases derivadas.</span><span class="sxs-lookup"><span data-stu-id="0211c-149">Once you've updated the constructors, you can develop the code for each of the derived classes.</span></span> <span data-ttu-id="0211c-150">Los requisitos para las clases nuevas se pueden indicar de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="0211c-150">The requirements for the new classes can be stated as follows:</span></span>

- <span data-ttu-id="0211c-151">Una cuenta que devenga intereses:</span><span class="sxs-lookup"><span data-stu-id="0211c-151">An interest earning account:</span></span>
  - <span data-ttu-id="0211c-152">obtendrá un crédito del 2 % del saldo a final de mes.</span><span class="sxs-lookup"><span data-stu-id="0211c-152">Will get a credit of 2% of the month-ending-balance.</span></span>
- <span data-ttu-id="0211c-153">Una línea de crédito:</span><span class="sxs-lookup"><span data-stu-id="0211c-153">A line of credit:</span></span>
  - <span data-ttu-id="0211c-154">puede tener un saldo negativo, pero no mayor en valor absoluto que el límite de crédito.</span><span class="sxs-lookup"><span data-stu-id="0211c-154">Can have a negative balance, but not be greater in absolute value than the credit limit.</span></span>
  - <span data-ttu-id="0211c-155">Generará un cargo por intereses cada mes en el que el saldo final del mes no sea 0.</span><span class="sxs-lookup"><span data-stu-id="0211c-155">Will incur an interest charge each month where the end of month balance isn't 0.</span></span>
  - <span data-ttu-id="0211c-156">Generará un cargo por cada retirada que supere el límite de crédito.</span><span class="sxs-lookup"><span data-stu-id="0211c-156">Will incur a fee on each withdrawal that goes over the credit limit.</span></span>
- <span data-ttu-id="0211c-157">Una cuenta de tarjeta regalo:</span><span class="sxs-lookup"><span data-stu-id="0211c-157">A gift card account:</span></span>
  - <span data-ttu-id="0211c-158">Se puede recargar con una cantidad especificada una vez al mes, el último día del mes.</span><span class="sxs-lookup"><span data-stu-id="0211c-158">Can be refilled with a specified amount once each month, on the last day of the month.</span></span>

<span data-ttu-id="0211c-159">Puede ver que los tres tipos de cuenta tienen una acción que tiene lugar al final de cada mes.</span><span class="sxs-lookup"><span data-stu-id="0211c-159">You can see that all three of these account types have an action that takes places at the end of each month.</span></span> <span data-ttu-id="0211c-160">Sin embargo, cada tipo de cuenta realiza diferentes tareas.</span><span class="sxs-lookup"><span data-stu-id="0211c-160">However, each account type does different tasks.</span></span> <span data-ttu-id="0211c-161">Utiliza el *polimorfismo* para implementar este código.</span><span class="sxs-lookup"><span data-stu-id="0211c-161">You use *polymorphism* to implement this code.</span></span> <span data-ttu-id="0211c-162">Cree un método `virtual` único en la clase `BankAccount`:</span><span class="sxs-lookup"><span data-stu-id="0211c-162">Create a single `virtual` method in the `BankAccount` class:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/BankAccount.cs" ID="DeclareMonthEndTransactions":::

<span data-ttu-id="0211c-163">El código anterior muestra cómo se usa la palabra clave `virtual` para declarar un método en la clase base para el que una clase derivada puede proporcionar una implementación diferente.</span><span class="sxs-lookup"><span data-stu-id="0211c-163">The preceding code shows how you use the `virtual` keyword to declare a method in the base class that a derived class may provide a different implementation for.</span></span> <span data-ttu-id="0211c-164">Un método `virtual` es un método en el que cualquier clase derivada puede optar por volver a implementar.</span><span class="sxs-lookup"><span data-stu-id="0211c-164">A `virtual` method is a method where any derived class may choose to reimplement.</span></span> <span data-ttu-id="0211c-165">Las clases derivadas usan la palabra clave `override` para definir la nueva implementación.</span><span class="sxs-lookup"><span data-stu-id="0211c-165">The derived classes use the `override` keyword to define the new implementation.</span></span> <span data-ttu-id="0211c-166">Normalmente, se hace referencia a este proceso como "reemplazar la implementación de la clase base".</span><span class="sxs-lookup"><span data-stu-id="0211c-166">Typically you refer to this as "overriding the base class implementation".</span></span> <span data-ttu-id="0211c-167">La palabra clave `virtual` especifica que las clases derivadas pueden invalidar el comportamiento.</span><span class="sxs-lookup"><span data-stu-id="0211c-167">The `virtual` keyword specifies that derived classes may override the behavior.</span></span> <span data-ttu-id="0211c-168">También puede declarar métodos `abstract` en los que las clases derivadas deben reemplazar el comportamiento.</span><span class="sxs-lookup"><span data-stu-id="0211c-168">You can also declare `abstract` methods where derived classes must override the behavior.</span></span> <span data-ttu-id="0211c-169">La clase base no proporciona una implementación para un método `abstract`.</span><span class="sxs-lookup"><span data-stu-id="0211c-169">The base class does not provide an implementation for an `abstract` method.</span></span> <span data-ttu-id="0211c-170">A continuación, debe definir la implementación de dos de las nuevas clases que ha creado.</span><span class="sxs-lookup"><span data-stu-id="0211c-170">Next, you need to define the implementation for two of the new classes you've created.</span></span> <span data-ttu-id="0211c-171">Empiece por `InterestEarningAccount`:</span><span class="sxs-lookup"><span data-stu-id="0211c-171">Start with the `InterestEarningAccount`:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/InterestEarningAccount.cs" ID="ApplyMonthendInterest":::

<span data-ttu-id="0211c-172">Agregue el código siguiente a `LineOfCreditAccount`.</span><span class="sxs-lookup"><span data-stu-id="0211c-172">Add the following code to the `LineOfCreditAccount`.</span></span> <span data-ttu-id="0211c-173">El código niega el saldo para calcular un cargo de interés positivo que se retira de la cuenta:</span><span class="sxs-lookup"><span data-stu-id="0211c-173">The code negates the balance to compute a positive interest charge that is withdrawn from the account:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/LineOfCreditAccount.cs" ID="ApplyMonthendInterest":::

<span data-ttu-id="0211c-174">La clase `GiftCardAccount` necesita dos cambios para implementar su funcionalidad de fin de mes.</span><span class="sxs-lookup"><span data-stu-id="0211c-174">The `GiftCardAccount` class needs two changes to implement its month-end functionality.</span></span> <span data-ttu-id="0211c-175">En primer lugar, modifique el constructor para incluir una cantidad opcional para agregar cada mes:</span><span class="sxs-lookup"><span data-stu-id="0211c-175">First, modify the constructor to include an optional amount to add each month:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/GiftCardAccount.cs" ID="GiftCardAccountConstruction":::

<span data-ttu-id="0211c-176">El constructor proporciona un valor predeterminado para el valor `monthlyDeposit`, por lo que los llamadores pueden omitir `0` para ningún ingreso mensual.</span><span class="sxs-lookup"><span data-stu-id="0211c-176">The constructor provides a default value for the `monthlyDeposit` value so callers can omit a `0` for no monthly deposit.</span></span> <span data-ttu-id="0211c-177">A continuación, invalide el método `PerformMonthEndTransactions` para agregar el depósito mensual, si se estableció en un valor distinto de cero en el constructor:</span><span class="sxs-lookup"><span data-stu-id="0211c-177">Next, override the `PerformMonthEndTransactions` method to add the monthly deposit, if it was set to a non-zero value in the constructor:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/GiftCardAccount.cs" ID="AddMonthlyDeposit":::

<span data-ttu-id="0211c-178">La invalidación aplica el conjunto de depósitos mensual en el constructor.</span><span class="sxs-lookup"><span data-stu-id="0211c-178">The override applies the monthly deposit set in the constructor.</span></span> <span data-ttu-id="0211c-179">Agregue el código siguiente al método `Main` para probar estos cambios en `GiftCardAccount` y en `InterestEarningAccount`:</span><span class="sxs-lookup"><span data-stu-id="0211c-179">Add the following code to the `Main` method to test these changes for the `GiftCardAccount` and the `InterestEarningAccount`:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/Program.cs" ID="FirstTests":::

<span data-ttu-id="0211c-180">Verifique los resultados.</span><span class="sxs-lookup"><span data-stu-id="0211c-180">Verify the results.</span></span> <span data-ttu-id="0211c-181">Ahora, agregue un conjunto similar de código de prueba para `LineOfCreditAccount`:</span><span class="sxs-lookup"><span data-stu-id="0211c-181">Now, add a similar set of test code for the `LineOfCreditAccount`:</span></span>

```
    var lineOfCredit = new LineOfCreditAccount("line of credit", 0);
    // How much is too much to borrow?
    lineOfCredit.MakeWithdrawal(1000m, DateTime.Now, "Take out monthly advance");
    lineOfCredit.MakeDeposit(50m, DateTime.Now, "Pay back small amount");
    lineOfCredit.MakeWithdrawal(5000m, DateTime.Now, "Emergency funds for repairs");
    lineOfCredit.MakeDeposit(150m, DateTime.Now, "Partial restoration on repairs");
    lineOfCredit.PerformMonthEndTransactions();
    Console.WriteLine(lineOfCredit.GetAccountHistory());
 ```

<span data-ttu-id="0211c-182">Al agregar el código anterior y ejecutar el programa, verá algo parecido al siguiente error:</span><span class="sxs-lookup"><span data-stu-id="0211c-182">When you add the preceding code and run the program, you'll see something like the following error:</span></span>

```console
Unhandled exception. System.ArgumentOutOfRangeException: Amount of deposit must be positive (Parameter 'amount')
   at OOProgramming.BankAccount.MakeDeposit(Decimal amount, DateTime date, String note) in BankAccount.cs:line 42
   at OOProgramming.BankAccount..ctor(String name, Decimal initialBalance) in BankAccount.cs:line 31
   at OOProgramming.LineOfCreditAccount..ctor(String name, Decimal initialBalance) in LineOfCreditAccount.cs:line 9
   at OOProgramming.Program.Main(String[] args) in Program.cs:line 29
```

> [!NOTE]
> <span data-ttu-id="0211c-183">La salida real incluye la ruta de acceso completa a la carpeta con el proyecto.</span><span class="sxs-lookup"><span data-stu-id="0211c-183">The actual output includes the full path to the folder with the project.</span></span> <span data-ttu-id="0211c-184">Los nombres de carpeta se omitieron para ser más breves.</span><span class="sxs-lookup"><span data-stu-id="0211c-184">The folder names were omitted for brevity.</span></span> <span data-ttu-id="0211c-185">Además, dependiendo del formato del código, los números de línea pueden ser ligeramente diferentes.</span><span class="sxs-lookup"><span data-stu-id="0211c-185">Also, depending on your code format, the line numbers may be slightly different.</span></span>

<span data-ttu-id="0211c-186">Este código produce un error porque `BankAccount` supone que el saldo inicial debe ser mayor que 0.</span><span class="sxs-lookup"><span data-stu-id="0211c-186">This code fails because the `BankAccount` assumes that the initial balance must be greater than 0.</span></span> <span data-ttu-id="0211c-187">Otra suposición incorporada en la clase `BankAccount` es que el saldo no puede entrar en cifras negativas.</span><span class="sxs-lookup"><span data-stu-id="0211c-187">Another assumption baked into the `BankAccount` class is that the balance can't go negative.</span></span> <span data-ttu-id="0211c-188">Lo que sucede que es se rechazan las retiradas que provocan un descubierto en la cuenta.</span><span class="sxs-lookup"><span data-stu-id="0211c-188">Instead, any withdrawal that overdraws the account is rejected.</span></span> <span data-ttu-id="0211c-189">Ambas suposiciones deben cambiar.</span><span class="sxs-lookup"><span data-stu-id="0211c-189">Both of those assumptions need to change.</span></span> <span data-ttu-id="0211c-190">La línea de la cuenta de crédito comienza en 0, y generalmente tendrá un saldo negativo.</span><span class="sxs-lookup"><span data-stu-id="0211c-190">The line of credit account starts at 0, and generally will have a negative balance.</span></span> <span data-ttu-id="0211c-191">Además, si un cliente retira demasiado dinero, generará un cargo.</span><span class="sxs-lookup"><span data-stu-id="0211c-191">Also, if a customer borrows too much money, they incur a fee.</span></span> <span data-ttu-id="0211c-192">La transacción se acepta, solo que cuesta más.</span><span class="sxs-lookup"><span data-stu-id="0211c-192">The transaction is accepted, it just costs more.</span></span> <span data-ttu-id="0211c-193">La primera regla se puede implementar agregando un argumento opcional al constructor `BankAccount` que especifica el saldo mínimo.</span><span class="sxs-lookup"><span data-stu-id="0211c-193">The first rule can be implemented by adding an optional argument to the `BankAccount` constructor that specifies the minimum balance.</span></span> <span data-ttu-id="0211c-194">El valor predeterminado es `0`.</span><span class="sxs-lookup"><span data-stu-id="0211c-194">The default is `0`.</span></span> <span data-ttu-id="0211c-195">La segunda regla requiere un mecanismo que permita que las clases derivadas modifiquen el algoritmo predeterminado.</span><span class="sxs-lookup"><span data-stu-id="0211c-195">The second rule requires a mechanism that enables derived classes to modify the default algorithm.</span></span> <span data-ttu-id="0211c-196">En cierto sentido, la clase base "pregunta" al tipo derivado qué debe ocurrir cuando hay un descubierto.</span><span class="sxs-lookup"><span data-stu-id="0211c-196">In a sense, the base class "asks" the derived type what should happen when there's an overdraft.</span></span> <span data-ttu-id="0211c-197">El comportamiento predeterminado es rechazar la transacción generando una excepción.</span><span class="sxs-lookup"><span data-stu-id="0211c-197">The default behavior is to reject the transaction by throwing an exception.</span></span>

<span data-ttu-id="0211c-198">Comencemos agregando un segundo constructor que incluya un parámetro `minimumBalance` opcional.</span><span class="sxs-lookup"><span data-stu-id="0211c-198">Let's start by adding a second constructor that includes an optional `minimumBalance` parameter.</span></span> <span data-ttu-id="0211c-199">Este nuevo constructor se ocupa de todas las acciones que realiza el constructor existente.</span><span class="sxs-lookup"><span data-stu-id="0211c-199">This new constructor does all the actions done by the existing constructor.</span></span> <span data-ttu-id="0211c-200">Además, establece la propiedad del saldo mínimo.</span><span class="sxs-lookup"><span data-stu-id="0211c-200">Also, it sets the minimum balance property.</span></span> <span data-ttu-id="0211c-201">Podría copiar el cuerpo del constructor existente.</span><span class="sxs-lookup"><span data-stu-id="0211c-201">You could copy the body of the existing constructor.</span></span> <span data-ttu-id="0211c-202">Sin embargo, esto implica que dos ubicaciones cambiarán en el futuro.</span><span class="sxs-lookup"><span data-stu-id="0211c-202">but that means two locations to change in the future.</span></span> <span data-ttu-id="0211c-203">Lo que puede hacer es usar un *encadenamiento de constructores* para que un constructor llame a otro.</span><span class="sxs-lookup"><span data-stu-id="0211c-203">Instead, you can use *constructor chaining* to have one constructor call another.</span></span> <span data-ttu-id="0211c-204">En el código siguiente se muestran los dos constructores y el nuevo campo adicional:</span><span class="sxs-lookup"><span data-stu-id="0211c-204">The following code shows the two constructors and the new additional field:</span></span>

 :::code language="csharp" source="./snippets/object-oriented-programming/BankAccount.cs" ID="ConstructorModifications":::

<span data-ttu-id="0211c-205">En el código anterior se muestran dos técnicas nuevas.</span><span class="sxs-lookup"><span data-stu-id="0211c-205">The preceding code shows two new techniques.</span></span> <span data-ttu-id="0211c-206">En primer lugar, el campo `minimumBalance` está marcado como `readonly`.</span><span class="sxs-lookup"><span data-stu-id="0211c-206">First, the `minimumBalance` field is marked as `readonly`.</span></span> <span data-ttu-id="0211c-207">Esto significa que el valor no se puede cambiar después de que se construya el objeto.</span><span class="sxs-lookup"><span data-stu-id="0211c-207">That means the value cannot be changed after the object is constructed.</span></span> <span data-ttu-id="0211c-208">Una vez que se crea `BankAccount`, `minimumBalance` no puede cambiar.</span><span class="sxs-lookup"><span data-stu-id="0211c-208">Once a `BankAccount` is created, the `minimumBalance` can't change.</span></span> <span data-ttu-id="0211c-209">En segundo lugar, el constructor que toma dos parámetros utiliza `: this(name, initialBalance, 0) { }` como su implementación.</span><span class="sxs-lookup"><span data-stu-id="0211c-209">Second, the constructor that takes two parameters uses `: this(name, initialBalance, 0) { }` as its implementation.</span></span> <span data-ttu-id="0211c-210">La expresión `: this()` llama al otro constructor, el que tiene tres parámetros.</span><span class="sxs-lookup"><span data-stu-id="0211c-210">The `: this()` expression calls the other constructor, the one with three parameters.</span></span> <span data-ttu-id="0211c-211">Esta técnica permite tener una única implementación para inicializar un objeto, aunque el código de cliente puede elegir uno de muchos constructores.</span><span class="sxs-lookup"><span data-stu-id="0211c-211">This technique allows you to have a single implementation for initializing an object even though client code can choose one of many constructors.</span></span>

<span data-ttu-id="0211c-212">Esta implementación solo llama a `MakeDeposit` si el saldo inicial es mayor que `0`.</span><span class="sxs-lookup"><span data-stu-id="0211c-212">This implementation calls `MakeDeposit` only if the initial balance is greater than `0`.</span></span> <span data-ttu-id="0211c-213">Esto conserva la regla de que los depósitos deben ser positivos, pero permite que la cuenta de crédito se abra con un saldo de `0`.</span><span class="sxs-lookup"><span data-stu-id="0211c-213">That preserves the rule that deposits must be positive, yet lets the credit account open with a `0` balance.</span></span>

<span data-ttu-id="0211c-214">Ahora que la clase `BankAccount` tiene un campo de solo lectura para el saldo mínimo, el último cambio es modificar la codificación rígida `0` a `minimumBalance` en el método `MakeWithdrawal`:</span><span class="sxs-lookup"><span data-stu-id="0211c-214">Now that the `BankAccount` class has a read-only field for the minimum balance, the final change is to change the hard code `0` to `minimumBalance` in the `MakeWithdrawal` method:</span></span>

```csharp
if (Balance - amount < minimumBalance)
```

<span data-ttu-id="0211c-215">Después de extender la clase `BankAccount`, puede modificar el constructor `LineOfCreditAccount` para llamar al nuevo constructor base, como se muestra en el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="0211c-215">After extending the `BankAccount` class, you can modify the `LineOfCreditAccount` constructor to call the new base constructor, as shown in the following code:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/LineOfCreditAccount.cs" ID="ConstructLineOfCredit":::

<span data-ttu-id="0211c-216">Observe que el constructor `LineOfCreditAccount` cambia el signo del parámetro `creditLimit` para que coincida con el significado del parámetro `minimumBalance`.</span><span class="sxs-lookup"><span data-stu-id="0211c-216">Notice that the `LineOfCreditAccount` constructor changes the sign of the `creditLimit` parameter so it matches the meaning of the `minimumBalance` parameter.</span></span>

## <a name="different-overdraft-rules"></a><span data-ttu-id="0211c-217">Diferentes reglas de descubierto</span><span class="sxs-lookup"><span data-stu-id="0211c-217">Different overdraft rules</span></span>

<span data-ttu-id="0211c-218">La última característica que se va a agregar permite a `LineOfCreditAccount` cobrar una cuota por sobrepasar el límite de crédito en lugar de rechazar la transacción.</span><span class="sxs-lookup"><span data-stu-id="0211c-218">The last feature to add enables the `LineOfCreditAccount` to charge a fee for going over the credit limit instead of refusing the transaction.</span></span>

<span data-ttu-id="0211c-219">Una técnica consiste en definir una función virtual en la que se implemente el comportamiento requerido.</span><span class="sxs-lookup"><span data-stu-id="0211c-219">One technique is to define a virtual function where you implement the required behavior.</span></span> <span data-ttu-id="0211c-220">La clase `BankAccount` refactoriza el método `MakeWithdrawal` en dos métodos.</span><span class="sxs-lookup"><span data-stu-id="0211c-220">The `BankAccount` class refactors the `MakeWithdrawal` method into two methods.</span></span> <span data-ttu-id="0211c-221">El nuevo método realiza la acción especificada cuando la retirada toma el saldo por debajo del mínimo.</span><span class="sxs-lookup"><span data-stu-id="0211c-221">The new method does the specified action when the withdrawal takes the balance below the minimum.</span></span> <span data-ttu-id="0211c-222">El método `MakeWithdrawal` existente tiene el siguiente código:</span><span class="sxs-lookup"><span data-stu-id="0211c-222">The existing `MakeWithdrawal` method has the following code:</span></span>

```csharp
public void MakeWithdrawal(decimal amount, DateTime date, string note)
{
    if (amount <= 0)
    {
        throw new ArgumentOutOfRangeException(nameof(amount), "Amount of withdrawal must be positive");
    }
    if (Balance - amount < minimumBalance)
    {
        throw new InvalidOperationException("Not sufficient funds for this withdrawal");
    }
    var withdrawal = new Transaction(-amount, date, note);
    allTransactions.Add(withdrawal);
}
```

<span data-ttu-id="0211c-223">Reemplácelo por el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="0211c-223">Replace it with the following code:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/BankAccount.cs" ID="RefactoredMakeWithdrawal":::

<span data-ttu-id="0211c-224">El método agregado es `protected`, lo que significa que solo se puede llamar desde clases derivadas.</span><span class="sxs-lookup"><span data-stu-id="0211c-224">The added method is `protected`, which means that it can be called only from derived classes.</span></span> <span data-ttu-id="0211c-225">Esa declaración impide que otros clientes llamen al método.</span><span class="sxs-lookup"><span data-stu-id="0211c-225">That declaration prevents other clients from calling the method.</span></span> <span data-ttu-id="0211c-226">También es `virtual` para que las clases derivadas puedan cambiar el comportamiento.</span><span class="sxs-lookup"><span data-stu-id="0211c-226">It's also `virtual` so that derived classes can change the behavior.</span></span> <span data-ttu-id="0211c-227">El tipo de valor devuelto es `Transaction?`.</span><span class="sxs-lookup"><span data-stu-id="0211c-227">The return type is a `Transaction?`.</span></span> <span data-ttu-id="0211c-228">La anotación `?` indica que el método puede devolver `null`.</span><span class="sxs-lookup"><span data-stu-id="0211c-228">The `?` annotation indicates that the method may return `null`.</span></span> <span data-ttu-id="0211c-229">Agregue la siguiente implementación en `LineOfCreditAccount` para cobrar una cuota cuando se supere el límite de retirada:</span><span class="sxs-lookup"><span data-stu-id="0211c-229">Add the following implementation in the `LineOfCreditAccount` to charge a fee when the withdrawal limit is exceeded:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/LineOfCreditAccount.cs" ID="AddOverdraftFee":::

<span data-ttu-id="0211c-230">El reemplazo devuelve una transacción de cuota cuando en la cuenta se produce un descubierto.</span><span class="sxs-lookup"><span data-stu-id="0211c-230">The override returns a fee transaction when the account is overdrawn.</span></span> <span data-ttu-id="0211c-231">Si la retirada no supera el límite, el método devuelve una transacción `null`.</span><span class="sxs-lookup"><span data-stu-id="0211c-231">If the withdrawal doesn't go over the limit, the method returns a `null` transaction.</span></span> <span data-ttu-id="0211c-232">Esto indica que no hay ninguna cuota.</span><span class="sxs-lookup"><span data-stu-id="0211c-232">That indicates there's no fee.</span></span> <span data-ttu-id="0211c-233">Pruebe estos cambios agregando el código siguiente al método `Main` en la clase `Program`:</span><span class="sxs-lookup"><span data-stu-id="0211c-233">Test these changes by adding the following code to your `Main` method in the `Program` class:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/Program.cs" ID="TestLineOfCredit":::

<span data-ttu-id="0211c-234">Ejecute el programa y compruebe los resultados.</span><span class="sxs-lookup"><span data-stu-id="0211c-234">Run the program, and check the results.</span></span>

## <a name="summary"></a><span data-ttu-id="0211c-235">Resumen</span><span class="sxs-lookup"><span data-stu-id="0211c-235">Summary</span></span>

<span data-ttu-id="0211c-236">Si se ha quedado bloqueado, puede consultar el origen de este tutorial [en el repositorio de GitHub](https://github.com/dotnet/docs/tree/master/docs/csharp/tutorials/intro-to-csharp/snippets/object-oriented-programming).</span><span class="sxs-lookup"><span data-stu-id="0211c-236">If you got stuck, you can see the source for this tutorial [in our GitHub repo](https://github.com/dotnet/docs/tree/master/docs/csharp/tutorials/intro-to-csharp/snippets/object-oriented-programming).</span></span>

<span data-ttu-id="0211c-237">En este tutorial se han mostrado muchas de las técnicas que se usan en la programación orientada a objetos:</span><span class="sxs-lookup"><span data-stu-id="0211c-237">This tutorial demonstrated many of the techniques used in Object-Oriented programming:</span></span>

- <span data-ttu-id="0211c-238">Usó la *abstracción* cuando mantenía muchos detalles `private` en cada clase.</span><span class="sxs-lookup"><span data-stu-id="0211c-238">You used *Abstraction* when you kept many details `private` in each class.</span></span>
- <span data-ttu-id="0211c-239">Usó la *encapsulación* cuando definió clases para cada uno de los distintos tipos de cuenta.</span><span class="sxs-lookup"><span data-stu-id="0211c-239">You used *Encapsulation* when you defined classes for each of the different account types.</span></span> <span data-ttu-id="0211c-240">Esas clases describían el comportamiento de ese tipo de cuenta.</span><span class="sxs-lookup"><span data-stu-id="0211c-240">Those classes described the behavior for that type of account.</span></span>
- <span data-ttu-id="0211c-241">Usó la *herencia* cuando aprovechó la implementación ya creada en la clase `BankAccount` para guardar el código.</span><span class="sxs-lookup"><span data-stu-id="0211c-241">You used *Inheritance* when you leveraged the implementation already created in the `BankAccount` class to save code.</span></span>
- <span data-ttu-id="0211c-242">Usó el *polimorfismo* cuando creó métodos `virtual` que las clases derivadas podrían reemplazar para crear un comportamiento específico para ese tipo de cuenta.</span><span class="sxs-lookup"><span data-stu-id="0211c-242">You used *Polymorphism* when you created `virtual` methods that derived classes could override to create specific behavior for that account type.</span></span>

<span data-ttu-id="0211c-243">Enhorabuena, ha completado todos nuestros tutoriales de introducción a C#.</span><span class="sxs-lookup"><span data-stu-id="0211c-243">Congratulations, you've finished all of our introduction to C# tutorials.</span></span> <span data-ttu-id="0211c-244">Para obtener más información, continúe con más [tutoriales](../index.md).</span><span class="sxs-lookup"><span data-stu-id="0211c-244">To learn more, try more of our [tutorials](../index.md).</span></span>
