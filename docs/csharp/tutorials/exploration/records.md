---
title: 'Uso de tipos de registros: tutorial de C#'
description: Obtenga información sobre cómo usar tipos de registros, compilar jerarquías de registros y cuándo elegir registros en lugar de clases.
ms.date: 11/12/2020
ms.openlocfilehash: 33075c4cafc9a91683960daa8101c9f1defaa36a
ms.sourcegitcommit: 9c589b25b005b9a7f87327646020eb85c3b6306f
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2021
ms.locfileid: "102258961"
---
# <a name="create-record-types"></a><span data-ttu-id="f2f05-103">Creación de tipos de registros</span><span class="sxs-lookup"><span data-stu-id="f2f05-103">Create record types</span></span>

<span data-ttu-id="f2f05-104">C# 9 incorpora *registros*, un nuevo tipo de referencia que se puede crear en lugar de clases o structs.</span><span class="sxs-lookup"><span data-stu-id="f2f05-104">C# 9 introduces *records*, a new reference type that you can create instead of classes or structs.</span></span> <span data-ttu-id="f2f05-105">Los registros se diferencian de las clases en que los tipos de registros usan *igualdad basada en valores*.</span><span class="sxs-lookup"><span data-stu-id="f2f05-105">Records are distinct from classes in that record types use *value-based equality*.</span></span> <span data-ttu-id="f2f05-106">Dos variables de un tipo de registro son iguales si las definiciones del tipo de registro son idénticas y si, en cada campo, los valores de ambos registros son iguales.</span><span class="sxs-lookup"><span data-stu-id="f2f05-106">Two variables of a record type are equal if the record type definitions are identical, and if for every field, the values in both records are equal.</span></span> <span data-ttu-id="f2f05-107">Dos variables de un tipo de clase son iguales si los objetos a los que se hace referencia son el mismo tipo de clase y las variables hacen referencia al mismo objeto.</span><span class="sxs-lookup"><span data-stu-id="f2f05-107">Two variables of a class type are equal if the objects referred to are the same class type and the variables refer to the same object.</span></span> <span data-ttu-id="f2f05-108">La igualdad basada en valores conlleva otras capacidades que probablemente quiera en los tipos de registros.</span><span class="sxs-lookup"><span data-stu-id="f2f05-108">Value-based equality implies other capabilities you'll probably want in record types.</span></span> <span data-ttu-id="f2f05-109">El compilador genera muchos de esos miembros al declarar un elemento `record` en lugar de `class`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-109">The compiler generates many of those members when you declare a `record` instead of a `class`.</span></span>

<span data-ttu-id="f2f05-110">En este tutorial, aprenderá a:</span><span class="sxs-lookup"><span data-stu-id="f2f05-110">In this tutorial, you'll learn how to:</span></span>

> [!div class="checklist"]
>
> - <span data-ttu-id="f2f05-111">Decidir si debe declarar un elemento `class` o `record`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-111">Decide if you should declare a `class` or a `record`.</span></span>
> - <span data-ttu-id="f2f05-112">Declarar tipos de registros y tipos de registros posicionales.</span><span class="sxs-lookup"><span data-stu-id="f2f05-112">Declare record types and positional record types.</span></span>
> - <span data-ttu-id="f2f05-113">Reemplazar los métodos por métodos generados por el compilador en los registros.</span><span class="sxs-lookup"><span data-stu-id="f2f05-113">Substitute your methods for compiler generated methods in records.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="f2f05-114">Prerrequisitos</span><span class="sxs-lookup"><span data-stu-id="f2f05-114">Prerequisites</span></span>

<span data-ttu-id="f2f05-115">Tiene que configurar la máquina para ejecutar .NET 5 o posterior, incluido el compilador de C# 9.0 o posterior.</span><span class="sxs-lookup"><span data-stu-id="f2f05-115">You'll need to set up your machine to run .NET 5 or later, including the C# 9.0 or later compiler.</span></span> <span data-ttu-id="f2f05-116">El compilador de C# 9.0 está disponible a partir de la [versión 16.8 de Visual Studio 2019](https://visualstudio.microsoft.com/vs) o del [SDK de .NET 5.0](https://dotnet.microsoft.com/download).</span><span class="sxs-lookup"><span data-stu-id="f2f05-116">The C# 9.0 compiler is available starting with [Visual Studio 2019 version 16.8](https://visualstudio.microsoft.com/vs) or the [.NET 5.0 SDK](https://dotnet.microsoft.com/download).</span></span>

## <a name="characteristics-of-records"></a><span data-ttu-id="f2f05-117">Características de los registros</span><span class="sxs-lookup"><span data-stu-id="f2f05-117">Characteristics of records</span></span>

<span data-ttu-id="f2f05-118">Un *registro* se define al declarar un tipo con la palabra clave `record` en lugar de `class` o `struct`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-118">You define a *record* by declaring a type with the `record` keyword, instead of the `class` or `struct` keyword.</span></span> <span data-ttu-id="f2f05-119">Un registro es un tipo de referencia y sigue la semántica de la igualdad basada en valores.</span><span class="sxs-lookup"><span data-stu-id="f2f05-119">A record is a reference type and follows value-based equality semantics.</span></span> <span data-ttu-id="f2f05-120">Para aplicar la semántica de valores, el compilador genera varios métodos para el tipo de registro:</span><span class="sxs-lookup"><span data-stu-id="f2f05-120">To enforce value semantics, the compiler generates several methods for your record type:</span></span>

- <span data-ttu-id="f2f05-121">Una invalidación de <xref:System.Object.Equals(System.Object)?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="f2f05-121">An override of <xref:System.Object.Equals(System.Object)?displayProperty=nameWithType>.</span></span>
- <span data-ttu-id="f2f05-122">Un método `Equals` virtual cuyo parámetro es el tipo de registro.</span><span class="sxs-lookup"><span data-stu-id="f2f05-122">A virtual `Equals` method whose parameter is the record type.</span></span>
- <span data-ttu-id="f2f05-123">Una invalidación de <xref:System.Object.GetHashCode?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="f2f05-123">An override of <xref:System.Object.GetHashCode?displayProperty=nameWithType>.</span></span>
- <span data-ttu-id="f2f05-124">Métodos para `operator ==` y `operator !=`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-124">Methods for `operator ==` and `operator !=`.</span></span>
- <span data-ttu-id="f2f05-125">Los tipos de registros implementan <xref:System.IEquatable%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="f2f05-125">Record types implement <xref:System.IEquatable%601?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="f2f05-126">Además, los registros proporcionan una invalidación de <xref:System.Object.ToString?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="f2f05-126">In addition, records provide an override of <xref:System.Object.ToString?displayProperty=nameWithType>.</span></span> <span data-ttu-id="f2f05-127">El compilador sintetiza métodos para mostrar registros mediante <xref:System.Object.ToString?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="f2f05-127">The compiler synthesizes methods for displaying records using <xref:System.Object.ToString?displayProperty=nameWithType>.</span></span> <span data-ttu-id="f2f05-128">Va a examinar esos miembros a medida que escribe el código de este tutorial.</span><span class="sxs-lookup"><span data-stu-id="f2f05-128">You'll explore those members as you write the code for this tutorial.</span></span> <span data-ttu-id="f2f05-129">Los registros admiten expresiones `with` para habilitar la mutación no destructiva de registros.</span><span class="sxs-lookup"><span data-stu-id="f2f05-129">Records support `with` expressions to enable non-destructive mutation of records.</span></span>

<span data-ttu-id="f2f05-130">También puede declarar *registros posicionales* mediante una sintaxis más concisa.</span><span class="sxs-lookup"><span data-stu-id="f2f05-130">You can also declare *positional records* using a more concise syntax.</span></span> <span data-ttu-id="f2f05-131">El compilador sintetiza más métodos automáticamente cuando se declaran registros posicionales:</span><span class="sxs-lookup"><span data-stu-id="f2f05-131">The compiler synthesizes more methods for you when you declare positional records:</span></span>

- <span data-ttu-id="f2f05-132">Un constructor primario cuyos parámetros coinciden con los parámetros posicionales en la declaración del registro.</span><span class="sxs-lookup"><span data-stu-id="f2f05-132">A primary constructor whose parameters match the positional parameters on the record declaration.</span></span>
- <span data-ttu-id="f2f05-133">Propiedades públicas init-only para cada parámetro de un constructor primario.</span><span class="sxs-lookup"><span data-stu-id="f2f05-133">Public init-only properties for each parameter of a primary constructor.</span></span>
- <span data-ttu-id="f2f05-134">Un método `Deconstruct` para extraer propiedades del registro.</span><span class="sxs-lookup"><span data-stu-id="f2f05-134">A `Deconstruct` method to extract properties from the record.</span></span>

## <a name="build-temperature-data"></a><span data-ttu-id="f2f05-135">Compilación de datos de temperatura</span><span class="sxs-lookup"><span data-stu-id="f2f05-135">Build temperature data</span></span>

<span data-ttu-id="f2f05-136">Los datos y las estadísticas se encuentran entre los escenarios en los que se recomienda usar registros.</span><span class="sxs-lookup"><span data-stu-id="f2f05-136">Data and statistics are among the scenarios where you'll want to use records.</span></span> <span data-ttu-id="f2f05-137">En este tutorial va a compilar una aplicación que calcula *grados día* para distintos usos.</span><span class="sxs-lookup"><span data-stu-id="f2f05-137">For this tutorial, you'll build an application that computes *degree days* for different uses.</span></span> <span data-ttu-id="f2f05-138">Los *grados día* son una medida de calor (o falta de él) a lo largo de un período de días, semanas o meses.</span><span class="sxs-lookup"><span data-stu-id="f2f05-138">*Degree days* are a measure of heat (or lack of heat) over a period of days, weeks, or months.</span></span> <span data-ttu-id="f2f05-139">Los grados día realizan un seguimiento del uso energético y lo predicen.</span><span class="sxs-lookup"><span data-stu-id="f2f05-139">Degree days track and predict energy usage.</span></span> <span data-ttu-id="f2f05-140">Más días más cálidos significan más aire acondicionado, mientras que más días más fríos implican un mayor uso de calefacción.</span><span class="sxs-lookup"><span data-stu-id="f2f05-140">More hotter days means more air conditioning, and more colder days means more furnace usage.</span></span> <span data-ttu-id="f2f05-141">Los grados día ayudan a administrar las poblaciones de plantas.</span><span class="sxs-lookup"><span data-stu-id="f2f05-141">Degree days help manage plant populations.</span></span> <span data-ttu-id="f2f05-142">Los grados día tienen correlación con el crecimiento de las plantas a medida que cambian las estaciones.</span><span class="sxs-lookup"><span data-stu-id="f2f05-142">Degree days correlate to plant growth as the seasons change.</span></span> <span data-ttu-id="f2f05-143">Los grados día ayudan a realizar un seguimiento de las migraciones animales de especies que se desplazan según el clima.</span><span class="sxs-lookup"><span data-stu-id="f2f05-143">Degree days help track animal migrations for species that travel to match climate.</span></span>

<span data-ttu-id="f2f05-144">La fórmula se basa en la temperatura media de un día determinado y una temperatura de base de referencia.</span><span class="sxs-lookup"><span data-stu-id="f2f05-144">The formula is based on the mean temperature on a given day and a baseline temperature.</span></span> <span data-ttu-id="f2f05-145">Para calcular los grados día a lo largo del tiempo, necesita la temperatura mínima y máxima de cada día durante un período de tiempo.</span><span class="sxs-lookup"><span data-stu-id="f2f05-145">To compute degree days over time, you'll need the high and low temperature each day for a period of time.</span></span> <span data-ttu-id="f2f05-146">Comencemos por crear una nueva aplicación.</span><span class="sxs-lookup"><span data-stu-id="f2f05-146">Let's start by creating a new application.</span></span> <span data-ttu-id="f2f05-147">Cree una nueva aplicación de consola.</span><span class="sxs-lookup"><span data-stu-id="f2f05-147">Make a new console application.</span></span> <span data-ttu-id="f2f05-148">Cree un nuevo tipo de registro en un nuevo archivo denominado "DailyTemperature.cs":</span><span class="sxs-lookup"><span data-stu-id="f2f05-148">Create a new record type in a new file named "DailyTemperature.cs":</span></span>

:::code language="csharp" source="snippets/record-types/InterimSteps.cs" ID="DailyRecord":::

<span data-ttu-id="f2f05-149">El código anterior define un *registro posicional*.</span><span class="sxs-lookup"><span data-stu-id="f2f05-149">The preceding code defines a *positional record*.</span></span> <span data-ttu-id="f2f05-150">Ha creado un tipo de referencia que contiene dos propiedades: `HighTemp` y `LowTemp`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-150">You've created a reference type that contains two properties: `HighTemp`, and `LowTemp`.</span></span> <span data-ttu-id="f2f05-151">Esas propiedades son *propiedades init-only*, lo que significa que se pueden establecer en el constructor o mediante un inicializador de propiedad.</span><span class="sxs-lookup"><span data-stu-id="f2f05-151">Those properties are *init only properties*, meaning they can be set in the constructor or using a property initializer.</span></span> <span data-ttu-id="f2f05-152">El tipo `DailyTemperature` también tiene un *constructor primario* con dos parámetros que coinciden con las dos propiedades.</span><span class="sxs-lookup"><span data-stu-id="f2f05-152">The `DailyTemperature` type also has a *primary constructor* that has two parameters that match the two properties.</span></span> <span data-ttu-id="f2f05-153">Use el constructor primario para inicializar un registro `DailyTemperature`:</span><span class="sxs-lookup"><span data-stu-id="f2f05-153">You use the primary constructor to initialize a `DailyTemperature` record:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="DeclareData":::

<span data-ttu-id="f2f05-154">Puede agregar sus propias propiedades o métodos a los registros, incluidos los registros posicionales.</span><span class="sxs-lookup"><span data-stu-id="f2f05-154">You can add your own properties or methods to records, including positional records.</span></span> <span data-ttu-id="f2f05-155">Tiene que calcular la temperatura media de cada día.</span><span class="sxs-lookup"><span data-stu-id="f2f05-155">You'll need to compute the mean temperature for each day.</span></span> <span data-ttu-id="f2f05-156">Puede agregar esa propiedad al registro `DailyTemperature`:</span><span class="sxs-lookup"><span data-stu-id="f2f05-156">You can add that property to the `DailyTemperature` record:</span></span>

:::code language="csharp" source="snippets/record-types/DailyTemperature.cs" ID="TemperatureRecord":::

<span data-ttu-id="f2f05-157">Vamos a asegurarnos de que puede usar estos datos.</span><span class="sxs-lookup"><span data-stu-id="f2f05-157">Let's make sure you can use this data.</span></span> <span data-ttu-id="f2f05-158">Agregue el código siguiente al método `Main`:</span><span class="sxs-lookup"><span data-stu-id="f2f05-158">Add the following code to your `Main` method:</span></span>

```csharp
foreach (var item in data)
    Console.WriteLine(item);
```

<span data-ttu-id="f2f05-159">Ejecute la aplicación y verá un resultado similar a la siguiente pantalla (se han quitado varias filas por motivos de espacio):</span><span class="sxs-lookup"><span data-stu-id="f2f05-159">Run your application, and you'll see output that looks similar to the following display (several rows removed for space):</span></span>

```dotnetcli
DailyTemperature { HighTemp = 57, LowTemp = 30, Mean = 43.5 }
DailyTemperature { HighTemp = 60, LowTemp = 35, Mean = 47.5 }


DailyTemperature { HighTemp = 80, LowTemp = 60, Mean = 70 }
DailyTemperature { HighTemp = 85, LowTemp = 66, Mean = 75.5 }
```

<span data-ttu-id="f2f05-160">El código anterior muestra el resultado de la invalidación de `ToString` sintetizada por el compilador.</span><span class="sxs-lookup"><span data-stu-id="f2f05-160">The preceding code shows the output from the override of `ToString` synthesized by the compiler.</span></span> <span data-ttu-id="f2f05-161">Si prefiere otro texto, puede escribir su propia versión de `ToString`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-161">If you prefer different text, you can write your own version of `ToString`.</span></span> <span data-ttu-id="f2f05-162">Eso evita que el compilador sintetice una versión automáticamente.</span><span class="sxs-lookup"><span data-stu-id="f2f05-162">That prevents the compiler from synthesizing a version for you.</span></span>

## <a name="compute-degree-days"></a><span data-ttu-id="f2f05-163">Cálculo de grados día</span><span class="sxs-lookup"><span data-stu-id="f2f05-163">Compute degree days</span></span>

<span data-ttu-id="f2f05-164">Para calcular los grados día, tome la diferencia entre una temperatura de base de referencia y la temperatura media de un día determinado.</span><span class="sxs-lookup"><span data-stu-id="f2f05-164">To compute degree days, you take the difference from a baseline temperature and the mean temperature on a given day.</span></span> <span data-ttu-id="f2f05-165">Para medir el calor a lo largo del tiempo, descarte todos los días en los que la temperatura media esté por debajo de la base de referencia.</span><span class="sxs-lookup"><span data-stu-id="f2f05-165">To measure heat over time, you discard any days where the mean temperature is below the baseline.</span></span> <span data-ttu-id="f2f05-166">Para medir el frío a lo largo del tiempo, descarte todos los días en los que la temperatura media esté por encima de la base de referencia.</span><span class="sxs-lookup"><span data-stu-id="f2f05-166">To measure cold over time, you discard any days where the mean temperature is above the baseline.</span></span> <span data-ttu-id="f2f05-167">Por ejemplo, en EE. UU. se usa 65F como base de los grados día de calefacción y refrigeración.</span><span class="sxs-lookup"><span data-stu-id="f2f05-167">For example, the U.S. uses 65F as the base for both heating  and cooling degree days.</span></span> <span data-ttu-id="f2f05-168">Esa es la temperatura a la que no se necesita calefacción ni refrigeración.</span><span class="sxs-lookup"><span data-stu-id="f2f05-168">That's the temperature where no heating or cooling is needed.</span></span> <span data-ttu-id="f2f05-169">Si un día tiene una temperatura media de 70F, ese día es 5 grados día de refrigeración y 0 grados día de calefacción.</span><span class="sxs-lookup"><span data-stu-id="f2f05-169">If a day has a mean temperature of 70F, that day is 5 cooling degree days and 0 heating degree days.</span></span> <span data-ttu-id="f2f05-170">A la inversa, si la temperatura media es de 55F, ese día es 10 grados día de calefacción y 0 grados día de refrigeración.</span><span class="sxs-lookup"><span data-stu-id="f2f05-170">Conversely, if the mean temperature is 55F, that day is 10 heating degree days and 0 cooling degree days.</span></span>

<span data-ttu-id="f2f05-171">Estas fórmulas se pueden expresar como una pequeña jerarquía de tipos de registros: un tipo de grado día abstracto y dos tipos concretos de grados días de calefacción y grados día de refrigeración.</span><span class="sxs-lookup"><span data-stu-id="f2f05-171">You can express these formulas as a small hierarchy of record types: an abstract degree day type and two concrete types for heating degree days and cooling degree days.</span></span> <span data-ttu-id="f2f05-172">Estos tipos también pueden ser registros posicionales.</span><span class="sxs-lookup"><span data-stu-id="f2f05-172">These types can also be positional records.</span></span> <span data-ttu-id="f2f05-173">Toman una temperatura de base de referencia y una secuencia de registros de temperatura diaria como argumentos del constructor primario:</span><span class="sxs-lookup"><span data-stu-id="f2f05-173">They take a baseline temperature and a sequence of daily temperature records as arguments to the primary constructor:</span></span>

:::code language="csharp" source="snippets/record-types/InterimSteps.cs" ID="DegreeDaysRecords":::

<span data-ttu-id="f2f05-174">El registro `DegreeDays` abstracto es la clase base compartida de los registros `HeatingDegreeDays` y `CoolingDegreeDays`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-174">The abstract `DegreeDays` record is the shared base class for both the `HeatingDegreeDays` and `CoolingDegreeDays` records.</span></span> <span data-ttu-id="f2f05-175">Las declaraciones del constructor primario en los registros derivados muestran cómo administrar la inicialización de registros base.</span><span class="sxs-lookup"><span data-stu-id="f2f05-175">The primary constructor declarations on the derived records show how to manage base record initialization.</span></span> <span data-ttu-id="f2f05-176">El registro derivado declara parámetros para todos los parámetros del constructor primario del registro base.</span><span class="sxs-lookup"><span data-stu-id="f2f05-176">Your derived record declares parameters for all the parameters in the base record primary constructor.</span></span> <span data-ttu-id="f2f05-177">El registro base declara e inicializa esas propiedades.</span><span class="sxs-lookup"><span data-stu-id="f2f05-177">The base record declares and initializes those properties.</span></span> <span data-ttu-id="f2f05-178">El registro derivado no las oculta, sino que solo crea e inicializa propiedades para los parámetros que no se han declarado en su registro base.</span><span class="sxs-lookup"><span data-stu-id="f2f05-178">The derived record doesn't hide them, but only creates and initializes properties for parameters that aren't declared in its base record.</span></span> <span data-ttu-id="f2f05-179">En este ejemplo, los registros derivados no agregan nuevos parámetros del constructor primario.</span><span class="sxs-lookup"><span data-stu-id="f2f05-179">In this example, the derived records don't add new primary constructor parameters.</span></span> <span data-ttu-id="f2f05-180">Pruebe el código mediante la adición del código siguiente a su método `Main`:</span><span class="sxs-lookup"><span data-stu-id="f2f05-180">Test your code by adding the following code to your `Main` method:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="HeatingAndCooling":::

<span data-ttu-id="f2f05-181">Se obtiene un resultado similar a la siguiente pantalla:</span><span class="sxs-lookup"><span data-stu-id="f2f05-181">You'll get output like the following display:</span></span>

```dotnetcli
HeatingDegreeDays { BaseTemperature = 65, TempRecords = record_types.DailyTemperature[], DegreeDays = 85 }
CoolingDegreeDays { BaseTemperature = 65, TempRecords = record_types.DailyTemperature[], DegreeDays = 71.5 }
```

## <a name="define-compiler-synthesized-methods"></a><span data-ttu-id="f2f05-182">Definición de métodos sintetizados por el compilador</span><span class="sxs-lookup"><span data-stu-id="f2f05-182">Define compiler-synthesized methods</span></span>

<span data-ttu-id="f2f05-183">El código calcula el número correcto de grados día de calefacción y refrigeración durante ese período de tiempo.</span><span class="sxs-lookup"><span data-stu-id="f2f05-183">Your code calculates the correct number of heating and cooling degree days over that period of time.</span></span> <span data-ttu-id="f2f05-184">Pero en este ejemplo se muestra por qué es recomendable reemplazar algunos de los métodos sintetizados por registros.</span><span class="sxs-lookup"><span data-stu-id="f2f05-184">But this example shows why you may want to replace some of the synthesized methods for records.</span></span> <span data-ttu-id="f2f05-185">Puede declarar su propia versión de cualquiera de los métodos sintetizados por el compilador en un tipo de registro, excepto el método Clone.</span><span class="sxs-lookup"><span data-stu-id="f2f05-185">You can declare your own version of any of the compiler-synthesized methods in a record type except the clone method.</span></span> <span data-ttu-id="f2f05-186">El método Clone tiene un nombre generado por el compilador y no se puede proporcionar otra implementación.</span><span class="sxs-lookup"><span data-stu-id="f2f05-186">The clone method has a compiler generated name and you cannot provide a different implementation.</span></span> <span data-ttu-id="f2f05-187">Estos métodos sintetizados incluyen un constructor de copias, los miembros de la interfaz <xref:System.IEquatable%601?displayProperty=nameWithType>, las pruebas de igualdad y desigualdad y <xref:System.Object.GetHashCode>.</span><span class="sxs-lookup"><span data-stu-id="f2f05-187">These synthesized methods include a copy constructor, the members of the <xref:System.IEquatable%601?displayProperty=nameWithType> interface, equality and inequality tests, and <xref:System.Object.GetHashCode>.</span></span> <span data-ttu-id="f2f05-188">Para los fines de este artículo, se va a sintetizar `PrintMembers`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-188">For this purpose, you'll synthesize `PrintMembers`.</span></span> <span data-ttu-id="f2f05-189">También puede declarar su propio elemento `ToString`, pero `PrintMembers` constituye una mejor opción para los escenarios de herencia.</span><span class="sxs-lookup"><span data-stu-id="f2f05-189">You could also declare your own `ToString`, but `PrintMembers` provides a better option for inheritance scenarios.</span></span> <span data-ttu-id="f2f05-190">Para proporcionar su propia versión de un método sintetizado, la firma debe coincidir con el método sintetizado.</span><span class="sxs-lookup"><span data-stu-id="f2f05-190">To provide your own version of a synthesized method, the signature must match the synthesized method.</span></span>

<span data-ttu-id="f2f05-191">El elemento `TempRecords` del resultado de la consola no es útil.</span><span class="sxs-lookup"><span data-stu-id="f2f05-191">The `TempRecords` element in the console output isn't useful.</span></span> <span data-ttu-id="f2f05-192">Muestra el tipo, pero nada más.</span><span class="sxs-lookup"><span data-stu-id="f2f05-192">It displays the type, but nothing else.</span></span> <span data-ttu-id="f2f05-193">Puede cambiar este comportamiento si proporciona su propia implementación del método sintetizado `PrintMembers`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-193">You can change this behavior by providing your own implementation of the synthesized `PrintMembers` method.</span></span> <span data-ttu-id="f2f05-194">La firma depende de los modificadores aplicados a la declaración de `record`:</span><span class="sxs-lookup"><span data-stu-id="f2f05-194">The signature depends on modifiers applied to the `record` declaration:</span></span>

- <span data-ttu-id="f2f05-195">Si un tipo de registro es `sealed`, la firma es `private bool PrintMembers(StringBuilder builder);`</span><span class="sxs-lookup"><span data-stu-id="f2f05-195">If a record type is `sealed`, the signature is `private bool PrintMembers(StringBuilder builder);`</span></span>
- <span data-ttu-id="f2f05-196">Si un tipo de registro no es `sealed` y deriva de `object` (es decir, no declara un registro base), la firma es `protected virtual bool PrintMembers(StringBuilder builder);`</span><span class="sxs-lookup"><span data-stu-id="f2f05-196">If a record type isn't `sealed` and derives from `object` (that is, it doesn't declare a base record), the signature is `protected virtual bool PrintMembers(StringBuilder builder);`</span></span>
- <span data-ttu-id="f2f05-197">Si un tipo de registro no es `sealed` y deriva de otro registro, la firma es `protected override bool PrintMembers(StringBuilder builder);`</span><span class="sxs-lookup"><span data-stu-id="f2f05-197">If a record type isn't `sealed` and derives from another record, the signature is `protected override bool PrintMembers(StringBuilder builder);`</span></span>

<span data-ttu-id="f2f05-198">Estas reglas son más fáciles de asimilar si se entiende el propósito de `PrintMembers`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-198">These rules are easiest to comprehend through understanding the purpose of `PrintMembers`.</span></span> <span data-ttu-id="f2f05-199">`PrintMembers` agrega información sobre cada propiedad de un tipo de registro a una cadena.</span><span class="sxs-lookup"><span data-stu-id="f2f05-199">`PrintMembers` adds information about each property in a record type to a string.</span></span> <span data-ttu-id="f2f05-200">El contrato requiere que los registros base agreguen sus miembros a la pantalla y da por hecho que los miembros derivados van a agregar sus miembros.</span><span class="sxs-lookup"><span data-stu-id="f2f05-200">The contract requires base records to add their members to the display and assumes derived members will add their members.</span></span> <span data-ttu-id="f2f05-201">Cada tipo de registro sintetiza una invalidación de `ToString` que es similar al ejemplo siguiente de `HeatingDegreeDays`:</span><span class="sxs-lookup"><span data-stu-id="f2f05-201">Each record type synthesizes a `ToString` override that looks similar to the following example for `HeatingDegreeDays`:</span></span>

```csharp
public override string ToString()
{
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.Append("HeatingDegreeDays");
    stringBuilder.Append(" { ");
    if (PrintMembers(stringBuilder))
    {
        stringBuilder.Append(" ");
    }
    stringBuilder.Append("}");
    return stringBuilder.ToString();
}
```

<span data-ttu-id="f2f05-202">Declare un método `PrintMembers` en el registro `DegreeDays` que no imprima el tipo de la colección:</span><span class="sxs-lookup"><span data-stu-id="f2f05-202">You declare a `PrintMembers` method in the `DegreeDays` record that doesn't print the type of the collection:</span></span>

:::code language="csharp" source="snippets/record-types/DegreeDays.cs" ID="AddPrintMembers":::

<span data-ttu-id="f2f05-203">La firma declara un método `virtual protected` para que coincida con la versión del compilador.</span><span class="sxs-lookup"><span data-stu-id="f2f05-203">The signature declares a `virtual protected` method to match the compiler's version.</span></span> <span data-ttu-id="f2f05-204">No se preocupe si obtiene los descriptores de acceso incorrectos; el lenguaje aplica la firma correcta.</span><span class="sxs-lookup"><span data-stu-id="f2f05-204">Don't worry if you get the accessors wrong; the language enforces the correct signature.</span></span> <span data-ttu-id="f2f05-205">Si olvida los modificadores correctos de cualquier método sintetizado, el compilador emite advertencias o errores que ayudan a obtener la firma correcta.</span><span class="sxs-lookup"><span data-stu-id="f2f05-205">If you forget the correct modifiers for any synthesized method, the compiler issues warnings or errors that help you get the right signature.</span></span>

## <a name="non-destructive-mutation"></a><span data-ttu-id="f2f05-206">Mutación no destructiva</span><span class="sxs-lookup"><span data-stu-id="f2f05-206">Non-destructive mutation</span></span>

<span data-ttu-id="f2f05-207">Los miembros sintetizados de un registro posicional no modifican el estado del registro.</span><span class="sxs-lookup"><span data-stu-id="f2f05-207">The synthesized members in a positional record don't modify the state of the record.</span></span> <span data-ttu-id="f2f05-208">El objetivo es que se puedan crear registros inmutables más fácilmente.</span><span class="sxs-lookup"><span data-stu-id="f2f05-208">The goal is that you can more easily create immutable records.</span></span> <span data-ttu-id="f2f05-209">Vuelva a observar las declaraciones anteriores de `HeatingDegreeDays` y `CoolingDegreeDays`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-209">Look again at the preceding declarations for `HeatingDegreeDays` and `CoolingDegreeDays`.</span></span> <span data-ttu-id="f2f05-210">Los miembros agregados realizan cálculos en los valores del registro, pero no mutan el estado.</span><span class="sxs-lookup"><span data-stu-id="f2f05-210">The members added perform computations on the values for the record, but don't mutate state.</span></span> <span data-ttu-id="f2f05-211">Los registros posicionales facilitan la creación de tipos de referencia inmutables.</span><span class="sxs-lookup"><span data-stu-id="f2f05-211">Positional records make it easier for you to create immutable reference types.</span></span>

<span data-ttu-id="f2f05-212">La creación de tipos de referencia inmutables significa que se recomienda usar la mutación no destructiva.</span><span class="sxs-lookup"><span data-stu-id="f2f05-212">Creating immutable reference types means you'll want to use non-destructive mutation.</span></span> <span data-ttu-id="f2f05-213">Cree nuevas instancias de registro que sean similares a las instancias de registro existentes mediante [expresiones `with`](../../language-reference/operators/with-expression.md).</span><span class="sxs-lookup"><span data-stu-id="f2f05-213">You  create new record instances that are similar to existing record instances using [`with` expressions](../../language-reference/operators/with-expression.md).</span></span> <span data-ttu-id="f2f05-214">Estas expresiones son una construcción de copia con asignaciones adicionales que modifican la copia.</span><span class="sxs-lookup"><span data-stu-id="f2f05-214">These expressions are a copy construction with additional assignments that modify the copy.</span></span> <span data-ttu-id="f2f05-215">El resultado es una nueva instancia de registro en la que se ha copiado cada propiedad del registro existente y, opcionalmente, se ha modificado.</span><span class="sxs-lookup"><span data-stu-id="f2f05-215">The result is a new record instance where each property has been copied from the existing record and optionally modified.</span></span> <span data-ttu-id="f2f05-216">El registro original no se ha modificado.</span><span class="sxs-lookup"><span data-stu-id="f2f05-216">The original record is unchanged.</span></span>

<span data-ttu-id="f2f05-217">Vamos a agregar un par de características al programa que muestren expresiones `with`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-217">Let's add a couple features to your program that demonstrate `with` expressions.</span></span> <span data-ttu-id="f2f05-218">En primer lugar, vamos a crear un nuevo registro para calcular la suma térmica con los mismos datos.</span><span class="sxs-lookup"><span data-stu-id="f2f05-218">First, let's create a new record to compute growing degree days using the same data.</span></span> <span data-ttu-id="f2f05-219">La *suma térmica* suele usar 41F como base de referencia y mide las temperaturas por encima de ella.</span><span class="sxs-lookup"><span data-stu-id="f2f05-219">*Growing degree days* typically uses 41F as the baseline and measures temperatures above the baseline.</span></span> <span data-ttu-id="f2f05-220">Para usar los mismos datos, puede crear un nuevo registro similar a `coolingDegreeDays`, pero con otra temperatura base:</span><span class="sxs-lookup"><span data-stu-id="f2f05-220">To use the same data, you can create a new record that is similar to the `coolingDegreeDays`, but with a different base temperature:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="GrowingDegreeDays":::

<span data-ttu-id="f2f05-221">Puede comparar el número de grados calculado con los números generados con una temperatura de base de referencia superior.</span><span class="sxs-lookup"><span data-stu-id="f2f05-221">You can compare the number of degrees computed to the numbers generated with a higher baseline temperature.</span></span> <span data-ttu-id="f2f05-222">Recuerde que los registros son *tipos de referencia* y estas copias son instantáneas.</span><span class="sxs-lookup"><span data-stu-id="f2f05-222">Remember that records are *reference types* and these copies are shallow copies.</span></span> <span data-ttu-id="f2f05-223">No se copia la matriz de los datos, sino que ambos registros hacen referencia a los mismos datos.</span><span class="sxs-lookup"><span data-stu-id="f2f05-223">The array for the data isn't copied, but both records refer to the same data.</span></span> <span data-ttu-id="f2f05-224">Ese hecho supone una ventaja en otro escenario.</span><span class="sxs-lookup"><span data-stu-id="f2f05-224">That fact is an advantage in one other scenario.</span></span> <span data-ttu-id="f2f05-225">En el caso de la suma térmica, es útil realizar un seguimiento del total de los cinco días anteriores.</span><span class="sxs-lookup"><span data-stu-id="f2f05-225">For growing degree days, it's useful to keep track of the total for the previous 5 days.</span></span> <span data-ttu-id="f2f05-226">Puede crear nuevos registros con otros datos de origen mediante expresiones `with`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-226">You can create new records with different source data using `with` expressions.</span></span> <span data-ttu-id="f2f05-227">En el código siguiente se compila una colección de estas acumulaciones y luego se muestran los valores:</span><span class="sxs-lookup"><span data-stu-id="f2f05-227">The following code builds a collection of these accumulations, then displays the values:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="RunningFiveDayTotal":::

<span data-ttu-id="f2f05-228">También puede usar expresiones `with` para crear copias de registros.</span><span class="sxs-lookup"><span data-stu-id="f2f05-228">You can also use `with` expressions to create copies of records.</span></span> <span data-ttu-id="f2f05-229">No especifique ninguna propiedad entre las llaves de la expresión `with`.</span><span class="sxs-lookup"><span data-stu-id="f2f05-229">Don't specify any properties between the braces for the `with` expression.</span></span> <span data-ttu-id="f2f05-230">Eso significa crear una copia y no cambiar ninguna propiedad:</span><span class="sxs-lookup"><span data-stu-id="f2f05-230">That means create a copy, and don't change any properties:</span></span>

```csharp
var growingDegreeDaysCopy = growingDegreeDays with { };
```

<span data-ttu-id="f2f05-231">Ejecute la aplicación terminada para ver los resultados.</span><span class="sxs-lookup"><span data-stu-id="f2f05-231">Run the finished application to see the results.</span></span>

## <a name="summary"></a><span data-ttu-id="f2f05-232">Resumen</span><span class="sxs-lookup"><span data-stu-id="f2f05-232">Summary</span></span>

<span data-ttu-id="f2f05-233">En este tutorial se han mostrado varios aspectos de los registros.</span><span class="sxs-lookup"><span data-stu-id="f2f05-233">This tutorial showed several aspects of records.</span></span> <span data-ttu-id="f2f05-234">Los registros proporcionan una sintaxis concisa para los tipos de referencia cuyo uso fundamental es el almacenamiento de datos.</span><span class="sxs-lookup"><span data-stu-id="f2f05-234">Records provide concise syntax for reference types where the fundamental use is storing data.</span></span> <span data-ttu-id="f2f05-235">En el caso de las clases orientadas a objetos, el uso fundamental es definir responsabilidades.</span><span class="sxs-lookup"><span data-stu-id="f2f05-235">For object-oriented classes, the fundamental use is defining responsibilities.</span></span> <span data-ttu-id="f2f05-236">Este tutorial se ha centrado en los *registros posicionales*, donde se puede usar una sintaxis concisa para declarar las propiedades init-only de un registro.</span><span class="sxs-lookup"><span data-stu-id="f2f05-236">This tutorial focused on *positional records*, where you can use a concise syntax to declare the init-only properties for a record.</span></span> <span data-ttu-id="f2f05-237">El compilador sintetiza varios miembros del registro para copiar y comparar registros.</span><span class="sxs-lookup"><span data-stu-id="f2f05-237">The compiler synthesizes several members of the record for copying and comparing records.</span></span> <span data-ttu-id="f2f05-238">Puede agregar cualquier otro miembro que necesite para sus tipos de registros.</span><span class="sxs-lookup"><span data-stu-id="f2f05-238">You can add any other members you need for your record types.</span></span> <span data-ttu-id="f2f05-239">Puede crear tipos de registros inmutables sabiendo que ninguno de los miembros generados por el compilador mutaría su estado.</span><span class="sxs-lookup"><span data-stu-id="f2f05-239">You can create immutable record types knowing that none of the compiler-generated members would mutate state.</span></span> <span data-ttu-id="f2f05-240">Además, las expresiones `with` facilitan la compatibilidad con la mutación no destructiva.</span><span class="sxs-lookup"><span data-stu-id="f2f05-240">And `with` expressions make it easy to support non-destructive mutation.</span></span>

<span data-ttu-id="f2f05-241">Los registros presentan otra manera de definir tipos.</span><span class="sxs-lookup"><span data-stu-id="f2f05-241">Records add another way to define types.</span></span> <span data-ttu-id="f2f05-242">Se usan definiciones `class` para crear jerarquías orientadas a objetos que se centran en las responsabilidades y el comportamiento de los objetos.</span><span class="sxs-lookup"><span data-stu-id="f2f05-242">You use `class` definitions to create object-oriented hierarchies that focus on the responsibilities and behavior of objects.</span></span> <span data-ttu-id="f2f05-243">Cree tipos `struct` para las estructuras de datos que almacenan datos y que son lo suficientemente pequeñas como para copiarse de forma eficaz.</span><span class="sxs-lookup"><span data-stu-id="f2f05-243">You create `struct` types for data structures that store data and are small enough to copy efficiently.</span></span> <span data-ttu-id="f2f05-244">Los registros se crean si se quieren comparaciones e igualdad basadas en valores, no se quiere copiar valores y se quiere usar variables de referencia.</span><span class="sxs-lookup"><span data-stu-id="f2f05-244">You create records when you want value-based equality and comparison, don't want to copy values, and want to use reference variables.</span></span>

<span data-ttu-id="f2f05-245">Puede obtener una descripción completa de los registros en el [artículo de referencia del lenguaje C# para el tipo de registro](../../language-reference/builtin-types/record.md) y la [especificación de tipo de registro propuesta](~/_csharplang/proposals/csharp-9.0/records.md).</span><span class="sxs-lookup"><span data-stu-id="f2f05-245">You can learn the complete description of records by reading the [C# language reference article for the record type)](../../language-reference/builtin-types/record.md) and the [proposed record type specification](~/_csharplang/proposals/csharp-9.0/records.md).</span></span>
