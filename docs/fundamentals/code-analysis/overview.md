---
title: Análisis de código en .NET
titleSuffix: ''
description: Obtenga información sobre el análisis de código fuente en el SDK de .NET.
ms.date: 12/04/2020
ms.topic: overview
ms.custom: updateeachrelease
helpviewer_keywords:
- code analysis
- code analyzers
ms.openlocfilehash: 9fbeee7475b49a5b6514d4983142ae3be5a2f026
ms.sourcegitcommit: 46cfed35d79d70e08c313b9c664c7e76babab39e
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/10/2021
ms.locfileid: "102605300"
---
# <a name="overview-of-net-source-code-analysis"></a><span data-ttu-id="d2c1f-103">Información general sobre el análisis de código fuente de .NET</span><span class="sxs-lookup"><span data-stu-id="d2c1f-103">Overview of .NET source code analysis</span></span>

<span data-ttu-id="d2c1f-104">Los analizadores de .NET Compiler Platform (Roslyn) inspeccionan el código de C# o Visual Basic para supervisar la calidad e identificar problemas de estilo.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-104">.NET compiler platform (Roslyn) analyzers inspect your C# or Visual Basic code for code quality and style issues.</span></span> <span data-ttu-id="d2c1f-105">A partir de .NET 5.0, estos analizadores se incluyen con el SDK de .NET y no es necesario instalarlos por separado.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-105">Starting in .NET 5.0, these analyzers are included with the .NET SDK and you don't need to install them separately.</span></span> <span data-ttu-id="d2c1f-106">Si el proyecto tiene como destino .NET 5 o una versión posterior, el análisis de código está habilitado de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-106">If your project targets .NET 5 or later, code analysis is enabled by default.</span></span> <span data-ttu-id="d2c1f-107">Si el proyecto tiene como destino otra implementación de .NET, por ejemplo, .NET Core, .NET Standard o .NET Framework, debe establecer la propiedad [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) en `true` para habilitar manualmente el análisis de código.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-107">If your project targets a different .NET implementation, for example, .NET Core, .NET Standard, or .NET Framework, you must manually enable code analysis by setting the [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) property to `true`.</span></span>

<span data-ttu-id="d2c1f-108">Si no quiere cambiar al SDK de .NET 5+, tiene un proyecto de .NET Framework de estilo de SDK, o bien prefiere un modelo basado en paquetes NuGet, los analizadores también están disponibles en el [paquete NuGet Microsoft.CodeAnalysis.NetAnalyzers](https://www.nuget.org/packages/Microsoft.CodeAnalysis.NetAnalyzers).</span><span class="sxs-lookup"><span data-stu-id="d2c1f-108">If you don't want to move to the .NET 5+ SDK, have a non-SDK-style .NET Framework project, or prefer a NuGet package-based model, the analyzers are also available in the [Microsoft.CodeAnalysis.NetAnalyzers NuGet package](https://www.nuget.org/packages/Microsoft.CodeAnalysis.NetAnalyzers).</span></span> <span data-ttu-id="d2c1f-109">Es posible que prefiera un modelo basado en paquetes para las actualizaciones de versión a petición.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-109">You might prefer a package-based model for on-demand version updates.</span></span>

> [!NOTE]
> <span data-ttu-id="d2c1f-110">Los analizadores de .NET son independientes de la plataforma de destino.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-110">.NET analyzers are target-framework agnostic.</span></span> <span data-ttu-id="d2c1f-111">Es decir, el proyecto no necesita tener como destino una implementación de .NET específica.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-111">That is, your project does not need to target a specific .NET implementation.</span></span> <span data-ttu-id="d2c1f-112">Los analizadores funcionan para los proyectos que tienen `net5.0` como destino, así como las versiones anteriores de .NET, como `netcoreapp3.1` y `net472`.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-112">The analyzers work for projects that target `net5.0` as well as earlier .NET versions, such as `netcoreapp3.1` and `net472`.</span></span> <span data-ttu-id="d2c1f-113">Pero para habilitar el análisis de código mediante la propiedad [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers), el proyecto debe hacer referencia a un [SDK de proyecto](../../core/project-sdk/overview.md).</span><span class="sxs-lookup"><span data-stu-id="d2c1f-113">However, to enable code analysis using the [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) property, your project must reference a [project SDK](../../core/project-sdk/overview.md).</span></span>

<span data-ttu-id="d2c1f-114">Si un analizador detecta infracciones de reglas, se notifican como una sugerencia, una advertencia o un error, en función de cómo esté [configurada](configuration-options.md) cada regla.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-114">If rule violations are found by an analyzer, they're reported as a suggestion, warning, or error, depending on how each rule is [configured](configuration-options.md).</span></span> <span data-ttu-id="d2c1f-115">Las infracciones de análisis de código aparecen con el prefijo "CA" o "IDE" para diferenciarlas de los errores del compilador.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-115">Code analysis violations appear with the prefix "CA" or "IDE" to differentiate them from compiler errors.</span></span>

## <a name="code-quality-analysis"></a><span data-ttu-id="d2c1f-116">Análisis de calidad del código</span><span class="sxs-lookup"><span data-stu-id="d2c1f-116">Code quality analysis</span></span>

<span data-ttu-id="d2c1f-117">Las reglas de *análisis de calidad del código* ("CAxxxx") inspeccionan el código de C# o Visual Basic en busca de incidencias de seguridad, rendimiento, diseño y de otro tipo.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-117">*Code quality analysis* ("CAxxxx") rules inspect your C# or Visual Basic code for security, performance, design and other issues.</span></span> <span data-ttu-id="d2c1f-118">De forma predeterminada, el análisis está habilitado para los proyectos que tienen como destino .NET 5.0 o una versión posterior.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-118">Analysis is enabled, by default, for projects that target .NET 5.0 or later.</span></span> <span data-ttu-id="d2c1f-119">Puede habilitar el análisis de código en los proyectos que tengan como destino versiones anteriores de .NET estableciendo la propiedad [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) en `true`.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-119">You can enable code analysis on projects that target earlier .NET versions by setting the [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) property to `true`.</span></span> <span data-ttu-id="d2c1f-120">También puede deshabilitar el análisis de código para el proyecto si establece `EnableNETAnalyzers` en `false`.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-120">You can also disable code analysis for your project by setting `EnableNETAnalyzers` to `false`.</span></span>

> [!TIP]
> <span data-ttu-id="d2c1f-121">Si usa Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="d2c1f-121">If you're using Visual Studio:</span></span>
>
> - <span data-ttu-id="d2c1f-122">Muchas reglas de analizador tienen *correcciones de código* asociadas que se pueden aplicar para corregir el problema.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-122">Many analyzer rules have associated *code fixes* that you can apply to correct the problem.</span></span> <span data-ttu-id="d2c1f-123">Las correcciones de código se muestran en el menú del icono de bombilla.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-123">Code fixes are shown in the light bulb icon menu.</span></span>
> - <span data-ttu-id="d2c1f-124">Para habilitar o deshabilitar el análisis de código, haga clic con el botón derecho en un proyecto en el Explorador de soluciones y seleccione **Propiedades** > pestaña **Análisis de código** > **Habilitar los analizadores de .NET**.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-124">You can enable or disable code analysis by right-clicking on a project in Solution Explorer and selecting **Properties** > **Code Analysis** tab > **Enable .NET analyzers**.</span></span>

### <a name="enabled-rules"></a><span data-ttu-id="d2c1f-125">Reglas habilitadas</span><span class="sxs-lookup"><span data-stu-id="d2c1f-125">Enabled rules</span></span>

<span data-ttu-id="d2c1f-126">Las siguientes reglas están habilitadas de forma predeterminada en .NET 5.0.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-126">The following rules are enabled, by default, in .NET 5.0.</span></span>

| <span data-ttu-id="d2c1f-127">Id. de diagnóstico</span><span class="sxs-lookup"><span data-stu-id="d2c1f-127">Diagnostic ID</span></span> | <span data-ttu-id="d2c1f-128">Category</span><span class="sxs-lookup"><span data-stu-id="d2c1f-128">Category</span></span> | <span data-ttu-id="d2c1f-129">severity</span><span class="sxs-lookup"><span data-stu-id="d2c1f-129">Severity</span></span> | <span data-ttu-id="d2c1f-130">Descripción</span><span class="sxs-lookup"><span data-stu-id="d2c1f-130">Description</span></span> |
| - | - | - | - |
| [<span data-ttu-id="d2c1f-131">CA1416</span><span class="sxs-lookup"><span data-stu-id="d2c1f-131">CA1416</span></span>](/visualstudio/code-quality/ca1416) | <span data-ttu-id="d2c1f-132">Interoperabilidad</span><span class="sxs-lookup"><span data-stu-id="d2c1f-132">Interoperability</span></span> | <span data-ttu-id="d2c1f-133">Advertencia</span><span class="sxs-lookup"><span data-stu-id="d2c1f-133">Warning</span></span> | <span data-ttu-id="d2c1f-134">Analizador de compatibilidad de plataformas</span><span class="sxs-lookup"><span data-stu-id="d2c1f-134">Platform compatibility analyzer</span></span> |
| [<span data-ttu-id="d2c1f-135">CA1417</span><span class="sxs-lookup"><span data-stu-id="d2c1f-135">CA1417</span></span>](/visualstudio/code-quality/ca1417) | <span data-ttu-id="d2c1f-136">Interoperabilidad</span><span class="sxs-lookup"><span data-stu-id="d2c1f-136">Interoperability</span></span> | <span data-ttu-id="d2c1f-137">Advertencia</span><span class="sxs-lookup"><span data-stu-id="d2c1f-137">Warning</span></span> | <span data-ttu-id="d2c1f-138">No usar `OutAttribute` en parámetros de cadena para P/Invoke</span><span class="sxs-lookup"><span data-stu-id="d2c1f-138">Do not use `OutAttribute` on string parameters for P/Invokes</span></span> |
| [<span data-ttu-id="d2c1f-139">CA1831</span><span class="sxs-lookup"><span data-stu-id="d2c1f-139">CA1831</span></span>](/visualstudio/code-quality/ca1831) | <span data-ttu-id="d2c1f-140">Rendimiento</span><span class="sxs-lookup"><span data-stu-id="d2c1f-140">Performance</span></span> | <span data-ttu-id="d2c1f-141">Advertencia</span><span class="sxs-lookup"><span data-stu-id="d2c1f-141">Warning</span></span> | <span data-ttu-id="d2c1f-142">Usar `AsSpan` en lugar de indizadores basados en intervalos para una cadena cuando proceda</span><span class="sxs-lookup"><span data-stu-id="d2c1f-142">Use `AsSpan` instead of range-based indexers for string when appropriate</span></span> |
| [<span data-ttu-id="d2c1f-143">CA2013</span><span class="sxs-lookup"><span data-stu-id="d2c1f-143">CA2013</span></span>](/visualstudio/code-quality/ca2013) | <span data-ttu-id="d2c1f-144">Confiabilidad</span><span class="sxs-lookup"><span data-stu-id="d2c1f-144">Reliability</span></span> | <span data-ttu-id="d2c1f-145">Advertencia</span><span class="sxs-lookup"><span data-stu-id="d2c1f-145">Warning</span></span> | <span data-ttu-id="d2c1f-146">No usar `ReferenceEquals` con tipos de valor</span><span class="sxs-lookup"><span data-stu-id="d2c1f-146">Do not use `ReferenceEquals` with value types</span></span> |
| [<span data-ttu-id="d2c1f-147">CA2014</span><span class="sxs-lookup"><span data-stu-id="d2c1f-147">CA2014</span></span>](/visualstudio/code-quality/ca2014) | <span data-ttu-id="d2c1f-148">Confiabilidad</span><span class="sxs-lookup"><span data-stu-id="d2c1f-148">Reliability</span></span> | <span data-ttu-id="d2c1f-149">Advertencia</span><span class="sxs-lookup"><span data-stu-id="d2c1f-149">Warning</span></span> | <span data-ttu-id="d2c1f-150">No usar `stackalloc` en bucles</span><span class="sxs-lookup"><span data-stu-id="d2c1f-150">Do not use `stackalloc` in loops</span></span> |
| [<span data-ttu-id="d2c1f-151">CA2015</span><span class="sxs-lookup"><span data-stu-id="d2c1f-151">CA2015</span></span>](/visualstudio/code-quality/ca2015) | <span data-ttu-id="d2c1f-152">Confiabilidad</span><span class="sxs-lookup"><span data-stu-id="d2c1f-152">Reliability</span></span> | <span data-ttu-id="d2c1f-153">Advertencia</span><span class="sxs-lookup"><span data-stu-id="d2c1f-153">Warning</span></span> | <span data-ttu-id="d2c1f-154">No definir finalizadores para los tipos derivados de <xref:System.Buffers.MemoryManager%601></span><span class="sxs-lookup"><span data-stu-id="d2c1f-154">Do not define finalizers for types derived from <xref:System.Buffers.MemoryManager%601></span></span> |
| [<span data-ttu-id="d2c1f-155">CA2200</span><span class="sxs-lookup"><span data-stu-id="d2c1f-155">CA2200</span></span>](/visualstudio/code-quality/ca2200) | <span data-ttu-id="d2c1f-156">Uso</span><span class="sxs-lookup"><span data-stu-id="d2c1f-156">Usage</span></span> | <span data-ttu-id="d2c1f-157">Advertencia</span><span class="sxs-lookup"><span data-stu-id="d2c1f-157">Warning</span></span> | <span data-ttu-id="d2c1f-158">Reiniciar para mantener los detalles de la pila</span><span class="sxs-lookup"><span data-stu-id="d2c1f-158">Rethrow to preserve stack details</span></span>
| [<span data-ttu-id="d2c1f-159">CA2247</span><span class="sxs-lookup"><span data-stu-id="d2c1f-159">CA2247</span></span>](/visualstudio/code-quality/ca2247) | <span data-ttu-id="d2c1f-160">Uso</span><span class="sxs-lookup"><span data-stu-id="d2c1f-160">Usage</span></span> | <span data-ttu-id="d2c1f-161">Advertencia</span><span class="sxs-lookup"><span data-stu-id="d2c1f-161">Warning</span></span> | <span data-ttu-id="d2c1f-162">El argumento pasado al constructor TaskCompletionSource debe ser una enumeración <xref:System.Threading.Tasks.TaskCreationOptions> en lugar de <xref:System.Threading.Tasks.TaskContinuationOptions></span><span class="sxs-lookup"><span data-stu-id="d2c1f-162">Argument passed to TaskCompletionSource constructor should be <xref:System.Threading.Tasks.TaskCreationOptions> enum instead of <xref:System.Threading.Tasks.TaskContinuationOptions></span></span> |

<span data-ttu-id="d2c1f-163">Puede cambiar la gravedad de estas reglas para deshabilitarlas o elevarlas a errores.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-163">You can change the severity of these rules to disable them or elevate them to errors.</span></span> <span data-ttu-id="d2c1f-164">También puede [habilitar más reglas](#enable-additional-rules).</span><span class="sxs-lookup"><span data-stu-id="d2c1f-164">You can also [enable more rules](#enable-additional-rules).</span></span>

- <span data-ttu-id="d2c1f-165">Para obtener una lista de las reglas que se incluyen con cada versión del SDK de .NET, vea [Versiones del analizador](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span><span class="sxs-lookup"><span data-stu-id="d2c1f-165">For a list of rules that are included with each .NET SDK version, see [Analyzer releases](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span></span>
- <span data-ttu-id="d2c1f-166">Para obtener una lista de todas las reglas de calidad del código, vea [Reglas de calidad del código](quality-rules/index.md).</span><span class="sxs-lookup"><span data-stu-id="d2c1f-166">For a list of all the code quality rules, see [Code quality rules](quality-rules/index.md).</span></span>

### <a name="enable-additional-rules"></a><span data-ttu-id="d2c1f-167">Habilitación de reglas adicionales</span><span class="sxs-lookup"><span data-stu-id="d2c1f-167">Enable additional rules</span></span>

<span data-ttu-id="d2c1f-168">El *modo de análisis* hace referencia a una configuración de análisis de código predefinida en la que ninguna, algunas o todas las reglas están habilitadas.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-168">*Analysis mode* refers to a predefined code analysis configuration where none, some, or all rules are enabled.</span></span> <span data-ttu-id="d2c1f-169">En el modo de análisis predeterminado, solo se habilita un pequeño número de reglas [como advertencias de compilación](#enabled-rules).</span><span class="sxs-lookup"><span data-stu-id="d2c1f-169">In the default analysis mode, only a small number of rules are [enabled as build warnings](#enabled-rules).</span></span> <span data-ttu-id="d2c1f-170">Puede cambiar el modo de análisis del proyecto si establece la propiedad [\<AnalysisMode>](../../core/project-sdk/msbuild-props.md#analysismode) en el archivo del proyecto.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-170">You can change the analysis mode for your project by setting the [\<AnalysisMode>](../../core/project-sdk/msbuild-props.md#analysismode) property in the project file.</span></span> <span data-ttu-id="d2c1f-171">Entre los valores permitidos se incluyen los siguientes:</span><span class="sxs-lookup"><span data-stu-id="d2c1f-171">The allowable values are:</span></span>

| <span data-ttu-id="d2c1f-172">Valor</span><span class="sxs-lookup"><span data-stu-id="d2c1f-172">Value</span></span> | <span data-ttu-id="d2c1f-173">Descripción</span><span class="sxs-lookup"><span data-stu-id="d2c1f-173">Description</span></span> |
| - | - |
| `AllDisabledByDefault` | <span data-ttu-id="d2c1f-174">Este es el modo más conservador.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-174">This is the most conservative mode.</span></span> <span data-ttu-id="d2c1f-175">Todas las reglas están deshabilitadas de manera predeterminada.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-175">All rules are disabled by default.</span></span> <span data-ttu-id="d2c1f-176">Puede [incluir](configuration-options.md) de forma selectiva reglas individuales para habilitarlas.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-176">You can selectively [opt into](configuration-options.md) individual rules to enable them.</span></span><br /><br />`<AnalysisMode>AllDisabledByDefault</AnalysisMode>` |
| `AllEnabledByDefault` | <span data-ttu-id="d2c1f-177">Este es el modo más agresivo.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-177">This is the most aggressive mode.</span></span> <span data-ttu-id="d2c1f-178">Todas las reglas están habilitadas como advertencias de compilación.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-178">All rules are enabled as build warnings.</span></span> <span data-ttu-id="d2c1f-179">Puede [excluir](configuration-options.md) de forma selectiva reglas individuales para deshabilitarlas.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-179">You can selectively [opt out of](configuration-options.md) individual rules to disable them.</span></span><br /><br />`<AnalysisMode>AllEnabledByDefault</AnalysisMode>` |
| `Default` | <span data-ttu-id="d2c1f-180">El modo predeterminado, en el que una serie de reglas se habilitan como advertencias, otras solo se habilitan como sugerencias del IDE de Visual Studio con las correcciones de código correspondientes y el resto se deshabilitan por completo.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-180">The default mode, where a handful of rules are enabled as warnings, others are enabled only as Visual Studio IDE suggestions with corresponding code fixes, and the rest are disabled completely.</span></span> <span data-ttu-id="d2c1f-181">Puede [excluir o incluir](configuration-options.md) de forma selectiva reglas individuales para deshabilitarlas.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-181">You can selectively [opt into or out of](configuration-options.md) individual rules to disable them.</span></span><br /><br />`<AnalysisMode>Default</AnalysisMode>` |

<span data-ttu-id="d2c1f-182">Para buscar la gravedad predeterminada de cada regla disponible y si la regla está habilitada o no en el modo de análisis predeterminado, vea la [lista completa de reglas](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span><span class="sxs-lookup"><span data-stu-id="d2c1f-182">To find the default severity for each available rule and whether or not the rule is enabled in the default analysis mode, see the [full list of rules](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span></span>

### <a name="treat-warnings-as-errors"></a><span data-ttu-id="d2c1f-183">Tratar advertencias como errores</span><span class="sxs-lookup"><span data-stu-id="d2c1f-183">Treat warnings as errors</span></span>

<span data-ttu-id="d2c1f-184">Si usa la marca `-warnaserror` al compilar los proyectos, todas las advertencias de análisis de código también se tratan como errores.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-184">If you use the `-warnaserror` flag when you build your projects, all code analysis warnings are also treated as errors.</span></span> <span data-ttu-id="d2c1f-185">Si no quiere que las advertencias de calidad del código (CAxxxx) se traten como errores cuando `-warnaserror` está presente, puede establecer la propiedad `CodeAnalysisTreatWarningsAsErrors` de MSBuild en `false` en el archivo del proyecto.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-185">If you do not want code quality warnings (CAxxxx) to be treated as errors in presence of `-warnaserror`, you can set the `CodeAnalysisTreatWarningsAsErrors` MSBuild property to `false` in your project file.</span></span>

```xml
<PropertyGroup>
  <CodeAnalysisTreatWarningsAsErrors>false</CodeAnalysisTreatWarningsAsErrors>
</PropertyGroup>
```

<span data-ttu-id="d2c1f-186">Todavía verá advertencias de análisis de código, pero no interrumpirán la compilación.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-186">You'll still see any code analysis warnings, but they won't break your build.</span></span>

### <a name="latest-updates"></a><span data-ttu-id="d2c1f-187">Actualizaciones más recientes</span><span class="sxs-lookup"><span data-stu-id="d2c1f-187">Latest updates</span></span>

<span data-ttu-id="d2c1f-188">De forma predeterminada, obtendrá las reglas de análisis de código más recientes y las gravedades de las reglas predeterminadas a medida que actualice a las versiones más recientes del SDK de .NET.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-188">By default, you'll get the latest code analysis rules and default rule severities as you upgrade to newer versions of the .NET SDK.</span></span> <span data-ttu-id="d2c1f-189">Si no quiere este comportamiento, por ejemplo, si quiere asegurarse de que no se habiliten o deshabiliten las reglas nuevas, puede invalidarlo de una de las siguientes maneras:</span><span class="sxs-lookup"><span data-stu-id="d2c1f-189">If you don't want this behavior, for example, if you want to ensure that no new rules are enabled or disabled, you can override it in one of the following ways:</span></span>

- <span data-ttu-id="d2c1f-190">Establezca la propiedad `AnalysisLevel` de MSBuild en un valor específico para bloquear las advertencias a ese conjunto.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-190">Set the `AnalysisLevel` MSBuild property to a specific value to lock the warnings to that set.</span></span> <span data-ttu-id="d2c1f-191">Al actualizar a un SDK más reciente, todavía obtendrá correcciones de errores para esas advertencias, pero no se habilitarán nuevas advertencias y no se deshabilitarán las existentes.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-191">When you upgrade to a newer SDK, you'll still get bug fixes for those warnings, but no new warnings will be enabled and no existing warnings will be disabled.</span></span> <span data-ttu-id="d2c1f-192">Por ejemplo, para limitar el conjunto de reglas a las que se incluyen en la versión 5.0 del SDK de .NET, agregue la entrada siguiente al archivo del proyecto.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-192">For example, to lock the set of rules to those that ship with version 5.0 of the .NET SDK, add the following entry to your project file.</span></span>

  ```xml
  <PropertyGroup>
    <AnalysisLevel>5.0</AnalysisLevel>
  </PropertyGroup>
  ```

  > [!TIP]
  > <span data-ttu-id="d2c1f-193">El valor predeterminado de la propiedad `AnalysisLevel` es `latest`, lo que significa que siempre obtendrá las reglas de análisis de código más recientes al cambiar a versiones más recientes del SDK de .NET.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-193">The default value for the `AnalysisLevel` property is `latest`, which means you always get the latest code analysis rules as you move to newer versions of the .NET SDK.</span></span>

  <span data-ttu-id="d2c1f-194">Para obtener más información y una lista de los valores posibles, vea [AnalysisLevel](../../core/project-sdk/msbuild-props.md#analysislevel).</span><span class="sxs-lookup"><span data-stu-id="d2c1f-194">For more information, and to see a list of possible values, see [AnalysisLevel](../../core/project-sdk/msbuild-props.md#analysislevel).</span></span>

- <span data-ttu-id="d2c1f-195">Instale el [paquete NuGet Microsoft.CodeAnalysis.NetAnalyzers](https://github.com/dotnet/roslyn-analyzers#microsoftcodeanalysisnetanalyzers) para desacoplar las actualizaciones de reglas de las actualizaciones del SDK de .NET.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-195">Install the [Microsoft.CodeAnalysis.NetAnalyzers NuGet package](https://github.com/dotnet/roslyn-analyzers#microsoftcodeanalysisnetanalyzers) to decouple rule updates from .NET SDK updates.</span></span> <span data-ttu-id="d2c1f-196">En los proyectos que tienen como destino .NET 5+, la instalación del paquete desactiva los analizadores integrados del SDK.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-196">For projects that target .NET 5+, installing the package turns off the built-in SDK analyzers.</span></span> <span data-ttu-id="d2c1f-197">Obtendrá una advertencia de compilación si el SDK contiene una versión más reciente del ensamblado del analizador que la del paquete NuGet.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-197">You'll get a build warning if the SDK contains a newer analyzer assembly version than that of the NuGet package.</span></span> <span data-ttu-id="d2c1f-198">Para deshabilitar la advertencia, establezca la propiedad `_SkipUpgradeNetAnalyzersNuGetWarning` en `true`.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-198">To disable the warning, set the `_SkipUpgradeNetAnalyzersNuGetWarning` property to `true`.</span></span>

  > [!NOTE]
  > <span data-ttu-id="d2c1f-199">Si instala el paquete NuGet Microsoft.CodeAnalysis.NetAnalyzers, no debe agregar la propiedad [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) al archivo del proyecto ni a un archivo *Directory.Build.props*.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-199">If you install the Microsoft.CodeAnalysis.NetAnalyzers NuGet package, you should not add the [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) property to either your project file or a *Directory.Build.props* file.</span></span> <span data-ttu-id="d2c1f-200">Cuando se instala el paquete NuGet y la propiedad `EnableNETAnalyzers` se establece en `true`, se genera una advertencia de compilación.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-200">When the NuGet package is installed and the `EnableNETAnalyzers` property is set to `true`, a build warning is generated.</span></span>

## <a name="code-style-analysis"></a><span data-ttu-id="d2c1f-201">Análisis de estilo de código</span><span class="sxs-lookup"><span data-stu-id="d2c1f-201">Code-style analysis</span></span>

<span data-ttu-id="d2c1f-202">Las reglas de *análisis de estilo de código* ("IDExxxx") permiten definir y mantener un estilo de código coherente en el código base.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-202">*Code-style analysis* ("IDExxxx") rules enable you to define and maintain consistent code style in your codebase.</span></span> <span data-ttu-id="d2c1f-203">Los valores de habilitación predeterminados son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="d2c1f-203">The default enablement settings are:</span></span>

- <span data-ttu-id="d2c1f-204">Compilación de línea de comandos: el análisis de estilo de código está deshabilitado de forma predeterminada para todos los proyectos de .NET en compilaciones de línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-204">Command-line build: Code-style analysis is disabled, by default, for all .NET projects on command-line builds.</span></span>

  <span data-ttu-id="d2c1f-205">A partir de .NET 5.0, puede [habilitar el análisis de estilo de código durante la compilación](#enable-on-build), tanto en la línea de comandos como en Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-205">Starting in .NET 5.0, you can [enable code-style analysis on build](#enable-on-build), both at the command line and inside Visual Studio.</span></span> <span data-ttu-id="d2c1f-206">Las infracciones de estilo de código aparecen como advertencias o errores con un prefijo "IDE".</span><span class="sxs-lookup"><span data-stu-id="d2c1f-206">Code style violations appear as warnings or errors with an "IDE" prefix.</span></span> <span data-ttu-id="d2c1f-207">Esto le permite aplicar estilos de código coherentes en tiempo de compilación.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-207">This enables you to enforce consistent code styles at build time.</span></span>

- <span data-ttu-id="d2c1f-208">Visual Studio: el análisis de estilo de código está habilitado, de forma predeterminada, para todos los proyectos de .NET dentro de Visual Studio como [acciones rápidas de refactorización de código](/visualstudio/ide/code-generation-in-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="d2c1f-208">Visual Studio: Code-style analysis is enabled, by default, for all .NET projects inside Visual Studio as [code refactoring quick actions](/visualstudio/ide/code-generation-in-visual-studio).</span></span>

<span data-ttu-id="d2c1f-209">Para obtener una lista completa de las reglas de análisis de estilo de código, vea [Reglas de estilo de código](style-rules/index.md).</span><span class="sxs-lookup"><span data-stu-id="d2c1f-209">For a full list of code-style analysis rules, see [Code style rules](style-rules/index.md).</span></span>

### <a name="enable-on-build"></a><span data-ttu-id="d2c1f-210">Habilitación durante la compilación</span><span class="sxs-lookup"><span data-stu-id="d2c1f-210">Enable on build</span></span>

<span data-ttu-id="d2c1f-211">Con el SDK de .NET 5.0 y versiones posteriores, puede habilitar el análisis de estilo de código al realizar la compilación desde la línea de comandos y en Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-211">With the .NET 5.0 SDK and later versions, you can enable code-style analysis when building from the command-line and in Visual Studio.</span></span> <span data-ttu-id="d2c1f-212">(Pero por motivos de rendimiento, se seguirán aplicando [una serie de reglas de estilo de código](https://github.com/dotnet/roslyn/blob/9f87b444da9c48a4d492b19f8337339056bf2b95/src/Analyzers/Core/Analyzers/EnforceOnBuildValues.cs#L95) solo en el IDE de Visual Studio).</span><span class="sxs-lookup"><span data-stu-id="d2c1f-212">(However, for performance reasons, [a handful of code-style rules](https://github.com/dotnet/roslyn/blob/9f87b444da9c48a4d492b19f8337339056bf2b95/src/Analyzers/Core/Analyzers/EnforceOnBuildValues.cs#L95) will still apply only in the Visual Studio IDE.)</span></span>

<span data-ttu-id="d2c1f-213">Siga estos pasos para habilitar el análisis de estilo de código durante la compilación:</span><span class="sxs-lookup"><span data-stu-id="d2c1f-213">Follow these steps to enable code-style analysis on build:</span></span>

1. <span data-ttu-id="d2c1f-214">Establezca la propiedad [EnforceCodeStyleInBuild](../../core/project-sdk/msbuild-props.md#enforcecodestyleinbuild) de MSBuild en `true`.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-214">Set the MSBuild property [EnforceCodeStyleInBuild](../../core/project-sdk/msbuild-props.md#enforcecodestyleinbuild) to `true`.</span></span>

1. <span data-ttu-id="d2c1f-215">En un archivo *.editorconfig*, [configure](configuration-options.md) cada regla de estilo de código "IDE" que quiera ejecutar durante la compilación como una advertencia o un error.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-215">In an *.editorconfig* file, [configure](configuration-options.md) each "IDE" code style rule that you wish to run on build as a warning or an error.</span></span> <span data-ttu-id="d2c1f-216">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="d2c1f-216">For example:</span></span>

   ```ini
   [*.{cs,vb}]
   # IDE0040: Accessibility modifiers required (escalated to a build warning)
   dotnet_diagnostic.IDE0040.severity = warning
   ```

   <span data-ttu-id="d2c1f-217">Como alternativa, puede configurar una categoría completa para que sea una advertencia o un error, de forma predeterminada y, después, desactivar de forma selectiva las reglas de esa categoría que no quiera que se ejecuten durante la compilación.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-217">Alternatively, you can configure an entire category to be a warning or error, by default, and then selectively turn off rules in that category that you don't want to run on build.</span></span> <span data-ttu-id="d2c1f-218">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="d2c1f-218">For example:</span></span>

   ```ini
   [*.{cs,vb}]

   # Default severity for analyzer diagnostics with category 'Style' (escalated to build warnings)
   dotnet_analyzer_diagnostic.category-Style.severity = warning

   # IDE0040: Accessibility modifiers required (disabled on build)
   dotnet_diagnostic.IDE0040.severity = silent
   ```

> [!NOTE]
> <span data-ttu-id="d2c1f-219">La característica de análisis de estilo de código es experimental y puede cambiar entre las versiones .NET 5 y .NET 6.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-219">The code-style analysis feature is experimental and may change between the .NET 5 and .NET 6 releases.</span></span>

## <a name="suppress-a-warning"></a><span data-ttu-id="d2c1f-220">Supresión de una advertencia</span><span class="sxs-lookup"><span data-stu-id="d2c1f-220">Suppress a warning</span></span>

<span data-ttu-id="d2c1f-221">Una manera de suprimir una infracción de una regla consiste en establecer la opción de gravedad del id. de esa regla en `none` en un archivo EditorConfig.</span><span class="sxs-lookup"><span data-stu-id="d2c1f-221">One way to suppress a rule violation is to set the severity option for that rule ID to `none` in an EditorConfig file.</span></span> <span data-ttu-id="d2c1f-222">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="d2c1f-222">For example:</span></span>

```ini
dotnet_diagnostic.CA1822.severity = none
```

<span data-ttu-id="d2c1f-223">Para obtener más información y otras formas de suprimir las advertencias, vea [Cómo suprimir advertencias de análisis de código](suppress-warnings.md).</span><span class="sxs-lookup"><span data-stu-id="d2c1f-223">For more information and other ways to suppress warnings, see [How to suppress code analysis warnings](suppress-warnings.md).</span></span>

## <a name="third-party-analyzers"></a><span data-ttu-id="d2c1f-224">Analizadores de terceros</span><span class="sxs-lookup"><span data-stu-id="d2c1f-224">Third-party analyzers</span></span>

<span data-ttu-id="d2c1f-225">Además de los analizadores de .NET oficiales, también puede instalar analizadores de terceros, como [StyleCop](https://www.nuget.org/packages/StyleCop.Analyzers/), [Roslynator](https://www.nuget.org/packages/Roslynator.Analyzers/),[Analizadores de XUnit](https://www.nuget.org/packages/xunit.analyzers/) y [Sonar Analyzer](https://www.nuget.org/packages/SonarAnalyzer.CSharp/).</span><span class="sxs-lookup"><span data-stu-id="d2c1f-225">In addition to the official .NET analyzers, you can also install third party analyzers, such as [StyleCop](https://www.nuget.org/packages/StyleCop.Analyzers/), [Roslynator](https://www.nuget.org/packages/Roslynator.Analyzers/), [XUnit Analyzers](https://www.nuget.org/packages/xunit.analyzers/), and [Sonar Analyzer](https://www.nuget.org/packages/SonarAnalyzer.CSharp/).</span></span>

## <a name="see-also"></a><span data-ttu-id="d2c1f-226">Vea también</span><span class="sxs-lookup"><span data-stu-id="d2c1f-226">See also</span></span>

- [<span data-ttu-id="d2c1f-227">Referencia de reglas de análisis de calidad del código</span><span class="sxs-lookup"><span data-stu-id="d2c1f-227">Code quality analysis rule reference</span></span>](quality-rules/index.md)
- [<span data-ttu-id="d2c1f-228">Referencia de reglas de análisis de estilo del código</span><span class="sxs-lookup"><span data-stu-id="d2c1f-228">Code style analysis rule reference</span></span>](style-rules/index.md)
- [<span data-ttu-id="d2c1f-229">Análisis de código en Visual Studio</span><span class="sxs-lookup"><span data-stu-id="d2c1f-229">Code analysis in Visual Studio</span></span>](/visualstudio/code-quality/roslyn-analyzers-overview)
- [<span data-ttu-id="d2c1f-230">SDK de la plataforma del compilador de .NET</span><span class="sxs-lookup"><span data-stu-id="d2c1f-230">.NET Compiler Platform SDK</span></span>](../../csharp/roslyn-sdk/index.md)
- [<span data-ttu-id="d2c1f-231">Tutorial: Crear el primer analizador y la corrección de código</span><span class="sxs-lookup"><span data-stu-id="d2c1f-231">Tutorial: Write your first analyzer and code fix</span></span>](../../csharp/roslyn-sdk/tutorials/how-to-write-csharp-analyzer-code-fix.md)
