---
title: La regla CA5351 no usa algoritmos criptográficos rotos (análisis de código)
description: Más información sobre la regla de reglas de análisis de código CA5351 no usar algoritmos criptográficos rotos
ms.date: 11/04/2016
ms.topic: reference
author: gewarren
ms.author: gewarren
ms.openlocfilehash: fd5ba3506642bd296b02d35a6d41dc2cbc97bedb
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/06/2021
ms.locfileid: "99642999"
---
# <a name="ca5351-do-not-use-broken-cryptographic-algorithms"></a><span data-ttu-id="67b6e-103">CA5351 No use algoritmos criptográficos rotos</span><span class="sxs-lookup"><span data-stu-id="67b6e-103">CA5351 Do Not Use Broken Cryptographic Algorithms</span></span>

| | <span data-ttu-id="67b6e-104">Value</span><span class="sxs-lookup"><span data-stu-id="67b6e-104">Value</span></span> |
|-|-|
| <span data-ttu-id="67b6e-105">**Identificador de la regla**</span><span class="sxs-lookup"><span data-stu-id="67b6e-105">**Rule ID**</span></span> |<span data-ttu-id="67b6e-106">CA5351</span><span class="sxs-lookup"><span data-stu-id="67b6e-106">CA5351</span></span>|
| <span data-ttu-id="67b6e-107">**Categoría**</span><span class="sxs-lookup"><span data-stu-id="67b6e-107">**Category**</span></span> |[<span data-ttu-id="67b6e-108">Seguridad</span><span class="sxs-lookup"><span data-stu-id="67b6e-108">Security</span></span>](security-warnings.md)|
| <span data-ttu-id="67b6e-109">**Corrección o interrupción**</span><span class="sxs-lookup"><span data-stu-id="67b6e-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="67b6e-110">Poco problemático</span><span class="sxs-lookup"><span data-stu-id="67b6e-110">Non-breaking</span></span>|

> [!NOTE]
> <span data-ttu-id="67b6e-111">Esta advertencia se actualizó por última vez en noviembre de 2015.</span><span class="sxs-lookup"><span data-stu-id="67b6e-111">This warning was last updated on November 2015.</span></span>

## <a name="cause"></a><span data-ttu-id="67b6e-112">Causa</span><span class="sxs-lookup"><span data-stu-id="67b6e-112">Cause</span></span>

<span data-ttu-id="67b6e-113">Las funciones hash como <xref:System.Security.Cryptography.MD5> y los algoritmos de cifrado como <xref:System.Security.Cryptography.DES> y <xref:System.Security.Cryptography.RC2> pueden generar riesgos significativos y provocar la divulgación de información confidencial a través de técnicas de ataque fáciles, como colisiones hash y ataques por fuerza bruta.</span><span class="sxs-lookup"><span data-stu-id="67b6e-113">Hashing functions such as <xref:System.Security.Cryptography.MD5> and encryption algorithms such as <xref:System.Security.Cryptography.DES> and <xref:System.Security.Cryptography.RC2> can expose significant risk and may result in the exposure of sensitive information through trivial attack techniques, such as brute force attacks and hash collisions.</span></span>

<span data-ttu-id="67b6e-114">La lista de algoritmos criptográficos siguiente está sujeta a ataques criptográficos conocidos.</span><span class="sxs-lookup"><span data-stu-id="67b6e-114">The cryptographic algorithms list below are subject to known cryptographic attacks.</span></span> <span data-ttu-id="67b6e-115">El algoritmo hash criptográfico <xref:System.Security.Cryptography.MD5> está sujeto a ataques de colisión hash.</span><span class="sxs-lookup"><span data-stu-id="67b6e-115">The cryptographic hash algorithm <xref:System.Security.Cryptography.MD5> is subject to hash collision attacks.</span></span>  <span data-ttu-id="67b6e-116">En función del uso, una colisión hash puede provocar la suplantación, manipulación u otros tipos de ataques en sistemas que se basan en la salida criptográfica única de una función hash.</span><span class="sxs-lookup"><span data-stu-id="67b6e-116">Depending on the usage, a hash collision may lead to impersonation, tampering, or other kinds of attacks on systems that rely on the unique cryptographic output of a hashing function.</span></span> <span data-ttu-id="67b6e-117">Los algoritmos de cifrado <xref:System.Security.Cryptography.DES> y <xref:System.Security.Cryptography.RC2> están sujetos a ataques criptográficos que pueden provocar la divulgación no intencionada de datos cifrados.</span><span class="sxs-lookup"><span data-stu-id="67b6e-117">The encryption algorithms <xref:System.Security.Cryptography.DES> and <xref:System.Security.Cryptography.RC2> are subject to cryptographic attacks that may result in unintended disclosure of encrypted data.</span></span>

## <a name="rule-description"></a><span data-ttu-id="67b6e-118">Descripción de la regla</span><span class="sxs-lookup"><span data-stu-id="67b6e-118">Rule description</span></span>

<span data-ttu-id="67b6e-119">Los algoritmos criptográficos rotos no se consideran seguros y debe desalentarse su uso.</span><span class="sxs-lookup"><span data-stu-id="67b6e-119">Broken cryptographic algorithms are not  considered secure and their use should be discouraged.</span></span> <span data-ttu-id="67b6e-120">El algoritmo hash MD5 es susceptible a ataques de colisión conocidos, aunque la vulnerabilidad específica variará según el contexto de uso.</span><span class="sxs-lookup"><span data-stu-id="67b6e-120">The MD5 hash algorithm is susceptible to known collision attacks, though the specific vulnerability will vary based on the context of use.</span></span>  <span data-ttu-id="67b6e-121">Los algoritmos hash usados para garantizar la integridad de los datos (por ejemplo, firma de archivo o certificado digital) son especialmente vulnerables.</span><span class="sxs-lookup"><span data-stu-id="67b6e-121">Hashing algorithms used to ensure data integrity (for example, file signature or digital certificate) are particularly vulnerable.</span></span>  <span data-ttu-id="67b6e-122">En este contexto, los atacantes pueden generar dos fragmentos de datos separados, de tal manera que los datos correctos se pueden sustituir por los datos malintencionados, sin cambiar el valor hash ni invalidar una signatura digital asociada.</span><span class="sxs-lookup"><span data-stu-id="67b6e-122">In this context, attackers could generate two separate pieces of data, such that benign data can be substituted with malicious data, without changing the hash value or invalidating an associated digital signature.</span></span>

<span data-ttu-id="67b6e-123">Para algoritmos de cifrado:</span><span class="sxs-lookup"><span data-stu-id="67b6e-123">For encryption algorithms:</span></span>

- <span data-ttu-id="67b6e-124">El cifrado<xref:System.Security.Cryptography.DES> contiene un pequeño tamaño de clave, que podría forzarse en menos de un día.</span><span class="sxs-lookup"><span data-stu-id="67b6e-124"><xref:System.Security.Cryptography.DES> encryption contains a small key size, which could be brute-forced in less than a day.</span></span>

- <span data-ttu-id="67b6e-125">El cifrado<xref:System.Security.Cryptography.RC2> es susceptible de sufrir ataques relacionados con la clave, en los que el atacante busca relaciones matemáticas entre todos los valores de clave.</span><span class="sxs-lookup"><span data-stu-id="67b6e-125"><xref:System.Security.Cryptography.RC2> encryption is susceptible to a related-key attack, where the attacker finds mathematical relationships between all key values.</span></span>

<span data-ttu-id="67b6e-126">Esta regla se desencadena cuando se encuentra cualquiera de las funciones criptográficas anteriores en el código fuente y emite una advertencia al usuario.</span><span class="sxs-lookup"><span data-stu-id="67b6e-126">This rule triggers when it finds any of the above cryptographic functions in source code and throws a warning to the user.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="67b6e-127">Cómo corregir infracciones</span><span class="sxs-lookup"><span data-stu-id="67b6e-127">How to fix violations</span></span>

<span data-ttu-id="67b6e-128">Use opciones de criptografía más segura:</span><span class="sxs-lookup"><span data-stu-id="67b6e-128">Use cryptographically stronger options:</span></span>

- <span data-ttu-id="67b6e-129">Para MD5, use valores hash en la familia [Sha-2](/windows/desktop/SecCrypto/hash-and-signature-algorithms) (por ejemplo, <xref:System.Security.Cryptography.SHA512> , <xref:System.Security.Cryptography.SHA384> , <xref:System.Security.Cryptography.SHA256> ).</span><span class="sxs-lookup"><span data-stu-id="67b6e-129">For MD5, use hashes in the [SHA-2](/windows/desktop/SecCrypto/hash-and-signature-algorithms) family (for example, <xref:System.Security.Cryptography.SHA512>, <xref:System.Security.Cryptography.SHA384>, <xref:System.Security.Cryptography.SHA256>).</span></span>

- <span data-ttu-id="67b6e-130">Para DES y RC2, use el cifrado <xref:System.Security.Cryptography.Aes> .</span><span class="sxs-lookup"><span data-stu-id="67b6e-130">For DES and RC2, use <xref:System.Security.Cryptography.Aes> encryption.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="67b6e-131">Cuándo suprimir advertencias</span><span class="sxs-lookup"><span data-stu-id="67b6e-131">When to suppress warnings</span></span>

<span data-ttu-id="67b6e-132">No suprima una advertencia de esta regla a menos que la haya revisado un experto criptográfico.</span><span class="sxs-lookup"><span data-stu-id="67b6e-132">Do not suppress a warning from this rule, unless it's been reviewed by a cryptographic expert.</span></span>

## <a name="pseudo-code-examples"></a><span data-ttu-id="67b6e-133">Ejemplos de pseudocódigo</span><span class="sxs-lookup"><span data-stu-id="67b6e-133">Pseudo-code examples</span></span>

<span data-ttu-id="67b6e-134">Los siguientes ejemplos de pseudocódigo ilustran el patrón detectado por esta regla y las posibles alternativas.</span><span class="sxs-lookup"><span data-stu-id="67b6e-134">The following pseudo-code samples illustrate the pattern detected by this rule and possible alternatives.</span></span>

### <a name="md5-hashing-violation"></a><span data-ttu-id="67b6e-135">Infracción de hash MD5</span><span class="sxs-lookup"><span data-stu-id="67b6e-135">MD5 Hashing Violation</span></span>

```csharp
using System.Security.Cryptography;
...
var hashAlg = MD5.Create();
```

<span data-ttu-id="67b6e-136">Solución:</span><span class="sxs-lookup"><span data-stu-id="67b6e-136">Solution:</span></span>

```csharp
using System.Security.Cryptography;
...
var hashAlg = SHA256.Create();
```

### <a name="rc2-encryption-violation"></a><span data-ttu-id="67b6e-137">Infracción de cifrado RC2</span><span class="sxs-lookup"><span data-stu-id="67b6e-137">RC2 Encryption Violation</span></span>

```csharp
using System.Security.Cryptography;
...
RC2 encAlg = RC2.Create();
```

<span data-ttu-id="67b6e-138">Solución:</span><span class="sxs-lookup"><span data-stu-id="67b6e-138">Solution:</span></span>

```csharp
using System.Security.Cryptography;
...
using (AesManaged encAlg = new AesManaged())
{
  ...
}
```

### <a name="des-encryption-violation"></a><span data-ttu-id="67b6e-139">Infracción de cifrado DES</span><span class="sxs-lookup"><span data-stu-id="67b6e-139">DES Encryption Violation</span></span>

```csharp
using System.Security.Cryptography;
...
DES encAlg = DES.Create();
```

<span data-ttu-id="67b6e-140">Solución:</span><span class="sxs-lookup"><span data-stu-id="67b6e-140">Solution:</span></span>

```csharp
using System.Security.Cryptography;
...
using (AesManaged encAlg = new AesManaged())
{
  ...
}
```
