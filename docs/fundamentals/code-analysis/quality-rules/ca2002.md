---
title: 'CA2002: no bloquear objetos con identidad débil (análisis de código)'
description: 'Más información sobre la regla de análisis de código CA2002: no bloquear objetos con identidad débil'
ms.date: 01/31/2018
ms.topic: reference
f1_keywords:
- DoNotLockOnObjectsWithWeakIdentity
- CA2002
helpviewer_keywords:
- CA2002
- DoNotLockOnObjectsWithWeakIdentity
author: gewarren
ms.author: gewarren
dev_langs:
- CSharp
- VB
ms.openlocfilehash: 87000fdcd139ebacebe0f772a41d42bba0b33283
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/06/2021
ms.locfileid: "99787674"
---
# <a name="ca2002-do-not-lock-on-objects-with-weak-identity"></a><span data-ttu-id="0da17-103">CA2002: No bloquear objetos con identidad débil</span><span class="sxs-lookup"><span data-stu-id="0da17-103">CA2002: Do not lock on objects with weak identity</span></span>

| | <span data-ttu-id="0da17-104">Value</span><span class="sxs-lookup"><span data-stu-id="0da17-104">Value</span></span> |
|-|-|
| <span data-ttu-id="0da17-105">**Identificador de la regla**</span><span class="sxs-lookup"><span data-stu-id="0da17-105">**Rule ID**</span></span> |<span data-ttu-id="0da17-106">CA2002</span><span class="sxs-lookup"><span data-stu-id="0da17-106">CA2002</span></span>|
| <span data-ttu-id="0da17-107">**Categoría**</span><span class="sxs-lookup"><span data-stu-id="0da17-107">**Category**</span></span> |[<span data-ttu-id="0da17-108">Confiabilidad</span><span class="sxs-lookup"><span data-stu-id="0da17-108">Reliability</span></span>](reliability-warnings.md)|
| <span data-ttu-id="0da17-109">**Corrección o interrupción**</span><span class="sxs-lookup"><span data-stu-id="0da17-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="0da17-110">Poco problemático</span><span class="sxs-lookup"><span data-stu-id="0da17-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="0da17-111">Causa</span><span class="sxs-lookup"><span data-stu-id="0da17-111">Cause</span></span>

<span data-ttu-id="0da17-112">Un subproceso intenta adquirir un bloqueo en un objeto que tiene una identidad débil.</span><span class="sxs-lookup"><span data-stu-id="0da17-112">A thread attempts to acquire a lock on an object that has a weak identity.</span></span>

## <a name="rule-description"></a><span data-ttu-id="0da17-113">Descripción de la regla</span><span class="sxs-lookup"><span data-stu-id="0da17-113">Rule description</span></span>

<span data-ttu-id="0da17-114">Se dice que un objeto tiene una identidad débil cuando se puede tener acceso directamente a través de los límites del dominio de aplicación.</span><span class="sxs-lookup"><span data-stu-id="0da17-114">An object is said to have a weak identity when it can be directly accessed across application domain boundaries.</span></span> <span data-ttu-id="0da17-115">Un subproceso que intenta obtener un bloqueo en un objeto que tiene identidad débil se puede bloquear con un segundo subproceso en un dominio de aplicación diferente que tenga bloqueado el mismo objeto.</span><span class="sxs-lookup"><span data-stu-id="0da17-115">A thread that tries to acquire a lock on an object that has a weak identity can be blocked by a second thread in a different application domain that has a lock on the same object.</span></span>

<span data-ttu-id="0da17-116">Los tipos siguientes tienen una identidad débil y están marcados por la regla:</span><span class="sxs-lookup"><span data-stu-id="0da17-116">The following types have a weak identity and are flagged by the rule:</span></span>

- <xref:System.String>

- <span data-ttu-id="0da17-117">Matrices de tipos de valor, incluidos los [tipos enteros](../../../csharp/language-reference/builtin-types/integral-numeric-types.md), los [tipos de punto flotante](../../../csharp/language-reference/builtin-types/floating-point-numeric-types.md)y <xref:System.Boolean> .</span><span class="sxs-lookup"><span data-stu-id="0da17-117">Arrays of value types, including [integral types](../../../csharp/language-reference/builtin-types/integral-numeric-types.md), [floating-point types](../../../csharp/language-reference/builtin-types/floating-point-numeric-types.md), and <xref:System.Boolean>.</span></span>

- <xref:System.MarshalByRefObject>

- <xref:System.ExecutionEngineException>

- <xref:System.OutOfMemoryException>

- <xref:System.StackOverflowException>

- <xref:System.Reflection.MemberInfo>

- <xref:System.Reflection.ParameterInfo>

- <xref:System.Threading.Thread>

- <span data-ttu-id="0da17-118">objeto [this](../../../csharp/language-reference/keywords/this.md) o [me](../../../visual-basic/programming-guide/program-structure/me-my-mybase-and-myclass.md)</span><span class="sxs-lookup"><span data-stu-id="0da17-118">[this](../../../csharp/language-reference/keywords/this.md) or [Me](../../../visual-basic/programming-guide/program-structure/me-my-mybase-and-myclass.md) object</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="0da17-119">Cómo corregir infracciones</span><span class="sxs-lookup"><span data-stu-id="0da17-119">How to fix violations</span></span>

<span data-ttu-id="0da17-120">Para corregir una infracción de esta regla, use un objeto de un tipo que no esté en la lista de la sección Descripción.</span><span class="sxs-lookup"><span data-stu-id="0da17-120">To fix a violation of this rule, use an object from a type that is not in the list in the Description section.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="0da17-121">Cuándo suprimir advertencias</span><span class="sxs-lookup"><span data-stu-id="0da17-121">When to suppress warnings</span></span>

<span data-ttu-id="0da17-122">Es seguro suprimir la advertencia si el objeto bloqueado es `this` o `Me` y la visibilidad del tipo de objeto propio es privado o interno, y no se puede tener acceso a la instancia mediante ninguna referencia pública.</span><span class="sxs-lookup"><span data-stu-id="0da17-122">It is safe to suppress the warning if the locked object is `this` or `Me` and the visibility of the self object type is private or internal, and the instance is not accessible using any public reference.</span></span>

<span data-ttu-id="0da17-123">De lo contrario, no suprima una advertencia de esta regla.</span><span class="sxs-lookup"><span data-stu-id="0da17-123">Otherwise, do not suppress a warning from this rule.</span></span>

## <a name="related-rules"></a><span data-ttu-id="0da17-124">Reglas relacionadas</span><span class="sxs-lookup"><span data-stu-id="0da17-124">Related rules</span></span>

[<span data-ttu-id="0da17-125">CA2213: Los campos descartables deben ser descartables</span><span class="sxs-lookup"><span data-stu-id="0da17-125">CA2213: Disposable fields should be disposed</span></span>](ca2213.md)

## <a name="example"></a><span data-ttu-id="0da17-126">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="0da17-126">Example</span></span>

<span data-ttu-id="0da17-127">En el ejemplo siguiente se muestran algunos bloqueos de objetos que infringen la regla.</span><span class="sxs-lookup"><span data-stu-id="0da17-127">The following example shows some object locks that violate the rule.</span></span>

:::code language="vb" source="snippets/vb/all-rules/ca2002-do-not-lock-on-objects-with-weak-identity_1.vb":::

:::code language="csharp" source="snippets/csharp/all-rules/ca2002.cs" id="snippet1":::

## <a name="see-also"></a><span data-ttu-id="0da17-128">Vea también</span><span class="sxs-lookup"><span data-stu-id="0da17-128">See also</span></span>

- <xref:System.Threading.Monitor>
- <xref:System.AppDomain>
- [<span data-ttu-id="0da17-129">Lock (instrucción) (C#)</span><span class="sxs-lookup"><span data-stu-id="0da17-129">lock Statement (C#)</span></span>](../../../csharp/language-reference/keywords/lock-statement.md)
- [<span data-ttu-id="0da17-130">Instrucción SyncLock (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="0da17-130">SyncLock Statement (Visual Basic)</span></span>](../../../visual-basic/language-reference/statements/synclock-statement.md)
