---
title: 'CA1070: no declarar campos de evento como virtuales (análisis de código)'
description: 'Más información sobre la regla de análisis de código CA1070: no declarar campos de evento como virtuales'
ms.date: 04/30/2020
ms.topic: reference
f1_keywords:
- CA1070
helpviewer_keywords:
- CA1070
author: mavasani
ms.author: mavasani
ms.openlocfilehash: 0a13305cebe1ad7f82205e9fc144a96095037cdd
ms.sourcegitcommit: e301979e3049ce412d19b094c60ed95b316a8f8c
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/16/2020
ms.locfileid: "98190954"
---
# <a name="ca1070-do-not-declare-event-fields-as-virtual"></a><span data-ttu-id="2d41d-103">CA1070: No declarar los campos de eventos como virtuales</span><span class="sxs-lookup"><span data-stu-id="2d41d-103">CA1070: Do not declare event fields as virtual</span></span>

| | <span data-ttu-id="2d41d-104">Valor</span><span class="sxs-lookup"><span data-stu-id="2d41d-104">Value</span></span> |
|-|-|
| <span data-ttu-id="2d41d-105">**Identificador de la regla**</span><span class="sxs-lookup"><span data-stu-id="2d41d-105">**Rule ID**</span></span> |<span data-ttu-id="2d41d-106">CA1070</span><span class="sxs-lookup"><span data-stu-id="2d41d-106">CA1070</span></span>|
| <span data-ttu-id="2d41d-107">**Categoría**</span><span class="sxs-lookup"><span data-stu-id="2d41d-107">**Category**</span></span> |<span data-ttu-id="2d41d-108">Microsoft. Design</span><span class="sxs-lookup"><span data-stu-id="2d41d-108">Microsoft.Design</span></span>|
| <span data-ttu-id="2d41d-109">**Corrección o interrupción**</span><span class="sxs-lookup"><span data-stu-id="2d41d-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="2d41d-110">Problemático</span><span class="sxs-lookup"><span data-stu-id="2d41d-110">Breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="2d41d-111">Causa</span><span class="sxs-lookup"><span data-stu-id="2d41d-111">Cause</span></span>

<span data-ttu-id="2d41d-112">Un [evento similar](../../../csharp/event-pattern.md#defining-and-raising-field-like-events) a un campo se declaró como virtual.</span><span class="sxs-lookup"><span data-stu-id="2d41d-112">A [field-like event](../../../csharp/event-pattern.md#defining-and-raising-field-like-events) was declared as virtual.</span></span>

<span data-ttu-id="2d41d-113">De forma predeterminada, esta regla solo examina los tipos visibles externamente, pero esto es [configurable](#configure-code-to-analyze).</span><span class="sxs-lookup"><span data-stu-id="2d41d-113">By default, this rule only looks at externally visible types, but this is [configurable](#configure-code-to-analyze).</span></span>

## <a name="rule-description"></a><span data-ttu-id="2d41d-114">Descripción de la regla</span><span class="sxs-lookup"><span data-stu-id="2d41d-114">Rule description</span></span>

<span data-ttu-id="2d41d-115">Siga estas [instrucciones de diseño de .net](../../../csharp/programming-guide/events/how-to-raise-base-class-events-in-derived-classes.md) para generar eventos de clase base en clases derivadas.</span><span class="sxs-lookup"><span data-stu-id="2d41d-115">Follow these [.NET design guidelines](../../../csharp/programming-guide/events/how-to-raise-base-class-events-in-derived-classes.md) to raise base class events in derived classes.</span></span> <span data-ttu-id="2d41d-116">No declare eventos virtuales en una clase base.</span><span class="sxs-lookup"><span data-stu-id="2d41d-116">Do not declare virtual events in a base class.</span></span> <span data-ttu-id="2d41d-117">Los eventos invalidados en una clase derivada tienen un comportamiento indefinido.</span><span class="sxs-lookup"><span data-stu-id="2d41d-117">Overridden events in a derived class have undefined behavior.</span></span> <span data-ttu-id="2d41d-118">El compilador de C# no lo controla correctamente y es imprevisible si un suscriptor del evento derivado se va a suscribir realmente al evento de la clase base.</span><span class="sxs-lookup"><span data-stu-id="2d41d-118">The C# compiler does not handle this correctly and it is unpredictable whether a subscriber to the derived event will actually be subscribing to the base class event.</span></span>

```csharp
using System;
public class C
{
    // CA1070: Event 'ThresholdReached' should not be declared virtual.
    public virtual event EventHandler ThresholdReached;
}
```

## <a name="how-to-fix-violations"></a><span data-ttu-id="2d41d-119">Cómo corregir infracciones</span><span class="sxs-lookup"><span data-stu-id="2d41d-119">How to fix violations</span></span>

<span data-ttu-id="2d41d-120">Siga estas [instrucciones de diseño de .net](../../../csharp/programming-guide/events/how-to-raise-base-class-events-in-derived-classes.md) y evite eventos virtuales similares a los campos.</span><span class="sxs-lookup"><span data-stu-id="2d41d-120">Follow these [.NET design guidelines](../../../csharp/programming-guide/events/how-to-raise-base-class-events-in-derived-classes.md) and avoid virtual field-like events.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="2d41d-121">Cuándo suprimir advertencias</span><span class="sxs-lookup"><span data-stu-id="2d41d-121">When to suppress warnings</span></span>

<span data-ttu-id="2d41d-122">Si el evento es una API pública externamente visible que ya forma parte de una biblioteca enviada, es seguro suprimir una advertencia de esta regla para evitar un cambio importante para los consumidores de la biblioteca.</span><span class="sxs-lookup"><span data-stu-id="2d41d-122">If the event is an externally visible public API that is already part of a shipped library, then it is safe to suppress a warning from this rule to avoid a breaking change for the library consumers.</span></span>

## <a name="configure-code-to-analyze"></a><span data-ttu-id="2d41d-123">Configurar el código para analizar</span><span class="sxs-lookup"><span data-stu-id="2d41d-123">Configure code to analyze</span></span>

<span data-ttu-id="2d41d-124">Use la opción siguiente para configurar en qué partes del código base ejecutar esta regla.</span><span class="sxs-lookup"><span data-stu-id="2d41d-124">Use the following option to configure which parts of your codebase to run this rule on.</span></span>

- [<span data-ttu-id="2d41d-125">Incluir superficies de API específicas</span><span class="sxs-lookup"><span data-stu-id="2d41d-125">Include specific API surfaces</span></span>](#include-specific-api-surfaces)

<span data-ttu-id="2d41d-126">Puede configurar esta opción solo para esta regla, para todas las reglas o para todas las reglas de esta categoría (diseño).</span><span class="sxs-lookup"><span data-stu-id="2d41d-126">You can configure this option for just this rule, for all rules, or for all rules in this category (Design).</span></span> <span data-ttu-id="2d41d-127">Para obtener más información, vea [Opciones de configuración de reglas de calidad de código](../code-quality-rule-options.md).</span><span class="sxs-lookup"><span data-stu-id="2d41d-127">For more information, see [Code quality rule configuration options](../code-quality-rule-options.md).</span></span>

[!INCLUDE[api-surface](~/includes/code-analysis/api-surface.md)]

## <a name="see-also"></a><span data-ttu-id="2d41d-128">Consulta también</span><span class="sxs-lookup"><span data-stu-id="2d41d-128">See also</span></span>

- [<span data-ttu-id="2d41d-129">Reglas de diseño</span><span class="sxs-lookup"><span data-stu-id="2d41d-129">Design rules</span></span>](design-warnings.md)
