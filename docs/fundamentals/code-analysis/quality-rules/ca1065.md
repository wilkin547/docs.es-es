---
title: 'CA1065: no producir excepciones en ubicaciones inesperadas (análisis de código)'
description: 'Más información sobre la regla de análisis de código CA1065: no producir excepciones en ubicaciones inesperadas'
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- CA1065
- DoNotRaiseExceptionsInUnexpectedLocations
helpviewer_keywords:
- DoNotRaiseExceptionsInUnexpectedLocations
- CA1065
author: gewarren
ms.author: gewarren
ms.openlocfilehash: 0990fc1c283e7961f1ece1a374a6a06960968faf
ms.sourcegitcommit: 4df8e005c074ceb1f978f007b222fe253be2baf3
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/04/2021
ms.locfileid: "99548323"
---
# <a name="ca1065-do-not-raise-exceptions-in-unexpected-locations"></a><span data-ttu-id="c4ea3-103">CA1065: No producir excepciones en ubicaciones inesperadas</span><span class="sxs-lookup"><span data-stu-id="c4ea3-103">CA1065: Do not raise exceptions in unexpected locations</span></span>

| | <span data-ttu-id="c4ea3-104">Value</span><span class="sxs-lookup"><span data-stu-id="c4ea3-104">Value</span></span> |
|-|-|
| <span data-ttu-id="c4ea3-105">**Identificador de la regla**</span><span class="sxs-lookup"><span data-stu-id="c4ea3-105">**Rule ID**</span></span> |<span data-ttu-id="c4ea3-106">CA1065</span><span class="sxs-lookup"><span data-stu-id="c4ea3-106">CA1065</span></span>|
| <span data-ttu-id="c4ea3-107">**Categoría**</span><span class="sxs-lookup"><span data-stu-id="c4ea3-107">**Category**</span></span> |[<span data-ttu-id="c4ea3-108">Microsoft. Design</span><span class="sxs-lookup"><span data-stu-id="c4ea3-108">Microsoft.Design</span></span>](design-warnings.md)|
| <span data-ttu-id="c4ea3-109">**Corrección o interrupción**</span><span class="sxs-lookup"><span data-stu-id="c4ea3-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="c4ea3-110">Poco problemático</span><span class="sxs-lookup"><span data-stu-id="c4ea3-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="c4ea3-111">Causa</span><span class="sxs-lookup"><span data-stu-id="c4ea3-111">Cause</span></span>

<span data-ttu-id="c4ea3-112">Un método que no se espera que produzca excepciones inicia una excepción.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-112">A method that is not expected to throw exceptions throws an exception.</span></span>

## <a name="rule-description"></a><span data-ttu-id="c4ea3-113">Descripción de la regla</span><span class="sxs-lookup"><span data-stu-id="c4ea3-113">Rule description</span></span>

<span data-ttu-id="c4ea3-114">Los métodos que no se espera que produzcan excepciones se pueden categorizar de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="c4ea3-114">Methods that are not expected to throw exceptions can be categorized as follows:</span></span>

- <span data-ttu-id="c4ea3-115">Métodos Get de propiedad</span><span class="sxs-lookup"><span data-stu-id="c4ea3-115">Property Get Methods</span></span>

- <span data-ttu-id="c4ea3-116">Métodos de descriptor de acceso de eventos</span><span class="sxs-lookup"><span data-stu-id="c4ea3-116">Event Accessor Methods</span></span>

- <span data-ttu-id="c4ea3-117">Equals (métodos)</span><span class="sxs-lookup"><span data-stu-id="c4ea3-117">Equals Methods</span></span>

- <span data-ttu-id="c4ea3-118">GetHashCode (métodos)</span><span class="sxs-lookup"><span data-stu-id="c4ea3-118">GetHashCode Methods</span></span>

- <span data-ttu-id="c4ea3-119">ToString (métodos)</span><span class="sxs-lookup"><span data-stu-id="c4ea3-119">ToString Methods</span></span>

- <span data-ttu-id="c4ea3-120">Constructores estáticos</span><span class="sxs-lookup"><span data-stu-id="c4ea3-120">Static Constructors</span></span>

- <span data-ttu-id="c4ea3-121">Finalizadores</span><span class="sxs-lookup"><span data-stu-id="c4ea3-121">Finalizers</span></span>

- <span data-ttu-id="c4ea3-122">Métodos Dispose</span><span class="sxs-lookup"><span data-stu-id="c4ea3-122">Dispose Methods</span></span>

- <span data-ttu-id="c4ea3-123">Operadores de igualdad</span><span class="sxs-lookup"><span data-stu-id="c4ea3-123">Equality Operators</span></span>

- <span data-ttu-id="c4ea3-124">Operadores de conversión implícita</span><span class="sxs-lookup"><span data-stu-id="c4ea3-124">Implicit Cast Operators</span></span>

<span data-ttu-id="c4ea3-125">En las secciones siguientes se describen estos tipos de método.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-125">The following sections discuss these method types.</span></span>

### <a name="property-get-methods"></a><span data-ttu-id="c4ea3-126">Métodos Get de propiedad</span><span class="sxs-lookup"><span data-stu-id="c4ea3-126">Property Get Methods</span></span>

<span data-ttu-id="c4ea3-127">Las propiedades son básicamente campos inteligentes.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-127">Properties are basically smart fields.</span></span> <span data-ttu-id="c4ea3-128">Por lo tanto, deben comportarse como un campo lo máximo posible.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-128">Therefore, they should behave like a field as much as possible.</span></span> <span data-ttu-id="c4ea3-129">Los campos no producen excepciones y no deben ser propiedades.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-129">Fields don't throw exceptions and neither should properties.</span></span> <span data-ttu-id="c4ea3-130">Si tiene una propiedad que inicia una excepción, considere la posibilidad de convertirla en un método.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-130">If you have a property that throws an exception, consider making it a method.</span></span>

<span data-ttu-id="c4ea3-131">Se pueden producir las siguientes excepciones desde un método get de propiedad:</span><span class="sxs-lookup"><span data-stu-id="c4ea3-131">The following exceptions can be thrown from a property get method:</span></span>

- <span data-ttu-id="c4ea3-132"><xref:System.InvalidOperationException?displayProperty=fullName> y todos los derivados (incluido <xref:System.ObjectDisposedException?displayProperty=fullName> )</span><span class="sxs-lookup"><span data-stu-id="c4ea3-132"><xref:System.InvalidOperationException?displayProperty=fullName> and all derivatives (including <xref:System.ObjectDisposedException?displayProperty=fullName>)</span></span>

- <span data-ttu-id="c4ea3-133"><xref:System.NotSupportedException?displayProperty=fullName> y todos los derivados</span><span class="sxs-lookup"><span data-stu-id="c4ea3-133"><xref:System.NotSupportedException?displayProperty=fullName> and all derivatives</span></span>

- <span data-ttu-id="c4ea3-134"><xref:System.ArgumentException?displayProperty=fullName> (solo desde Get indizado)</span><span class="sxs-lookup"><span data-stu-id="c4ea3-134"><xref:System.ArgumentException?displayProperty=fullName> (only from indexed get)</span></span>

- <span data-ttu-id="c4ea3-135"><xref:System.Collections.Generic.KeyNotFoundException> (solo desde Get indizado)</span><span class="sxs-lookup"><span data-stu-id="c4ea3-135"><xref:System.Collections.Generic.KeyNotFoundException> (only from indexed get)</span></span>

### <a name="event-accessor-methods"></a><span data-ttu-id="c4ea3-136">Métodos de descriptor de acceso de eventos</span><span class="sxs-lookup"><span data-stu-id="c4ea3-136">Event Accessor Methods</span></span>

<span data-ttu-id="c4ea3-137">Los descriptores de acceso de eventos deben ser operaciones simples que no inician excepciones.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-137">Event accessors should be simple operations that don't throw exceptions.</span></span> <span data-ttu-id="c4ea3-138">Un evento no debe producir una excepción al intentar agregar o quitar un controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-138">An event should not throw an exception when you try to add or remove an event handler.</span></span>

<span data-ttu-id="c4ea3-139">Se pueden producir las siguientes excepciones desde un descriptor de acceso de eventos:</span><span class="sxs-lookup"><span data-stu-id="c4ea3-139">The following exceptions can be thrown from an event accessor:</span></span>

- <span data-ttu-id="c4ea3-140"><xref:System.InvalidOperationException?displayProperty=fullName> y todos los derivados (incluido <xref:System.ObjectDisposedException?displayProperty=fullName> )</span><span class="sxs-lookup"><span data-stu-id="c4ea3-140"><xref:System.InvalidOperationException?displayProperty=fullName> and all derivatives (including <xref:System.ObjectDisposedException?displayProperty=fullName>)</span></span>

- <span data-ttu-id="c4ea3-141"><xref:System.NotSupportedException?displayProperty=fullName> y todos los derivados</span><span class="sxs-lookup"><span data-stu-id="c4ea3-141"><xref:System.NotSupportedException?displayProperty=fullName> and all derivatives</span></span>

- <span data-ttu-id="c4ea3-142"><xref:System.ArgumentException> y derivados</span><span class="sxs-lookup"><span data-stu-id="c4ea3-142"><xref:System.ArgumentException> and derivatives</span></span>

### <a name="equals-methods"></a><span data-ttu-id="c4ea3-143">Equals (métodos)</span><span class="sxs-lookup"><span data-stu-id="c4ea3-143">Equals Methods</span></span>

<span data-ttu-id="c4ea3-144">Los siguientes métodos **Equals** no deben producir excepciones:</span><span class="sxs-lookup"><span data-stu-id="c4ea3-144">The following **Equals** methods should not throw exceptions:</span></span>

- <xref:System.Object.Equals%2A?displayProperty=fullName>

- <xref:System.IEquatable%601.Equals%2A>

<span data-ttu-id="c4ea3-145">Un método **Equals** debe devolver `true` o `false` en lugar de producir una excepción.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-145">An **Equals** method should return `true` or `false` instead of throwing an exception.</span></span> <span data-ttu-id="c4ea3-146">Por ejemplo, si se pasan dos tipos no coincidentes, debe devolver simplemente `false` en lugar de producir una excepción <xref:System.ArgumentException> .</span><span class="sxs-lookup"><span data-stu-id="c4ea3-146">For example, if Equals is passed two mismatched types it should just return `false` instead of throwing an <xref:System.ArgumentException>.</span></span>

### <a name="gethashcode-methods"></a><span data-ttu-id="c4ea3-147">GetHashCode (métodos)</span><span class="sxs-lookup"><span data-stu-id="c4ea3-147">GetHashCode Methods</span></span>

<span data-ttu-id="c4ea3-148">Los siguientes métodos **GetHashCode** normalmente no deben producir excepciones:</span><span class="sxs-lookup"><span data-stu-id="c4ea3-148">The following **GetHashCode** methods should usually not throw exceptions:</span></span>

- <xref:System.Object.GetHashCode%2A>

- <xref:System.Collections.IEqualityComparer.GetHashCode%2A>

<span data-ttu-id="c4ea3-149">**GetHashCode** siempre debe devolver un valor.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-149">**GetHashCode** should always return a value.</span></span> <span data-ttu-id="c4ea3-150">De lo contrario, puede perder elementos en la tabla hash.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-150">Otherwise, you can lose items in the hash table.</span></span>

<span data-ttu-id="c4ea3-151">Las versiones de **GetHashCode** que toman un argumento pueden producir una excepción <xref:System.ArgumentException> .</span><span class="sxs-lookup"><span data-stu-id="c4ea3-151">The versions of **GetHashCode** that take an argument can throw an <xref:System.ArgumentException>.</span></span> <span data-ttu-id="c4ea3-152">Sin embargo, **Object. GetHashCode** nunca debe producir una excepción.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-152">However, **Object.GetHashCode** should never throw an exception.</span></span>

### <a name="tostring-methods"></a><span data-ttu-id="c4ea3-153">ToString (métodos)</span><span class="sxs-lookup"><span data-stu-id="c4ea3-153">ToString Methods</span></span>

<span data-ttu-id="c4ea3-154">El depurador usa <xref:System.Object.ToString%2A?displayProperty=fullName> para ayudar a mostrar información sobre los objetos en formato de cadena.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-154">The debugger uses <xref:System.Object.ToString%2A?displayProperty=fullName> to help display information about objects in string format.</span></span> <span data-ttu-id="c4ea3-155">Por lo tanto, **ToString** no debe cambiar el estado de un objeto y no debería producir excepciones.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-155">Therefore, **ToString** should not change the state of an object, and it shouldn't throw exceptions.</span></span>

### <a name="static-constructors"></a><span data-ttu-id="c4ea3-156">Constructores estáticos</span><span class="sxs-lookup"><span data-stu-id="c4ea3-156">Static Constructors</span></span>

<span data-ttu-id="c4ea3-157">Producir excepciones desde un constructor estático hace que el tipo sea inutilizable en el dominio de aplicación actual.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-157">Throwing exceptions from a static constructor causes the type to be unusable in the current application domain.</span></span> <span data-ttu-id="c4ea3-158">Debe tener una buena razón (por ejemplo, un problema de seguridad) para iniciar una excepción desde un constructor estático.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-158">You should have a good reason (such as a security issue) for throwing an exception from a static constructor.</span></span>

### <a name="finalizers"></a><span data-ttu-id="c4ea3-159">Finalizadores</span><span class="sxs-lookup"><span data-stu-id="c4ea3-159">Finalizers</span></span>

<span data-ttu-id="c4ea3-160">Producir una excepción desde un finalizador hace que el CLR genere un error rápido, lo que anula el proceso.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-160">Throwing an exception from a finalizer causes the CLR to fail fast, which tears down the process.</span></span> <span data-ttu-id="c4ea3-161">Por consiguiente, siempre debe evitarse la generación de excepciones en un finalizador.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-161">Therefore, throwing exceptions in a finalizer should always be avoided.</span></span>

### <a name="dispose-methods"></a><span data-ttu-id="c4ea3-162">Métodos Dispose</span><span class="sxs-lookup"><span data-stu-id="c4ea3-162">Dispose Methods</span></span>

<span data-ttu-id="c4ea3-163">Un <xref:System.IDisposable.Dispose%2A?displayProperty=fullName> método no debe producir una excepción.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-163">A <xref:System.IDisposable.Dispose%2A?displayProperty=fullName> method should not throw an exception.</span></span> <span data-ttu-id="c4ea3-164">Dispose a menudo se llama como parte de la lógica de limpieza en una `finally` cláusula.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-164">Dispose is often called as part of the cleanup logic in a `finally` clause.</span></span> <span data-ttu-id="c4ea3-165">Por consiguiente, iniciar explícitamente una excepción desde Dispose obliga al usuario a agregar el control de excepciones dentro de la `finally` cláusula.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-165">Therefore, explicitly throwing an exception from Dispose forces the user to add exception handling inside the `finally` clause.</span></span>

<span data-ttu-id="c4ea3-166">La ruta de acceso del código **Dispose (false)** nunca debe producir excepciones, porque casi siempre se llama a Dispose desde un finalizador.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-166">The **Dispose(false)** code path should never throw exceptions, because Dispose is almost always called from a finalizer.</span></span>

### <a name="equality-operators--"></a><span data-ttu-id="c4ea3-167">Operadores de igualdad (= =,! =)</span><span class="sxs-lookup"><span data-stu-id="c4ea3-167">Equality Operators (==, !=)</span></span>

<span data-ttu-id="c4ea3-168">Al igual que los métodos Equals, los operadores de igualdad deben devolver `true` o `false` , y no deben producir excepciones.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-168">Like Equals methods, equality operators should return either `true` or `false`, and should not throw exceptions.</span></span>

### <a name="implicit-cast-operators"></a><span data-ttu-id="c4ea3-169">Operadores de conversión implícita</span><span class="sxs-lookup"><span data-stu-id="c4ea3-169">Implicit Cast Operators</span></span>

<span data-ttu-id="c4ea3-170">Dado que el usuario a menudo no es consciente de que se ha llamado a un operador de conversión implícito, no se espera una excepción iniciada por el operador de conversión implícito.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-170">Because the user is often unaware that an implicit cast operator has been called, an exception thrown by the implicit cast operator is unexpected.</span></span> <span data-ttu-id="c4ea3-171">Por lo tanto, no se debe producir ninguna excepción desde los operadores de conversión implícitos.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-171">Therefore, no exceptions should be thrown from implicit cast operators.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="c4ea3-172">Cómo corregir infracciones</span><span class="sxs-lookup"><span data-stu-id="c4ea3-172">How to fix violations</span></span>

<span data-ttu-id="c4ea3-173">En el caso de captadores de propiedades, cambie la lógica para que ya no tenga que producir una excepción, o bien cambie la propiedad a un método.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-173">For property getters, either change the logic so that it no longer has to throw an exception, or change the property into a method.</span></span>

<span data-ttu-id="c4ea3-174">En el caso de todos los demás tipos de método enumerados anteriormente, cambie la lógica para que ya no sea necesario producir una excepción.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-174">For all other method types listed previously, change the logic so that it no longer must throw an exception.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="c4ea3-175">Cuándo suprimir advertencias</span><span class="sxs-lookup"><span data-stu-id="c4ea3-175">When to suppress warnings</span></span>

<span data-ttu-id="c4ea3-176">Si la infracción se debió a una declaración de excepción en lugar de a una excepción iniciada, es seguro suprimir una advertencia de esta regla.</span><span class="sxs-lookup"><span data-stu-id="c4ea3-176">If the violation was caused by an exception declaration instead of a thrown exception, it is safe to suppress a warning from this rule.</span></span>

## <a name="related-rules"></a><span data-ttu-id="c4ea3-177">Reglas relacionadas</span><span class="sxs-lookup"><span data-stu-id="c4ea3-177">Related rules</span></span>

- [<span data-ttu-id="c4ea3-178">CA2219: No producir excepciones en cláusulas de excepción</span><span class="sxs-lookup"><span data-stu-id="c4ea3-178">CA2219: Do not raise exceptions in exception clauses</span></span>](ca2219.md)

## <a name="see-also"></a><span data-ttu-id="c4ea3-179">Vea también</span><span class="sxs-lookup"><span data-stu-id="c4ea3-179">See also</span></span>

- [<span data-ttu-id="c4ea3-180">Reglas de diseño</span><span class="sxs-lookup"><span data-stu-id="c4ea3-180">Design rules</span></span>](design-warnings.md)
