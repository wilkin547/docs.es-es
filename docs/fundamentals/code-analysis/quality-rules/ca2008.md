---
title: 'CA2008: no crear tareas sin pasar un TaskScheduler (análisis de código)'
description: 'Más información sobre la regla de análisis de código CA2008: no crear tareas sin pasar un TaskScheduler'
ms.date: 08/26/2020
ms.topic: reference
f1_keywords:
- CA2008
- DoNotCreateTasksWithoutPassingATaskSchedulerAnalyzer
helpviewer_keywords:
- CA2008
author: gewarren
ms.author: gewarren
ms.openlocfilehash: 84a97e2fd653998b7b03056b8e50b32759c9ee99
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/06/2021
ms.locfileid: "99787661"
---
# <a name="ca2008-do-not-create-tasks-without-passing-a-taskscheduler"></a><span data-ttu-id="7051d-103">CA2008: No crear tareas sin pasar un elemento TaskScheduler</span><span class="sxs-lookup"><span data-stu-id="7051d-103">CA2008: Do not create tasks without passing a TaskScheduler</span></span>

| | <span data-ttu-id="7051d-104">Value</span><span class="sxs-lookup"><span data-stu-id="7051d-104">Value</span></span> |
|-|-|
| <span data-ttu-id="7051d-105">**Identificador de la regla**</span><span class="sxs-lookup"><span data-stu-id="7051d-105">**Rule ID**</span></span> |<span data-ttu-id="7051d-106">CA2008</span><span class="sxs-lookup"><span data-stu-id="7051d-106">CA2008</span></span>|
| <span data-ttu-id="7051d-107">**Categoría**</span><span class="sxs-lookup"><span data-stu-id="7051d-107">**Category**</span></span> |[<span data-ttu-id="7051d-108">Confiabilidad</span><span class="sxs-lookup"><span data-stu-id="7051d-108">Reliability</span></span>](reliability-warnings.md)|
| <span data-ttu-id="7051d-109">**Corrección o interrupción**</span><span class="sxs-lookup"><span data-stu-id="7051d-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="7051d-110">Poco problemático</span><span class="sxs-lookup"><span data-stu-id="7051d-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="7051d-111">Causa</span><span class="sxs-lookup"><span data-stu-id="7051d-111">Cause</span></span>

<span data-ttu-id="7051d-112">Una operación de creación o continuación de tareas utiliza una sobrecarga de método que no especifica un <xref:System.Threading.Tasks.TaskScheduler> parámetro.</span><span class="sxs-lookup"><span data-stu-id="7051d-112">A task creation or continuation operation uses a method overload that does not specify a <xref:System.Threading.Tasks.TaskScheduler> parameter.</span></span>

## <a name="rule-description"></a><span data-ttu-id="7051d-113">Descripción de la regla</span><span class="sxs-lookup"><span data-stu-id="7051d-113">Rule description</span></span>

<span data-ttu-id="7051d-114">Los siguientes métodos de creación y continuación de tareas de .NET tienen sobrecargas que permiten especificar u omitir una <xref:System.Threading.Tasks.TaskScheduler> instancia de:</span><span class="sxs-lookup"><span data-stu-id="7051d-114">The following .NET task creation and continuation methods have overloads that allow specifying or omitting a <xref:System.Threading.Tasks.TaskScheduler> instance:</span></span>

- <span data-ttu-id="7051d-115"><xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=fullName> modalidades</span><span class="sxs-lookup"><span data-stu-id="7051d-115"><xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=fullName> methods</span></span>
- <span data-ttu-id="7051d-116"><xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=fullName> modalidades</span><span class="sxs-lookup"><span data-stu-id="7051d-116"><xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=fullName> methods</span></span>

<span data-ttu-id="7051d-117">Especifique siempre un <xref:System.Threading.Tasks.TaskScheduler> argumento explícito para evitar el <xref:System.Threading.Tasks.TaskScheduler.Current%2A> valor predeterminado, cuyo comportamiento lo define el autor de la llamada y puede variar en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="7051d-117">Always specify an explicit <xref:System.Threading.Tasks.TaskScheduler> argument to avoid the default <xref:System.Threading.Tasks.TaskScheduler.Current%2A> value, whose behavior is defined by the caller and may vary at runtime.</span></span> <span data-ttu-id="7051d-118"><xref:System.Threading.Tasks.TaskScheduler.Current%2A> Devuelve el programador asociado a cualquier objeto que <xref:System.Threading.Tasks.Task> se esté ejecutando actualmente en ese subproceso.</span><span class="sxs-lookup"><span data-stu-id="7051d-118"><xref:System.Threading.Tasks.TaskScheduler.Current%2A> returns the scheduler associated with whatever <xref:System.Threading.Tasks.Task> is currently running on that thread.</span></span> <span data-ttu-id="7051d-119">Si no hay ninguna tarea, devuelve <xref:System.Threading.Tasks.TaskScheduler.Default%2A> , que representa el grupo de subprocesos.</span><span class="sxs-lookup"><span data-stu-id="7051d-119">If there is no such task, it returns <xref:System.Threading.Tasks.TaskScheduler.Default%2A>, which represents the thread pool.</span></span> <span data-ttu-id="7051d-120">El uso <xref:System.Threading.Tasks.TaskScheduler.Current%2A> de puede provocar interbloqueos o problemas de capacidad de respuesta de la interfaz de usuario en algunas situaciones, cuando se diseñó para crear la tarea en el grupo de subprocesos, pero en su lugar espera volver a entrar en el subproceso de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="7051d-120">Using <xref:System.Threading.Tasks.TaskScheduler.Current%2A> could lead to deadlocks or UI responsiveness issues in some situations, when it was intended to create the task on the thread pool, but instead it waits to get back onto the UI thread.</span></span>

<span data-ttu-id="7051d-121">Para obtener más información y ejemplos detallados, consulte [New TaskCreationOptions and TaskContinuationOptions in .NET Framework 4,5](https://devblogs.microsoft.com/pfxteam/new-taskcreationoptions-and-taskcontinuationoptions-in-net-4-5/).</span><span class="sxs-lookup"><span data-stu-id="7051d-121">For further information and detailed examples, see [New TaskCreationOptions and TaskContinuationOptions in .NET Framework 4.5](https://devblogs.microsoft.com/pfxteam/new-taskcreationoptions-and-taskcontinuationoptions-in-net-4-5/).</span></span>

> [!NOTE]
> <span data-ttu-id="7051d-122">[VSTHRD105: Evite sobrecargas de método que asuman TaskScheduler. Current](https://github.com/microsoft/vs-threading/blob/master/doc/analyzers/VSTHRD105.md) es una regla similar implementada en el paquete [Microsoft. VisualStudio. Threading. analizadores](https://www.nuget.org/packages/Microsoft.VisualStudio.Threading.Analyzers) .</span><span class="sxs-lookup"><span data-stu-id="7051d-122">[VSTHRD105 - Avoid method overloads that assume TaskScheduler.Current](https://github.com/microsoft/vs-threading/blob/master/doc/analyzers/VSTHRD105.md) is a similar rule implemented in [Microsoft.VisualStudio.Threading.Analyzers](https://www.nuget.org/packages/Microsoft.VisualStudio.Threading.Analyzers) package.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="7051d-123">Cómo corregir infracciones</span><span class="sxs-lookup"><span data-stu-id="7051d-123">How to fix violations</span></span>

<span data-ttu-id="7051d-124">Para corregir las infracciones, llame a la sobrecarga del método que toma un <xref:System.Threading.Tasks.TaskScheduler> y pase explícitamente <xref:System.Threading.Tasks.TaskScheduler.Default%2A> o <xref:System.Threading.Tasks.TaskScheduler.Current%2A> para que la intención sea clara.</span><span class="sxs-lookup"><span data-stu-id="7051d-124">To fix violations, call the method overload that takes a <xref:System.Threading.Tasks.TaskScheduler> and explicitly pass in <xref:System.Threading.Tasks.TaskScheduler.Default%2A> or <xref:System.Threading.Tasks.TaskScheduler.Current%2A> to make the intent clear.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="7051d-125">Cuándo suprimir advertencias</span><span class="sxs-lookup"><span data-stu-id="7051d-125">When to suppress warnings</span></span>

<span data-ttu-id="7051d-126">Esta advertencia está destinada principalmente a las bibliotecas, donde el código se puede ejecutar en entornos arbitrarios y donde el código no debe realizar suposiciones sobre el entorno o cómo el llamador del método puede invocar o esperar en él.</span><span class="sxs-lookup"><span data-stu-id="7051d-126">This warning is intended primarily for libraries, where the code may be executed in arbitrary environments and where code shouldn't make assumptions about the environment or how the caller of the method may be invoking or waiting on it.</span></span> <span data-ttu-id="7051d-127">Puede ser adecuado suprimir la advertencia para los proyectos que representan código de aplicación en lugar de código de biblioteca.</span><span class="sxs-lookup"><span data-stu-id="7051d-127">It may be appropriate to suppress the warning for projects that represent application code rather than library code.</span></span>

## <a name="see-also"></a><span data-ttu-id="7051d-128">Vea también</span><span class="sxs-lookup"><span data-stu-id="7051d-128">See also</span></span>

- [<span data-ttu-id="7051d-129">Nuevo TaskCreationOptions y TaskContinuationOptions en .NET Framework 4,5</span><span class="sxs-lookup"><span data-stu-id="7051d-129">New TaskCreationOptions and TaskContinuationOptions in .NET Framework 4.5</span></span>](https://devblogs.microsoft.com/pfxteam/new-taskcreationoptions-and-taskcontinuationoptions-in-net-4-5/)
- [<span data-ttu-id="7051d-130">VSTHRD105: Evite sobrecargas de método que asuman TaskScheduler. Current.</span><span class="sxs-lookup"><span data-stu-id="7051d-130">VSTHRD105 - Avoid method overloads that assume TaskScheduler.Current</span></span>](https://github.com/microsoft/vs-threading/blob/master/doc/analyzers/VSTHRD105.md)
- [<span data-ttu-id="7051d-131">CA2007: No esperar una tarea directamente</span><span class="sxs-lookup"><span data-stu-id="7051d-131">CA2007: Do not directly await a Task</span></span>](ca2007.md)
- [<span data-ttu-id="7051d-132">Reglas de confiabilidad</span><span class="sxs-lookup"><span data-stu-id="7051d-132">Reliability rules</span></span>](reliability-warnings.md)
