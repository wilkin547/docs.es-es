---
title: 'CA2361: Asegúrese de que la clase generada automáticamente que contiene DataSet. ReadXml () no se utiliza con datos que no son de confianza (análisis de código)'
description: 'Más información sobre la regla de análisis de código CA2361: Asegúrese de que la clase generada automáticamente que contiene DataSet. ReadXml () no se utiliza con datos que no son de confianza'
ms.date: 08/11/2020
ms.topic: reference
author: dotpaul
ms.author: paulming
dev_langs:
- CSharp
f1_keywords:
- CA2361
ms.openlocfilehash: c931a942b9607f3301b31ea4ca7cddc2b895310c
ms.sourcegitcommit: 4df8e005c074ceb1f978f007b222fe253be2baf3
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/04/2021
ms.locfileid: "99544286"
---
# <a name="ca2361-ensure-autogenerated-class-containing-datasetreadxml-is-not-used-with-untrusted-data"></a>CA2361: Asegurarse de que la clase autogenerada que contiene DataSet.ReadXml() no se utilice con datos que no son de confianza

| | Valor |
|-|-|
| **Identificador de la regla** |CA2361|
| **Categoría** |[Microsoft.Security](security-warnings.md)|
| **Corrección o interrupción** |Poco problemático|

## <a name="cause"></a>Causa

<xref:System.Data.DataSet.ReadXml%2A?displayProperty=nameWithType>Se llamó al método o se hacía referencia a él y se encuentra dentro del código generado automáticamente.

Esta regla clasifica el código generado automáticamente b:

- Estar dentro de un método denominado `ReadXmlSerializable` .
- El `ReadXmlSerializable` método tiene un <xref:System.Diagnostics.DebuggerNonUserCodeAttribute?displayProperty=nameWithType> .
- El `ReadXmlSerializable` método está dentro de un tipo que tiene un <xref:System.ComponentModel.DesignerCategoryAttribute?displayProperty=nameWithType> .

[CA2351](ca2351.md) es una regla similar, para cuando <xref:System.Data.DataSet.ReadXml%2A?displayProperty=nameWithType> aparece en código no generado automáticamente.

## <a name="rule-description"></a>Descripción de la regla

Al deserializar un <xref:System.Data.DataSet> con una entrada que no es de confianza, un atacante puede crear una entrada malintencionada para realizar un ataque de denegación de servicio. Puede haber vulnerabilidades de ejecución de código remoto desconocidas.

Esta regla es como [CA2351](ca2351.md), pero para el código generado automáticamente para una representación en memoria de los datos dentro de una aplicación GUI. Normalmente, estas clases autogeneradas no se deserializan de la entrada que no es de confianza. El uso de la aplicación puede variar.

Para obtener más información, consulte la [Guía de seguridad DataSet y DataTable](../../../framework/data/adonet/dataset-datatable-dataview/security-guidance.md).

## <a name="how-to-fix-violations"></a>Cómo corregir infracciones

- Si es posible, use [Entity Framework](/ef/) en lugar de <xref:System.Data.DataSet> .
- Convierta la prueba de alteración de los datos serializados. Después de la serialización, firme criptográficamente los datos serializados. Antes de la deserialización, valide la firma criptográfica. Proteja la clave criptográfica para que no se revele y diseñe las rotaciones de clave.

## <a name="when-to-suppress-warnings"></a>Cuándo suprimir advertencias

[!INCLUDE[insecure-deserializers-common-safe-to-suppress](~/includes/code-analysis/insecure-deserializers-common-safe-to-suppress.md)]

## <a name="pseudo-code-examples"></a>Ejemplos de pseudocódigo

### <a name="violation"></a>Infracción

```csharp
namespace ExampleNamespace
{
    /// <summary>
    ///Represents a strongly typed in-memory cache of data.
    ///</summary>
    [global::System.Serializable()]
    [global::System.ComponentModel.DesignerCategoryAttribute("code")]
    [global::System.ComponentModel.ToolboxItem(true)]
    [global::System.Xml.Serialization.XmlSchemaProviderAttribute("GetTypedDataSetSchema")]
    [global::System.Xml.Serialization.XmlRootAttribute("Package")]
    [global::System.ComponentModel.Design.HelpKeywordAttribute("vs.data.DataSet")]
    public partial class Something : global::System.Data.DataSet {

        [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [global::System.CodeDom.Compiler.GeneratedCodeAttribute("System.Data.Design.TypedDataSetGenerator", "4.0.0.0")]
        protected override void ReadXmlSerializable(global::System.Xml.XmlReader reader) {
            if ((this.DetermineSchemaSerializationMode(reader) == global::System.Data.SchemaSerializationMode.IncludeSchema)) {
                this.Reset();
                global::System.Data.DataSet ds = new global::System.Data.DataSet();
                ds.ReadXml(reader);
                if ((ds.Tables["Something"] != null)) {
                    base.Tables.Add(new SomethingTable(ds.Tables["Something"]));
                }
                this.DataSetName = ds.DataSetName;
                this.Prefix = ds.Prefix;
                this.Namespace = ds.Namespace;
                this.Locale = ds.Locale;
                this.CaseSensitive = ds.CaseSensitive;
                this.EnforceConstraints = ds.EnforceConstraints;
                this.Merge(ds, false, global::System.Data.MissingSchemaAction.Add);
                this.InitVars();
            }
            else {
                this.ReadXml(reader);
                this.InitVars();
            }
        }
    }
}
```

## <a name="related-rules"></a>Reglas relacionadas

[CA2350: Asegurarse de que la entrada de DataTable.ReadXml() sea de confianza](ca2350.md)

[CA2351: Asegúrese de que la entrada de DataSet.ReadXml() sea de confianza](ca2351.md)

[CA2352: Un objeto DataSet o DataTable no seguro en un tipo serializable puede ser vulnerable a ataques de ejecución de código remoto](ca2352.md)

[CA2353: Objeto DataSet o DataTable no seguro en un tipo serializable](ca2353.md)

[CA2354: Un objeto DataSet o DataTable no seguro en un gráfico de objetos deserializado puede ser vulnerable a ataques de ejecución de código remoto](ca2354.md)

[CA2355: Objeto DataSet o DataTable no seguro en un gráfico de objetos deserializado](ca2355.md)

[CA2356: DataSet no seguro o DataTable en el gráfico de objetos deserializados Web](ca2356.md)

[CA2362: Un elemento DataSet o DataTable no seguro en un tipo serializable autogenerado puede ser vulnerable a ataques de ejecución remota de código](ca2362.md)
