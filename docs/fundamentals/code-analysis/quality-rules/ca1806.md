---
title: 'CA1806: no omitir resultados del método (análisis de código)'
description: 'Más información sobre la regla de análisis de código CA1806: no omitir resultados del método'
ms.date: 06/08/2020
ms.topic: reference
f1_keywords:
- CA1806
- DoNotIgnoreMethodResults
helpviewer_keywords:
- CA1806
- DoNotIgnoreMethodResults
author: gewarren
ms.author: gewarren
dev_langs:
- CSharp
- VB
ms.openlocfilehash: c5a132697eaeeb7e0ce70a69099d0c0085f1187d
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/06/2021
ms.locfileid: "99776909"
---
# <a name="ca1806-do-not-ignore-method-results"></a><span data-ttu-id="c0e19-103">CA1806: No omitir resultados del método</span><span class="sxs-lookup"><span data-stu-id="c0e19-103">CA1806: Do not ignore method results</span></span>

| | <span data-ttu-id="c0e19-104">Value</span><span class="sxs-lookup"><span data-stu-id="c0e19-104">Value</span></span> |
|-|-|
| <span data-ttu-id="c0e19-105">**Identificador de la regla**</span><span class="sxs-lookup"><span data-stu-id="c0e19-105">**Rule ID**</span></span> |<span data-ttu-id="c0e19-106">CA1806</span><span class="sxs-lookup"><span data-stu-id="c0e19-106">CA1806</span></span>|
| <span data-ttu-id="c0e19-107">**Categoría**</span><span class="sxs-lookup"><span data-stu-id="c0e19-107">**Category**</span></span> |[<span data-ttu-id="c0e19-108">Uso</span><span class="sxs-lookup"><span data-stu-id="c0e19-108">Usage</span></span>](usage-warnings.md)|
| <span data-ttu-id="c0e19-109">**Corrección o interrupción**</span><span class="sxs-lookup"><span data-stu-id="c0e19-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="c0e19-110">Poco problemático</span><span class="sxs-lookup"><span data-stu-id="c0e19-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="c0e19-111">Causa</span><span class="sxs-lookup"><span data-stu-id="c0e19-111">Cause</span></span>

<span data-ttu-id="c0e19-112">Hay varias razones posibles para esta ADVERTENCIA:</span><span class="sxs-lookup"><span data-stu-id="c0e19-112">There are several possible reasons for this warning:</span></span>

- <span data-ttu-id="c0e19-113">Se crea un nuevo objeto, pero nunca se usa.</span><span class="sxs-lookup"><span data-stu-id="c0e19-113">A new object is created but never used.</span></span>

- <span data-ttu-id="c0e19-114">Se llama a un método que crea y devuelve una nueva cadena y la nueva cadena nunca se utiliza.</span><span class="sxs-lookup"><span data-stu-id="c0e19-114">A method that creates and returns a new string is called and the new string is never used.</span></span>

- <span data-ttu-id="c0e19-115">Un método COM o P/Invoke que devuelve un `HRESULT` código de error o que nunca se utiliza.</span><span class="sxs-lookup"><span data-stu-id="c0e19-115">A COM or P/Invoke method that returns a `HRESULT` or error code that is never used.</span></span>

- <span data-ttu-id="c0e19-116">Método de Language-Integrated Query (LINQ) que devuelve un resultado que nunca se usa.</span><span class="sxs-lookup"><span data-stu-id="c0e19-116">A language-integrated query (LINQ) method that returns a result that is never used.</span></span>

## <a name="rule-description"></a><span data-ttu-id="c0e19-117">Descripción de la regla</span><span class="sxs-lookup"><span data-stu-id="c0e19-117">Rule description</span></span>

<span data-ttu-id="c0e19-118">La creación de objetos innecesarios y la recolección de elementos no utilizados asociada del objeto no usado degrada el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="c0e19-118">Unnecessary object creation and the associated garbage collection of the unused object degrade performance.</span></span>

<span data-ttu-id="c0e19-119">Las cadenas son inmutables y los métodos como String. ToUpper devuelven una nueva instancia de una cadena en lugar de modificar la instancia de la cadena en el método de llamada.</span><span class="sxs-lookup"><span data-stu-id="c0e19-119">Strings are immutable and methods such as String.ToUpper returns a new instance of a string instead of modifying the instance of the string in the calling method.</span></span>

<span data-ttu-id="c0e19-120">Si `HRESULT` se omite o el código de error puede provocar un comportamiento inesperado en condiciones de error o en condiciones de recursos insuficientes.</span><span class="sxs-lookup"><span data-stu-id="c0e19-120">Ignoring `HRESULT` or error code can lead to unexpected behavior in error conditions or to low-resource conditions.</span></span>

<span data-ttu-id="c0e19-121">Se sabe que los métodos LINQ no tienen efectos secundarios y el resultado no debe omitirse.</span><span class="sxs-lookup"><span data-stu-id="c0e19-121">LINQ methods are known to not have side effects, and the result should not be ignored.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="c0e19-122">Cómo corregir infracciones</span><span class="sxs-lookup"><span data-stu-id="c0e19-122">How to fix violations</span></span>

<span data-ttu-id="c0e19-123">Si el método A crea una nueva instancia del objeto B que nunca se utiliza, pase la instancia como un argumento a otro método o asigne la instancia a una variable.</span><span class="sxs-lookup"><span data-stu-id="c0e19-123">If method A creates a new instance of B object that is never used, pass the instance as an argument to another method or assign the instance to a variable.</span></span> <span data-ttu-id="c0e19-124">Si la creación del objeto es innecesaria, quítela.</span><span class="sxs-lookup"><span data-stu-id="c0e19-124">If the object creation is unnecessary, remove the it.</span></span>

<span data-ttu-id="c0e19-125">o bien</span><span class="sxs-lookup"><span data-stu-id="c0e19-125">-or-</span></span>

<span data-ttu-id="c0e19-126">Si el método A llama al método B, pero no usa la nueva instancia de la cadena que devuelve el método B, pasa la instancia como un argumento a otro método, asigna la instancia a una variable.</span><span class="sxs-lookup"><span data-stu-id="c0e19-126">If method A calls method B, but does not use the new string instance that the method B returns, pass the instance as an argument to another method, assign the instance to a variable.</span></span> <span data-ttu-id="c0e19-127">O quite la llamada si no es necesario.</span><span class="sxs-lookup"><span data-stu-id="c0e19-127">Or remove the call if it is unnecessary.</span></span>

<span data-ttu-id="c0e19-128">o bien</span><span class="sxs-lookup"><span data-stu-id="c0e19-128">-or-</span></span>

<span data-ttu-id="c0e19-129">Si el método A llama al método B, pero no usa el `HRESULT` código de error o que devuelve el método, utilice el resultado en una instrucción condicional, asigne el resultado a una variable o páselo como argumento a otro método.</span><span class="sxs-lookup"><span data-stu-id="c0e19-129">If method A calls method B, but does not use the `HRESULT` or error code that the method returns, use the result in a conditional statement, assign the result to a variable, or pass it as an argument to another method.</span></span>

<span data-ttu-id="c0e19-130">o bien</span><span class="sxs-lookup"><span data-stu-id="c0e19-130">-or-</span></span>

<span data-ttu-id="c0e19-131">Si un método LINQ A llama al método B, pero no usa el resultado, use el resultado en una instrucción condicional, asigne el resultado a una variable o páselo como argumento a otro método.</span><span class="sxs-lookup"><span data-stu-id="c0e19-131">If a LINQ method A calls method B, but does not use the result, use the result in a conditional statement, assign the result to a variable, or pass it as an argument to another method.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="c0e19-132">Cuándo suprimir advertencias</span><span class="sxs-lookup"><span data-stu-id="c0e19-132">When to suppress warnings</span></span>

<span data-ttu-id="c0e19-133">No suprima una advertencia de esta regla a menos que el acto de crear el objeto tenga algún propósito.</span><span class="sxs-lookup"><span data-stu-id="c0e19-133">Do not suppress a warning from this rule unless the act of creating the object serves some purpose.</span></span>

## <a name="example-1"></a><span data-ttu-id="c0e19-134">Ejemplo 1</span><span class="sxs-lookup"><span data-stu-id="c0e19-134">Example 1</span></span>

<span data-ttu-id="c0e19-135">En el ejemplo siguiente se muestra una clase que omite el resultado de llamar a String. Trim.</span><span class="sxs-lookup"><span data-stu-id="c0e19-135">The following example shows a class that ignores the result of calling String.Trim.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca1806.cs" id="snippet1":::

:::code language="vb" source="snippets/vb/all-rules/ca1806-do-not-ignore-method-results_1.vb" id="snippet1":::

## <a name="example-2"></a><span data-ttu-id="c0e19-136">Ejemplo 2</span><span class="sxs-lookup"><span data-stu-id="c0e19-136">Example 2</span></span>

<span data-ttu-id="c0e19-137">En el ejemplo siguiente se corrige la infracción anterior asignando el resultado de String. Trim de nuevo a la variable en la que se llamó.</span><span class="sxs-lookup"><span data-stu-id="c0e19-137">The following example fixes the previous violation by assigning the result of String.Trim back to the variable it was called on.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca1806.cs" id="snippet2":::

:::code language="vb" source="snippets/vb/all-rules/ca1806-do-not-ignore-method-results_1.vb" id="snippet2":::

## <a name="example-3"></a><span data-ttu-id="c0e19-138">Ejemplo 3</span><span class="sxs-lookup"><span data-stu-id="c0e19-138">Example 3</span></span>

<span data-ttu-id="c0e19-139">En el ejemplo siguiente se muestra un método que no utiliza un objeto que crea.</span><span class="sxs-lookup"><span data-stu-id="c0e19-139">The following example shows a method that does not use an object that it creates.</span></span>

> [!NOTE]
> <span data-ttu-id="c0e19-140">Esta infracción no se puede reproducir en Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="c0e19-140">This violation cannot be reproduced in Visual Basic.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca1806.cs" id="snippet3":::

## <a name="example-4"></a><span data-ttu-id="c0e19-141">Ejemplo 4</span><span class="sxs-lookup"><span data-stu-id="c0e19-141">Example 4</span></span>

<span data-ttu-id="c0e19-142">En el ejemplo siguiente se corrige la infracción anterior quitando la creación innecesaria de un objeto.</span><span class="sxs-lookup"><span data-stu-id="c0e19-142">The following example fixes the previous violation by removing the unnecessary creation of an object.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca1806.cs" id="snippet4":::

<!-- Examples don't exist for the following...

The following example shows a method that ignores the error code that the native method GetShortPathName returns.

The following example fixes the previous violation by checking the error code and throwing an exception when the call fails.
-->
