---
title: 'CA1031: no capturar los tipos de excepción general (análisis de código)'
description: 'Más información sobre la regla de análisis de código CA1031: no detectar tipos de excepción general'
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- CA1031
- DoNotCatchGeneralExceptionTypes
helpviewer_keywords:
- CA1031
- DoNotCatchGeneralExceptionTypes
author: gewarren
ms.author: gewarren
dev_langs:
- CSharp
- VB
ms.openlocfilehash: af33134376b22c389f702c4a0663c2954b778ef4
ms.sourcegitcommit: fcbe432482464b1639decad78cc4dc8387c6269e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/12/2020
ms.locfileid: "97366782"
---
# <a name="ca1031-do-not-catch-general-exception-types"></a><span data-ttu-id="11db6-103">CA1031: No capturar los tipos de excepción general</span><span class="sxs-lookup"><span data-stu-id="11db6-103">CA1031: Do not catch general exception types</span></span>

| <span data-ttu-id="11db6-104">Elemento</span><span class="sxs-lookup"><span data-stu-id="11db6-104">Item</span></span>                                     | <span data-ttu-id="11db6-105">Valor</span><span class="sxs-lookup"><span data-stu-id="11db6-105">Value</span></span>            |
|------------------------------------------|------------------|
| <span data-ttu-id="11db6-106">RuleId</span><span class="sxs-lookup"><span data-stu-id="11db6-106">RuleId</span></span>                                   | <span data-ttu-id="11db6-107">CA1031</span><span class="sxs-lookup"><span data-stu-id="11db6-107">CA1031</span></span>           |
| <span data-ttu-id="11db6-108">Categoría</span><span class="sxs-lookup"><span data-stu-id="11db6-108">Category</span></span>                                 | <span data-ttu-id="11db6-109">Microsoft. Design</span><span class="sxs-lookup"><span data-stu-id="11db6-109">Microsoft.Design</span></span> |
| <span data-ttu-id="11db6-110">Corrección o interrupción</span><span class="sxs-lookup"><span data-stu-id="11db6-110">Fix is breaking or non-breaking</span></span> | <span data-ttu-id="11db6-111">Poco problemático</span><span class="sxs-lookup"><span data-stu-id="11db6-111">Non-breaking</span></span>     |

## <a name="cause"></a><span data-ttu-id="11db6-112">Causa</span><span class="sxs-lookup"><span data-stu-id="11db6-112">Cause</span></span>

<span data-ttu-id="11db6-113">Una excepción general como <xref:System.Exception?displayProperty=fullName> o <xref:System.SystemException?displayProperty=fullName> se detecta en una `catch` instrucción, o se utiliza una cláusula catch general como `catch()` .</span><span class="sxs-lookup"><span data-stu-id="11db6-113">A general exception such as <xref:System.Exception?displayProperty=fullName> or <xref:System.SystemException?displayProperty=fullName> is caught in a `catch` statement, or a general catch clause such as `catch()` is used.</span></span>

<span data-ttu-id="11db6-114">De forma predeterminada, esta regla solo marca los tipos de excepción generales que se detectan, pero esto es [configurable](#configurability).</span><span class="sxs-lookup"><span data-stu-id="11db6-114">By default, this rule only flags general exception types being caught, but this is [configurable](#configurability).</span></span>

## <a name="rule-description"></a><span data-ttu-id="11db6-115">Descripción de la regla</span><span class="sxs-lookup"><span data-stu-id="11db6-115">Rule description</span></span>

<span data-ttu-id="11db6-116">No se deben capturar excepciones generales.</span><span class="sxs-lookup"><span data-stu-id="11db6-116">General exceptions should not be caught.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="11db6-117">Cómo corregir infracciones</span><span class="sxs-lookup"><span data-stu-id="11db6-117">How to fix violations</span></span>

<span data-ttu-id="11db6-118">Para corregir una infracción de esta regla, detecte una excepción más específica o vuelva a producir la excepción general como última instrucción del `catch` bloque.</span><span class="sxs-lookup"><span data-stu-id="11db6-118">To fix a violation of this rule, catch a more specific exception, or rethrow the general exception as the last statement in the `catch` block.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="11db6-119">Cuándo suprimir advertencias</span><span class="sxs-lookup"><span data-stu-id="11db6-119">When to suppress warnings</span></span>

<span data-ttu-id="11db6-120">No suprima las advertencias de esta regla.</span><span class="sxs-lookup"><span data-stu-id="11db6-120">Do not suppress a warning from this rule.</span></span> <span data-ttu-id="11db6-121">La detección de tipos de excepción generales puede ocultar problemas en tiempo de ejecución del usuario de la biblioteca y puede dificultar la depuración.</span><span class="sxs-lookup"><span data-stu-id="11db6-121">Catching general exception types can hide run-time problems from the library user and can make debugging more difficult.</span></span>

> [!NOTE]
> <span data-ttu-id="11db6-122">A partir de .NET Framework 4, el Common Language Runtime (CLR) ya no proporciona excepciones de estado dañadas que se producen en el sistema operativo y el código administrado, como infracciones de acceso en Windows, para que los controle el código administrado.</span><span class="sxs-lookup"><span data-stu-id="11db6-122">Starting with .NET Framework 4, the common language runtime (CLR) no longer delivers corrupted state exceptions that occur in the operating system and managed code, such as access violations in Windows, to be handled by managed code.</span></span> <span data-ttu-id="11db6-123">Si desea compilar una aplicación en .NET Framework 4 o versiones posteriores y mantener el control de las excepciones de estado dañadas, puede aplicar el <xref:System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptionsAttribute> atributo al método que controla la excepción de estado dañado.</span><span class="sxs-lookup"><span data-stu-id="11db6-123">If you want to compile an application in .NET Framework 4 or later versions and maintain handling of corrupted state exceptions, you can apply the <xref:System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptionsAttribute> attribute to the method that handles the corrupted state exception.</span></span>

## <a name="configurability"></a><span data-ttu-id="11db6-124">Configurabilidad</span><span class="sxs-lookup"><span data-stu-id="11db6-124">Configurability</span></span>

<span data-ttu-id="11db6-125">Esta regla tiene las siguientes opciones configurables.</span><span class="sxs-lookup"><span data-stu-id="11db6-125">This rule has the following configurable options.</span></span>

### <a name="disallowed-exception-type-names"></a><span data-ttu-id="11db6-126">Nombres de tipo de excepción no permitidos</span><span class="sxs-lookup"><span data-stu-id="11db6-126">Disallowed exception type names</span></span>

<span data-ttu-id="11db6-127">Puede configurar los tipos de excepción que no se permiten detectar.</span><span class="sxs-lookup"><span data-stu-id="11db6-127">You can configure which exception types are disallowed from being caught.</span></span> <span data-ttu-id="11db6-128">Por ejemplo, para especificar que la regla debe marcar los `catch` controladores con `NullReferenceException` , agregue el siguiente par clave-valor a un archivo *. editorconfig* en el proyecto:</span><span class="sxs-lookup"><span data-stu-id="11db6-128">For example, to specify that the rule should flag `catch` handlers with `NullReferenceException`, add the following key-value pair to an *.editorconfig* file in your project:</span></span>

```ini
dotnet_code_quality.CA1031.disallowed_symbol_names = NullReferenceException
```

<span data-ttu-id="11db6-129">Formatos de nombre de tipo permitidos en el valor de opción (separados por `|` ):</span><span class="sxs-lookup"><span data-stu-id="11db6-129">Allowed type name formats in the option value (separated by `|`):</span></span>

- <span data-ttu-id="11db6-130">Solo nombre de tipo (incluye todos los símbolos con el nombre, independientemente del tipo o espacio de nombres contenedor)</span><span class="sxs-lookup"><span data-stu-id="11db6-130">Type name only (includes all symbols with the name, regardless of the containing type or namespace)</span></span>
- <span data-ttu-id="11db6-131">Nombres completos en el [formato de ID](../../../csharp/programming-guide/xmldoc/processing-the-xml-file.md#id-strings) . de documentación del símbolo con un `T:` prefijo.</span><span class="sxs-lookup"><span data-stu-id="11db6-131">Fully qualified names in the symbol's [documentation ID format](../../../csharp/programming-guide/xmldoc/processing-the-xml-file.md#id-strings) with a `T:` prefix.</span></span>

<span data-ttu-id="11db6-132">Ejemplos:</span><span class="sxs-lookup"><span data-stu-id="11db6-132">Examples:</span></span>

| <span data-ttu-id="11db6-133">Valor de la opción</span><span class="sxs-lookup"><span data-stu-id="11db6-133">Option Value</span></span> | <span data-ttu-id="11db6-134">Resumen</span><span class="sxs-lookup"><span data-stu-id="11db6-134">Summary</span></span> |
| --- | --- |
|`dotnet_code_quality.CA1031.disallowed_symbol_names = ExceptionType` | <span data-ttu-id="11db6-135">Coincide con todos los símbolos denominados ' Tipoexcepción ' en la compilación</span><span class="sxs-lookup"><span data-stu-id="11db6-135">Matches all symbols named 'ExceptionType' in the compilation</span></span>
|`dotnet_code_quality.CA1031.disallowed_symbol_names = ExceptionType1|ExceptionType2` | <span data-ttu-id="11db6-136">Coincide con todos los símbolos denominados ' ExceptionType1 ' o ' ExceptionType2 ' en la compilación</span><span class="sxs-lookup"><span data-stu-id="11db6-136">Matches all symbols named either 'ExceptionType1' or 'ExceptionType2' in the compilation</span></span>
|`dotnet_code_quality.CA1031.disallowed_symbol_names = T:NS.ExceptionType` | <span data-ttu-id="11db6-137">Coincide con tipos específicos denominados ' Tipoexcepción ' con el nombre completo especificado.</span><span class="sxs-lookup"><span data-stu-id="11db6-137">Matches specific types named 'ExceptionType' with given fully qualified name.</span></span>
|`dotnet_code_quality.CA1031.disallowed_symbol_names = T:NS1.ExceptionType1|T:NS1.ExceptionType2` | <span data-ttu-id="11db6-138">Coincide con los tipos denominados "ExceptionType1" y "ExceptionType2" con los nombres completos correspondientes</span><span class="sxs-lookup"><span data-stu-id="11db6-138">Matches types named 'ExceptionType1' and 'ExceptionType2' with respective fully qualified names</span></span>

<span data-ttu-id="11db6-139">Puede configurar estas opciones solo para esta regla, para todas las reglas o para todas las reglas de esta categoría (diseño).</span><span class="sxs-lookup"><span data-stu-id="11db6-139">You can configure these options for just this rule, for all rules, or for all rules in this category (Design).</span></span> <span data-ttu-id="11db6-140">Para obtener más información, vea [Opciones de configuración de reglas de calidad de código](../code-quality-rule-options.md).</span><span class="sxs-lookup"><span data-stu-id="11db6-140">For more information, see [Code quality rule configuration options](../code-quality-rule-options.md).</span></span>

## <a name="example"></a><span data-ttu-id="11db6-141">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="11db6-141">Example</span></span>

<span data-ttu-id="11db6-142">En el ejemplo siguiente se muestra un tipo que infringe esta regla y un tipo que implementa correctamente el `catch` bloque.</span><span class="sxs-lookup"><span data-stu-id="11db6-142">The following example shows a type that violates this rule and a type that correctly implements the `catch` block.</span></span>

:::code language="vb" source="snippets/vb/all-rules/ca1031-do-not-catch-general-exception-types_1.vb":::

:::code language="csharp" source="snippets/csharp/all-rules/ca1031.cs" id="snippet1":::

## <a name="related-rules"></a><span data-ttu-id="11db6-143">Reglas relacionadas</span><span class="sxs-lookup"><span data-stu-id="11db6-143">Related rules</span></span>

[<span data-ttu-id="11db6-144">CA2200: Reiniciar para mantener los detalles de la pila</span><span class="sxs-lookup"><span data-stu-id="11db6-144">CA2200: Rethrow to preserve stack details</span></span>](ca2200.md)
