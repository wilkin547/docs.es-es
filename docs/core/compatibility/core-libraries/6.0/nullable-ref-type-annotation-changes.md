---
title: 'Cambio importante: cambios de anotación en los tipos de referencia que aceptan valores NULL'
description: Obtenga información sobre el cambio importante de .NET 6.0 en las bibliotecas de .NET básicas, donde algunas anotaciones de tipo de referencia que aceptan valores NULL han cambiado.
ms.date: 02/11/2021
ms.openlocfilehash: a0133ce49ba33d0e835b718f3f2b19180526c61b
ms.sourcegitcommit: 10e719780594efc781b15295e499c66f316068b8
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 02/14/2021
ms.locfileid: "100488254"
---
# <a name="changes-to-nullable-reference-type-annotations"></a><span data-ttu-id="00f95-103">Cambios en las anotaciones de tipos de referencia que aceptan valores NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-103">Changes to nullable reference type annotations</span></span>

<span data-ttu-id="00f95-104">En .NET 6.0, algunas anotaciones de nulabilidad de las bibliotecas de .NET han cambiado.</span><span class="sxs-lookup"><span data-stu-id="00f95-104">In .NET 6.0, some nullability annotations in the .NET libraries have changed.</span></span>

## <a name="change-description"></a><span data-ttu-id="00f95-105">Descripción del cambio</span><span class="sxs-lookup"><span data-stu-id="00f95-105">Change description</span></span>

<span data-ttu-id="00f95-106">En versiones anteriores de .NET, algunas anotaciones de tipos de referencia que aceptan valores NULL son incorrectas y las advertencias de compilación están ausentes o son incorrectas.</span><span class="sxs-lookup"><span data-stu-id="00f95-106">In previous .NET versions, some nullable reference type annotations are incorrect, and build warnings are either absent or incorrect.</span></span> <span data-ttu-id="00f95-107">A partir de .NET 6.0, se han actualizado algunas anotaciones aplicadas previamente.</span><span class="sxs-lookup"><span data-stu-id="00f95-107">Starting in .NET 6.0, some annotations that were previously applied have been updated.</span></span> <span data-ttu-id="00f95-108">Se generarán nuevas advertencias de compilación y ya no se producirán advertencias de compilación incorrectas para las API afectadas.</span><span class="sxs-lookup"><span data-stu-id="00f95-108">New build warnings will be produced and incorrect build warnings will no longer be produced for the affected APIs.</span></span>

<span data-ttu-id="00f95-109">Algunos de estos cambios se consideran *importantes*, ya que pueden dar lugar a nuevas advertencias en tiempo de compilación.</span><span class="sxs-lookup"><span data-stu-id="00f95-109">Some of these changes are considered to be *breaking* because they can lead to new build-time warnings.</span></span> <span data-ttu-id="00f95-110">Al realizar la migración a .NET 6.0, será necesario actualizar el código que hace referencia a estas API.</span><span class="sxs-lookup"><span data-stu-id="00f95-110">When you migrate to .NET 6.0, code that references these APIs will need to be updated.</span></span>

<span data-ttu-id="00f95-111">En esta página también se documentan otros cambios que no se consideran importantes.</span><span class="sxs-lookup"><span data-stu-id="00f95-111">Other changes that aren't considered to be breaking are also documented on this page.</span></span> <span data-ttu-id="00f95-112">Cualquier código que haga referencia a las API actualizadas se puede beneficiar de la eliminación de operadores o pragmas que ya no sean necesarios.</span><span class="sxs-lookup"><span data-stu-id="00f95-112">Any code that references the updated APIs may benefit from removing operators or pragmas that are no longer unnecessary.</span></span>

## <a name="version-introduced"></a><span data-ttu-id="00f95-113">Versión introducida</span><span class="sxs-lookup"><span data-stu-id="00f95-113">Version introduced</span></span>

<span data-ttu-id="00f95-114">6.0</span><span class="sxs-lookup"><span data-stu-id="00f95-114">6.0</span></span>

## <a name="reason-for-change"></a><span data-ttu-id="00f95-115">Motivo del cambio</span><span class="sxs-lookup"><span data-stu-id="00f95-115">Reason for change</span></span>

<span data-ttu-id="00f95-116">A partir de .NET Core 3.0, se han aplicado anotaciones de nulabilidad a las bibliotecas de .NET.</span><span class="sxs-lookup"><span data-stu-id="00f95-116">Starting in .NET Core 3.0, nullability annotations were applied to the .NET libraries.</span></span> <span data-ttu-id="00f95-117">Desde el principio del esfuerzo, se esperaban errores en estas anotaciones.</span><span class="sxs-lookup"><span data-stu-id="00f95-117">From the outset of the effort, mistakes in these annotations were anticipated.</span></span> <span data-ttu-id="00f95-118">Gracias a comentarios y pruebas adicionales, se ha determinado que las anotaciones que aceptan valores NULL de las API afectadas eran inexactas.</span><span class="sxs-lookup"><span data-stu-id="00f95-118">Through feedback and further testing, the nullable annotations for the affected APIs were determined to be inaccurate.</span></span> <span data-ttu-id="00f95-119">Las anotaciones actualizadas representan correctamente los contratos de nulabilidad de las API.</span><span class="sxs-lookup"><span data-stu-id="00f95-119">The updated annotations correctly represent the nullability contracts for the APIs.</span></span>

## <a name="recommended-action"></a><span data-ttu-id="00f95-120">Acción recomendada</span><span class="sxs-lookup"><span data-stu-id="00f95-120">Recommended action</span></span>

<span data-ttu-id="00f95-121">Actualice el código que llama a estas API para reflejar los contratos de nulabilidad revisados.</span><span class="sxs-lookup"><span data-stu-id="00f95-121">Update code that calls these APIs to reflect the revised nullability contracts.</span></span>

## <a name="affected-apis"></a><span data-ttu-id="00f95-122">API afectadas</span><span class="sxs-lookup"><span data-stu-id="00f95-122">Affected APIs</span></span>

<span data-ttu-id="00f95-123">En la tabla siguiente se enumeran las API afectadas:</span><span class="sxs-lookup"><span data-stu-id="00f95-123">The following table lists the affected APIs:</span></span>

| <span data-ttu-id="00f95-124">API</span><span class="sxs-lookup"><span data-stu-id="00f95-124">API</span></span> | <span data-ttu-id="00f95-125">Qué cambia</span><span class="sxs-lookup"><span data-stu-id="00f95-125">What changed</span></span> | <span data-ttu-id="00f95-126">Importante o no importante</span><span class="sxs-lookup"><span data-stu-id="00f95-126">Breaking or nonbreaking</span></span> | <span data-ttu-id="00f95-127">Versión agregada</span><span class="sxs-lookup"><span data-stu-id="00f95-127">Version added</span></span> |
| - | - | - |
| <xref:System.ComponentModel.ISite.Container?displayProperty=nameWithType> | <span data-ttu-id="00f95-128">Tipo de propiedad que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-128">Property type is nullable</span></span> | <span data-ttu-id="00f95-129">Problemático</span><span class="sxs-lookup"><span data-stu-id="00f95-129">Breaking</span></span> | <span data-ttu-id="00f95-130">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-130">Preview 1</span></span> |
| <xref:System.Xml.Linq.XContainer.Add(System.Object[])?displayProperty=nameWithType> | <span data-ttu-id="00f95-131">Tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-131">Parameter type is nullable</span></span> | <span data-ttu-id="00f95-132">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-132">Nonbreaking</span></span> | <span data-ttu-id="00f95-133">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-133">Preview 1</span></span> |
| <xref:System.Xml.Linq.XContainer.AddFirst(System.Object[])?displayProperty=nameWithType> | <span data-ttu-id="00f95-134">Tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-134">Parameter type is nullable</span></span> | <span data-ttu-id="00f95-135">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-135">Nonbreaking</span></span> | <span data-ttu-id="00f95-136">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-136">Preview 1</span></span> |
| <xref:System.Xml.Linq.XContainer.ReplaceNodes(System.Object[])?displayProperty=nameWithType> | <span data-ttu-id="00f95-137">Tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-137">Parameter type is nullable</span></span> | <span data-ttu-id="00f95-138">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-138">Nonbreaking</span></span> | <span data-ttu-id="00f95-139">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-139">Preview 1</span></span> |
| <xref:System.Xml.Linq.XDocument.%23ctor(System.Object[])> | <span data-ttu-id="00f95-140">Tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-140">Parameter type is nullable</span></span> | <span data-ttu-id="00f95-141">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-141">Nonbreaking</span></span> | <span data-ttu-id="00f95-142">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-142">Preview 1</span></span> |
| <xref:System.Xml.Linq.XDocument.%23ctor(System.Xml.Linq.XDeclaration,System.Object[])> | <span data-ttu-id="00f95-143">Tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-143">Parameter type is nullable</span></span> | <span data-ttu-id="00f95-144">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-144">Nonbreaking</span></span> | <span data-ttu-id="00f95-145">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-145">Preview 1</span></span> |
| <xref:System.Xml.Linq.XElement.%23ctor(System.Xml.Linq.XName,System.Object[])> | <span data-ttu-id="00f95-146">Segundo tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-146">Second parameter type is nullable</span></span> | <span data-ttu-id="00f95-147">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-147">Nonbreaking</span></span> | <span data-ttu-id="00f95-148">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-148">Preview 1</span></span> |
| <xref:System.Xml.Linq.XElement.ReplaceAll(System.Object[])?displayProperty=nameWithType> | <span data-ttu-id="00f95-149">Tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-149">Parameter type is nullable</span></span> | <span data-ttu-id="00f95-150">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-150">Nonbreaking</span></span> | <span data-ttu-id="00f95-151">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-151">Preview 1</span></span> |
| <xref:System.Xml.Linq.XElement.ReplaceAttributes(System.Object[])?displayProperty=nameWithType> | <span data-ttu-id="00f95-152">Tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-152">Parameter type is nullable</span></span> | <span data-ttu-id="00f95-153">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-153">Nonbreaking</span></span> | <span data-ttu-id="00f95-154">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-154">Preview 1</span></span> |
| <xref:System.Xml.Linq.XNode.AddAfterSelf(System.Object[])?displayProperty=nameWithType> | <span data-ttu-id="00f95-155">Tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-155">Parameter type is nullable</span></span> | <span data-ttu-id="00f95-156">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-156">Nonbreaking</span></span> | <span data-ttu-id="00f95-157">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-157">Preview 1</span></span> |
| <xref:System.Xml.Linq.XNode.AddBeforeSelf(System.Object[])?displayProperty=nameWithType> | <span data-ttu-id="00f95-158">Tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-158">Parameter type is nullable</span></span> | <span data-ttu-id="00f95-159">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-159">Nonbreaking</span></span> | <span data-ttu-id="00f95-160">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-160">Preview 1</span></span> |
| <xref:System.Xml.Linq.XNode.ReplaceWith(System.Object[])?displayProperty=nameWithType> | <span data-ttu-id="00f95-161">Tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-161">Parameter type is nullable</span></span> | <span data-ttu-id="00f95-162">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-162">Nonbreaking</span></span> | <span data-ttu-id="00f95-163">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-163">Preview 1</span></span> |
| <xref:System.Xml.Linq.XStreamingElement.%23ctor(System.Xml.Linq.XName,System.Object)> | <span data-ttu-id="00f95-164">Segundo tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-164">Second parameter type is nullable</span></span> | <span data-ttu-id="00f95-165">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-165">Nonbreaking</span></span> | <span data-ttu-id="00f95-166">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-166">Preview 1</span></span> |
| <xref:System.Xml.Linq.XStreamingElement.%23ctor(System.Xml.Linq.XName,System.Object[])> | <span data-ttu-id="00f95-167">Segundo tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-167">Second parameter type is nullable</span></span> | <span data-ttu-id="00f95-168">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-168">Nonbreaking</span></span> | <span data-ttu-id="00f95-169">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-169">Preview 1</span></span> |
| <xref:System.Xml.Linq.XStreamingElement.Add(System.Object[])?displayProperty=nameWithType> | <span data-ttu-id="00f95-170">Tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-170">Parameter type is nullable</span></span> | <span data-ttu-id="00f95-171">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-171">Nonbreaking</span></span> | <span data-ttu-id="00f95-172">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-172">Preview 1</span></span> |
| <xref:System.Net.Http.HttpClient.PatchAsync%2A?displayProperty=nameWithType> | <span data-ttu-id="00f95-173">Tipo de parámetro `content` que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-173">`content` parameter type is nullable</span></span> | <span data-ttu-id="00f95-174">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-174">Nonbreaking</span></span> | <span data-ttu-id="00f95-175">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-175">Preview 1</span></span> |
| <xref:System.Net.Http.HttpClient.PostAsync%2A?displayProperty=nameWithType> | <span data-ttu-id="00f95-176">Tipo de parámetro `content` que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-176">`content` parameter type is nullable</span></span>  | <span data-ttu-id="00f95-177">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-177">Nonbreaking</span></span> | <span data-ttu-id="00f95-178">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-178">Preview 1</span></span> |
| <xref:System.Net.Http.HttpClient.PutAsync%2A?displayProperty=nameWithType> | <span data-ttu-id="00f95-179">Tipo de parámetro `content` que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-179">`content` parameter type is nullable</span></span>  | <span data-ttu-id="00f95-180">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-180">Nonbreaking</span></span> | <span data-ttu-id="00f95-181">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-181">Preview 1</span></span> |
| <xref:System.Linq.Expressions.MethodCallExpression.Update(System.Linq.Expressions.Expression,System.Collections.Generic.IEnumerable{System.Linq.Expressions.Expression})?displayProperty=nameWithType> | <span data-ttu-id="00f95-182">Primer tipo de parámetro que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-182">First parameter type is nullable</span></span> | <span data-ttu-id="00f95-183">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-183">Nonbreaking</span></span> | <span data-ttu-id="00f95-184">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-184">Preview 1</span></span> |
| <xref:System.Linq.Expressions.Expression%601.Update(System.Linq.Expressions.Expression,System.Collections.Generic.IEnumerable{System.Linq.Expressions.ParameterExpression})?displayProperty=nameWithType> | <span data-ttu-id="00f95-185">Tipo de valor devuelto que no acepta un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-185">Return type is not nullable</span></span> | <span data-ttu-id="00f95-186">No importante</span><span class="sxs-lookup"><span data-stu-id="00f95-186">Nonbreaking</span></span> | <span data-ttu-id="00f95-187">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-187">Preview 1</span></span> |
| <xref:System.Data.IDataRecord.GetBytes(System.Int32,System.Int64,System.Byte[],System.Int32,System.Int32)?displayProperty=nameWithType> | <span data-ttu-id="00f95-188">Tipo de parámetro `buffer` que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-188">`buffer` parameter type is nullable</span></span> | <span data-ttu-id="00f95-189">Problemático</span><span class="sxs-lookup"><span data-stu-id="00f95-189">Breaking</span></span> | <span data-ttu-id="00f95-190">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-190">Preview 1</span></span> |
| <xref:System.Data.IDataRecord.GetChars(System.Int32,System.Int64,System.Char[],System.Int32,System.Int32)?displayProperty=nameWithType> | <span data-ttu-id="00f95-191">Tipo de parámetro `buffer` que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-191">`buffer` parameter type is nullable</span></span> | <span data-ttu-id="00f95-192">Problemático</span><span class="sxs-lookup"><span data-stu-id="00f95-192">Breaking</span></span> | <span data-ttu-id="00f95-193">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-193">Preview 1</span></span> |
| <xref:System.Data.Common.DbDataRecord.GetBytes(System.Int32,System.Int64,System.Byte[],System.Int32,System.Int32)?displayProperty=nameWithType> | <span data-ttu-id="00f95-194">Tipo de parámetro `buffer` que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-194">`buffer` parameter type is nullable</span></span> | <span data-ttu-id="00f95-195">Problemático</span><span class="sxs-lookup"><span data-stu-id="00f95-195">Breaking</span></span> | <span data-ttu-id="00f95-196">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-196">Preview 1</span></span> |
| <xref:System.Data.Common.DbDataRecord.GetChars(System.Int32,System.Int64,System.Char[],System.Int32,System.Int32)?displayProperty=nameWithType> | <span data-ttu-id="00f95-197">Tipo de parámetro `buffer` que admite un valor NULL</span><span class="sxs-lookup"><span data-stu-id="00f95-197">`buffer` parameter type is nullable</span></span> | <span data-ttu-id="00f95-198">Problemático</span><span class="sxs-lookup"><span data-stu-id="00f95-198">Breaking</span></span> | <span data-ttu-id="00f95-199">Versión preliminar 1</span><span class="sxs-lookup"><span data-stu-id="00f95-199">Preview 1</span></span> |

<!--

### Category

Core .NET libraries

### Affected APIs

- `P:System.ComponentModel.ISite.Container`
- `M:System.Xml.Linq.XContainer.Add(System.Object[])`
- `M:System.Xml.Linq.XContainer.AddFirst(System.Object[])`
- `M:System.Xml.Linq.XContainer.ReplaceNodes(System.Object[])`
- `M:System.Xml.Linq.XDocument.#ctor(System.Object[])`
- `M:System.Xml.Linq.XDocument.#ctor(System.Xml.Linq.XDeclaration,System.Object[])`
- `M:System.Xml.Linq.XElement.#ctor(System.Xml.Linq.XName,System.Object[])`
- `M:System.Xml.Linq.XElement.ReplaceAll(System.Object[])`
- `M:System.Xml.Linq.XElement.ReplaceAttributes(System.Object[])`
- `M:System.Xml.Linq.XNode.AddAfterSelf(System.Object[])`
- `M:System.Xml.Linq.XNode.AddBeforeSelf(System.Object[])`
- `M:System.Xml.Linq.XNode.ReplaceWith(System.Object[])`
- `M:System.Xml.Linq.XStreamingElement.#ctor(System.Xml.Linq.XName,System.Object)`
- `M:System.Xml.Linq.XStreamingElement.#ctor(System.Xml.Linq.XName,System.Object[])`
- `M:System.Xml.Linq.XStreamingElement.Add(System.Object[])`
- `O:System.Net.Http.HttpClient.PatchAsync`
- `O:System.Net.Http.HttpClient.PostAsync`
- `O:System.Net.Http.HttpClient.PutAsync`
- `M:System.Linq.Expressions.MethodCallExpression.Update(System.Linq.Expressions.Expression,System.Collections.Generic.IEnumerable{System.Linq.Expressions.Expression})`
- `M:System.Linq.Expressions.Expression%601.Update(System.Linq.Expressions.Expression,System.Collections.Generic.IEnumerable{System.Linq.Expressions.ParameterExpression})`
- `M:System.Data.IDataRecord.GetBytes(System.Int32,System.Int64,System.Byte[],System.Int32,System.Int32)`
- `M:System.Data.IDataRecord.GetChars(System.Int32,System.Int64,System.Char[],System.Int32,System.Int32)`
- `M:System.Data.Common.DbDataRecord.GetBytes(System.Int32,System.Int64,System.Byte[],System.Int32,System.Int32)`
- `M:System.Data.Common.DbDataRecord.GetChars(System.Int32,System.Int64,System.Char[],System.Int32,System.Int32)`

-->
