---
title: Trabajo con la certificación de macOS Catalina
description: Procedimiento para administrar los problemas de certificación con macOS al instalar el runtime de .NET Core, el SDK y las aplicaciones compiladas con .NET Core.
author: thraka
ms.author: adegeo
ms.date: 02/14/2020
ms.openlocfilehash: be39c1ea56699f84736a2b37bc958507b16e826b
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/14/2020
ms.locfileid: "79146754"
---
# <a name="macos-catalina-notarization-and-the-impact-on-net-core-downloads-and-projects"></a><span data-ttu-id="efe72-103">Certificación de macOS Catalina y el impacto en las descargas y proyectos de .NET Core</span><span class="sxs-lookup"><span data-stu-id="efe72-103">macOS Catalina Notarization and the impact on .NET Core downloads and projects</span></span>

<span data-ttu-id="efe72-104">A partir de macOS Catalina (versión 10.15), se debe conceder la certificación a todo el software creado después del 1 de junio de 2019 y que se distribuya con el identificador de desarrollador.</span><span class="sxs-lookup"><span data-stu-id="efe72-104">Beginning with macOS Catalina (version 10.15), all software built after June 1, 2019, and distributed with Developer ID, must be notarized.</span></span> <span data-ttu-id="efe72-105">Este requisito se aplica al runtime de .NET Core, al SDK de .NET Core y al software creado con .NET Core.</span><span class="sxs-lookup"><span data-stu-id="efe72-105">This requirement applies to the .NET Core runtime, .NET Core SDK, and software created with .NET Core.</span></span> <span data-ttu-id="efe72-106">En este artículo se describen los escenarios comunes con los que puede encontrarse con la certificación de .NET Core y macOS.</span><span class="sxs-lookup"><span data-stu-id="efe72-106">This article describes the common scenarios you may face with .NET Core and macOS notarization.</span></span>

## <a name="installing-net-core"></a><span data-ttu-id="efe72-107">Instalación de .NET Core</span><span class="sxs-lookup"><span data-stu-id="efe72-107">Installing .NET Core</span></span>

<span data-ttu-id="efe72-108">Desde el 18 de febrero de 2020, se ha concedido la certificación a los instaladores de las versiones 3.1, 3.0 y 2.1 de .NET Core (tanto el runtime como el SDK).</span><span class="sxs-lookup"><span data-stu-id="efe72-108">The installers for .NET Core (both runtime and SDK) versions 3.1, 3.0, and 2.1, have been notarized since February 18, 2020.</span></span> <span data-ttu-id="efe72-109">A las versiones publicadas anteriores no se les ha concedido la certificación.</span><span class="sxs-lookup"><span data-stu-id="efe72-109">Prior released versions aren't notarized.</span></span> <span data-ttu-id="efe72-110">Puede instalar manualmente una versión de .NET Core sin certificación si descarga primero el instalador y, después, usa el comando `sudo installer`.</span><span class="sxs-lookup"><span data-stu-id="efe72-110">You can manually install a non-notarized version of .NET Core by first downloading the installer, and then using the `sudo installer` command.</span></span> <span data-ttu-id="efe72-111">Para obtener más información, vea [Descarga e instalación manual de macOS](sdk.md?pivots=os-macos#download-and-manually-install).</span><span class="sxs-lookup"><span data-stu-id="efe72-111">For more information, see [Download and manually install for macOS](sdk.md?pivots=os-macos#download-and-manually-install).</span></span>

<span data-ttu-id="efe72-112">A partir de las versiones siguientes, los instaladores de .NET Core están certificados:</span><span class="sxs-lookup"><span data-stu-id="efe72-112">Beginning with the following versions, the .NET Core installers are notarized:</span></span>

- <span data-ttu-id="efe72-113">Runtime de .NET Core</span><span class="sxs-lookup"><span data-stu-id="efe72-113">.NET Core Runtime</span></span>
  - <span data-ttu-id="efe72-114">2.1.16</span><span class="sxs-lookup"><span data-stu-id="efe72-114">2.1.16</span></span>
  - <span data-ttu-id="efe72-115">3.0.3</span><span class="sxs-lookup"><span data-stu-id="efe72-115">3.0.3</span></span>
  - <span data-ttu-id="efe72-116">3.1.2</span><span class="sxs-lookup"><span data-stu-id="efe72-116">3.1.2</span></span>

- <span data-ttu-id="efe72-117">SDK de .NET Core</span><span class="sxs-lookup"><span data-stu-id="efe72-117">.NET Core SDK</span></span>
  - <span data-ttu-id="efe72-118">2.1.512</span><span class="sxs-lookup"><span data-stu-id="efe72-118">2.1.512</span></span>
  - <span data-ttu-id="efe72-119">3.0.103</span><span class="sxs-lookup"><span data-stu-id="efe72-119">3.0.103</span></span>
  - <span data-ttu-id="efe72-120">3.1.102</span><span class="sxs-lookup"><span data-stu-id="efe72-120">3.1.102</span></span>

## <a name="apphost-is-disabled-by-default"></a><span data-ttu-id="efe72-121">appHost está deshabilitado de manera predeterminada</span><span class="sxs-lookup"><span data-stu-id="efe72-121">appHost is disabled by default</span></span>

<span data-ttu-id="efe72-122">De forma predeterminada, las versiones sin certificación del SDK de .NET Core 3.0 y posteriores generan un ejecutable Mach-O nativo (conocido como **appHost**) cuando el proyecto se compila, se publica o se ejecuta.</span><span class="sxs-lookup"><span data-stu-id="efe72-122">By default, non-notarized versions of the .NET Core SDK 3.0 and above produce a native Mach-O executable (known as the **appHost**) when your project compiles, publishes, or is run.</span></span> <span data-ttu-id="efe72-123">Este ejecutable es una forma cómoda de ejecutar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="efe72-123">This executable is a convenient way to run your app.</span></span> <span data-ttu-id="efe72-124">De lo contrario, la aplicación se debe iniciar mediante la ejecución de `dotnet <filename.dll>`.</span><span class="sxs-lookup"><span data-stu-id="efe72-124">Otherwise, your app must be started by running `dotnet <filename.dll>`.</span></span> <span data-ttu-id="efe72-125">Cuando appHost está habilitado, se invoca el comando `dotnet run` en el contexto de appHost.</span><span class="sxs-lookup"><span data-stu-id="efe72-125">When the appHost is enabled, the `dotnet run` command is invoked in the context of the appHost.</span></span> <span data-ttu-id="efe72-126">Para obtener más información, vea [Contexto de appHost](#context-of-the-apphost).</span><span class="sxs-lookup"><span data-stu-id="efe72-126">For more information, see [Context of the appHost](#context-of-the-apphost).</span></span>

<span data-ttu-id="efe72-127">A partir de las versiones con certificación del SDK de .NET Core 3.0 y posteriores, el archivo ejecutable appHost no se genera de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="efe72-127">Starting with the notarized versions of the .NET Core SDK 3.0 and above, the appHost executable isn't generated by default.</span></span> <span data-ttu-id="efe72-128">Puede activar la generación de appHost con el valor booleano [`UseAppHost`](../project-sdk/msbuild-props.md#useapphost) en el archivo del proyecto.</span><span class="sxs-lookup"><span data-stu-id="efe72-128">You can turn on appHost generation with the [`UseAppHost`](../project-sdk/msbuild-props.md#useapphost) boolean setting in the project file.</span></span> <span data-ttu-id="efe72-129">También puede alternar appHost con el parámetro `-p:UseAppHost` en la línea de comandos para el comando `dotnet` específico que ejecute:</span><span class="sxs-lookup"><span data-stu-id="efe72-129">You can also toggle the appHost with the `-p:UseAppHost` parameter on the command line for the specific `dotnet` command you run:</span></span>

- <span data-ttu-id="efe72-130">Archivo del proyecto</span><span class="sxs-lookup"><span data-stu-id="efe72-130">Project file</span></span>

  ```xml
  <PropertyGroup>
    <UseAppHost>true</UseAppHost>
  </PropertyGroup>
  ```

- <span data-ttu-id="efe72-131">Parámetro de línea de comandos</span><span class="sxs-lookup"><span data-stu-id="efe72-131">Command-line parameter</span></span>

  ```dotnetcli
  dotnet run -p:UseAppHost=true
  ```

<span data-ttu-id="efe72-132">Siempre se crea un instancia de appHost al publicar la aplicación de manera [independiente](../deploying/index.md#publish-self-contained).</span><span class="sxs-lookup"><span data-stu-id="efe72-132">An appHost is always created when you publish your app [self-contained](../deploying/index.md#publish-self-contained).</span></span>

<span data-ttu-id="efe72-133">Para obtener más información sobre la configuración de `UseAppHost`, vea [Propiedades de MSBuild para Microsoft.NET.Sdk](../project-sdk/msbuild-props.md#useapphost).</span><span class="sxs-lookup"><span data-stu-id="efe72-133">For more information about the `UseAppHost` setting, see [MSBuild properties for Microsoft.NET.Sdk](../project-sdk/msbuild-props.md#useapphost).</span></span>

### <a name="context-of-the-apphost"></a><span data-ttu-id="efe72-134">Contexto de appHost</span><span class="sxs-lookup"><span data-stu-id="efe72-134">Context of the appHost</span></span>

<span data-ttu-id="efe72-135">Cuando appHost está habilitado en el proyecto y se usa el comando `dotnet run` para ejecutar la aplicación, la aplicación se invoca en el contexto de appHost y no en el host predeterminado (que es el comando `dotnet`).</span><span class="sxs-lookup"><span data-stu-id="efe72-135">When the appHost is enabled in your project, and you use the `dotnet run` command to run your app, the app is invoked in the context of the appHost and not the default host (the default host is the `dotnet` command).</span></span> <span data-ttu-id="efe72-136">Si appHost está deshabilitado en el proyecto, el comando `dotnet run` ejecuta la aplicación en el contexto del host predeterminado.</span><span class="sxs-lookup"><span data-stu-id="efe72-136">If the appHost is disabled in your project, the `dotnet run` command runs your app in the context of the default host.</span></span> <span data-ttu-id="efe72-137">Incluso si appHost está deshabilitado, la publicación de la aplicación como independiente genera un ejecutable appHost que los usuarios utilizan para ejecutar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="efe72-137">Even if the appHost is disabled, publishing your app as self-contained generates an appHost executable, and users use that executable to run your app.</span></span> <span data-ttu-id="efe72-138">La ejecución de la aplicación con `dotnet <filename.dll>` invoca la aplicación con el host predeterminado, el entorno de ejecución compartido.</span><span class="sxs-lookup"><span data-stu-id="efe72-138">Running your app with `dotnet <filename.dll>` invokes the app with the default host, the shared runtime.</span></span>

<span data-ttu-id="efe72-139">Cuando se invoca una aplicación que usa appHost, la partición de certificado a la que accede la aplicación es diferente del host predeterminado certificado.</span><span class="sxs-lookup"><span data-stu-id="efe72-139">When an app using the appHost is invoked, the certificate partition accessed by the app is different from the notarized default host.</span></span> <span data-ttu-id="efe72-140">Si la aplicación tiene que acceder a los certificados instalados a través del host predeterminado, use el comando `dotnet run` para ejecutarla desde su archivo del proyecto, o bien use el comando `dotnet <filename.dll>` para iniciar la aplicación directamente.</span><span class="sxs-lookup"><span data-stu-id="efe72-140">If your app must access the certificates installed through the default host, use the `dotnet run` command to run your app from its project file, or use the `dotnet <filename.dll>` command to start the app directly.</span></span>

<span data-ttu-id="efe72-141">En la sección [ASP.NET Core y macOS y los certificados](#aspnet-core-and-macos-and-certificates) se proporciona más información sobre este escenario.</span><span class="sxs-lookup"><span data-stu-id="efe72-141">More information about this scenario is provided in the [ASP.NET Core and macOS and certificates](#aspnet-core-and-macos-and-certificates) section.</span></span>

## <a name="aspnet-core-and-macos-and-certificates"></a><span data-ttu-id="efe72-142">ASP.NET Core y macOS y los certificados</span><span class="sxs-lookup"><span data-stu-id="efe72-142">ASP.NET Core and macOS and certificates</span></span>

<span data-ttu-id="efe72-143">.NET Core proporciona la capacidad de administrar certificados en la cadena de claves de macOS con la clase <xref:System.Security.Cryptography.X509Certificates>.</span><span class="sxs-lookup"><span data-stu-id="efe72-143">.NET Core provides the ability to manage certificates in the macOS Keychain with the <xref:System.Security.Cryptography.X509Certificates> class.</span></span> <span data-ttu-id="efe72-144">El acceso a la cadena de claves de macOS usa la identidad de las aplicaciones como clave principal al decidir qué partición se debe tener en cuenta.</span><span class="sxs-lookup"><span data-stu-id="efe72-144">Access to the macOS Keychain uses the applications identity as the primary key when deciding which partition to consider.</span></span> <span data-ttu-id="efe72-145">Por ejemplo, las aplicaciones sin firmar almacenan secretos en la partición sin firmar, pero las aplicaciones con firma almacenan sus secretos en particiones a las que solo ellas pueden acceder.</span><span class="sxs-lookup"><span data-stu-id="efe72-145">For example, unsigned applications store secrets in the unsigned partition, but signed applications store their secrets in partitions only they can access.</span></span> <span data-ttu-id="efe72-146">El origen de ejecución que invoca la aplicación decide qué partición se va a usar.</span><span class="sxs-lookup"><span data-stu-id="efe72-146">The source of execution that invokes your app decides which partition to use.</span></span>

<span data-ttu-id="efe72-147">.NET Core proporciona tres orígenes de ejecución: [appHost](#apphost-is-disabled-by-default), host predeterminado (el comando `dotnet`) y un host personalizado.</span><span class="sxs-lookup"><span data-stu-id="efe72-147">.NET Core provides three sources of execution: [appHost](#apphost-is-disabled-by-default), default host (the `dotnet` command), and a custom host.</span></span> <span data-ttu-id="efe72-148">Cada modelo de ejecución puede tener identidades diferentes, con firma o sin firma, y tiene acceso a diferentes particiones dentro de la cadena de claves.</span><span class="sxs-lookup"><span data-stu-id="efe72-148">Each execution model may have different identities, either signed or unsigned, and has access to different partitions within the Keychain.</span></span> <span data-ttu-id="efe72-149">Es posible que los certificados importados por un modo no sean accesibles desde otro.</span><span class="sxs-lookup"><span data-stu-id="efe72-149">Certificates imported by one mode may not be accessible from another.</span></span> <span data-ttu-id="efe72-150">Por ejemplo, las versiones certificadas de .NET Core tienen un host predeterminado que está firmado.</span><span class="sxs-lookup"><span data-stu-id="efe72-150">For example, the notarized versions of .NET Core have a default host that is signed.</span></span> <span data-ttu-id="efe72-151">Los certificados se importan en una partición segura en función de su identidad.</span><span class="sxs-lookup"><span data-stu-id="efe72-151">Certificates are imported into a secure partition based on its identity.</span></span> <span data-ttu-id="efe72-152">No se puede acceder a estos certificados desde un archivo appHost generado, ya que appHost no está firmado.</span><span class="sxs-lookup"><span data-stu-id="efe72-152">These certificates aren't accessible from a generated appHost, as the appHost is unsigned.</span></span>

<span data-ttu-id="efe72-153">Otro ejemplo, de forma predeterminada, ASP.NET Core importa un certificado SSL predeterminado a través del host predeterminado.</span><span class="sxs-lookup"><span data-stu-id="efe72-153">Another example, by default, ASP.NET Core imports a default SSL certificate through the default host.</span></span> <span data-ttu-id="efe72-154">Las aplicaciones ASP.NET Core que usan appHost no tendrán acceso a este certificado y recibirán un error cuando .NET Core detecte que el certificado no es accesible.</span><span class="sxs-lookup"><span data-stu-id="efe72-154">ASP.NET Core applications that use an appHost won't have access to this certificate and will receive an error when .NET Core detects the certificate isn't accessible.</span></span> <span data-ttu-id="efe72-155">El mensaje de error proporciona instrucciones sobre cómo corregir este problema.</span><span class="sxs-lookup"><span data-stu-id="efe72-155">The error message provides instructions on how to fix this problem.</span></span>

<span data-ttu-id="efe72-156">Si se requiere el uso compartido de certificados, macOS proporciona opciones de configuración con la utilidad `security`.</span><span class="sxs-lookup"><span data-stu-id="efe72-156">If certificate sharing is required, macOS provides configuration options with the `security` utility.</span></span>

<span data-ttu-id="efe72-157">Para obtener más información sobre cómo solucionar problemas de certificados de ASP.NET Core, vea [Aplicación de HTTPS en ASP.NET Core](/aspnet/core/security/enforcing-ssl?view=aspnetcore-3.1&tabs=visual-studio#troubleshoot-certificate-problems).</span><span class="sxs-lookup"><span data-stu-id="efe72-157">For more information on how to troubleshoot ASP.NET Core certificate issues, see [Enforce HTTPS in ASP.NET Core](/aspnet/core/security/enforcing-ssl?view=aspnetcore-3.1&tabs=visual-studio#troubleshoot-certificate-problems).</span></span>

## <a name="default-entitlements"></a><span data-ttu-id="efe72-158">Derechos predeterminados</span><span class="sxs-lookup"><span data-stu-id="efe72-158">Default entitlements</span></span>

<span data-ttu-id="efe72-159">El host predeterminado de .NET Core (el comando `dotnet`) tiene un conjunto de derechos predeterminados.</span><span class="sxs-lookup"><span data-stu-id="efe72-159">.NET Core’s default host (the `dotnet` command) has a set of default entitlements.</span></span> <span data-ttu-id="efe72-160">Estos derechos son necesarios para el funcionamiento correcto de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="efe72-160">These entitlements are required for proper operation of .NET Core.</span></span> <span data-ttu-id="efe72-161">Es posible que la aplicación necesite derechos adicionales, en cuyo caso tendrá que generar y usar un archivo [appHost](#apphost-is-disabled-by-default) y, después, agregar los derechos necesarios de forma local.</span><span class="sxs-lookup"><span data-stu-id="efe72-161">It's possible that your application may need additional entitlements, in which case you'll need to generate and use an [appHost](#apphost-is-disabled-by-default) and then add the necessary entitlements locally.</span></span>

<span data-ttu-id="efe72-162">Conjunto predeterminado de derechos para .NET Core:</span><span class="sxs-lookup"><span data-stu-id="efe72-162">Default set of entitlements for .NET Core:</span></span>

- `com.apple.security.cs.allow-jit`
- `com.apple.security.cs.allow-unsigned-executable-memory`
- `com.apple.security.cs.allow-dyld-environment-variables`
- `com.apple.security.cs.disable-library-validation`

## <a name="notarize-a-net-core-app"></a><span data-ttu-id="efe72-163">Certificación de una aplicación de .NET Core</span><span class="sxs-lookup"><span data-stu-id="efe72-163">Notarize a .NET Core app</span></span>

<span data-ttu-id="efe72-164">Si quiere que la aplicación se ejecute en macOS Catalina (versión 10.15) o superior, le interesará certificarla.</span><span class="sxs-lookup"><span data-stu-id="efe72-164">If you want your application to run on macOS Catalina (version 10.15) or higher, you'll want to notarize your app.</span></span> <span data-ttu-id="efe72-165">El archivo appHost que envíe con la aplicación para la certificación se debe usar con al menos los mismos [derechos predeterminados](#default-entitlements) para .NET Core.</span><span class="sxs-lookup"><span data-stu-id="efe72-165">The appHost you submit with your application for notarization should be used with at least the same [default entitlements](#default-entitlements) for .NET Core.</span></span>

## <a name="next-steps"></a><span data-ttu-id="efe72-166">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="efe72-166">Next steps</span></span>

- <span data-ttu-id="efe72-167">[Dependencias y requisitos de .NET Core](dependencies.md).</span><span class="sxs-lookup"><span data-stu-id="efe72-167">[.NET Core dependencies and requirements](dependencies.md).</span></span>
- <span data-ttu-id="efe72-168">[Instalar el SDK de .NET Core](sdk.md).</span><span class="sxs-lookup"><span data-stu-id="efe72-168">[Install the .NET Core SDK](sdk.md).</span></span>
- [<span data-ttu-id="efe72-169">Instalación del runtime de .NET Core</span><span class="sxs-lookup"><span data-stu-id="efe72-169">Install the .NET Core Runtime</span></span>](runtime.md)
