---
title: Recopilación de información detallada de carga de ensamblados - .NET Core
description: Descripción de cómo recopilar información de carga de ensamblados en .NET Core
author: elinor-fung
ms.author: elfung
ms.date: 11/17/2020
ms.openlocfilehash: b121982995b440ade6d72190f44f9b9d237c8af6
ms.sourcegitcommit: f2ab02d9a780819ca2e5310bbcf5cfe5b7993041
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 02/03/2021
ms.locfileid: "99506530"
---
# <a name="collect-detailed-assembly-loading-information"></a><span data-ttu-id="010a0-103">Recopilación de información detallada de carga de ensamblados</span><span class="sxs-lookup"><span data-stu-id="010a0-103">Collect detailed assembly loading information</span></span>

<span data-ttu-id="010a0-104">A partir de .NET 5.0, el entorno de ejecución puede emitir eventos a través de `EventPipe` con información detallada sobre la [carga de ensamblados administrados](loading-managed.md) como ayuda para diagnosticar problemas en la carga de ensamblados.</span><span class="sxs-lookup"><span data-stu-id="010a0-104">Starting with .NET 5.0, the runtime can emit events through `EventPipe` with detailed information about [managed assembly loading](loading-managed.md) to aid in diagnosing assembly loading issues.</span></span> <span data-ttu-id="010a0-105">El proveedor `Microsoft-Windows-DotNETRuntime` emite estos [eventos](../../fundamentals/diagnostics/runtime-loader-binder-events.md) bajo la palabra clave `AssemblyLoader` (`0x4`).</span><span class="sxs-lookup"><span data-stu-id="010a0-105">These [events](../../fundamentals/diagnostics/runtime-loader-binder-events.md) are emitted by the `Microsoft-Windows-DotNETRuntime` provider under the `AssemblyLoader` keyword (`0x4`).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="010a0-106">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="010a0-106">Prerequisites</span></span>

- <span data-ttu-id="010a0-107">[SDK de .NET 5.0](https://dotnet.microsoft.com/download) o versiones posteriores</span><span class="sxs-lookup"><span data-stu-id="010a0-107">[.NET 5.0 SDK](https://dotnet.microsoft.com/download) or later versions</span></span>
- <span data-ttu-id="010a0-108">Herramienta [dotnet-trace](../diagnostics/dotnet-trace.md)</span><span class="sxs-lookup"><span data-stu-id="010a0-108">[dotnet-trace](../diagnostics/dotnet-trace.md) tool.</span></span>

## <a name="collect-a-trace-with-assembly-loading-events"></a><span data-ttu-id="010a0-109">Recopilación de un seguimiento con eventos de carga de ensamblados</span><span class="sxs-lookup"><span data-stu-id="010a0-109">Collect a trace with assembly loading events</span></span>

<span data-ttu-id="010a0-110">Para habilitar los eventos de carga de ensamblados en el entorno de ejecución y recopilar un seguimiento de ellos, use `dotnet-trace` con el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="010a0-110">To enable assembly loading events in the runtime and collect a trace of them, use `dotnet-trace` with the following command:</span></span>

```console
dotnet-trace collect --providers Microsoft-Windows-DotNETRuntime:4 --process-id <pid>
```

<span data-ttu-id="010a0-111">Esto recopilará un seguimiento del `<pid>` especificado, habilitando los eventos `AssemblyLoader` en el proveedor `Microsoft-Windows-DotNETRuntime`.</span><span class="sxs-lookup"><span data-stu-id="010a0-111">This will collect a trace of the specified `<pid>`, enabling the `AssemblyLoader` events in the `Microsoft-Windows-DotNETRuntime` provider.</span></span> <span data-ttu-id="010a0-112">El resultado es un archivo `.nettrace`.</span><span class="sxs-lookup"><span data-stu-id="010a0-112">The result is a `.nettrace` file.</span></span>

## <a name="view-a-trace"></a><span data-ttu-id="010a0-113">Visualización de un seguimiento</span><span class="sxs-lookup"><span data-stu-id="010a0-113">View a trace</span></span>

<span data-ttu-id="010a0-114">El archivo de seguimiento recopilado se puede ver en Windows mediante la vista Eventos en [PerfView](https://github.com/microsoft/perfview).</span><span class="sxs-lookup"><span data-stu-id="010a0-114">The collected trace file can be viewed on Windows using the Events view in [PerfView](https://github.com/microsoft/perfview).</span></span> <span data-ttu-id="010a0-115">Todos los eventos de carga de ensamblados tendrán como prefijo `Microsoft-Windows-DotNETRuntime/AssemblyLoader`.</span><span class="sxs-lookup"><span data-stu-id="010a0-115">All the assembly loading events will be prefixed with `Microsoft-Windows-DotNETRuntime/AssemblyLoader`.</span></span>

## <a name="example-on-windows"></a><span data-ttu-id="010a0-116">Ejemplo (en Windows)</span><span class="sxs-lookup"><span data-stu-id="010a0-116">Example (on Windows)</span></span>

<span data-ttu-id="010a0-117">En este ejemplo se usa el [ejemplo de puntos de extensión de la carga de ensamblados](https://github.com/dotnet/samples/tree/master/core/extensions/AssemblyLoading).</span><span class="sxs-lookup"><span data-stu-id="010a0-117">This example uses the [assembly loading extension points sample](https://github.com/dotnet/samples/tree/master/core/extensions/AssemblyLoading).</span></span> <span data-ttu-id="010a0-118">La aplicación intenta cargar un ensamblado `MyLibrary`; un ensamblado al que no hace referencia la aplicación y, por tanto, requiere el control en un punto de extensión de carga de ensamblados para que se cargue correctamente.</span><span class="sxs-lookup"><span data-stu-id="010a0-118">The application attempts to load an assembly `MyLibrary` - an assembly that is not referenced by the application and thus requires handling in an assembly loading extension point to be successfully loaded.</span></span>

### <a name="collect-the-trace"></a><span data-ttu-id="010a0-119">Recopilación del seguimiento</span><span class="sxs-lookup"><span data-stu-id="010a0-119">Collect the trace</span></span>

01. <span data-ttu-id="010a0-120">Navegue hasta el directorio con el ejemplo descargado.</span><span class="sxs-lookup"><span data-stu-id="010a0-120">Navigate to the directory with the downloaded sample.</span></span> <span data-ttu-id="010a0-121">Compile la aplicación:</span><span class="sxs-lookup"><span data-stu-id="010a0-121">Build the application with:</span></span>

    ```console
    dotnet build
    ```

01. <span data-ttu-id="010a0-122">Inicie la aplicación con argumentos que indiquen que debe hacer una pausa, a la espera de que se presione una tecla.</span><span class="sxs-lookup"><span data-stu-id="010a0-122">Launch the application with arguments indicating that it should pause, waiting for a key press.</span></span> <span data-ttu-id="010a0-123">Al reanudar la operación, intentará cargar el ensamblado en el `AssemblyLoadContext` predeterminado, sin el control necesario para una carga correcta.</span><span class="sxs-lookup"><span data-stu-id="010a0-123">On resuming, it will attempt to load the assembly in the default `AssemblyLoadContext` - without the handling necessary for a successful load.</span></span> <span data-ttu-id="010a0-124">Navegue hasta el directorio de salida y ejecute:</span><span class="sxs-lookup"><span data-stu-id="010a0-124">Navigate to the output directory and run:</span></span>

    ```console
    AssemblyLoading.exe /d default
    ```

01. <span data-ttu-id="010a0-125">Busque el identificador de proceso de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="010a0-125">Find the application's process ID.</span></span>

    ```console
    dotnet-trace ps
    ```

    <span data-ttu-id="010a0-126">En la salida se enumerarán los procesos disponibles.</span><span class="sxs-lookup"><span data-stu-id="010a0-126">The output will list the available processes.</span></span> <span data-ttu-id="010a0-127">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="010a0-127">For example:</span></span>

    ```console
    35832 AssemblyLoading C:\src\AssemblyLoading\bin\Debug\net5.0\AssemblyLoading.exe
    ```

01. <span data-ttu-id="010a0-128">Adjunte `dotnet-trace` a la aplicación en ejecución.</span><span class="sxs-lookup"><span data-stu-id="010a0-128">Attach `dotnet-trace` to the running application.</span></span>

    ```console
    dotnet-trace collect --providers Microsoft-Windows-DotNETRuntime:4 --process-id 35832
    ```

01. <span data-ttu-id="010a0-129">En la ventana que ejecuta la aplicación, presione cualquier tecla para dejar que el programa continúe.</span><span class="sxs-lookup"><span data-stu-id="010a0-129">In the window running the application, press any key to let the program continue.</span></span> <span data-ttu-id="010a0-130">El seguimiento se detendrá automáticamente una vez que se cierre la aplicación.</span><span class="sxs-lookup"><span data-stu-id="010a0-130">Tracing will automatically stop once the application exits.</span></span>

### <a name="view-the-trace"></a><span data-ttu-id="010a0-131">Visualización del seguimiento</span><span class="sxs-lookup"><span data-stu-id="010a0-131">View the trace</span></span>

<span data-ttu-id="010a0-132">Abra el seguimiento recopilado en [PerfView](https://github.com/microsoft/perfview) y abra la vista Eventos.</span><span class="sxs-lookup"><span data-stu-id="010a0-132">Open the collected trace in [PerfView](https://github.com/microsoft/perfview) and open the Events view.</span></span> <span data-ttu-id="010a0-133">Filtre la lista de eventos para eventos `Microsoft-Windows-DotNETRuntime/AssemblyLoader`.</span><span class="sxs-lookup"><span data-stu-id="010a0-133">Filter the events list to `Microsoft-Windows-DotNETRuntime/AssemblyLoader` events.</span></span>

:::image type="content" source="media/collect-details/assembly-loader-filter.png" alt-text="Imagen del filtro del cargador de ensamblados de PerfView":::

<span data-ttu-id="010a0-135">Se mostrarán todas las cargas de ensamblado que se produjeron en la aplicación después del inicio del seguimiento.</span><span class="sxs-lookup"><span data-stu-id="010a0-135">All assembly loads that occurred in the application after tracing started will be shown.</span></span> <span data-ttu-id="010a0-136">Para inspeccionar la operación de carga para el ensamblado de interés para este ejemplo (`MyLibrary`), podemos seguir filtrando.</span><span class="sxs-lookup"><span data-stu-id="010a0-136">To inspect the load operation for the assembly of interest for this example - `MyLibrary`, we can do some more filtering.</span></span>

### <a name="assembly-loads"></a><span data-ttu-id="010a0-137">Cargas de ensamblado</span><span class="sxs-lookup"><span data-stu-id="010a0-137">Assembly loads</span></span>

<span data-ttu-id="010a0-138">Filtre la vista por los eventos [`Start`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#assemblyloadstart-event) y [`Stop`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#assemblyloadstop-event) en `Microsoft-Windows-DotNETRuntime/AssemblyLoader` con la lista de eventos de la izquierda.</span><span class="sxs-lookup"><span data-stu-id="010a0-138">Filter the view to the [`Start`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#assemblyloadstart-event) and [`Stop`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#assemblyloadstop-event) events under `Microsoft-Windows-DotNETRuntime/AssemblyLoader` using the event list on the left.</span></span> <span data-ttu-id="010a0-139">Agregue las columnas `AssemblyName`, `ActivityID` y `Success` a la vista.</span><span class="sxs-lookup"><span data-stu-id="010a0-139">Add the columns `AssemblyName`, `ActivityID`, and `Success` to the view.</span></span> <span data-ttu-id="010a0-140">Filtre los eventos que contienen `MyLibrary`.</span><span class="sxs-lookup"><span data-stu-id="010a0-140">Filter to events containing `MyLibrary`.</span></span>

:::image type="content" source="media/collect-details/start-stop.png" alt-text="Imagen de inicio y detención de eventos de PerfView":::

| <span data-ttu-id="010a0-142">Nombre del evento</span><span class="sxs-lookup"><span data-stu-id="010a0-142">Event Name</span></span>             | <span data-ttu-id="010a0-143">AssemblyName</span><span class="sxs-lookup"><span data-stu-id="010a0-143">AssemblyName</span></span>                                      | <span data-ttu-id="010a0-144">Identificador de actividad</span><span class="sxs-lookup"><span data-stu-id="010a0-144">ActivityID</span></span> | <span data-ttu-id="010a0-145">Correcto</span><span class="sxs-lookup"><span data-stu-id="010a0-145">Success</span></span> |
| ---------------------- | ------------------------------------------------- | ---------- | ------- |
| `AssemblyLoader/Start` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | <span data-ttu-id="010a0-146">//1/2/</span><span class="sxs-lookup"><span data-stu-id="010a0-146">//1/2/</span></span>     |         |
| `AssemblyLoader/Stop`  | `MyLibrary, Culture=neutral, PublicKeyToken=null` | <span data-ttu-id="010a0-147">//1/2/</span><span class="sxs-lookup"><span data-stu-id="010a0-147">//1/2/</span></span>     | <span data-ttu-id="010a0-148">False</span><span class="sxs-lookup"><span data-stu-id="010a0-148">False</span></span>   |

<span data-ttu-id="010a0-149">Debería ver un par `Start`/`Stop` con `Success=False` en el evento `Stop`, lo cual indica que se ha producido un error en la operación de carga.</span><span class="sxs-lookup"><span data-stu-id="010a0-149">You should see one `Start`/`Stop` pair with `Success=False` on the `Stop` event, indicating the load operation failed.</span></span> <span data-ttu-id="010a0-150">Tenga en cuenta que los dos eventos tienen el mismo identificador de actividad.</span><span class="sxs-lookup"><span data-stu-id="010a0-150">Note that the two events have the same activity ID.</span></span> <span data-ttu-id="010a0-151">El identificador de actividad se puede usar para filtrar todos los demás eventos del cargador de ensamblados a solo los que corresponden a esta operación de carga.</span><span class="sxs-lookup"><span data-stu-id="010a0-151">The activity ID can be used to filter all the other assembly loader events to just the ones corresponding to this load operation.</span></span>

### <a name="breakdown-of-attempt-to-load"></a><span data-ttu-id="010a0-152">Desglose del intento de carga</span><span class="sxs-lookup"><span data-stu-id="010a0-152">Breakdown of attempt to load</span></span>

<span data-ttu-id="010a0-153">Para obtener un desglose más detallado de la operación de carga, filtre la vista por los [eventos `ResolutionAttempted`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#resolutionattempted-event) bajo `Microsoft-Windows-DotNETRuntime/AssemblyLoader` mediante la lista de eventos de la izquierda.</span><span class="sxs-lookup"><span data-stu-id="010a0-153">For a more detailed breakdown of the load operation, filter the view to the [`ResolutionAttempted` events](../../fundamentals/diagnostics/runtime-loader-binder-events.md#resolutionattempted-event) under `Microsoft-Windows-DotNETRuntime/AssemblyLoader` using the event list on the left.</span></span> <span data-ttu-id="010a0-154">Agregue las columnas `AssemblyName`, `Stage` y `Result` a la vista.</span><span class="sxs-lookup"><span data-stu-id="010a0-154">Add the columns `AssemblyName`, `Stage`, and `Result` to the view.</span></span> <span data-ttu-id="010a0-155">Filtre los eventos con el identificador de actividad del par `Start`/`Stop`.</span><span class="sxs-lookup"><span data-stu-id="010a0-155">Filter to events with the activity ID from the `Start`/`Stop` pair.</span></span>

:::image type="content" source="media/collect-details/resolution-attempted.png" alt-text="Imagen de eventos ResolutionAttempted de PerfView":::

| <span data-ttu-id="010a0-157">Nombre del evento</span><span class="sxs-lookup"><span data-stu-id="010a0-157">Event Name</span></span>                           | <span data-ttu-id="010a0-158">AssemblyName</span><span class="sxs-lookup"><span data-stu-id="010a0-158">AssemblyName</span></span>                                      | <span data-ttu-id="010a0-159">Fase</span><span class="sxs-lookup"><span data-stu-id="010a0-159">Stage</span></span>                               | <span data-ttu-id="010a0-160">Resultado</span><span class="sxs-lookup"><span data-stu-id="010a0-160">Result</span></span>             |
| ------------------------------------ | ------------------------------------------------- | ----------------------------------- | ------------------ |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `FindInLoadContext`                 | `AssemblyNotFound` |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `ApplicationAssemblies`             | `AssemblyNotFound` |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `AssemblyLoadContextResolvingEvent` | `AssemblyNotFound` |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `AppDomainAssemblyResolveEvent`     | `AssemblyNotFound` |

<span data-ttu-id="010a0-161">Los eventos anteriores indican que el cargador de ensamblados intentó resolver el ensamblado examinando el contexto de carga actual, ejecutando la lógica de sondeo predeterminada para los ensamblados de aplicación administrados, invocando controladores para el evento <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> e invocando controladores para <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="010a0-161">The events above indicate that the assembly loader attempted to resolve the assembly by looking in the current load context, running the default probing logic for managed application assemblies, invoking handlers for the <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> event, and invoking handlers for the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>.</span></span> <span data-ttu-id="010a0-162">En todos estos pasos, no se encontró el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="010a0-162">For all of these steps, the assembly was not found.</span></span>

### <a name="extension-points"></a><span data-ttu-id="010a0-163">Puntos de extensión</span><span class="sxs-lookup"><span data-stu-id="010a0-163">Extension points</span></span>

<span data-ttu-id="010a0-164">Para ver los puntos de extensión que se invocaron, filtre la vista a [`AssemblyLoadContextResolvingHandlerInvoked`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#assemblyloadcontextresolvinghandlerinvoked-event) y [`AppDomainAssemblyResolveHandlerInvoked`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#appdomainassemblyresolvehandlerinvoked-event) en `Microsoft-Windows-DotNETRuntime/AssemblyLoader` mediante la lista de eventos de la izquierda.</span><span class="sxs-lookup"><span data-stu-id="010a0-164">To see which extension points were invoked, filter the view to the [`AssemblyLoadContextResolvingHandlerInvoked`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#assemblyloadcontextresolvinghandlerinvoked-event) and [`AppDomainAssemblyResolveHandlerInvoked`](../../fundamentals/diagnostics/runtime-loader-binder-events.md#appdomainassemblyresolvehandlerinvoked-event) under `Microsoft-Windows-DotNETRuntime/AssemblyLoader` using the event list on the left.</span></span> <span data-ttu-id="010a0-165">Agregue las columnas `AssemblyName` y `HandlerName` a la vista.</span><span class="sxs-lookup"><span data-stu-id="010a0-165">Add the columns `AssemblyName` and `HandlerName` to the view.</span></span> <span data-ttu-id="010a0-166">Filtre los eventos con el identificador de actividad del par `Start`/`Stop`.</span><span class="sxs-lookup"><span data-stu-id="010a0-166">Filter to events with the activity ID from the `Start`/`Stop` pair.</span></span>

:::image type="content" source="media/collect-details/extension-point.png" alt-text="Imagen de eventos de punto de extensión de PerfView":::

| <span data-ttu-id="010a0-168">Nombre del evento</span><span class="sxs-lookup"><span data-stu-id="010a0-168">Event Name</span></span>                                                  | <span data-ttu-id="010a0-169">AssemblyName</span><span class="sxs-lookup"><span data-stu-id="010a0-169">AssemblyName</span></span>                                      | <span data-ttu-id="010a0-170">HandlerName</span><span class="sxs-lookup"><span data-stu-id="010a0-170">HandlerName</span></span>                      |
| ----------------------------------------------------------- | ------------------------------------------------- | -------------------------------- |
| `AssemblyLoader/AssemblyLoadContextResolvingHandlerInvoked` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `OnAssemblyLoadContextResolving` |
| `AssemblyLoader/AppDomainAssemblyResolveHandlerInvoked`     | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `OnAppDomainAssemblyResolve`     |

<span data-ttu-id="010a0-171">Los eventos anteriores indican que se invocó un controlador con el nombre `OnAssemblyLoadContextResolving` para el evento <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> y que se invocó un controlador denominado `OnAppDomainAssemblyResolve` para el evento <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="010a0-171">The events above indicate that a handler named `OnAssemblyLoadContextResolving` was invoked for the <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> event and a handler named `OnAppDomainAssemblyResolve` was invoked for the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

### <a name="collect-another-trace"></a><span data-ttu-id="010a0-172">Recopilación de otro seguimiento</span><span class="sxs-lookup"><span data-stu-id="010a0-172">Collect another trace</span></span>

<span data-ttu-id="010a0-173">Ejecute la aplicación con argumentos de modo que su controlador para el evento <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> cargue el ensamblado `MyLibrary`.</span><span class="sxs-lookup"><span data-stu-id="010a0-173">Run the application with arguments such that its handler for the <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> event will load the `MyLibrary` assembly.</span></span>

```console
AssemblyLoading /d default alc-resolving
```

<span data-ttu-id="010a0-174">Recopile y abra otro archivo `.nettrace` con los [pasos anteriores](#collect-the-trace).</span><span class="sxs-lookup"><span data-stu-id="010a0-174">Collect and open another `.nettrace` file using the [steps from above](#collect-the-trace).</span></span>

<span data-ttu-id="010a0-175">Filtre de nuevo a los eventos `Start` y `Stop` de `MyLibrary`.</span><span class="sxs-lookup"><span data-stu-id="010a0-175">Filter to the `Start` and `Stop` events for `MyLibrary` again.</span></span> <span data-ttu-id="010a0-176">Debería ver un par `Start`/`Stop` con otro `Start`/`Stop` entre ellos.</span><span class="sxs-lookup"><span data-stu-id="010a0-176">You should see a `Start`/`Stop` pair with another `Start`/`Stop` between them.</span></span> <span data-ttu-id="010a0-177">La operación de carga interna representa la carga desencadenada por el controlador para <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> cuando llamó a <xref:System.Runtime.Loader.AssemblyLoadContext.LoadFromAssemblyPath%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="010a0-177">The inner load operation represents the load triggered by the handler for <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> when it called <xref:System.Runtime.Loader.AssemblyLoadContext.LoadFromAssemblyPath%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="010a0-178">Esta vez, debería ver `Success=True` en el evento `Stop`, lo cual indica que la operación de carga se realizó correctamente.</span><span class="sxs-lookup"><span data-stu-id="010a0-178">This time, you should see `Success=True` on the `Stop` event, indicating the load operation succeeded.</span></span> <span data-ttu-id="010a0-179">En el campo `ResultAssemblyPath` se muestra la ruta de acceso del ensamblado resultante.</span><span class="sxs-lookup"><span data-stu-id="010a0-179">The `ResultAssemblyPath` field shows the path of the resulting assembly.</span></span>

:::image type="content" source="media/collect-details/start-stop-success.png" alt-text="Imagen de inicio y detención de eventos correctos de PerfView":::

| <span data-ttu-id="010a0-181">Nombre del evento</span><span class="sxs-lookup"><span data-stu-id="010a0-181">Event Name</span></span>             | <span data-ttu-id="010a0-182">AssemblyName</span><span class="sxs-lookup"><span data-stu-id="010a0-182">AssemblyName</span></span>                                                       | <span data-ttu-id="010a0-183">Identificador de actividad</span><span class="sxs-lookup"><span data-stu-id="010a0-183">ActivityID</span></span> | <span data-ttu-id="010a0-184">Correcto</span><span class="sxs-lookup"><span data-stu-id="010a0-184">Success</span></span> | <span data-ttu-id="010a0-185">ResultAssemblyPath</span><span class="sxs-lookup"><span data-stu-id="010a0-185">ResultAssemblyPath</span></span>                                      |
| ---------------------- | ------------------------------------------------------------------ |------------|---------| ------------------------------------------------------- |
| `AssemblyLoader/Start` |                  `MyLibrary, Culture=neutral, PublicKeyToken=null` | <span data-ttu-id="010a0-186">//1/2/</span><span class="sxs-lookup"><span data-stu-id="010a0-186">//1/2/</span></span>     |         |                                                         |
| `AssemblyLoader/Start` | `MyLibrary, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null` | <span data-ttu-id="010a0-187">//1/2/1/</span><span class="sxs-lookup"><span data-stu-id="010a0-187">//1/2/1/</span></span>   |         |                                                         |
| `AssemblyLoader/Stop`  | `MyLibrary, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null` | <span data-ttu-id="010a0-188">//1/2/1/</span><span class="sxs-lookup"><span data-stu-id="010a0-188">//1/2/1/</span></span>   | <span data-ttu-id="010a0-189">True</span><span class="sxs-lookup"><span data-stu-id="010a0-189">True</span></span>    | <span data-ttu-id="010a0-190">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span><span class="sxs-lookup"><span data-stu-id="010a0-190">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span></span> |
| `AssemblyLoader/Stop`  |                  `MyLibrary, Culture=neutral, PublicKeyToken=null` | <span data-ttu-id="010a0-191">//1/2/</span><span class="sxs-lookup"><span data-stu-id="010a0-191">//1/2/</span></span>     | <span data-ttu-id="010a0-192">True</span><span class="sxs-lookup"><span data-stu-id="010a0-192">True</span></span>    | <span data-ttu-id="010a0-193">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span><span class="sxs-lookup"><span data-stu-id="010a0-193">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span></span> |

<span data-ttu-id="010a0-194">A continuación, podemos examinar los eventos `ResolutionAttempted` con el identificador de actividad de la carga externa para determinar el paso en el que el ensamblado se resolvió correctamente.</span><span class="sxs-lookup"><span data-stu-id="010a0-194">We can then look at the `ResolutionAttempted` events with the activity ID from the outer load to determine the step at which the assembly was successfully resolved.</span></span> <span data-ttu-id="010a0-195">Esta vez, los eventos mostrarán que la fase `AssemblyLoadContextResolvingEvent` se ha realizado correctamente.</span><span class="sxs-lookup"><span data-stu-id="010a0-195">This time, the events will show that the `AssemblyLoadContextResolvingEvent` stage was successful.</span></span> <span data-ttu-id="010a0-196">En el campo `ResultAssemblyPath` se muestra la ruta de acceso del ensamblado resultante.</span><span class="sxs-lookup"><span data-stu-id="010a0-196">The `ResultAssemblyPath` field shows the path of the resulting assembly.</span></span>

:::image type="content" source="media/collect-details/resolution-attempted-success.png" alt-text="Imagen de eventos ResolutionAttempted correctos de PerfView":::

| <span data-ttu-id="010a0-198">Nombre del evento</span><span class="sxs-lookup"><span data-stu-id="010a0-198">Event Name</span></span>                           | <span data-ttu-id="010a0-199">AssemblyName</span><span class="sxs-lookup"><span data-stu-id="010a0-199">AssemblyName</span></span>                                      | <span data-ttu-id="010a0-200">Fase</span><span class="sxs-lookup"><span data-stu-id="010a0-200">Stage</span></span>                               | <span data-ttu-id="010a0-201">Resultado</span><span class="sxs-lookup"><span data-stu-id="010a0-201">Result</span></span>             | <span data-ttu-id="010a0-202">ResultAssemblyPath</span><span class="sxs-lookup"><span data-stu-id="010a0-202">ResultAssemblyPath</span></span> |
| ------------------------------------ | ------------------------------------------------- | ----------------------------------- | ------------------ | ------------------ |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `FindInLoadContext`                 | `AssemblyNotFound` |                    |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `ApplicationAssemblies`             | `AssemblyNotFound` |                    |
| `AssemblyLoader/ResolutionAttempted` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `AssemblyLoadContextResolvingEvent` | `Success`          | <span data-ttu-id="010a0-203">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span><span class="sxs-lookup"><span data-stu-id="010a0-203">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span></span> |

<span data-ttu-id="010a0-204">Al fijarse en los eventos `AssemblyLoadContextResolvingHandlerInvoked`, verá que se invocó el controlador denominado `OnAssemblyLoadContextResolving`.</span><span class="sxs-lookup"><span data-stu-id="010a0-204">Looking at `AssemblyLoadContextResolvingHandlerInvoked` events will show that the handler named `OnAssemblyLoadContextResolving` was invoked.</span></span> <span data-ttu-id="010a0-205">El campo `ResultAssemblyPath` muestra la ruta de acceso del ensamblado devuelto por el controlador.</span><span class="sxs-lookup"><span data-stu-id="010a0-205">The `ResultAssemblyPath` field shows the path of the assembly returned by the handler.</span></span>

:::image type="content" source="media/collect-details/extension-point-success.png" alt-text="Imagen de eventos de punto de extensión correcto de PerfView":::

| <span data-ttu-id="010a0-207">Nombre del evento</span><span class="sxs-lookup"><span data-stu-id="010a0-207">Event Name</span></span>                                                  | <span data-ttu-id="010a0-208">AssemblyName</span><span class="sxs-lookup"><span data-stu-id="010a0-208">AssemblyName</span></span>                                      | <span data-ttu-id="010a0-209">HandlerName</span><span class="sxs-lookup"><span data-stu-id="010a0-209">HandlerName</span></span>                      | <span data-ttu-id="010a0-210">ResultAssemblyPath</span><span class="sxs-lookup"><span data-stu-id="010a0-210">ResultAssemblyPath</span></span> |
| ----------------------------------------------------------- | ------------------------------------------------- | -------------------------------- | ------------------ |
| `AssemblyLoader/AssemblyLoadContextResolvingHandlerInvoked` | `MyLibrary, Culture=neutral, PublicKeyToken=null` | `OnAssemblyLoadContextResolving` | <span data-ttu-id="010a0-211">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span><span class="sxs-lookup"><span data-stu-id="010a0-211">*C:\src\AssemblyLoading\bin\Debug\net5.0\MyLibrary.dll*</span></span> |

<span data-ttu-id="010a0-212">Tenga en cuenta que ya no hay un evento `ResolutionAttempted` con la fase `AppDomainAssemblyResolveEvent` ni eventos `AppDomainAssemblyResolveHandlerInvoked`, ya que el ensamblado se cargó correctamente antes de alcanzar el paso del algoritmo de carga que genera el evento <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="010a0-212">Note that there is no longer a `ResolutionAttempted` event with the `AppDomainAssemblyResolveEvent` stage or any `AppDomainAssemblyResolveHandlerInvoked` events, as the assembly was successfully loaded before reaching the step of the loading algorithm that raises the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

## <a name="see-also"></a><span data-ttu-id="010a0-213">Vea también</span><span class="sxs-lookup"><span data-stu-id="010a0-213">See also</span></span>

- [<span data-ttu-id="010a0-214">Eventos del cargador de ensamblados</span><span class="sxs-lookup"><span data-stu-id="010a0-214">Assembly loader events</span></span>](../../fundamentals/diagnostics/runtime-loader-binder-events.md)
- [<span data-ttu-id="010a0-215">dotnet-trace</span><span class="sxs-lookup"><span data-stu-id="010a0-215">dotnet-trace</span></span>](../diagnostics/dotnet-trace.md)
- [<span data-ttu-id="010a0-216">PerfView</span><span class="sxs-lookup"><span data-stu-id="010a0-216">PerfView</span></span>](https://github.com/microsoft/perfview)
