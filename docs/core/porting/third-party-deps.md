---
title: Análisis de las dependencias para trasladar código
description: Obtenga información sobre cómo analizar dependencias externas para trasladar el proyecto de .NET Framework a .NET.
author: cartermp
ms.date: 03/04/2021
ms.openlocfilehash: 4619243cf300e248be45e4b2a4d5541c3b3e1cb5
ms.sourcegitcommit: 46cfed35d79d70e08c313b9c664c7e76babab39e
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/10/2021
ms.locfileid: "102604923"
---
# <a name="analyze-your-dependencies-to-port-code-from-net-framework-to-net"></a><span data-ttu-id="d77ae-103">Análisis de las dependencias para trasladar código de .NET Framework a .NET</span><span class="sxs-lookup"><span data-stu-id="d77ae-103">Analyze your dependencies to port code from .NET Framework to .NET</span></span>

<span data-ttu-id="d77ae-104">Para trasladar el código a .NET o .NET Standard, debe comprender las dependencias.</span><span class="sxs-lookup"><span data-stu-id="d77ae-104">To port your code to .NET or .NET Standard, you must understand your dependencies.</span></span> <span data-ttu-id="d77ae-105">Las dependencias externas son los paquetes NuGet o archivos `.dll` a los que hace referencia en el proyecto, pero que no compila por su cuenta.</span><span class="sxs-lookup"><span data-stu-id="d77ae-105">External dependencies are the NuGet packages or `.dll` files you reference in your project, but that you don't build yourself.</span></span>

<span data-ttu-id="d77ae-106">Al trasladar el código a .NET Standard 2.0 o una versión inferior, se garantiza que se puede usar con .NET Framework y .NET.</span><span class="sxs-lookup"><span data-stu-id="d77ae-106">Porting your code to .NET Standard 2.0 or below ensures that it can be used with both .NET Framework and .NET.</span></span> <span data-ttu-id="d77ae-107">Pero si no necesita usar la biblioteca con .NET Framework, considere la posibilidad de establecer como destino la versión más reciente de .NET.</span><span class="sxs-lookup"><span data-stu-id="d77ae-107">However, if you don't need to use the library with .NET Framework, consider targeting the latest version of .NET.</span></span>

## <a name="migrate-your-nuget-packages-to-packagereference"></a><span data-ttu-id="d77ae-108">Migración de los paquetes NuGet a `PackageReference`</span><span class="sxs-lookup"><span data-stu-id="d77ae-108">Migrate your NuGet packages to `PackageReference`</span></span>

<span data-ttu-id="d77ae-109">.NET no puede usar el archivo [_packages.config_](/nuget/reference/packages-config) para las referencias de NuGet.</span><span class="sxs-lookup"><span data-stu-id="d77ae-109">.NET can't use the [_packages.config_](/nuget/reference/packages-config) file for NuGet references.</span></span> <span data-ttu-id="d77ae-110">Tanto .NET como .NET Framework pueden usar [PackageReference](/nuget/consume-packages/package-references-in-project-files) para especificar dependencias de paquetes.</span><span class="sxs-lookup"><span data-stu-id="d77ae-110">Both .NET and .NET Framework can use [PackageReference](/nuget/consume-packages/package-references-in-project-files) to specify package dependencies.</span></span> <span data-ttu-id="d77ae-111">Si usa _packages.config_ para especificar los paquetes en el proyecto, debe convertirlo al formato `PackageReference`.</span><span class="sxs-lookup"><span data-stu-id="d77ae-111">If you're using _packages.config_ to specify your packages in your project, convert it to the `PackageReference` format.</span></span>

<span data-ttu-id="d77ae-112">Para obtener información sobre cómo migrar, consulte el artículo [Migración de packages.config a PackageReference](/nuget/reference/migrate-packages-config-to-package-reference).</span><span class="sxs-lookup"><span data-stu-id="d77ae-112">To learn how to migrate, see the [Migrate from packages.config to PackageReference](/nuget/reference/migrate-packages-config-to-package-reference) article.</span></span>

## <a name="upgrade-your-nuget-packages"></a><span data-ttu-id="d77ae-113">Actualización de los paquetes NuGet</span><span class="sxs-lookup"><span data-stu-id="d77ae-113">Upgrade your NuGet packages</span></span>

<span data-ttu-id="d77ae-114">Después de realizar la migración del proyecto al formato `PackageReference`, compruebe si los paquetes son compatibles con .NET.</span><span class="sxs-lookup"><span data-stu-id="d77ae-114">After you migrate your project to the `PackageReference` format, verify if your packages are compatible with .NET.</span></span>

<span data-ttu-id="d77ae-115">En primer lugar, actualice los paquetes a la versión más reciente posible.</span><span class="sxs-lookup"><span data-stu-id="d77ae-115">First, upgrade your packages to the latest version that you can.</span></span> <span data-ttu-id="d77ae-116">Esto se puede realizar con la interfaz de usuario del administrador de paquetes NuGet en Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="d77ae-116">This can be done with the NuGet Package Manager UI in Visual Studio.</span></span> <span data-ttu-id="d77ae-117">Es probable que las versiones más recientes de las dependencias del paquete ya sean compatibles con .NET Core.</span><span class="sxs-lookup"><span data-stu-id="d77ae-117">It's likely that newer versions of your package dependencies are already compatible with .NET Core.</span></span>

## <a name="analyze-your-package-dependencies"></a><span data-ttu-id="d77ae-118">Análisis de las dependencias de paquetes</span><span class="sxs-lookup"><span data-stu-id="d77ae-118">Analyze your package dependencies</span></span>

<span data-ttu-id="d77ae-119">Si aún no se ha comprobado que las dependencias de paquetes convertidas y actualizadas funcionan en .NET Core, hay varias formas de lograrlo:</span><span class="sxs-lookup"><span data-stu-id="d77ae-119">If you haven't already verified that your converted and upgraded package dependencies work on .NET Core, there are a few ways that you can achieve that:</span></span>

### <a name="analyze-nuget-packages-using-nugetorg"></a><span data-ttu-id="d77ae-120">Analizar los paquetes NuGet mediante nuget.org</span><span class="sxs-lookup"><span data-stu-id="d77ae-120">Analyze NuGet packages using nuget.org</span></span>

<span data-ttu-id="d77ae-121">En la sección **Dependencias** de la página de un paquete de [nuget.org](https://www.nuget.org/) puede ver los moniker de la plataforma de destino (TFM) que admite cada paquete.</span><span class="sxs-lookup"><span data-stu-id="d77ae-121">You can see the Target Framework Monikers (TFMs) that each package supports on [nuget.org](https://www.nuget.org/) under the **Dependencies** section of the package page.</span></span>

<span data-ttu-id="d77ae-122">Aunque el uso del sitio es un método más sencillo para comprobar la compatibilidad, la información de las **Dependencias** no está disponible en el sitio para todos los paquetes.</span><span class="sxs-lookup"><span data-stu-id="d77ae-122">Although using the site is an easier method to verify the compatibility, **Dependencies** information isn't available on the site for all packages.</span></span>

### <a name="analyze-nuget-packages-using-nuget-package-explorer"></a><span data-ttu-id="d77ae-123">Analizar los paquetes NuGet con NuGet Package Explorer</span><span class="sxs-lookup"><span data-stu-id="d77ae-123">Analyze NuGet packages using NuGet Package Explorer</span></span>

<span data-ttu-id="d77ae-124">Los paquetes NuGet son un conjunto de carpetas que contienen ensamblados específicos de plataforma,</span><span class="sxs-lookup"><span data-stu-id="d77ae-124">A NuGet package is itself a set of folders that contain platform-specific assemblies.</span></span> <span data-ttu-id="d77ae-125">Compruebe si hay una carpeta que contenga un ensamblado compatible dentro del paquete.</span><span class="sxs-lookup"><span data-stu-id="d77ae-125">Check if there's a folder that contains a compatible assembly inside the package.</span></span>

<span data-ttu-id="d77ae-126">La manera más fácil de inspeccionar las carpetas de paquetes NuGet consiste en usar la herramienta [NuGet Package Explorer](https://github.com/NuGetPackageExplorer/NuGetPackageExplorer).</span><span class="sxs-lookup"><span data-stu-id="d77ae-126">The easiest way to inspect NuGet package folders is to use the [NuGet Package Explorer](https://github.com/NuGetPackageExplorer/NuGetPackageExplorer) tool.</span></span> <span data-ttu-id="d77ae-127">Después de instalarla, siga estos pasos para ver los nombres de las carpetas:</span><span class="sxs-lookup"><span data-stu-id="d77ae-127">After installing it, use the following steps to see the folder names:</span></span>

1. <span data-ttu-id="d77ae-128">Abra NuGet Package Explorer.</span><span class="sxs-lookup"><span data-stu-id="d77ae-128">Open the NuGet Package Explorer.</span></span>
2. <span data-ttu-id="d77ae-129">Haga clic en **Open package from online feed** (Abrir paquete desde fuente en línea).</span><span class="sxs-lookup"><span data-stu-id="d77ae-129">Click **Open package from online feed**.</span></span>
3. <span data-ttu-id="d77ae-130">Busque el nombre del paquete.</span><span class="sxs-lookup"><span data-stu-id="d77ae-130">Search for the name of the package.</span></span>
4. <span data-ttu-id="d77ae-131">Seleccione el nombre del paquete en los resultados de la búsqueda y haga clic en **Open** (Abrir).</span><span class="sxs-lookup"><span data-stu-id="d77ae-131">Select the package name from the search results and click **open**.</span></span>
5. <span data-ttu-id="d77ae-132">Expanda la carpeta *lib* de la derecha y examine los nombres de las carpetas.</span><span class="sxs-lookup"><span data-stu-id="d77ae-132">Expand the *lib* folder on the right-hand side and look at folder names.</span></span>

<span data-ttu-id="d77ae-133">Busque una carpeta con nombres en los que se use uno de los patrones siguientes: `netstandardX.Y`, `netX.Y` o `netcoreappX.Y`.</span><span class="sxs-lookup"><span data-stu-id="d77ae-133">Look for a folder with names using one the following patterns: `netstandardX.Y`, `netX.Y`, or `netcoreappX.Y`.</span></span>

<span data-ttu-id="d77ae-134">Estos valores son los [monikers de la plataforma de destino (TFM)](../../standard/frameworks.md) que se asignan a versiones de [.NET Standard](../../standard/net-standard.md), .NET y .NET Core, todas compatibles con .NET.</span><span class="sxs-lookup"><span data-stu-id="d77ae-134">These values are the [Target Framework Monikers (TFMs)](../../standard/frameworks.md) that map to versions of [.NET Standard](../../standard/net-standard.md), .NET, and .NET Core, which are all compatible with .NET.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d77ae-135">Al examinar los TFM que admite un paquete, tenga en cuenta que un TFM distinto de `netstandard*` se destina a una implementación concreta de .NET, como .NET 5, .NET Core o .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d77ae-135">When looking at the TFMs that a package supports, note that a TFM other than `netstandard*` targets a specific implementation of .NET, such as .NET 5, .NET Core, or .NET Framework.</span></span> <span data-ttu-id="d77ae-136">A partir de .NET 5, el TFM `net*` (sin una designación de sistema operativo) reemplaza de manera efectiva a `netstandard*` como un [destino portátil](../../standard/net-standard.md#net-5-and-net-standard).</span><span class="sxs-lookup"><span data-stu-id="d77ae-136">Starting with .NET 5, the `net*` TFM (without an operating system designation) effectively replaces `netstandard*` as a [portable target](../../standard/net-standard.md#net-5-and-net-standard).</span></span> <span data-ttu-id="d77ae-137">Por ejemplo, `net5.0` tiene como destino la superficie de API de .NET 5 y es compatible con varias plataformas, pero `net5.0-windows` tiene como destino la superficie de API de .NET 5 como se ha implementado en el sistema operativo Windows.</span><span class="sxs-lookup"><span data-stu-id="d77ae-137">For example, `net5.0` targets the .NET 5 API surface and is cross-platform friendly, but `net5.0-windows` targets the .NET 5 API surface as implemented on the Windows operating system.</span></span>

## <a name="net-framework-compatibility-mode"></a><span data-ttu-id="d77ae-138">Modo de compatibilidad de .NET Framework</span><span class="sxs-lookup"><span data-stu-id="d77ae-138">.NET Framework compatibility mode</span></span>

<span data-ttu-id="d77ae-139">Después de analizar los paquetes NuGet, puede que observe que solo tienen como destino .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d77ae-139">After analyzing the NuGet packages, you might find that they only target the .NET Framework.</span></span>

<span data-ttu-id="d77ae-140">A partir de .NET Standard 2.0 se ha introducido el modo de compatibilidad de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d77ae-140">Starting with .NET Standard 2.0, the .NET Framework compatibility mode was introduced.</span></span> <span data-ttu-id="d77ae-141">Este modo de compatibilidad permite que los proyectos de .NET Standard y .NET Core hagan referencia a bibliotecas de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d77ae-141">This compatibility mode allows .NET Standard and .NET Core projects to reference .NET Framework libraries.</span></span> <span data-ttu-id="d77ae-142">La acción de hacer referencias a bibliotecas de .NET Framework no funciona para todos los proyectos; por ejemplo, si la biblioteca usa API de Windows Presentation Foundation (WPF) pero desbloquea muchos escenarios de portabilidad.</span><span class="sxs-lookup"><span data-stu-id="d77ae-142">Referencing .NET Framework libraries doesn't work for all projects, such as if the library uses Windows Presentation Foundation (WPF) APIs, but it does unblock many porting scenarios.</span></span>

<span data-ttu-id="d77ae-143">Al hacer referencia a paquetes NuGet que tienen como destino .NET Framework en el proyecto, como [`Huitian.PowerCollections`](https://www.nuget.org/packages/Huitian.PowerCollections), recibirá una advertencia de reserva de paquete ([NU1701](/nuget/reference/errors-and-warnings/nu1701)) similar al ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d77ae-143">When you reference NuGet packages that target .NET Framework in your project, such as [`Huitian.PowerCollections`](https://www.nuget.org/packages/Huitian.PowerCollections), you get a package fallback warning ([NU1701](/nuget/reference/errors-and-warnings/nu1701)) similar to the following example:</span></span>

`NU1701: Package ‘Huitian.PowerCollections 1.0.0’ was restored using ‘.NETFramework,Version=v4.6.1’ instead of the project target framework ‘.NETStandard,Version=v2.0’. This package may not be fully compatible with your project.`

<span data-ttu-id="d77ae-144">Esta advertencia se muestra cuando agrega el paquete y cada vez que compila para asegurarse de que prueba ese paquete con el proyecto.</span><span class="sxs-lookup"><span data-stu-id="d77ae-144">That warning is displayed when you add the package and every time you build to make sure you test that package with your project.</span></span> <span data-ttu-id="d77ae-145">Si el proyecto funciona según lo previsto, puede suprimir la advertencia editando las propiedades del paquete en Visual Studio o editando manualmente el archivo del proyecto en su editor de código favorito.</span><span class="sxs-lookup"><span data-stu-id="d77ae-145">If your project works as expected, you can suppress that warning by editing the package properties in Visual Studio or by manually editing the project file in your favorite code editor.</span></span>

<span data-ttu-id="d77ae-146">Para suprimir la advertencia editando el archivo del proyecto, busque la entrada `PackageReference` del paquete del que quiere suprimir la advertencia y agregue el atributo `NoWarn`.</span><span class="sxs-lookup"><span data-stu-id="d77ae-146">To suppress the warning by editing the project file, find the `PackageReference` entry for the package you want to suppress the warning for and add the `NoWarn` attribute.</span></span> <span data-ttu-id="d77ae-147">El atributo `NoWarn` acepta una lista separada por comas de todos los identificadores de advertencia.</span><span class="sxs-lookup"><span data-stu-id="d77ae-147">The `NoWarn` attribute accepts a comma-separated list of all the warning IDs.</span></span> <span data-ttu-id="d77ae-148">En el ejemplo siguiente se muestra cómo suprimir la advertencia `NU1701` del paquete `Huitian.PowerCollections` editando manualmente el archivo del proyecto:</span><span class="sxs-lookup"><span data-stu-id="d77ae-148">The following example shows how to suppress the `NU1701` warning for the `Huitian.PowerCollections` package by editing your project file manually:</span></span>

```xml
<ItemGroup>
  <PackageReference Include="Huitian.PowerCollections" Version="1.0.0" NoWarn="NU1701" />
</ItemGroup>
```

<span data-ttu-id="d77ae-149">Para más información sobre cómo suprimir advertencias del compilador en Visual Studio, vea [Supresión de las advertencias para paquetes NuGet](/visualstudio/ide/how-to-suppress-compiler-warnings#suppress-warnings-for-nuget-packages).</span><span class="sxs-lookup"><span data-stu-id="d77ae-149">For more information on how to suppress compiler warnings in Visual Studio, see [Suppressing warnings for NuGet packages](/visualstudio/ide/how-to-suppress-compiler-warnings#suppress-warnings-for-nuget-packages).</span></span>

## <a name="if-nuget-packages-wont-run-on-net"></a><span data-ttu-id="d77ae-150">Si los paquetes NuGet no se van a ejecutar en .NET</span><span class="sxs-lookup"><span data-stu-id="d77ae-150">If NuGet packages won't run on .NET</span></span>

<span data-ttu-id="d77ae-151">Si un paquete NuGet del que depende no se ejecuta en .NET Core, puede hacer lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d77ae-151">There are a few things you can do if a NuGet package you depend on doesn't run on .NET Core:</span></span>

- <span data-ttu-id="d77ae-152">Si el proyecto es de código abierto y está hospedado en algún lugar como GitHub, puede implicar directamente a los desarrolladores.</span><span class="sxs-lookup"><span data-stu-id="d77ae-152">If the project is open source and hosted somewhere like GitHub, you can engage the developers directly.</span></span>
- <span data-ttu-id="d77ae-153">Puede ponerse en contacto directamente con el autor en [nuget.org](https://www.nuget.org/). Busque el paquete y haga clic en **Contact Owners** (Póngase en contacto con los propietarios) a la izquierda de la página del paquete.</span><span class="sxs-lookup"><span data-stu-id="d77ae-153">You can contact the author directly on [nuget.org](https://www.nuget.org/). Search for the package and click **Contact Owners** on the left-hand side of the package's page.</span></span>
- <span data-ttu-id="d77ae-154">Puede buscar otro paquete que se ejecute en .NET Core que efectúe la misma tarea que el paquete que estaba usando.</span><span class="sxs-lookup"><span data-stu-id="d77ae-154">You can search for another package that runs on .NET Core that accomplishes the same task as the package you were using.</span></span>
- <span data-ttu-id="d77ae-155">Puede intentar volver a escribir el código de lo que hacía el paquete usted mismo.</span><span class="sxs-lookup"><span data-stu-id="d77ae-155">You can attempt to write the code the package was doing yourself.</span></span>
- <span data-ttu-id="d77ae-156">Puede eliminar la dependencia en el paquete mediante el cambio de la funcionalidad de la aplicación, al menos hasta que esté disponible una versión compatible del paquete.</span><span class="sxs-lookup"><span data-stu-id="d77ae-156">You could eliminate the dependency on the package by changing the functionality of your app, at least until a compatible version of the package becomes available.</span></span>

<span data-ttu-id="d77ae-157">No olvide que los mantenedores de los proyectos de código abierto y los publicadores de paquetes NuGet suelen ser voluntarios.</span><span class="sxs-lookup"><span data-stu-id="d77ae-157">Remember that open-source project maintainers and NuGet package publishers are often volunteers.</span></span> <span data-ttu-id="d77ae-158">Colaboran porque les importa un dominio determinado, lo hacen de forma gratuita y en muchas ocasiones tienen otro trabajo,</span><span class="sxs-lookup"><span data-stu-id="d77ae-158">They contribute because they care about a given domain, do it for free, and often have a different daytime job.</span></span> <span data-ttu-id="d77ae-159">Sea consciente de ello al ponerse en contacto con ellos para solicitar soporte técnico de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="d77ae-159">Be mindful of that when contacting them to ask for .NET Core support.</span></span>

<span data-ttu-id="d77ae-160">Si no puede resolver el problema con ninguna de estas opciones, puede que deba efectuar la portabilidad a .NET Core en otro momento.</span><span class="sxs-lookup"><span data-stu-id="d77ae-160">If you can't resolve your issue with any of these options, you may have to port to .NET Core at a later date.</span></span>

<span data-ttu-id="d77ae-161">Al equipo de .NET le gustaría saber qué bibliotecas son las más importantes para que sean compatibles con .NET Core.</span><span class="sxs-lookup"><span data-stu-id="d77ae-161">The .NET Team would like to know which libraries are the most important to support with .NET Core.</span></span> <span data-ttu-id="d77ae-162">Puede enviar un correo electrónico a dotnet@microsoft.com indicando las bibliotecas que le gustaría usar.</span><span class="sxs-lookup"><span data-stu-id="d77ae-162">You can send an email to dotnet@microsoft.com about the libraries you'd like to use.</span></span>

## <a name="analyze-non-nuget-dependencies"></a><span data-ttu-id="d77ae-163">Análisis de dependencias que no son de NuGet</span><span class="sxs-lookup"><span data-stu-id="d77ae-163">Analyze non-NuGet dependencies</span></span>

<span data-ttu-id="d77ae-164">Puede que tenga una dependencia que no sea un paquete NuGet, como un archivo DLL, en el sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="d77ae-164">You may have a dependency that isn't a NuGet package, such as a DLL in the file system.</span></span> <span data-ttu-id="d77ae-165">La única manera de determinar la portabilidad de esa dependencia consiste en ejecutar la herramienta [.NET Portability Analyzer](https://github.com/Microsoft/dotnet-apiport).</span><span class="sxs-lookup"><span data-stu-id="d77ae-165">The only way to determine the portability of that dependency is to run the [.NET Portability Analyzer](https://github.com/Microsoft/dotnet-apiport) tool.</span></span> <span data-ttu-id="d77ae-166">La herramienta analiza ensamblados que tienen como destino .NET Framework e identifica API que no se pueden portar a otras plataformas de .NET, como .NET Core.</span><span class="sxs-lookup"><span data-stu-id="d77ae-166">The tool analyzes assemblies that target the .NET Framework and identifies APIs that aren't portable to other .NET platforms such as .NET Core.</span></span> <span data-ttu-id="d77ae-167">Puede ejecutar la herramienta como una aplicación de consola o como [extensión de Visual Studio](../../standard/analyzers/portability-analyzer.md).</span><span class="sxs-lookup"><span data-stu-id="d77ae-167">You can run the tool as a console application or as a [Visual Studio extension](../../standard/analyzers/portability-analyzer.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="d77ae-168">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="d77ae-168">Next steps</span></span>

- [<span data-ttu-id="d77ae-169">Introducción a la portabilidad de .NET Framework a .NET</span><span class="sxs-lookup"><span data-stu-id="d77ae-169">Overview of porting from .NET Framework to .NET</span></span>](index.md)
- [<span data-ttu-id="d77ae-170">Portabilidad de las bibliotecas</span><span class="sxs-lookup"><span data-stu-id="d77ae-170">Port libraries</span></span>](libraries.md)
