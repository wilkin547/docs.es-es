---
description: 'Más información acerca de: seguimiento de actividades en la seguridad de mensajes'
title: Seguimiento de actividades en la seguridad de mensajes
ms.date: 03/30/2017
ms.assetid: 68862534-3b2e-4270-b097-8121b12a2c97
ms.openlocfilehash: 94fb6f60539465dd16e09a968679567e94d6cd24
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/06/2021
ms.locfileid: "99770864"
---
# <a name="activity-tracing-in-message-security"></a><span data-ttu-id="0e6d3-103">Seguimiento de actividades en la seguridad de mensajes</span><span class="sxs-lookup"><span data-stu-id="0e6d3-103">Activity Tracing in Message Security</span></span>

<span data-ttu-id="0e6d3-104">En este tema se describe el seguimiento de actividades para el procesamiento de seguridad, que pasa en las tres fases siguientes.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-104">This topic describes activity tracing for security processing, which happens in the following three phases.</span></span>  
  
- <span data-ttu-id="0e6d3-105">Intercambio de SCT/negociación.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-105">Negotiation/SCT exchange.</span></span> <span data-ttu-id="0e6d3-106">Esto puede pasar en la capa de transporte (a través del intercambio de datos binarios) o en la capa de mensaje (a través de intercambios de mensajes SOAP).</span><span class="sxs-lookup"><span data-stu-id="0e6d3-106">This can happen at the transport later (through binary data exchange) or message layer (through SOAP message exchanges).</span></span>  
  
- <span data-ttu-id="0e6d3-107">Cifrado/descifrado del mensaje, con comprobación y autenticación de firma.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-107">Message encryption/decryption, with signature verification and authentication.</span></span> <span data-ttu-id="0e6d3-108">Los seguimientos aparecen en la actividad ambiente, normalmente la “Acción de proceso"."</span><span class="sxs-lookup"><span data-stu-id="0e6d3-108">Traces appear in the ambient activity, typically "Process Action."</span></span>  
  
- <span data-ttu-id="0e6d3-109">Autorización y comprobación.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-109">Authorization and verification.</span></span> <span data-ttu-id="0e6d3-110">Esto puede pasar localmente o en la comunicación entre extremos.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-110">This can happen locally or when communicating between endpoints.</span></span>  
  
## <a name="negotiationsct-exchange"></a><span data-ttu-id="0e6d3-111">Intercambio de SCT/negociación.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-111">Negotiation/SCT exchange</span></span>  

 <span data-ttu-id="0e6d3-112">En la fase del intercambio de SCT/negociación, dos tipos de actividad se crean en el cliente: “Configurar sesión segura” y “Cerrar sesión segura”.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-112">In the negotiation/SCT exchange phase, two activity types are created on the client: "Set up Secure Session" and "Close Secure Session."</span></span> <span data-ttu-id="0e6d3-113">“Configurar sesión segura” abarca los seguimientos de los intercambios de mensajes RST/RSTR/SCT, mientras que “Cerrar sesión segura” incluye los seguimientos para el mensaje de cancelación.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-113">"Set up Secure Session" encompasses traces for the RST/RSTR/SCT message exchanges, while "Close Secure Session" includes traces for the Cancel message.</span></span>  
  
 <span data-ttu-id="0e6d3-114">En el servidor, cada solicitud/responda para RST/RSTR/SCT aparece en su propia actividad.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-114">On the server, each request/reply for the RST/RSTR/SCT appears in its own activity.</span></span> <span data-ttu-id="0e6d3-115">Si `propagateActivity` = `true` tanto en el servidor como en el cliente, las actividades del servidor tienen el mismo identificador y aparecen juntas en "configurar sesión segura" cuando se ven a través del visor de seguimiento de servicio.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-115">If `propagateActivity`=`true` on both the server and client, activities on the server have the same ID, and appear together in the "Setup Secure Session" when viewed through Service Trace Viewer.</span></span>  
  
 <span data-ttu-id="0e6d3-116">Esta modelo de seguimiento de actividades es válido para la autenticación de nombre de usuario/contraseña, autenticación de certificado y autenticación NTLM.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-116">This activity tracing model is valid for user name/password authentication, certificate authentication, and NTLM authentication.</span></span>  
  
 <span data-ttu-id="0e6d3-117">La tabla siguiente hace una lista de las actividades y seguimientos para el intercambio de SCT y negociación.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-117">The following table lists the activities and traces for negotiation and SCT exchange.</span></span>  
  
||<span data-ttu-id="0e6d3-118">Hora en la que sucede el intercambio SCT/negociación</span><span class="sxs-lookup"><span data-stu-id="0e6d3-118">Time when Negotiation/SCT exchange happens</span></span>|<span data-ttu-id="0e6d3-119">Actividades</span><span class="sxs-lookup"><span data-stu-id="0e6d3-119">Activities</span></span>|<span data-ttu-id="0e6d3-120">Traces</span><span class="sxs-lookup"><span data-stu-id="0e6d3-120">Traces</span></span>|  
|-|-------------------------------------------------|----------------|------------|  
|<span data-ttu-id="0e6d3-121">Transporte Seguro</span><span class="sxs-lookup"><span data-stu-id="0e6d3-121">Secure Transport</span></span><br /><br /> <span data-ttu-id="0e6d3-122">(HTTPS, SSL)</span><span class="sxs-lookup"><span data-stu-id="0e6d3-122">(HTTPS, SSL)</span></span>|<span data-ttu-id="0e6d3-123">En primer mensaje recibido.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-123">On first message received.</span></span>|<span data-ttu-id="0e6d3-124">Los seguimientos se emiten en la actividad ambiente.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-124">Traces are emitted in the ambient activity.</span></span>|<span data-ttu-id="0e6d3-125">-Seguimientos de Exchange</span><span class="sxs-lookup"><span data-stu-id="0e6d3-125">-   Exchange traces</span></span><br /><span data-ttu-id="0e6d3-126">-Canal seguro establecido</span><span class="sxs-lookup"><span data-stu-id="0e6d3-126">-   Secure channel established</span></span><br /><span data-ttu-id="0e6d3-127">-Secretos de recursos compartidos obtenidos.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-127">-   Share secrets obtained.</span></span>|  
|<span data-ttu-id="0e6d3-128">Capa de mensajes segura</span><span class="sxs-lookup"><span data-stu-id="0e6d3-128">Secure Message Layer</span></span><br /><br /> <span data-ttu-id="0e6d3-129">(WSHTTP)</span><span class="sxs-lookup"><span data-stu-id="0e6d3-129">(WSHTTP)</span></span>|<span data-ttu-id="0e6d3-130">En primer mensaje recibido.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-130">On first message received.</span></span>|<span data-ttu-id="0e6d3-131">En el cliente:</span><span class="sxs-lookup"><span data-stu-id="0e6d3-131">On the client:</span></span><br /><br /> <span data-ttu-id="0e6d3-132">-"Configurar sesión segura" fuera de "acción de proceso" de ese primer mensaje, para cada solicitud/respuesta para RST/RSTR/SCT.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-132">-   "Setup Secure Session" out of "Process Action" of that first message, for each request/reply for RST/RSTR/SCT.</span></span><br /><span data-ttu-id="0e6d3-133">-"Cerrar sesión segura" para cancelar Exchange, fuera de la "actividad cerrar proxy".</span><span class="sxs-lookup"><span data-stu-id="0e6d3-133">-   "Close Secure Session" for the CANCEL exchange, out of the "Close Proxy activity."</span></span> <span data-ttu-id="0e6d3-134">Esta actividad puede pasar debido a alguna otra actividad ambiente, dependiendo de cuándo se cierre la sesión segura.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-134">This activity may happen out of some other ambient activity, depending on when the secure session is closed.</span></span><br /><br /> <span data-ttu-id="0e6d3-135">En el servidor:</span><span class="sxs-lookup"><span data-stu-id="0e6d3-135">On the server:</span></span><br /><br /> <span data-ttu-id="0e6d3-136">-Una actividad "procesar acción" para cada solicitud/respuesta para RST/SCT/cancelar en el servidor.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-136">-   One "Process Action" activity for each request/reply for RST/SCT/Cancel on the server.</span></span> <span data-ttu-id="0e6d3-137">Si `propagateActivity` = `true` es, las actividades RST/RSTR/SCT se combinan con "configurar sesión de seguridad" y la cancelación se combina con la actividad "cerrar" del cliente.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-137">If `propagateActivity`=`true`, RST/RSTR/SCT activities are merged with "Set up Security Session", and Cancel is merged with the "Close" activity from the client.</span></span><br /><br /> <span data-ttu-id="0e6d3-138">Hay dos fases para “Configurar sesión segura”:</span><span class="sxs-lookup"><span data-stu-id="0e6d3-138">There are two stages for "Set up Secure Session":</span></span><br /><br /> <span data-ttu-id="0e6d3-139">1. negociación de autenticación.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-139">1.  Authentication negotiation.</span></span> <span data-ttu-id="0e6d3-140">Esto es opcional si el cliente ya tiene las credenciales apropiadas.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-140">This is optional if the client already has the proper credentials.</span></span> <span data-ttu-id="0e6d3-141">Esta fase se puede hacer a través de transporte seguro o a través de intercambios de mensajes.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-141">This phase can be done through secure transport, or through message exchanges.</span></span> <span data-ttu-id="0e6d3-142">En el caso último, pueden tener lugar 1 ó 2 intercambios RST/RSTR.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-142">In the latter case, 1 or 2 RST/RSTR exchanges can happen.</span></span> <span data-ttu-id="0e6d3-143">Para estos intercambios, los seguimientos se emiten en nuevas actividades de solicitud/respuesta como se diseñó previamente.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-143">For these exchanges, traces are emitted in new request/reply activities as previously designed.</span></span><br /><span data-ttu-id="0e6d3-144">2. establecimiento de sesión segura (SCT), en el que se produce un intercambio RST/RSTR aquí.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-144">2.  Secure session establishment (SCT), in which one RST/RSTR exchange happens here.</span></span> <span data-ttu-id="0e6d3-145">Esto tiene las mismas actividades de ambiente, tal y como se describió previamente.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-145">This has the same ambient activities as described previously.</span></span>|<span data-ttu-id="0e6d3-146">-Seguimientos de Exchange</span><span class="sxs-lookup"><span data-stu-id="0e6d3-146">-   Exchange traces</span></span><br /><span data-ttu-id="0e6d3-147">-Canal seguro establecido</span><span class="sxs-lookup"><span data-stu-id="0e6d3-147">-   Secure channel established</span></span><br /><span data-ttu-id="0e6d3-148">-Secretos de recursos compartidos obtenidos.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-148">-   Share secrets obtained.</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="0e6d3-149">En modo de seguridad mixta, la autenticación de la negociación tiene lugar en intercambios binarios, pero SCT sucede en intercambio de mensajes.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-149">In mixed security mode, negotiation authentication happens in binary exchanges, but SCT happens in message exchange.</span></span> <span data-ttu-id="0e6d3-150">En modo de transporte puro, la negociación solo sucede en transporte sin actividades adicionales.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-150">In pure transport mode, negotiation happens only in transport with no additional activities.</span></span>  
  
## <a name="message-encryption-and-decryption"></a><span data-ttu-id="0e6d3-151">Cifrado y descifrado de mensajes</span><span class="sxs-lookup"><span data-stu-id="0e6d3-151">Message Encryption and Decryption</span></span>  

 <span data-ttu-id="0e6d3-152">La tabla siguiente hace una lista de las actividades y seguimientos para el cifrado/descifrado de mensajes, así como la autenticación de la firma.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-152">The following table lists the activities and traces for message encryption/decryption, as well as signature authentication.</span></span>  
  
||<span data-ttu-id="0e6d3-153">Transporte Seguro</span><span class="sxs-lookup"><span data-stu-id="0e6d3-153">Secure Transport</span></span><br /><br /> <span data-ttu-id="0e6d3-154">(HTTPS, SSL) y capa de mensajes segura</span><span class="sxs-lookup"><span data-stu-id="0e6d3-154">(HTTPS, SSL) and Secure Message Layer</span></span><br /><br /> <span data-ttu-id="0e6d3-155">(WSHTTP)</span><span class="sxs-lookup"><span data-stu-id="0e6d3-155">(WSHTTP)</span></span>|  
|-|---------------------------------------------------------------------------------|  
|<span data-ttu-id="0e6d3-156">Hora en la que tiene lugar el cifrado/descifrado y la autenticación de la firma</span><span class="sxs-lookup"><span data-stu-id="0e6d3-156">Time when message encryption/decryption, as well as signature authentication happens</span></span>|<span data-ttu-id="0e6d3-157">En mensaje recibido</span><span class="sxs-lookup"><span data-stu-id="0e6d3-157">On message received</span></span>|  
|<span data-ttu-id="0e6d3-158">Actividades</span><span class="sxs-lookup"><span data-stu-id="0e6d3-158">Activities</span></span>|<span data-ttu-id="0e6d3-159">Los seguimientos se emiten en la actividad ProcessAction en el cliente y servidor.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-159">Traces are emitted in the ProcessAction activity on the client and server.</span></span>|  
|<span data-ttu-id="0e6d3-160">Traces</span><span class="sxs-lookup"><span data-stu-id="0e6d3-160">Traces</span></span>|<span data-ttu-id="0e6d3-161">-sendSecurityHeader (remitente):</span><span class="sxs-lookup"><span data-stu-id="0e6d3-161">-   sendSecurityHeader (sender):</span></span><br /><span data-ttu-id="0e6d3-162">-Firmar mensaje</span><span class="sxs-lookup"><span data-stu-id="0e6d3-162">-   Sign message</span></span><br /><span data-ttu-id="0e6d3-163">-Cifrar datos de solicitud</span><span class="sxs-lookup"><span data-stu-id="0e6d3-163">-   Encrypt request data</span></span><br /><span data-ttu-id="0e6d3-164">-receiveSecurityHeader (receptor):</span><span class="sxs-lookup"><span data-stu-id="0e6d3-164">-   receiveSecurityHeader (receiver):</span></span><br /><span data-ttu-id="0e6d3-165">-Comprobar la firma</span><span class="sxs-lookup"><span data-stu-id="0e6d3-165">-   Verify signature</span></span><br /><span data-ttu-id="0e6d3-166">-Descifrar datos de respuesta</span><span class="sxs-lookup"><span data-stu-id="0e6d3-166">-   Decrypt response data</span></span><br /><span data-ttu-id="0e6d3-167">-Autenticación</span><span class="sxs-lookup"><span data-stu-id="0e6d3-167">-   Authentication</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="0e6d3-168">En modo de transporte puro, el cifrado/descifrado del mensaje solo sucede en transporte sin actividades adicionales.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-168">In pure transport mode, message encryption/decryption happens only in transport with no additional activities.</span></span>  
  
## <a name="authorization-and-verification"></a><span data-ttu-id="0e6d3-169">Autorización y comprobación</span><span class="sxs-lookup"><span data-stu-id="0e6d3-169">Authorization and Verification</span></span>  

 <span data-ttu-id="0e6d3-170">La tabla siguiente hace una lista de las actividades y seguimiento para la autorización.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-170">The following table lists the activities and traces for authorization.</span></span>  
  
||<span data-ttu-id="0e6d3-171">Hora en la que tiene lugar la autorización</span><span class="sxs-lookup"><span data-stu-id="0e6d3-171">Time when authorization happens</span></span>|<span data-ttu-id="0e6d3-172">Actividades</span><span class="sxs-lookup"><span data-stu-id="0e6d3-172">Activities</span></span>|<span data-ttu-id="0e6d3-173">Traces</span><span class="sxs-lookup"><span data-stu-id="0e6d3-173">Traces</span></span>|  
|-|-------------------------------------|----------------|------------|  
|<span data-ttu-id="0e6d3-174">Local (valor predeterminado)</span><span class="sxs-lookup"><span data-stu-id="0e6d3-174">Local (default)</span></span>|<span data-ttu-id="0e6d3-175">Después de que se haya descifrado el mensaje en el servidor</span><span class="sxs-lookup"><span data-stu-id="0e6d3-175">After the message is decrypted on the server</span></span>|<span data-ttu-id="0e6d3-176">Los seguimientos se emiten en la actividad ProcessAction en el servidor.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-176">Traces are emitted in the ProcessAction activity at the server.</span></span>|<span data-ttu-id="0e6d3-177">Usuario autorizado.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-177">User authorized.</span></span>|  
|<span data-ttu-id="0e6d3-178">Control remoto</span><span class="sxs-lookup"><span data-stu-id="0e6d3-178">Remote</span></span>|<span data-ttu-id="0e6d3-179">Después de que se haya descifrado el mensaje en el servidor</span><span class="sxs-lookup"><span data-stu-id="0e6d3-179">After the message is decrypted on the server</span></span>|<span data-ttu-id="0e6d3-180">Los seguimientos se emiten en una nueva actividad invocada por la actividad ProcessAction.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-180">Traces are emitted in a new activity invoked by the ProcessAction activity.</span></span>|<span data-ttu-id="0e6d3-181">Usuario autorizado.</span><span class="sxs-lookup"><span data-stu-id="0e6d3-181">User authorized.</span></span>|
