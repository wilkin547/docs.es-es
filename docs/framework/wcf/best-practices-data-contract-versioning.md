---
description: 'Más información sobre: procedimientos recomendados: control de versiones de contratos de datos'
title: 'Procedimientos recomendados: Versiones de contratos de datos'
ms.date: 03/30/2017
helpviewer_keywords:
- data contracts
- service contracts
- best practices [WCF], data contract versioning
- Windows Communication Foundation, data contracts
ms.assetid: bf0ab338-4d36-4e12-8002-8ebfdeb346cb
ms.openlocfilehash: 8f12c620b6916c7b513b3491cbbb91c4cfd1fbe5
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/06/2021
ms.locfileid: "99686757"
---
# <a name="best-practices-data-contract-versioning"></a><span data-ttu-id="ffdf6-103">Procedimientos recomendados: Versiones de contratos de datos</span><span class="sxs-lookup"><span data-stu-id="ffdf6-103">Best Practices: Data Contract Versioning</span></span>

<span data-ttu-id="ffdf6-104">En este tema se enumeran los procedimientos recomendados para crear contratos de datos que pueden evolucionar con facilidad con el tiempo.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-104">This topic lists the best practices for creating data contracts that can evolve easily over time.</span></span> <span data-ttu-id="ffdf6-105">Para obtener más información sobre los contratos de datos, vea los temas sobre el [uso de contratos de datos](./feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="ffdf6-105">For more information about data contracts, see the topics in [Using Data Contracts](./feature-details/using-data-contracts.md).</span></span>  
  
## <a name="note-on-schema-validation"></a><span data-ttu-id="ffdf6-106">Aviso en validación del esquema</span><span class="sxs-lookup"><span data-stu-id="ffdf6-106">Note on Schema Validation</span></span>  

 <span data-ttu-id="ffdf6-107">En la explicación del control de versiones del contrato de datos, es importante tener en cuenta que el esquema del contrato de datos exportado por Windows Communication Foundation (WCF) no tiene ninguna compatibilidad con el control de versiones, aparte del hecho de que los elementos se marcan como opcionales de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-107">In discussing data contract versioning, it is important to note that the data contract schema exported by Windows Communication Foundation (WCF) does not have any versioning support, other than the fact that elements are marked as optional by default.</span></span>  
  
 <span data-ttu-id="ffdf6-108">Esto significa que no se puede implementar ni siquiera el escenario de versión más común, como agregar un nuevo miembro de datos, de un modo uniforme con respecto a un esquema determinado.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-108">This means that even the most common versioning scenario, such as adding a new data member, cannot be implemented in a way that is seamless with regard to a given schema.</span></span> <span data-ttu-id="ffdf6-109">Las versiones más recientes de un contrato de datos (con un nuevo miembro de datos, por ejemplo) no se validan mediante el esquema anterior.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-109">The newer versions of a data contract (with a new data member, for example) do not validate using the old schema.</span></span>  
  
 <span data-ttu-id="ffdf6-110">Sin embargo, hay muchos escenarios en los cuales no se requiere compatibilidad de esquema estricta.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-110">However, there are many scenarios in which strict schema compliance is not required.</span></span> <span data-ttu-id="ffdf6-111">Muchas plataformas de servicios Web, incluidos WCF y los servicios Web XML creados con ASP.NET, no realizan la validación de esquemas de forma predeterminada y, por tanto, toleran elementos adicionales que no se describen en el esquema.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-111">Many Web services platforms, including WCF and XML Web services created using ASP.NET, do not perform schema validation by default and therefore tolerate extra elements that are not described by the schema.</span></span> <span data-ttu-id="ffdf6-112">Cuando se trabaja con estas plataformas, muchos escenarios de versión son más fáciles de implementar.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-112">When working with such platforms, many versioning scenarios are easier to implement.</span></span>  
  
 <span data-ttu-id="ffdf6-113">De este modo, hay dos conjuntos de instrucciones de versión de contrato de datos: uno establecido para escenarios donde la validez estricta del esquema es importante, y otro conjunto para los escenarios cuando no lo es.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-113">Thus, there are two sets of data contract versioning guidelines: one set for scenarios where strict schema validity is important, and another set for scenarios when it is not.</span></span>  
  
## <a name="versioning-when-schema-validation-is-required"></a><span data-ttu-id="ffdf6-114">Controlar versiones cuando se requiere la validación del esquema</span><span class="sxs-lookup"><span data-stu-id="ffdf6-114">Versioning When Schema Validation Is Required</span></span>  

 <span data-ttu-id="ffdf6-115">Si se requiere la validez estricta del esquema en todas las direcciones (nuevo a anterior y anterior a nuevo), los contratos de datos se deberían considerar inmutables.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-115">If strict schema validity is required in all directions (new-to-old and old-to-new), data contracts should be considered immutable.</span></span> <span data-ttu-id="ffdf6-116">Si es necesario controlar las versiones, se debería crear un nuevo contrato de datos, con un espacio de nombres o nombre diferente, y se deberían controlar las versiones del contrato de servicio utilizando el tipo de datos según corresponda.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-116">If versioning is required, a new data contract should be created, with a different name or namespace, and the service contract using the data type should be versioned accordingly.</span></span>  
  
 <span data-ttu-id="ffdf6-117">Imagine, por ejemplo, que un contrato de servicio de procesamiento de pedidos de compra denominado `PoProcessing` con una operación `PostPurchaseOrder` toma un parámetro que se ajusta a un contrato de datos `PurchaseOrder`.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-117">For example, a purchase order processing service contract named `PoProcessing` with a `PostPurchaseOrder` operation takes a parameter that conforms to a `PurchaseOrder` data contract.</span></span> <span data-ttu-id="ffdf6-118">Si el contrato `PurchaseOrder` tiene que cambiar, debe crear un nuevo contrato de datos, es decir, `PurchaseOrder2`, que incluya los cambios.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-118">If the `PurchaseOrder` contract has to change, you must create a new data contract, that is, `PurchaseOrder2`, which includes the changes.</span></span> <span data-ttu-id="ffdf6-119">A continuación, debe administrar la versión en el nivel del contrato de servicios.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-119">You must then handle the versioning at the service contract level.</span></span> <span data-ttu-id="ffdf6-120">Por ejemplo, creando una operación `PostPurchaseOrder2` que toma el parámetro `PurchaseOrder2` o creando un contrato de servicios `PoProcessing2` donde la operación `PostPurchaseOrder` toma un contrato de datos `PurchaseOrder2`.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-120">For example, by creating a `PostPurchaseOrder2` operation that takes the `PurchaseOrder2` parameter, or by creating a `PoProcessing2` service contract where the `PostPurchaseOrder` operation takes a `PurchaseOrder2` data contract.</span></span>  
  
 <span data-ttu-id="ffdf6-121">Tenga en cuenta que los cambios en los contratos de datos a los cuales hacen referencia otros contratos de datos también se extienden a la capa de modelo de servicio.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-121">Note that changes in data contracts that are referenced by other data contracts also extend to the service model layer.</span></span> <span data-ttu-id="ffdf6-122">Por ejemplo, en el escenario anterior, no es necesario cambiar el contrato de datos `PurchaseOrder`.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-122">For example, in the previous scenario the `PurchaseOrder` data contract does not need to change.</span></span> <span data-ttu-id="ffdf6-123">Sin embargo, contiene un miembro de datos de un contrato de datos `Customer` que, a su vez, contiene un miembro de datos del contrato de datos `Address`, que debe cambiarse.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-123">However, it contains a data member of a `Customer` data contract, which in turn contained a data member of the `Address` data contract, which does need to be changed.</span></span> <span data-ttu-id="ffdf6-124">En ese caso, necesitaría crear un contrato de datos `Address2` con los cambios necesarios, un contrato de datos `Customer2` que contenga el miembro de datos `Address2` y un contrato de datos `PurchaseOrder2` que contenga un miembro de datos `Customer2`.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-124">In that case, you would need to create an `Address2` data contract with the required changes, a `Customer2` data contract that contains the `Address2` data member, and a `PurchaseOrder2` data contract that contains a `Customer2` data member.</span></span> <span data-ttu-id="ffdf6-125">Como en el caso anterior, se tendrían que controlar las versiones del contrato de servicios también.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-125">As in the previous case, the service contract would have to be versioned as well.</span></span>  
  
 <span data-ttu-id="ffdf6-126">Aunque en estos nombres de ejemplos se cambian (anexando un "2"), la recomendación es cambiar los espacios de nombres en lugar de los nombres anexando los nuevos espacios de nombres con un número de versión o una fecha.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-126">Although in these examples names are changed (by appending a "2"), the recommendation is to change namespaces instead of names by appending new namespaces with a version number or a date.</span></span> <span data-ttu-id="ffdf6-127">Por ejemplo, el contrato de datos `http://schemas.contoso.com/2005/05/21/PurchaseOrder` cambiaría al contrato de datos `http://schemas.contoso.com/2005/10/14/PurchaseOrder`.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-127">For example, the `http://schemas.contoso.com/2005/05/21/PurchaseOrder` data contract would change to the `http://schemas.contoso.com/2005/10/14/PurchaseOrder` data contract.</span></span>  
  
 <span data-ttu-id="ffdf6-128">Para obtener más información, consulte procedimientos recomendados: [control de versiones del servicio](service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="ffdf6-128">For more information, see Best Practices: [Service Versioning](service-versioning.md).</span></span>  
  
 <span data-ttu-id="ffdf6-129">En algunos casos, debe garantizar la compatibilidad estricta del esquema para los mensajes enviados por su aplicación, pero no puede confiar en que los mensajes entrantes sean estrictamente conformes al esquema.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-129">Occasionally, you must guarantee strict schema compliance for messages sent by your application, but cannot rely on the incoming messages to be strictly schema-compliant.</span></span> <span data-ttu-id="ffdf6-130">En este caso, existe el peligro de que un mensaje entrante pueda contener datos extraños.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-130">In this case, there is a danger that an incoming message might contain extraneous data.</span></span> <span data-ttu-id="ffdf6-131">WCF almacena y devuelve los valores extraños, por lo que se envían mensajes no válidos para el esquema.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-131">The extraneous values are stored and returned by WCF and thus results in schema-invalid messages being sent.</span></span> <span data-ttu-id="ffdf6-132">Para evitar este problema, la característica de ida y vuelta debería estar desactivada.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-132">To avoid this problem, the round-tripping feature should be turned off.</span></span> <span data-ttu-id="ffdf6-133">Existen dos formas de hacerlo.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-133">There are two ways to do this.</span></span>  
  
- <span data-ttu-id="ffdf6-134">No implemente la interfaz <xref:System.Runtime.Serialization.IExtensibleDataObject> en ninguno de sus tipos.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-134">Do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface on any of your types.</span></span>  
  
- <span data-ttu-id="ffdf6-135">Aplique un atributo <xref:System.ServiceModel.ServiceBehaviorAttribute> a su contrato de servicios con la propiedad <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> establecida en `true`.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-135">Apply a <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to your service contract with the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property set to `true`.</span></span>  
  
 <span data-ttu-id="ffdf6-136">Para obtener más información acerca de los recorridos de ida y vuelta, consulte [contratos de datos compatibles con el avance](./feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="ffdf6-136">For more information about round-tripping, see [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md).</span></span>  
  
## <a name="versioning-when-schema-validation-is-not-required"></a><span data-ttu-id="ffdf6-137">Controlar versiones cuando se requiere la validación del esquema</span><span class="sxs-lookup"><span data-stu-id="ffdf6-137">Versioning When Schema Validation Is Not Required</span></span>  

 <span data-ttu-id="ffdf6-138">En raras ocasiones se requiere compatibilidad estricta de esquema.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-138">Strict schema compliance is rarely required.</span></span> <span data-ttu-id="ffdf6-139">Muchas plataformas toleran elementos adicionales no descritos por un esquema.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-139">Many platforms tolerate extra elements not described by a schema.</span></span> <span data-ttu-id="ffdf6-140">Siempre y cuando esto se tolere, se puede usar el conjunto completo de características que se describen en [contratos de datos con](./feature-details/forward-compatible-data-contracts.md) [versiones de contrato de datos](./feature-details/data-contract-versioning.md) y compatibles con reenvío.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-140">As long as this is tolerated, the full set of features described in [Data Contract Versioning](./feature-details/data-contract-versioning.md) and [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md) can be used.</span></span> <span data-ttu-id="ffdf6-141">A continuación se indican algunas instrucciones recomendadas:</span><span class="sxs-lookup"><span data-stu-id="ffdf6-141">The following guidelines are recommended.</span></span>  
  
 <span data-ttu-id="ffdf6-142">Algunas de las instrucciones se deben seguir con exactitud para enviar nuevas versiones de un tipo cuando se espera uno anterior o enviar uno anterior cuando se espera el nuevo.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-142">Some of the guidelines must be followed exactly in order to send new versions of a type where an older one is expected or send an old one where the new one is expected.</span></span> <span data-ttu-id="ffdf6-143">No se requieren otras instrucciones estrictamente, pero se enumeran aquí porque el futuro de versión del esquema puede afectar a.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-143">Other guidelines are not strictly required, but are listed here because they may be affected by the future of schema versioning.</span></span>  
  
1. <span data-ttu-id="ffdf6-144">No intente controlar las versiones de los contratos de datos por herencia de tipo.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-144">Do not attempt to version data contracts by type inheritance.</span></span> <span data-ttu-id="ffdf6-145">Para crear versiones posteriores, cambie el contrato de datos en un tipo existente o cree un nuevo tipo no relacionado.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-145">To create later versions, either change the data contract on an existing type or create a new unrelated type.</span></span>  
  
2. <span data-ttu-id="ffdf6-146">Se permite el uso de herencia junto con los contratos de datos, siempre que la herencia no se utilice como un mecanismo de control de versiones y se sigan ciertas reglas.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-146">The use of inheritance together with data contracts is allowed, provided that inheritance is not used as a versioning mechanism and that certain rules are followed.</span></span> <span data-ttu-id="ffdf6-147">Si un tipo deriva de un cierto tipo base, no le haga derivar de un tipo base diferente en una versión futura (a menos que tenga el mismo contrato de datos).</span><span class="sxs-lookup"><span data-stu-id="ffdf6-147">If a type derives from a certain base type, do not make it derive from a different base type in a future version (unless it has the same data contract).</span></span> <span data-ttu-id="ffdf6-148">Existe una excepción: puede insertar un tipo en la jerarquía entre un tipo de contrato de datos y su tipo base, pero solo si no contiene miembros de datos con los mismos nombres en calidad de otros miembros en ninguna versión posible de los otros tipos de la jerarquía.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-148">There is one exception to this: you can insert a type into the hierarchy between a data contract type and its base type, but only if it does not contain data members with the same names as other members in any possible versions of the other types in the hierarchy.</span></span> <span data-ttu-id="ffdf6-149">En general, el uso de miembros de datos con los mismos nombres en niveles diferentes de la misma jerarquía de herencia puede producir problemas de versión serios y se debería evitar.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-149">In general, using data members with the same names at different levels of the same inheritance hierarchy can lead to serious versioning problems and should be avoided.</span></span>  
  
3. <span data-ttu-id="ffdf6-150">Iniciándose con la primera versión de un contrato de datos, siempre implemente <xref:System.Runtime.Serialization.IExtensibleDataObject> para habilitar alrededor tropezando.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-150">Starting with the first version of a data contract, always implement <xref:System.Runtime.Serialization.IExtensibleDataObject> to enable round-tripping.</span></span> <span data-ttu-id="ffdf6-151">Para obtener más información, vea [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md) (Contratos de datos compatibles con el reenvío).</span><span class="sxs-lookup"><span data-stu-id="ffdf6-151">For more information, see [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md).</span></span> <span data-ttu-id="ffdf6-152">Si ha soltado una o más versiones de un tipo sin implementar esta interfaz, impleméntela en la versión siguiente del tipo.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-152">If you have released one or more versions of a type without implementing this interface, implement it in the next version of the type.</span></span>  
  
4. <span data-ttu-id="ffdf6-153">En versiones posteriores, no cambie el nombre de contrato de datos o espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-153">In later versions, do not change the data contract name or namespace.</span></span> <span data-ttu-id="ffdf6-154">Si cambia el nombre o espacio de nombres del tipo subyacente al contrato de datos, asegúrese de conservar el nombre de contrato de datos y espacio de nombres utilizando los mecanismos adecuados, como la propiedad <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> de <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-154">If changing the name or namespace of the type underlying the data contract, be sure to preserve the data contract name and namespace by using the appropriate mechanisms, such as the <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> property of the <xref:System.Runtime.Serialization.DataContractAttribute>.</span></span> <span data-ttu-id="ffdf6-155">Para obtener más información acerca de la nomenclatura, consulte [nombres de contratos de datos](./feature-details/data-contract-names.md).</span><span class="sxs-lookup"><span data-stu-id="ffdf6-155">For more information about naming, see [Data Contract Names](./feature-details/data-contract-names.md).</span></span>  
  
5. <span data-ttu-id="ffdf6-156">En versiones posteriores, no cambie los nombres de ningún miembro de datos.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-156">In later versions, do not change the names of any data members.</span></span> <span data-ttu-id="ffdf6-157">Si cambia el nombre del campo, propiedad o evento subyacente al miembro de datos, utilice la propiedad `Name` de <xref:System.Runtime.Serialization.DataMemberAttribute> para conservar el nombre del miembro de datos existente.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-157">If changing the name of the field, property, or event underlying the data member, use the `Name` property of the <xref:System.Runtime.Serialization.DataMemberAttribute> to preserve the existing data member name.</span></span>  
  
6. <span data-ttu-id="ffdf6-158">En versiones posteriores, no cambie el tipo de ningún campo, propiedad o evento subyacente al miembro de datos de tal manera que el contrato de datos resultante para ese miembro de datos cambie.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-158">In later versions, do not change the type of any field, property, or event underlying a data member such that the resulting data contract for that data member changes.</span></span> <span data-ttu-id="ffdf6-159">Tenga presente que los tipos de interfaz son equivalentes a <xref:System.Object> con el fin de determinar el contrato de datos esperado.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-159">Keep in mind that interface types are equivalent to <xref:System.Object> for the purposes of determining the expected data contract.</span></span>  
  
7. <span data-ttu-id="ffdf6-160">En versiones posteriores, no cambie el orden de los miembros de datos existentes mediante el ajuste de la propiedad <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> del atributo <xref:System.Runtime.Serialization.DataMemberAttribute>.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-160">In later versions, do not change the order of the existing data members by adjusting the <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute.</span></span>  
  
8. <span data-ttu-id="ffdf6-161">En versiones posteriores, se pueden agregar nuevos miembros de datos.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-161">In later versions, new data members can be added.</span></span> <span data-ttu-id="ffdf6-162">Deberían seguir siempre estas reglas:</span><span class="sxs-lookup"><span data-stu-id="ffdf6-162">They should always follow these rules:</span></span>  
  
    1. <span data-ttu-id="ffdf6-163">La propiedad <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> se debería dejar siempre en su valor predeterminado de `false`.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-163">The <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property should always be left at its default value of `false`.</span></span>  
  
    2. <span data-ttu-id="ffdf6-164">Si el miembro no acepta el valor predeterminado `null` o cero, se debería proporcionar un método de devolución de llamada mediante <xref:System.Runtime.Serialization.OnDeserializingAttribute> para proporcionar un valor predeterminado razonable en caso de que el miembro no se encuentre en la secuencia de entrada.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-164">If a default value of `null` or zero for the member is unacceptable, a callback method should be provided using the <xref:System.Runtime.Serialization.OnDeserializingAttribute> to provide a reasonable default in case the member is not present in the incoming stream.</span></span> <span data-ttu-id="ffdf6-165">Para obtener más información sobre la devolución de llamada, consulte [devoluciones de llamada de serialización tolerante a versiones](./feature-details/version-tolerant-serialization-callbacks.md).</span><span class="sxs-lookup"><span data-stu-id="ffdf6-165">For more information about the callback, see [Version-Tolerant Serialization Callbacks](./feature-details/version-tolerant-serialization-callbacks.md).</span></span>  
  
    3. <span data-ttu-id="ffdf6-166">La <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> propiedad se debe usar para asegurarse de que todos los miembros de datos recién agregados aparecen después de los miembros de datos existentes.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-166">The <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> property should be used to make sure that all of the newly added data members appear after the existing data members.</span></span> <span data-ttu-id="ffdf6-167">Para hacerlo, se recomienda lo siguiente: Ninguno de los miembros de datos en la primera versión del contrato de datos debería tener su propiedad `Order` establecida.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-167">The recommended way of doing this is as follows: None of the data members in the first version of the data contract should have their `Order` property set.</span></span> <span data-ttu-id="ffdf6-168">Todos los miembros de datos agregados en la versión 2 del contrato de datos deberían tener su propiedad `Order` establecida en 2.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-168">All of the data members added in version 2 of the data contract should have their `Order` property set to 2.</span></span> <span data-ttu-id="ffdf6-169">Todos los miembros de datos agregados en la versión 3 del contrato de datos deberían tener su propiedad `Order` establecida en 3, etc.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-169">All of the data members added in version 3 of the data contract should have their `Order` set to 3, and so on.</span></span> <span data-ttu-id="ffdf6-170">Se permite tener más de un miembro de datos establecido en el mismo número de `Order`.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-170">It is permissible to have more than one data member set to the same `Order` number.</span></span>  
  
9. <span data-ttu-id="ffdf6-171">No quite los miembros de datos en versiones posteriores, ni siquiera si la propiedad <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> se dejó en su propiedad predeterminada de `false` en versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-171">Do not remove data members in later versions, even if the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property was left at its default property of `false` in prior versions.</span></span>  
  
10. <span data-ttu-id="ffdf6-172">No cambie la propiedad `IsRequired` en ningún miembro de datos existente entre versiones.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-172">Do not change the `IsRequired` property on any existing data members from version to version.</span></span>  
  
11. <span data-ttu-id="ffdf6-173">Para los miembros de datos necesarios (donde `IsRequired` es `true`), no cambie la propiedad `EmitDefaultValue` entre versiones.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-173">For required data members (where `IsRequired` is `true`), do not change the `EmitDefaultValue` property from version to version.</span></span>  
  
12. <span data-ttu-id="ffdf6-174">No intente crear jerarquías de versión bifurcadas.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-174">Do not attempt to create branched versioning hierarchies.</span></span> <span data-ttu-id="ffdf6-175">Es decir, siempre debería haber una ruta de acceso en al menos una dirección desde una versión a otra versión utilizando solo los cambios permitidos por estas instrucciones.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-175">That is, there should always be a path in at least one direction from any version to any other version using only the changes permitted by these guidelines.</span></span>  
  
     <span data-ttu-id="ffdf6-176">Por ejemplo, si la versión 1 de un contrato de datos Persona contiene solo el Nombre de miembro de datos, no debería crear la versión 2a de la adición del contrato añadiendo solo el miembro Edad y la versión 2 agregando solo el miembro Dirección.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-176">For example, if version 1 of a Person data contract contains only the Name data member, you should not create version 2a of the contract adding only the Age member and version 2b adding only the Address member.</span></span> <span data-ttu-id="ffdf6-177">Al ir de 2a a 2b, implicaría quitar Edad y agregar Dirección; al ir en la otra dirección, supondría quitar Dirección y agregar Edad.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-177">Going from 2a to 2b would involve removing Age and adding Address; going in the other direction would entail removing Address and adding Age.</span></span> <span data-ttu-id="ffdf6-178">Estas instrucciones no permiten quitar los miembros.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-178">Removing members is not permitted by these guidelines.</span></span>  
  
13. <span data-ttu-id="ffdf6-179">Generalmente no debería crear nuevos subtipos de tipos de contrato de datos existente en una nueva versión de su aplicación.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-179">You should generally not create new subtypes of existing data contract types in a new version of your application.</span></span> <span data-ttu-id="ffdf6-180">Por la misma razón, no debería crear nuevos contratos de datos que se usen en lugar de miembros de datos declarados como Object o como tipos de interfaz.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-180">Likewise, you should not create new data contracts that are used in place of data members declared as Object or as interface types.</span></span> <span data-ttu-id="ffdf6-181">Se permite crear estas clases nuevas solo cuando conoce que puede agregar los nuevos tipos a la lista de tipos conocida de todas las instancias de su aplicación anterior.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-181">Creating these new classes is allowed only when you know that you can add the new types to the known types list of all instances of your old application.</span></span> <span data-ttu-id="ffdf6-182">Por ejemplo, en la versión 1 de su aplicación, puede tener el tipo de contrato de datos LibraryItem con Book y subtipos de contrato de datos Newspaper.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-182">For example, in version 1 of your application, you may have the LibraryItem data contract type with the Book and Newspaper data contract subtypes.</span></span> <span data-ttu-id="ffdf6-183">LibraryItem entonces tendría una lista de tipos que contendría Book y Newspaper.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-183">LibraryItem would then have a known types list that contains Book and Newspaper.</span></span> <span data-ttu-id="ffdf6-184">Suponga que ahora agrega un tipo Magazine en la versión 2 qué es un subtipo de LibraryItem.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-184">Suppose you now add a Magazine type in version 2 which is a subtype of LibraryItem.</span></span> <span data-ttu-id="ffdf6-185">Si envía una instancia Magazine de la versión 2 a la versión 1, el contrato de datos Magazine no se encuentra en la lista de tipos conocidos y se inicia una excepción.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-185">If you send a Magazine instance from version 2 to version 1, the Magazine data contract is not found in the list of known types and an exception is thrown.</span></span>  
  
14. <span data-ttu-id="ffdf6-186">No debería agregar o quitar los miembros de enumeración entre las versiones.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-186">You should not add or remove enumeration members between versions.</span></span> <span data-ttu-id="ffdf6-187">Tampoco debería cambiar el nombre de los miembros de la enumeración, a menos que use la propiedad Name en el atributo `EnumMemberAttribute` para mantener iguales sus nombres en el modelo del contrato de datos.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-187">You should also not rename enumeration members, unless you use the Name property on the `EnumMemberAttribute` attribute to keep their names in the data contract model the same.</span></span>  
  
15. <span data-ttu-id="ffdf6-188">Las colecciones son intercambiables en el modelo del contrato de datos, tal y como se describe en [tipos de colección en contratos de datos](./feature-details/collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="ffdf6-188">Collections are interchangeable in the data contract model as described in [Collection Types in Data Contracts](./feature-details/collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="ffdf6-189">Esto permite un gran grado de flexibilidad.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-189">This allows for a great degree of flexibility.</span></span> <span data-ttu-id="ffdf6-190">Sin embargo, asegúrese de que no cambia inadvertidamente un tipo de colección de una manera no intercambiable entre versiones.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-190">However, make sure that you do not inadvertently change a collection type in a non-interchangeable way from version to version.</span></span> <span data-ttu-id="ffdf6-191">Por ejemplo, no cambie de una colección no personalizada (es decir, sin el atributo `CollectionDataContractAttribute` ) a una personalizada o una colección personalizada a una no personalizada.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-191">For example, do not change from a non-customized collection (that is, without the `CollectionDataContractAttribute` attribute) to a customized one or a customized collection to a non-customized one.</span></span> <span data-ttu-id="ffdf6-192">Tampoco cambie las propiedades de `CollectionDataContractAttribute` entre las versiones.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-192">Also, do not change the properties on the `CollectionDataContractAttribute` from version to version.</span></span> <span data-ttu-id="ffdf6-193">El único cambio permitido es agregar una propiedad Name o Namespace si el nombre del tipo de colección subyacente o el espacio de nombres ha cambiado y necesita cambiar su nombre de contrato de datos y espacio de nombres al mismo nombre que en una versión anterior.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-193">The only allowed change is adding a Name or Namespace property if the underlying collection type's name or namespace has changed and you need to make its data contract name and namespace the same as in a previous version.</span></span>  
  
 <span data-ttu-id="ffdf6-194">Se pueden omitir algunas de las instrucciones enumeradas aquí sin ningún riesgo cuando se aplican circunstancias especiales.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-194">Some of the guidelines listed here can be safely ignored when special circumstances apply.</span></span> <span data-ttu-id="ffdf6-195">Asegúrese de que entiende totalmente la serialización, deserialización y mecanismos de esquema implicados en caso de no cumplir las instrucciones.</span><span class="sxs-lookup"><span data-stu-id="ffdf6-195">Make sure you fully understand the serialization, deserialization, and schema mechanisms involved before deviating from the guidelines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ffdf6-196">Vea también</span><span class="sxs-lookup"><span data-stu-id="ffdf6-196">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A>
- <xref:System.Runtime.Serialization.DataContractAttribute>
- <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A>
- <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>
- <xref:System.Runtime.Serialization.IExtensibleDataObject>
- <xref:System.ServiceModel.ServiceBehaviorAttribute>
- <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A>
- <xref:System.Runtime.Serialization.ExtensionDataObject>
- <xref:System.Runtime.Serialization.OnDeserializingAttribute>
- [<span data-ttu-id="ffdf6-197">Utilización de contratos de datos</span><span class="sxs-lookup"><span data-stu-id="ffdf6-197">Using Data Contracts</span></span>](./feature-details/using-data-contracts.md)
- [<span data-ttu-id="ffdf6-198">Versiones de contratos de datos</span><span class="sxs-lookup"><span data-stu-id="ffdf6-198">Data Contract Versioning</span></span>](./feature-details/data-contract-versioning.md)
- [<span data-ttu-id="ffdf6-199">Nombres de contratos de datos</span><span class="sxs-lookup"><span data-stu-id="ffdf6-199">Data Contract Names</span></span>](./feature-details/data-contract-names.md)
- [<span data-ttu-id="ffdf6-200">Contratos de datos compatibles con el reenvío</span><span class="sxs-lookup"><span data-stu-id="ffdf6-200">Forward-Compatible Data Contracts</span></span>](./feature-details/forward-compatible-data-contracts.md)
- [<span data-ttu-id="ffdf6-201">Devoluciones de llamadas en la serialización tolerante a versiones</span><span class="sxs-lookup"><span data-stu-id="ffdf6-201">Version-Tolerant Serialization Callbacks</span></span>](./feature-details/version-tolerant-serialization-callbacks.md)
