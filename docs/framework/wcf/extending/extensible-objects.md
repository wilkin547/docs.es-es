---
title: Objetos extensibles
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: extensible objects [WCF]
ms.assetid: bc88cefc-31fb-428e-9447-6d20a7d452af
caps.latest.revision: "11"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 24482f97f5869def79ce2a24d33b3f9345d1c7c3
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/21/2017
---
# <a name="extensible-objects"></a><span data-ttu-id="383ec-102">Objetos extensibles</span><span class="sxs-lookup"><span data-stu-id="383ec-102">Extensible Objects</span></span>
<span data-ttu-id="383ec-103">El patrón de objeto extensible se utiliza para extender clases de tiempo de ejecución existentes con nueva funcionalidad o para agregar un nuevo estado a un objeto.</span><span class="sxs-lookup"><span data-stu-id="383ec-103">The extensible object pattern is used to either extend existing runtime classes with new functionality or to add new state to an object.</span></span> <span data-ttu-id="383ec-104">Las extensiones, asociadas a uno de los objetos extensibles, permiten que los comportamientos en fases muy diferentes de procesamiento tengan acceso al estado compartido y funcionalidad adjuntos a un objeto extensible común al que pueden tener acceso.</span><span class="sxs-lookup"><span data-stu-id="383ec-104">Extensions, attached to one of the extensible objects, enable behaviors at very different stages in processing to access shared state and functionality attached to a common extensible object that they can access.</span></span>  
  
## <a name="the-iextensibleobjectt-pattern"></a><span data-ttu-id="383ec-105">El IExtensibleObject\<T > patrón</span><span class="sxs-lookup"><span data-stu-id="383ec-105">The IExtensibleObject\<T> Pattern</span></span>  
 <span data-ttu-id="383ec-106">Hay tres interfaces en el patrón de objeto extensible: <xref:System.ServiceModel.IExtensibleObject%601>, <xref:System.ServiceModel.IExtension%601>y <xref:System.ServiceModel.IExtensionCollection%601>.</span><span class="sxs-lookup"><span data-stu-id="383ec-106">There are three interfaces in the extensible object pattern: <xref:System.ServiceModel.IExtensibleObject%601>, <xref:System.ServiceModel.IExtension%601>, and <xref:System.ServiceModel.IExtensionCollection%601>.</span></span>  
  
 <span data-ttu-id="383ec-107">Los tipos que permiten a los objetos <xref:System.ServiceModel.IExtensibleObject%601> personalizar su funcionalidad implementan la interfaz <xref:System.ServiceModel.IExtension%601>.</span><span class="sxs-lookup"><span data-stu-id="383ec-107">The <xref:System.ServiceModel.IExtensibleObject%601> interface is implemented by types that allow <xref:System.ServiceModel.IExtension%601> objects to customize their functionality.</span></span>  
  
 <span data-ttu-id="383ec-108">Los objetos extensibles permiten la agregación dinámica de objetos <xref:System.ServiceModel.IExtension%601>.</span><span class="sxs-lookup"><span data-stu-id="383ec-108">Extensible objects allow dynamic aggregation of <xref:System.ServiceModel.IExtension%601> objects.</span></span> <span data-ttu-id="383ec-109">Los objetos <xref:System.ServiceModel.IExtension%601> son caracterizados por la interfaz siguiente:</span><span class="sxs-lookup"><span data-stu-id="383ec-109"><xref:System.ServiceModel.IExtension%601> objects are characterized by the following interface:</span></span>  
  
```  
public interface IExtension<T>  
where T : IExtensibleObject<T>  
{  
    void Attach(T owner);  
    void Detach(T owner);  
}  
```  
  
 <span data-ttu-id="383ec-110">La restricción de tipo garantiza que las extensiones solo se pueden definir para las clases que son <xref:System.ServiceModel.IExtensibleObject%601>.</span><span class="sxs-lookup"><span data-stu-id="383ec-110">The type restriction guarantees that extensions can only be defined for classes that are <xref:System.ServiceModel.IExtensibleObject%601>.</span></span> <span data-ttu-id="383ec-111"><xref:System.ServiceModel.IExtension%601.Attach%2A> y <xref:System.ServiceModel.IExtension%601.Detach%2A> proporcionan notificación de agregación o desagregación.</span><span class="sxs-lookup"><span data-stu-id="383ec-111"><xref:System.ServiceModel.IExtension%601.Attach%2A> and <xref:System.ServiceModel.IExtension%601.Detach%2A> provide notification of aggregation or disaggregation.</span></span>  
  
 <span data-ttu-id="383ec-112">Es válido para que las implementaciones restrinjan cuando se pueden agregar y quitar de un propietario.</span><span class="sxs-lookup"><span data-stu-id="383ec-112">It is valid for implementations to restrict when they may be added and removed from an owner.</span></span> <span data-ttu-id="383ec-113">Por ejemplo, puede impedir la eliminación por completo, impedir agregar o eliminar extensiones cuando el propietario o extensión están en un cierto estado, impedir agregar a varios propietarios simultáneamente o permitir solo una suma única seguida por una sola eliminación.</span><span class="sxs-lookup"><span data-stu-id="383ec-113">For example, you can disallow removal entirely, disallowing adding or removing extensions when the owner or extension are in a certain state, disallow adding to multiple owners concurrently, or allow only a single addition followed by a single remove.</span></span>  
  
 <span data-ttu-id="383ec-114"><xref:System.ServiceModel.IExtension%601> no implica ninguna interacción con otras interfaces administradas estándar.</span><span class="sxs-lookup"><span data-stu-id="383ec-114"><xref:System.ServiceModel.IExtension%601> does not imply any interactions with other standard managed interfaces.</span></span> <span data-ttu-id="383ec-115">En concreto, el método <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> en el objeto de propietario no desasocia normalmente sus extensiones.</span><span class="sxs-lookup"><span data-stu-id="383ec-115">Specifically, the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method on the owner object does not normally detach its extensions.</span></span>  
  
 <span data-ttu-id="383ec-116">Cuando se agrega una extensión a la colección, se llama a <xref:System.ServiceModel.IExtension%601.Attach%2A> antes de que entre en la colección.</span><span class="sxs-lookup"><span data-stu-id="383ec-116">When an extension is added to the collection, <xref:System.ServiceModel.IExtension%601.Attach%2A> is called before it goes into the collection.</span></span> <span data-ttu-id="383ec-117">Cuando se quita una extensión de la colección, se llama <xref:System.ServiceModel.IExtension%601.Detach%2A> después de quitarla.</span><span class="sxs-lookup"><span data-stu-id="383ec-117">When an extension is removed from the collection, <xref:System.ServiceModel.IExtension%601.Detach%2A> is called after it is removed.</span></span> <span data-ttu-id="383ec-118">Esto significa (suponiendo que la sincronización sea correcta) que una excepción solo se puede encontrar en la colección mientras está entre <xref:System.ServiceModel.IExtension%601.Attach%2A> y <xref:System.ServiceModel.IExtension%601.Detach%2A>.</span><span class="sxs-lookup"><span data-stu-id="383ec-118">This means (assuming appropriate synchronization) an extension can count on only being found in the collection while it is between <xref:System.ServiceModel.IExtension%601.Attach%2A> and <xref:System.ServiceModel.IExtension%601.Detach%2A>.</span></span>  
  
 <span data-ttu-id="383ec-119">El objeto pasado a <xref:System.ServiceModel.IExtensionCollection%601.FindAll%60%601%2A> o <xref:System.ServiceModel.IExtensionCollection%601.Find%60%601%2A> no necesita ser <xref:System.ServiceModel.IExtension%601> (por ejemplo, puede pasar cualquier objeto), pero la extensión que se devuelve es <xref:System.ServiceModel.IExtension%601>.</span><span class="sxs-lookup"><span data-stu-id="383ec-119">The object passed to <xref:System.ServiceModel.IExtensionCollection%601.FindAll%60%601%2A> or <xref:System.ServiceModel.IExtensionCollection%601.Find%60%601%2A> need not be <xref:System.ServiceModel.IExtension%601> (for example, you can pass any object), but the returned extension is an <xref:System.ServiceModel.IExtension%601>.</span></span>  
  
 <span data-ttu-id="383ec-120">Si ninguna extensión de la colección es un <xref:System.ServiceModel.IExtension%601>, <xref:System.ServiceModel.IExtensionCollection%601.Find%60%601%2A> devuelve null, y <xref:System.ServiceModel.IExtensionCollection%601.FindAll%60%601%2A> devuelve una colección vacía.</span><span class="sxs-lookup"><span data-stu-id="383ec-120">If no extension in the collection is an <xref:System.ServiceModel.IExtension%601>, <xref:System.ServiceModel.IExtensionCollection%601.Find%60%601%2A> returns null, and <xref:System.ServiceModel.IExtensionCollection%601.FindAll%60%601%2A> returns an empty collection.</span></span> <span data-ttu-id="383ec-121">Si varias extensiones implementan <xref:System.ServiceModel.IExtension%601>, <xref:System.ServiceModel.IExtensionCollection%601.Find%60%601%2A> devuelve una de ellas.</span><span class="sxs-lookup"><span data-stu-id="383ec-121">If multiple extensions implement <xref:System.ServiceModel.IExtension%601>, <xref:System.ServiceModel.IExtensionCollection%601.Find%60%601%2A> returns one of them.</span></span> <span data-ttu-id="383ec-122">El valor devuelto de <xref:System.ServiceModel.IExtensionCollection%601.FindAll%60%601%2A> es una captura.</span><span class="sxs-lookup"><span data-stu-id="383ec-122">The value returned from <xref:System.ServiceModel.IExtensionCollection%601.FindAll%60%601%2A> is a snapshot.</span></span>  
  
 <span data-ttu-id="383ec-123">Hay dos escenarios principales.</span><span class="sxs-lookup"><span data-stu-id="383ec-123">There are two main scenarios.</span></span> <span data-ttu-id="383ec-124">El primer escenario utiliza la propiedad <xref:System.ServiceModel.IExtensibleObject%601.Extensions%2A> como un diccionario basado en tipos para insertar el estado en un objeto y permitir, de este modo, que otro componente lo pueda examinar utilizando el tipo.</span><span class="sxs-lookup"><span data-stu-id="383ec-124">The first scenario uses the <xref:System.ServiceModel.IExtensibleObject%601.Extensions%2A> property as a type-based dictionary to insert state on an object to enable another component to look it up using the type.</span></span>  
  
 <span data-ttu-id="383ec-125">El segundo escenario utiliza <xref:System.ServiceModel.IExtension%601.Attach%2A> y las propiedades <xref:System.ServiceModel.IExtension%601.Detach%2A> para permitir que un objeto participe en el comportamiento personalizado, como registrarse para los eventos, inspeccionar las transiciones de estado, etc.</span><span class="sxs-lookup"><span data-stu-id="383ec-125">The second scenario uses the <xref:System.ServiceModel.IExtension%601.Attach%2A> and <xref:System.ServiceModel.IExtension%601.Detach%2A> properties to enable an object to participate in custom behavior, such as registering for events, watching state transitions, and so on.</span></span>  
  
 <span data-ttu-id="383ec-126">La interfaz <xref:System.ServiceModel.IExtensionCollection%601> es una colección de objetos <xref:System.ServiceModel.IExtension%601> que permiten recuperar <xref:System.ServiceModel.IExtension%601> por su tipo.</span><span class="sxs-lookup"><span data-stu-id="383ec-126">The <xref:System.ServiceModel.IExtensionCollection%601> interface is a collection of the <xref:System.ServiceModel.IExtension%601> objects that allow for retrieving the <xref:System.ServiceModel.IExtension%601> by its type.</span></span> <span data-ttu-id="383ec-127"><xref:System.ServiceModel.IExtensionCollection%601.Find%60%601%2A?displayProperty=nameWithType> devuelve el objeto agregado más recientemente que es una <xref:System.ServiceModel.IExtension%601> de ese tipo.</span><span class="sxs-lookup"><span data-stu-id="383ec-127"><xref:System.ServiceModel.IExtensionCollection%601.Find%60%601%2A?displayProperty=nameWithType> returns the most recently added object that is an <xref:System.ServiceModel.IExtension%601> of that type.</span></span>  
  
### <a name="extensible-objects-in-windows-communication-foundation"></a><span data-ttu-id="383ec-128">Objetos extensibles en Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="383ec-128">Extensible Objects in Windows Communication Foundation</span></span>  
 <span data-ttu-id="383ec-129">Hay cuatro objetos extensibles en [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="383ec-129">There are four extensible objects in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]:</span></span>  
  
-   <span data-ttu-id="383ec-130"><xref:System.ServiceModel.ServiceHostBase>. Ésta es la clase base para el host del servicio.</span><span class="sxs-lookup"><span data-stu-id="383ec-130"><xref:System.ServiceModel.ServiceHostBase> – This is the base class for the service’s host.</span></span>  <span data-ttu-id="383ec-131">Las extensiones de esta clase se pueden utilizar para extender el comportamiento del <xref:System.ServiceModel.ServiceHostBase> o almacenar el estado para cada servicio.</span><span class="sxs-lookup"><span data-stu-id="383ec-131">Extensions of this class can be used to extend the behavior of the <xref:System.ServiceModel.ServiceHostBase> itself or to store the state for each service.</span></span>  
  
-   <span data-ttu-id="383ec-132"><xref:System.ServiceModel.InstanceContext>. Esta clase conecta una instancia del tipo de servicio con el servicio en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="383ec-132"><xref:System.ServiceModel.InstanceContext> – This class connects an instance of the service’s type with the service runtime.</span></span>  <span data-ttu-id="383ec-133">Contiene información sobre la instancia así como una referencia al <xref:System.ServiceModel.InstanceContext> que contiene <xref:System.ServiceModel.ServiceHostBase>.</span><span class="sxs-lookup"><span data-stu-id="383ec-133">It contains information about the instance as well as a reference to the <xref:System.ServiceModel.InstanceContext>'s containing <xref:System.ServiceModel.ServiceHostBase>.</span></span> <span data-ttu-id="383ec-134">Las extensiones de esta clase se pueden utilizar para extender el comportamiento del <xref:System.ServiceModel.InstanceContext> o almacenar el estado para cada servicio.</span><span class="sxs-lookup"><span data-stu-id="383ec-134">Extensions of this class can be used to extend the behavior of the <xref:System.ServiceModel.InstanceContext> or to store the state for each service.</span></span>  
  
-   <span data-ttu-id="383ec-135"><xref:System.ServiceModel.OperationContext>. Esta clase representa la información de la operación que el tiempo de ejecución reúne para cada operación.</span><span class="sxs-lookup"><span data-stu-id="383ec-135"><xref:System.ServiceModel.OperationContext> – This class represents the operation information that the runtime gathers for each operation.</span></span>  <span data-ttu-id="383ec-136">Esto incluye información como los encabezados de los mensajes entrantes, las propiedades de los mensajes entrantes, la identidad de seguridad de entrada y otra información.</span><span class="sxs-lookup"><span data-stu-id="383ec-136">This includes information such as the incoming message headers, the incoming message properties, the incoming security identity, and other information.</span></span>  <span data-ttu-id="383ec-137">Las extensiones de esta clase pueden extender el comportamiento de <xref:System.ServiceModel.OperationContext> o almacenar el estado para cada operación.</span><span class="sxs-lookup"><span data-stu-id="383ec-137">Extensions of this class can either extend the behavior of <xref:System.ServiceModel.OperationContext> or store the state for each operation.</span></span>  
  
-   <span data-ttu-id="383ec-138"><xref:System.ServiceModel.IContextChannel>. Esta interfaz permite la inspección de cada estado para los canales y servidores proxy generados por el tiempo de ejecución [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="383ec-138"><xref:System.ServiceModel.IContextChannel> – This interface allows for the inspection of each state for the channels and proxies built by the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] runtime.</span></span>  <span data-ttu-id="383ec-139">Las extensiones de esta clase pueden extender el comportamiento de <xref:System.ServiceModel.IClientChannel> o utilizarlo para almacenar el estado de cada canal.</span><span class="sxs-lookup"><span data-stu-id="383ec-139">Extensions of this class can either extend the behavior of <xref:System.ServiceModel.IClientChannel> or can use it to store the state for each channel.</span></span>  
  
-  
  
 <span data-ttu-id="383ec-140">En el ejemplo de código siguiente se puede ver el uso de una extensión simple para seguir la pista de los objetos <xref:System.ServiceModel.InstanceContext>.</span><span class="sxs-lookup"><span data-stu-id="383ec-140">The following code example shows the use of a simple extension to track <xref:System.ServiceModel.InstanceContext> objects.</span></span>  
  
 [!code-csharp[IInstanceContextInitializer#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/iinstancecontextinitializer/cs/initializer.cs#1)]  
  
## <a name="see-also"></a><span data-ttu-id="383ec-141">Vea también</span><span class="sxs-lookup"><span data-stu-id="383ec-141">See Also</span></span>  
 <xref:System.ServiceModel.IExtensibleObject%601>  
 <xref:System.ServiceModel.IExtension%601>  
 <xref:System.ServiceModel.IExtensionCollection%601>
