---
description: 'Más información acerca de: Introducción al modelo de canal'
title: Información general del modelo de canales
ms.date: 03/30/2017
helpviewer_keywords:
- channel model [WCF]
ms.assetid: 07a81e11-3911-4632-90d2-cca99825b5bd
ms.openlocfilehash: 8b22c2b957eec6e3b52a84c7a30d4a17c41293e6
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/06/2021
ms.locfileid: "99685886"
---
# <a name="channel-model-overview"></a><span data-ttu-id="46ce6-103">Información general del modelo de canales</span><span class="sxs-lookup"><span data-stu-id="46ce6-103">Channel Model Overview</span></span>

<span data-ttu-id="46ce6-104">La pila de canales de Windows Communication Foundation (WCF) es una pila de comunicación por capas con uno o más canales que procesan los mensajes.</span><span class="sxs-lookup"><span data-stu-id="46ce6-104">The Windows Communication Foundation (WCF) channel stack is a layered communication stack with one or more channels that process messages.</span></span> <span data-ttu-id="46ce6-105">En la parte inferior de la pila hay un canal de transporte que es responsable de adaptar la pila del canal al transporte subyacente (por ejemplo, TCP, HTTP, SMTP y otros tipos de transporte).</span><span class="sxs-lookup"><span data-stu-id="46ce6-105">At the bottom of the stack is a transport channel that is responsible for adapting the channel stack to the underlying transport (for example, TCP, HTTP, SMTP and other types of transport.).</span></span> <span data-ttu-id="46ce6-106">Los canales proporcionan un modelo de programación de bajo nivel para enviar y recibir mensajes.</span><span class="sxs-lookup"><span data-stu-id="46ce6-106">Channels provide a low-level programming model for sending and receiving messages.</span></span> <span data-ttu-id="46ce6-107">Este modelo de programación se basa en varias interfaces y otros tipos denominados colectivamente como el modelo de canal de WCF.</span><span class="sxs-lookup"><span data-stu-id="46ce6-107">This programming model relies on several interfaces and other types collectively known as the WCF channel model.</span></span> <span data-ttu-id="46ce6-108">En este tema se tratan diversas formas de canal, la construcción de un agente de escucha básico del canal (en el servicio) y el generador de canales (en el cliente).</span><span class="sxs-lookup"><span data-stu-id="46ce6-108">This topic discusses channel shapes, the construction of a basic channel listener (on the service) and channel factory (on the client).</span></span>  
  
## <a name="channel-stack"></a><span data-ttu-id="46ce6-109">Pila del canal</span><span class="sxs-lookup"><span data-stu-id="46ce6-109">Channel Stack</span></span>  

 <span data-ttu-id="46ce6-110">Los extremos de WCF se comunican con el mundo mediante una pila de comunicación denominada pila de canales.</span><span class="sxs-lookup"><span data-stu-id="46ce6-110">WCF endpoints communicate with the world using a communication stack called the channel stack.</span></span> <span data-ttu-id="46ce6-111">El diagrama siguiente compara la pila de canal con otras pilas de la comunicación, por ejemplo, TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="46ce6-111">The following diagram compares the channel stack with other communication stacks, for example TCP/IP.</span></span>  
  
 <span data-ttu-id="46ce6-112">![Modelo de canales](./media/wcfc-channelstackhighlevelc.gif "wcfc_ChannelStackHighLevelc")</span><span class="sxs-lookup"><span data-stu-id="46ce6-112">![Channel Model](./media/wcfc-channelstackhighlevelc.gif "wcfc_ChannelStackHighLevelc")</span></span>  
  
 <span data-ttu-id="46ce6-113">Primero, las similitudes: en ambos casos, cada nivel de la pila proporciona una abstracción del mundo debajo de ese nivel y expone solo esa abstracción en el nivel directamente situado encima de él.</span><span class="sxs-lookup"><span data-stu-id="46ce6-113">First, the similarities: In both cases, each layer of the stack provides some abstraction of the world below that layer and exposed that abstraction only to the layer directly above it.</span></span> <span data-ttu-id="46ce6-114">Cada nivel utiliza la abstracción de solo el nivel situado directamente debajo de él.</span><span class="sxs-lookup"><span data-stu-id="46ce6-114">Each layer uses the abstraction of only the layer directly below it.</span></span> <span data-ttu-id="46ce6-115">También en ambos casos, cuando dos pilas se comunican, cada nivel se comunica con el nivel correspondiente en la otra pila, por ejemplo, que el nivel IP se comunica con el nivel de IP y el nivel de TCP con el nivel de TCP, etc.</span><span class="sxs-lookup"><span data-stu-id="46ce6-115">Also in both cases, when two stacks communicate, each layer communicates with the corresponding layer in the other stack, for example, the IP layer communicates with the IP layer and the TCP layer with the TCP layer, and so on.</span></span>  
  
 <span data-ttu-id="46ce6-116">Ahora, las diferencias: aunque la pila de TCP se diseñó para proporcionar una abstracción de la red física, la pila del canal está diseñada para proporcionar no solo una abstracción de cómo se entrega el mensaje, es decir, el transporte, sino también otras características como lo que está en el mensaje o qué protocolo se utiliza para la comunicación, incluido el transporte, aunque mucho más que eso.</span><span class="sxs-lookup"><span data-stu-id="46ce6-116">Now, the differences: While the TCP stack was designed to provide an abstraction of the physical network, the channel stack is designed to provide an abstraction of not only how the message is delivered, that is, the transport, but also other features such as what is in the message or what protocol is used for communication, including the transport but much more than that.</span></span> <span data-ttu-id="46ce6-117">Por ejemplo, el elemento de enlace de la sesión confiable es parte de la pila del canal pero no está debajo del transporte o el propio transporte.</span><span class="sxs-lookup"><span data-stu-id="46ce6-117">For example, reliable session binding element is part of the channel stack but is not below the transport or the transport itself.</span></span> <span data-ttu-id="46ce6-118">Esta abstracción se logra obligando al canal inferior en la pila a que se adapte al protocolo de transporte subyacente a la arquitectura de la pila del canal y después confiando en los canales que hay más arriba en la pila para proporcionar características de comunicación como garantías de confiabilidad y seguridad.</span><span class="sxs-lookup"><span data-stu-id="46ce6-118">This abstraction is achieved by requiring the bottom channel in the stack to adapt the underlying transport protocol to the channel stack architecture and then relying on channels further up in the stack to provide communication features such as reliability guarantees and security.</span></span>  
  
 <span data-ttu-id="46ce6-119">Los mensajes fluyen a través de la pila de la comunicación como objetos <xref:System.ServiceModel.Channels.Message>.</span><span class="sxs-lookup"><span data-stu-id="46ce6-119">Messages flow through the communication stack as <xref:System.ServiceModel.Channels.Message> objects.</span></span> <span data-ttu-id="46ce6-120">Tal y como se muestra en la ilustración anterior, al canal inferior se le denomina "canal de transporte".</span><span class="sxs-lookup"><span data-stu-id="46ce6-120">As shown in figure above, the bottom channel is called a transport channel.</span></span> <span data-ttu-id="46ce6-121">Es el canal responsable de enviar y recibir mensajes a otras partes y desde ellas.</span><span class="sxs-lookup"><span data-stu-id="46ce6-121">It is the channel that is responsible for sending and receiving messages to and from other parties.</span></span> <span data-ttu-id="46ce6-122">Esto incluye la responsabilidad de transformar el objeto <xref:System.ServiceModel.Channels.Message> al formato utilizado para comunicar con otras partes y desde él.</span><span class="sxs-lookup"><span data-stu-id="46ce6-122">This includes the responsibility of transforming the <xref:System.ServiceModel.Channels.Message> object to and from the format used to communicate with other parties.</span></span> <span data-ttu-id="46ce6-123">Por encima del canal de transporte puede haber cualquier número de canales de protocolo cado uno de ellos responsable de proporcionar una función de comunicación como garantías de entrega confiables.</span><span class="sxs-lookup"><span data-stu-id="46ce6-123">Above the transport channel there can be any number of protocol channels each responsible for providing a communication function such as reliable delivery guarantees.</span></span> <span data-ttu-id="46ce6-124">Los canales de protocolo funcionan en los mensajes que fluyen a través de ellos en el formulario del objeto <xref:System.ServiceModel.Channels.Message>.</span><span class="sxs-lookup"><span data-stu-id="46ce6-124">Protocol channels operate on messages flowing through them in the form of the <xref:System.ServiceModel.Channels.Message> object.</span></span> <span data-ttu-id="46ce6-125">Normalmente transforman el mensaje (por ejemplo, añadiendo encabezados o cifrando el cuerpo) o bien envían y reciben su propios mensajes de control de protocolo (por ejemplo, confirmaciones de recibo).</span><span class="sxs-lookup"><span data-stu-id="46ce6-125">They typically either transform the message, for example, by adding headers or encrypting the body, or send and receive their own protocol control messages, for example, receipt acknowledgments.</span></span>  
  
## <a name="channel-shapes"></a><span data-ttu-id="46ce6-126">Formas del canal</span><span class="sxs-lookup"><span data-stu-id="46ce6-126">Channel Shapes</span></span>  

 <span data-ttu-id="46ce6-127">Cada canal implementa una o más interfaces conocidas como "interfaces de forma de canal" o "formas de canal".</span><span class="sxs-lookup"><span data-stu-id="46ce6-127">Each channel implements one or more interfaces known as channel shape interfaces or channel shapes.</span></span> <span data-ttu-id="46ce6-128">Esas formas de canal proporcionan los métodos orientados a la comunicación, como enviar y recibir o solicitar y responder, que el canal implementa y el usuario del canal llama.</span><span class="sxs-lookup"><span data-stu-id="46ce6-128">Those channel shapes provide the communication-oriented methods such as send and receive or request and reply that the channel implements and the user of the channel calls.</span></span> <span data-ttu-id="46ce6-129">En la base de las formas de canal se encuentra la <xref:System.ServiceModel.Channels.IChannel> interfaz, que es una interfaz que proporciona un `GetProperty` \<T> método diseñado como mecanismo superpuesto para tener acceso a las características arbitrarias expuestas por los canales de la pila.</span><span class="sxs-lookup"><span data-stu-id="46ce6-129">At the base of the channel shapes is the <xref:System.ServiceModel.Channels.IChannel> interface, which is an interface that provides a `GetProperty`\<T> method intended as a layered mechanism to access arbitrary features exposed by channels in the stack.</span></span> <span data-ttu-id="46ce6-130">Las cinco formas del canal que extienden <xref:System.ServiceModel.Channels.IChannel> son:</span><span class="sxs-lookup"><span data-stu-id="46ce6-130">The five channel shapes that extend <xref:System.ServiceModel.Channels.IChannel> are:</span></span>  
  
- <xref:System.ServiceModel.Channels.IInputChannel>  
  
- <xref:System.ServiceModel.Channels.IOutputChannel>  
  
- <xref:System.ServiceModel.Channels.IRequestChannel>  
  
- <xref:System.ServiceModel.Channels.IReplyChannel>  
  
- <xref:System.ServiceModel.Channels.IDuplexChannel>  
  
 <span data-ttu-id="46ce6-131">Además, cada una de estas formas tiene un equivalente que extiende <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> para admitir las sesiones.</span><span class="sxs-lookup"><span data-stu-id="46ce6-131">Further, each of these shapes has an equivalent that extends <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> to support sessions.</span></span> <span data-ttu-id="46ce6-132">Dichos componentes son:</span><span class="sxs-lookup"><span data-stu-id="46ce6-132">These are:</span></span>  
  
- <xref:System.ServiceModel.Channels.IInputSessionChannel>  
  
- <xref:System.ServiceModel.Channels.IOutputSessionChannel>  
  
- <xref:System.ServiceModel.Channels.IRequestSessionChannel>  
  
- <xref:System.ServiceModel.Channels.IReplySessionChannel>  
  
- <xref:System.ServiceModel.Channels.IDuplexSessionChannel>  
  
 <span data-ttu-id="46ce6-133">Las formas del canal se modelan después de algunos de los modelos de intercambio de mensajes fundamentales admitidos por los protocolos de transporte existentes.</span><span class="sxs-lookup"><span data-stu-id="46ce6-133">The channel shapes are patterned after some of the fundamental message exchange patterns supported by existing transport protocols.</span></span> <span data-ttu-id="46ce6-134">Por ejemplo, la mensajería unidireccional corresponde a un <xref:System.ServiceModel.Channels.IInputChannel> / <xref:System.ServiceModel.Channels.IOutputChannel> par, la solicitud-respuesta corresponde a <xref:System.ServiceModel.Channels.IRequestChannel> / <xref:System.ServiceModel.Channels.IReplyChannel> pares y las comunicaciones dúplex bidireccionales corresponden a <xref:System.ServiceModel.Channels.IDuplexChannel> (que extiende <xref:System.ServiceModel.Channels.IInputChannel> y <xref:System.ServiceModel.Channels.IOutputChannel> ).</span><span class="sxs-lookup"><span data-stu-id="46ce6-134">For example, one-way messaging corresponds to an <xref:System.ServiceModel.Channels.IInputChannel>/<xref:System.ServiceModel.Channels.IOutputChannel> pair, request-reply corresponds to <xref:System.ServiceModel.Channels.IRequestChannel>/<xref:System.ServiceModel.Channels.IReplyChannel> pairs and two-way duplex communications corresponds to <xref:System.ServiceModel.Channels.IDuplexChannel> (which extends both <xref:System.ServiceModel.Channels.IInputChannel> and <xref:System.ServiceModel.Channels.IOutputChannel>).</span></span>  
  
## <a name="programming-with-the-channel-stack"></a><span data-ttu-id="46ce6-135">Programación con la pila del canal</span><span class="sxs-lookup"><span data-stu-id="46ce6-135">Programming with the Channel Stack</span></span>  

 <span data-ttu-id="46ce6-136">Las pilas de canales se suelen crear con un modelo de generador en el que un enlace crea la pila de canales.</span><span class="sxs-lookup"><span data-stu-id="46ce6-136">Channel stacks are typically created using a factory pattern where a binding creates the channel stack.</span></span> <span data-ttu-id="46ce6-137">En el lado de envío, se utiliza un enlace para crear un <xref:System.ServiceModel.ChannelFactory>, que a su vez crea una pila de canal y devuelve una referencia al canal superior en la pila.</span><span class="sxs-lookup"><span data-stu-id="46ce6-137">On the send side, a binding is used to build a <xref:System.ServiceModel.ChannelFactory>, which in turn builds a channel stack and returns a reference to the top channel in the stack.</span></span> <span data-ttu-id="46ce6-138">La aplicación puede utilizar a continuación este canal para enviar los mensajes.</span><span class="sxs-lookup"><span data-stu-id="46ce6-138">The application can then use this channel to send messages.</span></span> <span data-ttu-id="46ce6-139">Para obtener más información, vea [programación de Channel-Level de cliente](client-channel-level-programming.md).</span><span class="sxs-lookup"><span data-stu-id="46ce6-139">For more information, see [Client Channel-Level Programming](client-channel-level-programming.md).</span></span>  
  
 <span data-ttu-id="46ce6-140">En el lado de la recepción, se usa un enlace para crear un <xref:System.ServiceModel.Channels.IChannelListener>, que realiza escuchas para los mensajes entrantes.</span><span class="sxs-lookup"><span data-stu-id="46ce6-140">On the receive side a binding is used to build a <xref:System.ServiceModel.Channels.IChannelListener>, which listens for incoming messages.</span></span> <span data-ttu-id="46ce6-141"><xref:System.ServiceModel.Channels.IChannelListener> proporciona mensajes a la aplicación de escucha creando pilas de canal y llevando la referencia de la aplicación al canal superior.</span><span class="sxs-lookup"><span data-stu-id="46ce6-141">The <xref:System.ServiceModel.Channels.IChannelListener> provides messages to the listening application by creating channel stacks and handing the application reference to the top channel.</span></span> <span data-ttu-id="46ce6-142">La aplicación utiliza a continuación este canal para recibir mensajes entrantes.</span><span class="sxs-lookup"><span data-stu-id="46ce6-142">The application then uses this channel to receive incoming messages.</span></span> <span data-ttu-id="46ce6-143">Para obtener más información, vea [programación de Service Channel-Level](service-channel-level-programming.md).</span><span class="sxs-lookup"><span data-stu-id="46ce6-143">For more information, see [Service Channel-Level Programming](service-channel-level-programming.md).</span></span>  
  
## <a name="the-channel-object-model"></a><span data-ttu-id="46ce6-144">El modelo de objetos del canal</span><span class="sxs-lookup"><span data-stu-id="46ce6-144">The Channel Object Model</span></span>  

 <span data-ttu-id="46ce6-145">El modelo de objetos del canal es el conjunto principal de interfaces necesario para implementar canales, agentes de escucha de canales y generadores de canales.</span><span class="sxs-lookup"><span data-stu-id="46ce6-145">The channel object model is the core set of interfaces required to implement channels, channel listeners and channel factories.</span></span> <span data-ttu-id="46ce6-146">Habrá también algunas clases base proporcionadas para ayudar en las implementaciones personalizadas.</span><span class="sxs-lookup"><span data-stu-id="46ce6-146">There are also some base classes provided to assist in custom implementations.</span></span>  
  
 <span data-ttu-id="46ce6-147">Los agentes de escucha del canal son responsables de realizar escuchas de los mensajes entrantes, entregándolos a continuación en el nivel anterior a través de los canales creados por el agente de escucha del canal.</span><span class="sxs-lookup"><span data-stu-id="46ce6-147">Channel listeners are responsible for listening for incoming messages, then delivering them to the layer above through channels created by the channel listener.</span></span>  
  
 <span data-ttu-id="46ce6-148">Los generadores de canales son responsables de crear canales que se utilizan para enviar los mensajes y cerrar todos los canales que se crearon cuando se cerró el generador de canales.</span><span class="sxs-lookup"><span data-stu-id="46ce6-148">Channel factories are responsible for creating channels that are used for sending messages and for closing all channels they created when the channel factory is closed.</span></span>  
  
 <span data-ttu-id="46ce6-149"><xref:System.ServiceModel.ICommunicationObject> es la interfaz básica que define la máquina de estados básica que todos los objetos de comunicación implementan.</span><span class="sxs-lookup"><span data-stu-id="46ce6-149"><xref:System.ServiceModel.ICommunicationObject> is the core interface that defines the basic state machine that all communication objects implement.</span></span> <span data-ttu-id="46ce6-150"><xref:System.ServiceModel.Channels.CommunicationObject> proporciona una implementación de esta interfaz básica de la que pueden derivar otras clases de canal en lugar de volver a implementar la interfaz.</span><span class="sxs-lookup"><span data-stu-id="46ce6-150"><xref:System.ServiceModel.Channels.CommunicationObject> provides an implementation of this core interface that other channel classes can derive from rather than re-implementing the interface.</span></span> <span data-ttu-id="46ce6-151">Sin embargo, esto no es necesario: un canal personalizado puede implementar directamente <xref:System.ServiceModel.ICommunicationObject> y no heredar desde <xref:System.ServiceModel.Channels.CommunicationObject>.</span><span class="sxs-lookup"><span data-stu-id="46ce6-151">However, this is not required: a custom channel can implement <xref:System.ServiceModel.ICommunicationObject> directly and not inherit from <xref:System.ServiceModel.Channels.CommunicationObject>.</span></span> <span data-ttu-id="46ce6-152">Ninguna de las clases en la ilustración 3 se considera parte del modelo del canal; son los asistentes disponibles para los implementadores de canal personalizados que desean crear los canales.</span><span class="sxs-lookup"><span data-stu-id="46ce6-152">None of the classes in Figure 3 are considered part of the channel model; they are helpers available to custom channel implementers who want to build channels.</span></span>  
  
 <span data-ttu-id="46ce6-153">![Modelo de canales](./media/wcfc-wcfcchannelsigure3omumtreec.gif "wcfc_WCFCChannelsigure3OMUMTreec")</span><span class="sxs-lookup"><span data-stu-id="46ce6-153">![Channel model](./media/wcfc-wcfcchannelsigure3omumtreec.gif "wcfc_WCFCChannelsigure3OMUMTreec")</span></span>  
  
 <span data-ttu-id="46ce6-154">Los temas siguientes describen el modelo de objetos del canal así como varias áreas de desarrollo que ayudan a la creación de canales personalizados.</span><span class="sxs-lookup"><span data-stu-id="46ce6-154">The following topics describe the channel object model as well as various development areas that help build custom channels.</span></span>  
  
|<span data-ttu-id="46ce6-155">Tema</span><span class="sxs-lookup"><span data-stu-id="46ce6-155">Topic</span></span>|<span data-ttu-id="46ce6-156">Descripción</span><span class="sxs-lookup"><span data-stu-id="46ce6-156">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="46ce6-157">Servicio: escuchas de canales y canales</span><span class="sxs-lookup"><span data-stu-id="46ce6-157">Service: Channel Listeners and Channels</span></span>](service-channel-listeners-and-channels.md)|<span data-ttu-id="46ce6-158">Describe los agentes de escucha del canal, que realizan escuchas de los canales entrantes en una aplicación de servicio.</span><span class="sxs-lookup"><span data-stu-id="46ce6-158">Describes channel listeners, which listen for incoming channels in a service application.</span></span>|  
|[<span data-ttu-id="46ce6-159">Cliente: Generadores de canales y canales</span><span class="sxs-lookup"><span data-stu-id="46ce6-159">Client: Channel Factories and Channels</span></span>](client-channel-factories-and-channels.md)|<span data-ttu-id="46ce6-160">Describe generadores de canales, que crean canales para conectar a una aplicación de servicio.</span><span class="sxs-lookup"><span data-stu-id="46ce6-160">Describes channel factories, which create channels to connect to a service application.</span></span>|  
|[<span data-ttu-id="46ce6-161">Introducción a los cambios de estado</span><span class="sxs-lookup"><span data-stu-id="46ce6-161">Understanding State Changes</span></span>](understanding-state-changes.md)|<span data-ttu-id="46ce6-162">Describe cómo cambia el estado de los modelos de interfaz <xref:System.ServiceModel.ICommunicationObject?displayProperty=nameWithType> en los canales.</span><span class="sxs-lookup"><span data-stu-id="46ce6-162">Describes how the <xref:System.ServiceModel.ICommunicationObject?displayProperty=nameWithType> interface models state changes in channels.</span></span>|  
|[<span data-ttu-id="46ce6-163">Elección de un patrón de intercambio de mensajes</span><span class="sxs-lookup"><span data-stu-id="46ce6-163">Choosing a Message Exchange Pattern</span></span>](choosing-a-message-exchange-pattern.md)|<span data-ttu-id="46ce6-164">Describe los seis patrones de intercambio de mensajes básicos que los canales pueden admitir.</span><span class="sxs-lookup"><span data-stu-id="46ce6-164">Describes the six basic message exchange patterns that channels can support.</span></span>|  
|[<span data-ttu-id="46ce6-165">Administración de excepciones y errores</span><span class="sxs-lookup"><span data-stu-id="46ce6-165">Handling Exceptions and Faults</span></span>](handling-exceptions-and-faults.md)|<span data-ttu-id="46ce6-166">Describe cómo administrar errores y excepciones en canales personalizados.</span><span class="sxs-lookup"><span data-stu-id="46ce6-166">Describes how to handle faults and exceptions in custom channels.</span></span>|  
|[<span data-ttu-id="46ce6-167">Compatibilidad con metadatos y configuración</span><span class="sxs-lookup"><span data-stu-id="46ce6-167">Configuration and Metadata Support</span></span>](configuration-and-metadata-support.md)|<span data-ttu-id="46ce6-168">Describe cómo admitir el uso de canales personalizados desde el modelo de la aplicación y cómo exportar e importar metadatos mediante enlaces y elementos de enlace.</span><span class="sxs-lookup"><span data-stu-id="46ce6-168">Describes how to support the use of custom channels from the application model and how to export and import metadata using bindings and binding elements.</span></span>|
