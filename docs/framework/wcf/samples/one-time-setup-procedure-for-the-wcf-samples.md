---
title: Procedimiento de instalación única para los ejemplos de Windows Communication Foundation
ms.date: 03/30/2017
ms.assetid: a5848ffd-3eb5-432d-812e-bd948ccb6bca
ms.openlocfilehash: 5db72a6e5970a2c10e0dd1fb62339efd9b69138c
ms.sourcegitcommit: 700b9003ea6bdd83a53458bbc436c9b5778344f1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/03/2018
ms.locfileid: "48263445"
---
# <a name="one-time-setup-procedure-for-the-windows-communication-foundation-samples"></a><span data-ttu-id="43820-102">Procedimiento de instalación única para los ejemplos de Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="43820-102">One-Time Setup Procedure for the Windows Communication Foundation Samples</span></span>
<span data-ttu-id="43820-103">La mayoría de los ejemplos de Windows Communication Foundation (WCF) se hospedan en Internet Information Services (IIS) y ejecutar desde un directorio virtual común.</span><span class="sxs-lookup"><span data-stu-id="43820-103">Most of the Windows Communication Foundation (WCF) samples are hosted in Internet Information Services (IIS) and run from a common virtual directory.</span></span> <span data-ttu-id="43820-104">Este procedimiento de instalación única crea una carpeta en el disco; También agrega un directorio virtual en IIS denominado **ServiceModelSamples**.</span><span class="sxs-lookup"><span data-stu-id="43820-104">This one-time setup procedure creates a folder on the disk; it also adds a virtual directory to IIS named **ServiceModelSamples**.</span></span>

 <span data-ttu-id="43820-105">El **ServiceModelSamples** directorio virtual se utiliza para compilar y ejecutar todos los ejemplos que utilizan un servicio hospedado en IIS.</span><span class="sxs-lookup"><span data-stu-id="43820-105">The **ServiceModelSamples** virtual directory is used for building and running all samples that use an IIS-hosted service.</span></span> <span data-ttu-id="43820-106">Éste es el único directorio virtual que se exige para ejecutar los ejemplos.</span><span class="sxs-lookup"><span data-stu-id="43820-106">This is the only virtual directory that is required to run the samples.</span></span> <span data-ttu-id="43820-107">Al compilar un ejemplo, se reemplazará cualquier servicio implementado anteriormente en este directorio virtual; solo se implementará y estará disponible en este directorio virtual el ejemplo creado más recientemente.</span><span class="sxs-lookup"><span data-stu-id="43820-107">Building a sample will replace any previously deployed service at this virtual directory; only the most recently built sample will be deployed and available in this virtual directory.</span></span>

> [!NOTE]
>  <span data-ttu-id="43820-108">Debe ejecutar todos los comandos con una cuenta de administrador local.</span><span class="sxs-lookup"><span data-stu-id="43820-108">You must run all commands under a local administrator account.</span></span> <span data-ttu-id="43820-109">Si está utilizando Windows 7, [!INCLUDE[windowsver](../../../../includes/windowsver-md.md)] o Windows Server 2008 R2, también debe ejecutar el símbolo del sistema con privilegios elevados.</span><span class="sxs-lookup"><span data-stu-id="43820-109">If you are using Windows 7, [!INCLUDE[windowsver](../../../../includes/windowsver-md.md)], or Windows Server 2008 R2, you must also run the command prompt with elevated privileges.</span></span> <span data-ttu-id="43820-110">Para ello, haga clic en el icono de símbolo del sistema y, a continuación, haga clic en **ejecutar como administrador**.</span><span class="sxs-lookup"><span data-stu-id="43820-110">To do so, right-click the command prompt icon, and then click **Run as administrator**.</span></span> <span data-ttu-id="43820-111">Todos los comandos de este tema se deben ejecutar en un símbolo del sistema que tenga la configuración de ruta de acceso adecuada.</span><span class="sxs-lookup"><span data-stu-id="43820-111">All commands in this topic must be run in a command prompt that has the appropriate path settings.</span></span>  <span data-ttu-id="43820-112">La manera más fácil de asegurarse de esto es usar el símbolo del sistema de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="43820-112">The easiest way to ensure this is by using the Visual Studio Command Prompt.</span></span> <span data-ttu-id="43820-113">Para abrir este símbolo del sistema, haga clic en **iniciar**, seleccione **todos los programas**, desplácese hacia abajo hasta **Visual Studio 2010**, seleccione **Visual Studio Tools**, Haga clic en **Visual Studio Command Prompt (2010)** y, a continuación, haga clic en **ejecutar como administrador**.</span><span class="sxs-lookup"><span data-stu-id="43820-113">To open this prompt, click **Start**, select **All Programs**, scroll down to **Visual Studio 2010**, select **Visual Studio Tools**, right-click **Visual Studio Command Prompt (2010)**, and then click **Run as administrator**.</span></span> <span data-ttu-id="43820-114">Si tiene una de las ediciones de Visual Studio Express instalada, este símbolo del sistema no está disponible, y tendrá que agregar "C:\Windows\Microsoft.Net\Framework\v4.0" a la ruta de acceso del sistema.</span><span class="sxs-lookup"><span data-stu-id="43820-114">If you have one of the Visual Studio Express editions installed, this command prompt is not available, and you will have to add "C:\Windows\Microsoft.Net\Framework\v4.0" to the system path.</span></span>  
  
### <a name="one-time-setup-procedure-for-wcf-samples"></a><span data-ttu-id="43820-115">Procedimiento de instalación única para los ejemplos de WCF</span><span class="sxs-lookup"><span data-stu-id="43820-115">One-time setup procedure for WCF samples</span></span>  
  
1.  <span data-ttu-id="43820-116">Asegúrese de que [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] está instalado.</span><span class="sxs-lookup"><span data-stu-id="43820-116">Ensure that [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] is set up.</span></span> <span data-ttu-id="43820-117">Para obtener más información acerca de cómo configurar [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)], consulte [instrucciones de hospedaje de Internet Information Services](../../../../docs/framework/wcf/samples/internet-information-service-hosting-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="43820-117">For more information about how to set up [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)], see [Internet Information Service Hosting Instructions](../../../../docs/framework/wcf/samples/internet-information-service-hosting-instructions.md).</span></span>  
  
2.  <span data-ttu-id="43820-118">Asegúrese de que [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)] está instalado.</span><span class="sxs-lookup"><span data-stu-id="43820-118">Ensure that [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)] is installed.</span></span> <span data-ttu-id="43820-119">Buscar el siguiente directorio v4.0 (o posterior): **\Windows\Microsoft.NET\Framework**</span><span class="sxs-lookup"><span data-stu-id="43820-119">Search the following directory for v4.0 (or later): **\Windows\Microsoft.NET\Framework**</span></span>  
  
3.  <span data-ttu-id="43820-120">Si no está instalado Visual Studio 2012 y el sistema operativo no es Windows Server 2008 SP2 o posterior, instale [Hotfix 251798](https://go.microsoft.com/fwlink/?LinkId=184693).</span><span class="sxs-lookup"><span data-stu-id="43820-120">If Visual Studio 2012 is not installed, and your operating system is not Windows Server 2008 SP2 or later, install [Hotfix 251798](https://go.microsoft.com/fwlink/?LinkId=184693).</span></span>  
  
4.  <span data-ttu-id="43820-121">Ejecute los siguientes comandos.</span><span class="sxs-lookup"><span data-stu-id="43820-121">Run the following commands.</span></span> <span data-ttu-id="43820-122">Para obtener más información acerca de por qué se deben ejecutar estos comandos, consulte [error del servicio hospedado IIS](https://msdn.microsoft.com/library/ee5499fc-1b10-4cda-a9b1-13dba70f05f8).</span><span class="sxs-lookup"><span data-stu-id="43820-122">For more information about why these commands must be run, see [IIS Hosted Service Fails](https://msdn.microsoft.com/library/ee5499fc-1b10-4cda-a9b1-13dba70f05f8).</span></span>  
  
    > [!WARNING]
    >  <span data-ttu-id="43820-123">Si se reinstala IIS, los siguientes comandos deberán ejecutarse de nuevo.</span><span class="sxs-lookup"><span data-stu-id="43820-123">If IIS is reinstalled, the following commands will need to be run again.</span></span>

    ```
    "%WINDIR%\Microsoft.Net\Framework\v4.0.30319\aspnet_regiis" –i –enable
    "%WINDIR%\Microsoft.Net\Framework\v4.0.30319\ServiceModelReg.exe" -r
    ```

    > [!WARNING]
    >  <span data-ttu-id="43820-124">Ejecute el comando `aspnet_regiis –i –enable` hará que el grupo de aplicaciones predeterminadas se ejecute con [!INCLUDE[netfx40_short](../../../../includes/netfx40-short-md.md)], lo que puede generar problemas de incompatibilidad para otras aplicaciones en el mismo equipo.</span><span class="sxs-lookup"><span data-stu-id="43820-124">Running the command `aspnet_regiis –i –enable` will make the Default App Pool run using [!INCLUDE[netfx40_short](../../../../includes/netfx40-short-md.md)], which may produce incompatibility issues for other applications on the same computer.</span></span>  
  
5.  <span data-ttu-id="43820-125">Siga el [instrucciones de Firewall](../../../../docs/framework/wcf/samples/firewall-instructions.md) para habilitar los puertos usados por los ejemplos.</span><span class="sxs-lookup"><span data-stu-id="43820-125">Follow the [Firewall Instructions](../../../../docs/framework/wcf/samples/firewall-instructions.md) for enabling the ports used by the samples.</span></span>  
  
6.  <span data-ttu-id="43820-126">Busque el siguiente directorio predeterminado: \<InstallDrive >:**\WF_WCF_Samples**.</span><span class="sxs-lookup"><span data-stu-id="43820-126">Check for the following default directory: \<InstallDrive>:**\WF_WCF_Samples**.</span></span> <span data-ttu-id="43820-127">Si se instalaron los ejemplos con anterioridad, este es el directorio predeterminado.</span><span class="sxs-lookup"><span data-stu-id="43820-127">If the samples were previously installed, this is the default directory.</span></span>  
  
7.  <span data-ttu-id="43820-128">Si los ejemplos no están instalados, instálelos desde la ubicación de descarga de ejemplos de [Visual C#](https://go.microsoft.com/fwlink/?LinkId=190939) o [Visual Basic](https://go.microsoft.com/fwlink/?LinkID=193373).</span><span class="sxs-lookup"><span data-stu-id="43820-128">If the samples are not installed, install them from the samples download location for [Visual C#](https://go.microsoft.com/fwlink/?LinkId=190939) or [Visual Basic](https://go.microsoft.com/fwlink/?LinkID=193373).</span></span>  
  
8.  <span data-ttu-id="43820-129">Después de instalar los ejemplos, vaya a: \<InstallDrive >:**\WF_WCF_Samples\WCF\Setup\\**</span><span class="sxs-lookup"><span data-stu-id="43820-129">After installing the samples, go to : \<InstallDrive>:**\WF_WCF_Samples\WCF\Setup\\**</span></span>  
  
9. <span data-ttu-id="43820-130">Ejecute el **Setupvroot.bat** archivo por lotes.</span><span class="sxs-lookup"><span data-stu-id="43820-130">Run the **Setupvroot.bat** batch file.</span></span> <span data-ttu-id="43820-131">Se realizan estos pasos:</span><span class="sxs-lookup"><span data-stu-id="43820-131">The following steps are performed:</span></span>  
  
    -   <span data-ttu-id="43820-132">Se crea un directorio virtual en IIS denominado ServiceModelSamples.</span><span class="sxs-lookup"><span data-stu-id="43820-132">A virtual directory is created in IIS named ServiceModelSamples.</span></span>  
  
    -   <span data-ttu-id="43820-133">Los nuevos directorios del disco se crean con los nombres %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples y %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples\bin.</span><span class="sxs-lookup"><span data-stu-id="43820-133">New disk directories are created named %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples and %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples\bin.</span></span>  
  
     <span data-ttu-id="43820-134">Si prefiere configurar estos directorios manualmente, consulte el [instrucciones de configuración del directorio Virtual](../../../../docs/framework/wcf/samples/virtual-directory-setup-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="43820-134">If you prefer to set up these directories manually, see the [Virtual Directory Setup Instructions](../../../../docs/framework/wcf/samples/virtual-directory-setup-instructions.md).</span></span> <span data-ttu-id="43820-135">Para revertir todos los cambios efectuados en este paso, ejecute cleanupvroot.bat después de que termine de utilizar los ejemplos.</span><span class="sxs-lookup"><span data-stu-id="43820-135">To revert all changes done in this step, run cleanupvroot.bat after you finish using the samples.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="43820-136">Este procedimiento solo se debe realizar una vez en un equipo, a menos que se ejecute cleanupvroot.bat.</span><span class="sxs-lookup"><span data-stu-id="43820-136">This procedure must be performed only once on a computer, unless cleanupvroot.bat is run.</span></span>

10. <span data-ttu-id="43820-137">Debe conceder permiso para modificar %SystemDrive%\inetpub\wwwroot a la cuenta con la que se van a compilar los ejemplos y al usuario del Servicio de red.</span><span class="sxs-lookup"><span data-stu-id="43820-137">You must grant permission to modify for %SystemDrive%\inetpub\wwwroot to the account under which you are building the samples and the Network Service user.</span></span> <span data-ttu-id="43820-138">Mientras se compilan, algunos ejemplos hospedados en Web podrían intentar copiar los archivos binarios compilados en la ubicación mencionada previamente y, si no se han establecido los permisos adecuados, la compilación se interrumpirá.</span><span class="sxs-lookup"><span data-stu-id="43820-138">While building, some Web-hosted samples might attempt to copy the compiled binaries to the previously mentioned location, and if you have not set the appropriate permissions, the build will break.</span></span> <span data-ttu-id="43820-139">Como alternativa, puede dejar los permisos tal y como están y ejecutar el símbolo del sistema de SDK o el símbolo del sistema de Visual Studio (2012) como administrador o compilar los ejemplos de Visual Studio 2012, también se ejecutan como administrador.</span><span class="sxs-lookup"><span data-stu-id="43820-139">Alternatively, you can leave the permissions as they are and run the SDK command prompt or Visual Studio Command Prompt (2012) as Administrator, or build the samples in Visual Studio 2012, also run as Administrator.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="43820-140">Si no se completa este paso, todos los ejemplos hospedados en IIS generarán errores al compilarse.</span><span class="sxs-lookup"><span data-stu-id="43820-140">If this step is not completed, all IIS-hosted samples will fail while building.</span></span> <span data-ttu-id="43820-141">Asegúrese de que ha establecido los permisos correctamente o ejecute el símbolo del sistema de SDK y Visual Studio (2012) como administrador.</span><span class="sxs-lookup"><span data-stu-id="43820-141">Ensure that you set the permissions correctly, or run both the SDK command prompt and Visual Studio Command Prompt (2012) as Administrator.</span></span>

11. <span data-ttu-id="43820-142">Cree un directorio C:\logs en el equipo; en algunos ejemplos podría esperarse que exista.</span><span class="sxs-lookup"><span data-stu-id="43820-142">Create a C:\logs directory on the computer; some samples might be expecting it.</span></span> <span data-ttu-id="43820-143">Asegúrese de que la cuenta adecuada tiene concedido acceso de escritura en esta carpeta.</span><span class="sxs-lookup"><span data-stu-id="43820-143">Make sure that the appropriate account has write access granted to this folder.</span></span> <span data-ttu-id="43820-144">Para Windows 7, [!INCLUDE[wv](../../../../includes/wv-md.md)], y Windows Server 2008 R2, esta cuenta es **Network Service**.</span><span class="sxs-lookup"><span data-stu-id="43820-144">For Windows 7, [!INCLUDE[wv](../../../../includes/wv-md.md)], and Windows Server 2008 R2, this account is **Network Service**.</span></span> <span data-ttu-id="43820-145">En [!INCLUDE[lserver](../../../../includes/lserver-md.md)], la cuenta es NT Authority\Network Service.</span><span class="sxs-lookup"><span data-stu-id="43820-145">For  [!INCLUDE[lserver](../../../../includes/lserver-md.md)], the account is NT Authority\Network Service.</span></span> <span data-ttu-id="43820-146">En [!INCLUDE[wxp](../../../../includes/wxp-md.md)] y [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], la cuenta es ASPNET.</span><span class="sxs-lookup"><span data-stu-id="43820-146">For [!INCLUDE[wxp](../../../../includes/wxp-md.md)] and [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], the account is ASPNET.</span></span>

12. <span data-ttu-id="43820-147">Ejecute el archivo Setupcerttool.bat.</span><span class="sxs-lookup"><span data-stu-id="43820-147">Run the Setupcerttool.bat file.</span></span> <span data-ttu-id="43820-148">Este archivo se encuentra en la \<Rutadeinstalación > \WF_WCF_Samples\WCF\Setup\ carpeta.</span><span class="sxs-lookup"><span data-stu-id="43820-148">This file is located in the  \<InstallPath>\WF_WCF_Samples\WCF\Setup\  folder.</span></span>  <span data-ttu-id="43820-149">Este script realizará las siguientes tareas:</span><span class="sxs-lookup"><span data-stu-id="43820-149">This script will perform the following tasks:</span></span>

    -   <span data-ttu-id="43820-150">Compile La herramienta FindPrivateKey.</span><span class="sxs-lookup"><span data-stu-id="43820-150">Build the FindPrivateKey tool.</span></span>

    -   <span data-ttu-id="43820-151">Cree un directorio denominado %ProgramFiles%\ServiceModelSampleTools.</span><span class="sxs-lookup"><span data-stu-id="43820-151">Create a directory called %ProgramFiles%\ServiceModelSampleTools.</span></span>

    -   <span data-ttu-id="43820-152">Copie la nueva herramienta FindPrivateKey en este directorio.</span><span class="sxs-lookup"><span data-stu-id="43820-152">Copy the new FindPrivateKey tool to this directory.</span></span>

     <span data-ttu-id="43820-153">Esta herramienta se requiere en los ejemplos que utilizan certificados y se hospedan en IIS.</span><span class="sxs-lookup"><span data-stu-id="43820-153">This tool is required by samples that use certificates and are hosted in IIS.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="43820-154">Por motivos de seguridad, no olvide quitar la definición del directorio virtual y los permisos concedidos en los pasos de instalación anteriores cuando termine con los ejemplos; para ello ejecute el archivo por lotes denominado Cleanupvroot.bat.</span><span class="sxs-lookup"><span data-stu-id="43820-154">For security purposes, remember to remove the virtual directory definition and permissions granted in the setup steps above by running the batch file named Cleanupvroot.bat after you are finished with the samples.</span></span>

13. <span data-ttu-id="43820-155">Los ejemplos autohospedados (no se hospedan en IIS) requieren permiso para registrar las direcciones HTTP en el equipo a fin de realizar escuchas.</span><span class="sxs-lookup"><span data-stu-id="43820-155">Samples that are self-hosted (not hosted in IIS) require permission to register HTTP addresses on the computer for listening.</span></span> <span data-ttu-id="43820-156">El permiso para una reserva de espacio de nombres HTTP procede de la cuenta de usuario utilizada para ejecutar el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="43820-156">The permission for an HTTP namespace reservation comes from the user account used to run the sample.</span></span> <span data-ttu-id="43820-157">De forma predeterminada, las cuentas de administrador tienen el permiso para registrar cualquier dirección HTTP.</span><span class="sxs-lookup"><span data-stu-id="43820-157">By default, administrator accounts have the permission to register any HTTP address.</span></span> <span data-ttu-id="43820-158">Las cuentas de usuario no administrador deben tener concedido permiso para los espacios de nombres HTTP usados por los ejemplos.</span><span class="sxs-lookup"><span data-stu-id="43820-158">Non-administrator accounts must be granted permission for the HTTP namespaces used by the samples.</span></span> <span data-ttu-id="43820-159">Para obtener más información sobre cómo configurar las reservas de espacio de nombres, vea [Configuración de HTTP y HTTPS](../../../../docs/framework/wcf/feature-details/configuring-http-and-https.md).</span><span class="sxs-lookup"><span data-stu-id="43820-159">For more information about how to configure namespace reservations, see [Configuring HTTP and HTTPS](../../../../docs/framework/wcf/feature-details/configuring-http-and-https.md).</span></span>

14. <span data-ttu-id="43820-160">Algunos ejemplos requieren Message Queuing.</span><span class="sxs-lookup"><span data-stu-id="43820-160">Some samples require Message Queuing.</span></span> <span data-ttu-id="43820-161">Consulte [instalar Message Queuing (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md) para obtener instrucciones de instalación.</span><span class="sxs-lookup"><span data-stu-id="43820-161">See [Installing Message Queuing (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md) for installation instructions.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="43820-162">Asegúrese de iniciar el servicio de MSMQ antes de ejecutar cualquier ejemplo que requiera Message Queuing.</span><span class="sxs-lookup"><span data-stu-id="43820-162">Ensure that you start the MSMQ service before you run any samples that require Message Queuing.</span></span>

15. <span data-ttu-id="43820-163">En algunos ejemplos se requieren los certificados.</span><span class="sxs-lookup"><span data-stu-id="43820-163">Some samples require certificates.</span></span> <span data-ttu-id="43820-164">Consulte [de Internet Information Services (IIS) instrucciones de instalación de certificado de servidor](../../../../docs/framework/wcf/samples/iis-server-certificate-installation-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="43820-164">See [Internet Information Services (IIS) Server Certificate Installation Instructions](../../../../docs/framework/wcf/samples/iis-server-certificate-installation-instructions.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="43820-165">Vea también</span><span class="sxs-lookup"><span data-stu-id="43820-165">See Also</span></span>
