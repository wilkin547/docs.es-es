---
description: Más información acerca de cómo proteger mensajes mediante la seguridad de transporte
title: Protección de mensajes utilizando la seguridad de transporte
ms.date: 03/30/2017
ms.assetid: 9029771a-097e-448a-a13a-55d2878330b8
ms.openlocfilehash: 0d8e84982f68eb8c067d54ac1b0451b17fd03a84
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/06/2021
ms.locfileid: "99632768"
---
# <a name="securing-messages-using-transport-security"></a><span data-ttu-id="42d4f-103">Protección de mensajes utilizando la seguridad de transporte</span><span class="sxs-lookup"><span data-stu-id="42d4f-103">Securing Messages Using Transport Security</span></span>

<span data-ttu-id="42d4f-104">En esta sección se discute la seguridad de transporte de Message Queuing (MSMQ) que puede utilizar para proteger los mensajes enviados a una cola.</span><span class="sxs-lookup"><span data-stu-id="42d4f-104">This section discusses Message Queuing (MSMQ) transport security that you can use to secure messages sent to a queue.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="42d4f-105">Antes de leer este tema, se recomienda leer los conceptos de [seguridad](security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="42d4f-105">Before reading through this topic, it is recommended that you read [Security Concepts](security-concepts.md).</span></span>  
  
 <span data-ttu-id="42d4f-106">En la ilustración siguiente se proporciona un modelo conceptual de comunicación en cola mediante Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="42d4f-106">The following illustration provides a conceptual model of queued communication using Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="42d4f-107">La ilustración y la terminología se utilizan para explicar los conceptos de la seguridad de transporte.</span><span class="sxs-lookup"><span data-stu-id="42d4f-107">This illustration and terminology is used to explain transport security concepts.</span></span>  
  
 <span data-ttu-id="42d4f-108">![Diagrama de aplicaciones puestas en cola](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span><span class="sxs-lookup"><span data-stu-id="42d4f-108">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="42d4f-109">Al enviar mensajes en cola mediante WCF con <xref:System.ServiceModel.NetMsmqBinding> , el mensaje de WCF se adjunta como cuerpo del mensaje de MSMQ.</span><span class="sxs-lookup"><span data-stu-id="42d4f-109">When sending queued messages using WCF with <xref:System.ServiceModel.NetMsmqBinding>, the WCF message is attached as a body of the MSMQ message.</span></span> <span data-ttu-id="42d4f-110">La seguridad de transporte protege el mensaje de MSMQ completo (encabezados del mensaje de MSMQ o propiedades y el cuerpo del mensaje).</span><span class="sxs-lookup"><span data-stu-id="42d4f-110">Transport security secures the entire MSMQ message (MSMQ message headers or properties and the message body).</span></span> <span data-ttu-id="42d4f-111">Dado que es el cuerpo del mensaje de MSMQ, el uso de la seguridad de transporte también protege el mensaje de WCF.</span><span class="sxs-lookup"><span data-stu-id="42d4f-111">Because it is the body of the MSMQ message, using transport security also secures the WCF message.</span></span>  
  
 <span data-ttu-id="42d4f-112">El concepto clave detrás de la seguridad de transporte es que el cliente tiene que cumplir los requisitos de seguridad para obtener el mensaje en la cola de destino.</span><span class="sxs-lookup"><span data-stu-id="42d4f-112">The key concept behind transport security is that the client has to meet security requirements to get the message to the target queue.</span></span> <span data-ttu-id="42d4f-113">Esto es diferente de la seguridad del mensaje, donde el mensaje se protege para la aplicación que recibe el mensaje.</span><span class="sxs-lookup"><span data-stu-id="42d4f-113">This is unlike Message security, where the message is secured for the application that receives the message.</span></span>  
  
 <span data-ttu-id="42d4f-114">La seguridad de transporte utilizando <xref:System.ServiceModel.NetMsmqBinding> y <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> impacta en cómo los mensajes de MSMQ se protegen en tránsito entre la cola de transmisión y la cola de destino donde estar protegido implica:</span><span class="sxs-lookup"><span data-stu-id="42d4f-114">Transport security using <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> impacts how MSMQ messages are secured in-transit between the transmission queue and the target queue where secured implies:</span></span>  
  
- <span data-ttu-id="42d4f-115">Firmar el mensaje para asegurarse que no está manipulado.</span><span class="sxs-lookup"><span data-stu-id="42d4f-115">Signing the message to ensure it is not tampered with.</span></span>  
  
- <span data-ttu-id="42d4f-116">Cifrar el mensaje para asegurarse que no se pueda ver o manipular.</span><span class="sxs-lookup"><span data-stu-id="42d4f-116">Encrypting the message to ensure that it cannot be seen or tampered with.</span></span> <span data-ttu-id="42d4f-117">Esto se recomienda pero es opcional.</span><span class="sxs-lookup"><span data-stu-id="42d4f-117">This is recommended but optional.</span></span>  
  
- <span data-ttu-id="42d4f-118">El administrador de la cola de destino que identifica el remitente del mensaje para no rechazarlo.</span><span class="sxs-lookup"><span data-stu-id="42d4f-118">The target queue manager that identifies the sender of the message for non-repudiation.</span></span>  
  
 <span data-ttu-id="42d4f-119">En MSMQ, independiente de la autenticación, la cola de destino tiene una lista de control de acceso (ACL) para comprobar si el cliente tiene el permiso para enviar el mensaje a la cola de destino.</span><span class="sxs-lookup"><span data-stu-id="42d4f-119">In MSMQ, independent of authentication, the target queue has an access control list (ACL) to check whether the client has permission to send the message to the target queue.</span></span> <span data-ttu-id="42d4f-120">También se comprueba que la aplicación receptora tenga permiso para recibir el mensaje de la cola de destino.</span><span class="sxs-lookup"><span data-stu-id="42d4f-120">The receiving application is also checked for permission to receive the message from the target queue.</span></span>  
  
## <a name="wcf-msmq-transport-security-properties"></a><span data-ttu-id="42d4f-121">Propiedades de la seguridad de transporte WCF MSMQ</span><span class="sxs-lookup"><span data-stu-id="42d4f-121">WCF MSMQ Transport Security Properties</span></span>  

 <span data-ttu-id="42d4f-122">MSMQ utiliza la seguridad de Windows para la autenticación.</span><span class="sxs-lookup"><span data-stu-id="42d4f-122">MSMQ uses Windows security for authentication.</span></span> <span data-ttu-id="42d4f-123">Utiliza el identificador de seguridad de Windows (SID) para identificar el cliente y utiliza el servicio de directorio Active Directory como la entidad de certificación al autenticar el cliente.</span><span class="sxs-lookup"><span data-stu-id="42d4f-123">It uses the Windows security identifier (SID) to identify the client and uses Active Directory directory service as the certificate authority when authenticating the client.</span></span> <span data-ttu-id="42d4f-124">Esto exige que MSMQ se instale con integración de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="42d4f-124">This requires MSMQ to be installed with Active Directory integration.</span></span> <span data-ttu-id="42d4f-125">Puesto que el SID del dominio de Windows se utiliza para identificar el cliente, esta opción de seguridad solo es significativa cuando tanto el cliente como el servicio forman parte del mismo dominio de Windows.</span><span class="sxs-lookup"><span data-stu-id="42d4f-125">Because the Windows domain SID is used to identify the client, this security option is only meaningful when both the client and service are part of the same Windows domain.</span></span>  
  
 <span data-ttu-id="42d4f-126">MSMQ también proporciona la capacidad de adjuntar un certificado con el mensaje que no está registrado con Active Directory.</span><span class="sxs-lookup"><span data-stu-id="42d4f-126">MSMQ also provides the ability to attach a certificate with the message that is not registered with Active Directory.</span></span> <span data-ttu-id="42d4f-127">En este caso, garantiza que el mensaje se firmó utilizando el certificado adjunto.</span><span class="sxs-lookup"><span data-stu-id="42d4f-127">In this case, it ensures that the message was signed using the attached certificate.</span></span>  
  
 <span data-ttu-id="42d4f-128">WCF proporciona ambas opciones como parte de la seguridad de transporte de MSMQ y son la clave dinámica para la seguridad de transporte.</span><span class="sxs-lookup"><span data-stu-id="42d4f-128">WCF provides both these options as part of MSMQ transport security and they are the key pivot for transport security.</span></span>  
  
 <span data-ttu-id="42d4f-129">De forma predeterminada, la seguridad de transporte está activada.</span><span class="sxs-lookup"><span data-stu-id="42d4f-129">By default, transport security is turned on.</span></span>  
  
 <span data-ttu-id="42d4f-130">Teniendo en cuenta estas cuestiones básicas, las secciones siguientes detallan propiedades de seguridad de transporte incluidas con <xref:System.ServiceModel.NetMsmqBinding> y <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span><span class="sxs-lookup"><span data-stu-id="42d4f-130">Given these basics, the following sections detail transport security properties bundled with <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span>  
  
#### <a name="msmq-authentication-mode"></a><span data-ttu-id="42d4f-131">Modo de autenticación MSMQ</span><span class="sxs-lookup"><span data-stu-id="42d4f-131">MSMQ Authentication Mode</span></span>  

 <span data-ttu-id="42d4f-132"><xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> dicta si utilizar la seguridad de dominio de Windows o una seguridad externa basada en certificado para proteger el mensaje.</span><span class="sxs-lookup"><span data-stu-id="42d4f-132">The <xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> dictates whether to use the Windows domain security or an external certificate-based security to secure the message.</span></span> <span data-ttu-id="42d4f-133">En ambos modos de autenticación, el canal de transporte en cola de WCF usa el `CertificateValidationMode` especificado en la configuración del servicio.</span><span class="sxs-lookup"><span data-stu-id="42d4f-133">In both authentication modes, the WCF queued transport channel uses the `CertificateValidationMode` specified in the service configuration.</span></span> <span data-ttu-id="42d4f-134">El modo de validación de certificado especifica el mecanismo utilizado para comprobar la validez del certificado.</span><span class="sxs-lookup"><span data-stu-id="42d4f-134">The certificate validation mode specifies the mechanism used to check the validity of the certificate.</span></span>  
  
 <span data-ttu-id="42d4f-135">Cuando la seguridad de transporte está activada, la configuración predeterminada es <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span><span class="sxs-lookup"><span data-stu-id="42d4f-135">When transport security is turned on, the default setting is <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="windows-domain-authentication-mode"></a><span data-ttu-id="42d4f-136">Modo de autenticación del dominio Windows</span><span class="sxs-lookup"><span data-stu-id="42d4f-136">Windows Domain Authentication Mode</span></span>  

 <span data-ttu-id="42d4f-137">La opción de usar la seguridad de Windows necesita la integración de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="42d4f-137">The choice of using Windows security requires Active Directory integration.</span></span> <span data-ttu-id="42d4f-138"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> es el modo de seguridad de transporte predeterminado.</span><span class="sxs-lookup"><span data-stu-id="42d4f-138"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> is the default transport security mode.</span></span> <span data-ttu-id="42d4f-139">Cuando se establece, el canal de WCF adjunta el SID de Windows al mensaje de MSMQ y usa su certificado interno Obtenido de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="42d4f-139">When this is set, the WCF channel attaches the Windows SID to the MSMQ message and uses its internal certificate obtained from Active Directory.</span></span> <span data-ttu-id="42d4f-140">MSMQ utiliza este certificado interno para proteger el mensaje.</span><span class="sxs-lookup"><span data-stu-id="42d4f-140">MSMQ uses this internal certificate to secure the message.</span></span> <span data-ttu-id="42d4f-141">El administrador de la cola receptora utiliza Active Directory para buscar y encontrar un certificado correspondiente para autenticar el cliente y comprueba que el SID también coincida con el del cliente.</span><span class="sxs-lookup"><span data-stu-id="42d4f-141">The receiving queue manager uses Active Directory to search and find a matching certificate to authenticate the client and checks that the SID also matches that of the client.</span></span> <span data-ttu-id="42d4f-142">Este paso de autenticación se ejecuta si un certificado, generado internamente en el caso de modo de autenticación `WindowsDomain` o generado externamente en el caso de modo de autenticación `Certificate`, está adjunto al mensaje aun cuando la cola de destino no esté marcada como autenticación necesaria.</span><span class="sxs-lookup"><span data-stu-id="42d4f-142">This authentication step is executed if a certificate, either internally generated in the case of `WindowsDomain` authentication mode or externally generated in the case of `Certificate` authentication mode, is attached to the message even if the target queue is not marked as requiring authentication.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="42d4f-143">Al crear una cola, puede marcar la cola como una cola autenticada para indicar que la cola requiere autenticación del cliente que envía los mensajes a la cola.</span><span class="sxs-lookup"><span data-stu-id="42d4f-143">When creating a queue, you can mark the queue as an authenticated queue to indicate that the queue requires authentication of the client sending messages to the queue.</span></span> <span data-ttu-id="42d4f-144">Esto garantiza que no se acepte ningún mensaje no autenticado en la cola.</span><span class="sxs-lookup"><span data-stu-id="42d4f-144">This ensures that no unauthenticated messages are accepted in the queue.</span></span>  
  
 <span data-ttu-id="42d4f-145">El SID adjunto con el mensaje también se utiliza para compararlo con el ACL de la cola de destino para asegurarse de que el cliente tenga la autoridad para enviar los mensajes a la cola.</span><span class="sxs-lookup"><span data-stu-id="42d4f-145">The SID attached with the message is also used to check against the target queue's ACL to ensure that the client has the authority to send messages to the queue.</span></span>  
  
#### <a name="certificate-authentication-mode"></a><span data-ttu-id="42d4f-146">Modo de autenticación de certificados</span><span class="sxs-lookup"><span data-stu-id="42d4f-146">Certificate Authentication Mode</span></span>  

 <span data-ttu-id="42d4f-147">La opción de utilizar el modo de autenticación del certificado no requiere la integración de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="42d4f-147">The choice of using certificate authentication mode does not require Active Directory integration.</span></span> <span data-ttu-id="42d4f-148">De hecho, en algunos casos, como cuando MSMQ se instala en modo de grupo de trabajo (sin la integración de Active Directory) o al utilizar el protocolo de transferencia SOAP Reliable Messaging Protocol (SRMP) para enviar los mensajes a la cola, solo <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> funciona.</span><span class="sxs-lookup"><span data-stu-id="42d4f-148">In fact, in some cases, such as when MSMQ is installed in workgroup mode (without Active Directory integration) or when using the SOAP Reliable Messaging Protocol (SRMP) transfer protocol to send messages to the queue, only <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> works.</span></span>  
  
 <span data-ttu-id="42d4f-149">Al enviar un mensaje de WCF con <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> , el canal de WCF no adjunta un SID de Windows al mensaje de MSMQ.</span><span class="sxs-lookup"><span data-stu-id="42d4f-149">When sending a WCF message with <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, the WCF channel does not attach a Windows SID to the MSMQ message.</span></span> <span data-ttu-id="42d4f-150">Como a tal, el ACL de la cola de destino debe a `Anonymous` acceso de usuario para realizar envíos a la cola.</span><span class="sxs-lookup"><span data-stu-id="42d4f-150">As such, the target queue ACL must allow for `Anonymous` user access to send to the queue.</span></span> <span data-ttu-id="42d4f-151">El administrador de la cola receptora comprueba si el mensaje de MSMQ se firmó con el certificado pero no realiza ninguna autenticación.</span><span class="sxs-lookup"><span data-stu-id="42d4f-151">The receiving queue manager checks whether the MSMQ message was signed with the certificate but does not perform any authentication.</span></span>  
  
 <span data-ttu-id="42d4f-152">El certificado con su información de identidad y notificaciones se rellena en el <xref:System.ServiceModel.ServiceSecurityContext> canal de transporte en cola de WCF.</span><span class="sxs-lookup"><span data-stu-id="42d4f-152">The certificate with its claims and identity information is populated in the <xref:System.ServiceModel.ServiceSecurityContext> by the WCF queued transport channel.</span></span> <span data-ttu-id="42d4f-153">El servicio puede utilizar esta información para realizar su propia autenticación del remitente.</span><span class="sxs-lookup"><span data-stu-id="42d4f-153">The service can use this information to perform its own authentication of the sender.</span></span>  
  
### <a name="msmq-protection-level"></a><span data-ttu-id="42d4f-154">Nivel de protección de MSMQ</span><span class="sxs-lookup"><span data-stu-id="42d4f-154">MSMQ Protection Level</span></span>  

 <span data-ttu-id="42d4f-155">El nivel de protección dicta cómo proteger el mensaje de MSMQ para garantizar que no se manipule.</span><span class="sxs-lookup"><span data-stu-id="42d4f-155">The protection level dictates how to protect the MSMQ message to ensure that it is not tampered with.</span></span> <span data-ttu-id="42d4f-156">Se especifica en la propiedad <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A>.</span><span class="sxs-lookup"><span data-stu-id="42d4f-156">It is specified in the <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> property.</span></span> <span data-ttu-id="42d4f-157">El valor predeterminado es <xref:System.Net.Security.ProtectionLevel.Sign>.</span><span class="sxs-lookup"><span data-stu-id="42d4f-157">The default value is <xref:System.Net.Security.ProtectionLevel.Sign>.</span></span>  
  
#### <a name="sign-protection-level"></a><span data-ttu-id="42d4f-158">Nivel de protección de firma</span><span class="sxs-lookup"><span data-stu-id="42d4f-158">Sign Protection Level</span></span>  

 <span data-ttu-id="42d4f-159">El mensaje de MSMQ se firma utilizando el certificado generado internamente al utilizar modo de autenticación `WindowsDomain` o un certificado generado externamente al utilizar el modo de autenticación `Certificate`.</span><span class="sxs-lookup"><span data-stu-id="42d4f-159">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or an externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
#### <a name="sign-and-encrypt-protection-level"></a><span data-ttu-id="42d4f-160">Nivel de protección de firma y cifrado</span><span class="sxs-lookup"><span data-stu-id="42d4f-160">Sign and Encrypt Protection Level</span></span>  

 <span data-ttu-id="42d4f-161">El mensaje de MSMQ se firma utilizando el certificado generado internamente al utilizar el modo de autenticación `WindowsDomain` o el certificado generado externamente al utilizar el modo de autenticación `Certificate`.</span><span class="sxs-lookup"><span data-stu-id="42d4f-161">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
 <span data-ttu-id="42d4f-162">Además de la firma del mensaje, el mensaje de MSMQ se cifra utilizando la clave pública del certificado obtenido de Active Directory que pertenece al administrador de la cola receptora que hospeda la cola de destino.</span><span class="sxs-lookup"><span data-stu-id="42d4f-162">In addition to signing the message, the MSMQ message is encrypted using the public key of the certificate obtained from Active Directory that belongs to the receiving queue manager that hosts the target queue.</span></span> <span data-ttu-id="42d4f-163">El administrador de la cola emisora garantiza que el mensaje de MSMQ esté cifrado en tránsito.</span><span class="sxs-lookup"><span data-stu-id="42d4f-163">The sending queue manager ensures that the MSMQ message is encrypted in transit.</span></span> <span data-ttu-id="42d4f-164">El administrador de la cola receptora descifra el mensaje de MSMQ mediante la clave privada de su certificado interno y almacena el mensaje en la cola (si se autentica y autoriza) en texto no cifrado.</span><span class="sxs-lookup"><span data-stu-id="42d4f-164">The receiving queue manager decrypts the MSMQ message using the private key of its internal certificate and stores the message in the queue (if authenticated and authorized) in clear text.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="42d4f-165">Para cifrar el mensaje, se requiere acceso a Active Directory (la propiedad `UseActiveDirectory` de <xref:System.ServiceModel.NetMsmqBinding> debe estar establecida en `true`) y se puede utilizar tanto con <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> como <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span><span class="sxs-lookup"><span data-stu-id="42d4f-165">To encrypt the message, Active Directory access is required (`UseActiveDirectory` property of <xref:System.ServiceModel.NetMsmqBinding> must be set to `true`) and can be used with both <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="none-protection-level"></a><span data-ttu-id="42d4f-166">Ningún nivel de protección</span><span class="sxs-lookup"><span data-stu-id="42d4f-166">None Protection Level</span></span>  

 <span data-ttu-id="42d4f-167">Esto sucede cuando <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> está establecido en <xref:System.Net.Security.ProtectionLevel.None>.</span><span class="sxs-lookup"><span data-stu-id="42d4f-167">This is implied when <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.None>.</span></span> <span data-ttu-id="42d4f-168">Éste no puede ser un valor válido para cualquier otro modo de autenticación.</span><span class="sxs-lookup"><span data-stu-id="42d4f-168">This cannot be a valid value for any other authentication modes.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="42d4f-169">Si el mensaje de MSMQ está firmado, MSMQ comprueba si el mensaje está firmado con el certificado adjunto (interno o externo) independiente del estado de la cola, es decir, cola autenticada o no.</span><span class="sxs-lookup"><span data-stu-id="42d4f-169">If the MSMQ message is signed, MSMQ checks whether the message is signed with the attached certificate (internal or external) independent of the state of the queue, that is, authenticated queue or not.</span></span>  
  
### <a name="msmq-encryption-algorithm"></a><span data-ttu-id="42d4f-170">Algoritmo de cifrado de MSMQ</span><span class="sxs-lookup"><span data-stu-id="42d4f-170">MSMQ Encryption Algorithm</span></span>  

 <span data-ttu-id="42d4f-171">El algoritmo de cifrado especifica el algoritmo a utilizar para cifrar el mensaje MSMQ durante la conexión.</span><span class="sxs-lookup"><span data-stu-id="42d4f-171">The encryption algorithm specifies the algorithm to use to encrypt the MSMQ message on the wire.</span></span> <span data-ttu-id="42d4f-172">Esta propiedad solo se utiliza si <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> se define como <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span><span class="sxs-lookup"><span data-stu-id="42d4f-172">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="42d4f-173">Los algoritmos soportados son `RC4Stream` y `AES` y el valor predeterminado es `RC4Stream`.</span><span class="sxs-lookup"><span data-stu-id="42d4f-173">The supported algorithms are `RC4Stream` and `AES` and the default is `RC4Stream`.</span></span>  
  
 <span data-ttu-id="42d4f-174">Solo puede utilizar el algoritmo `AES` si el remitente tiene MSMQ 4.0 instalado.</span><span class="sxs-lookup"><span data-stu-id="42d4f-174">You can use the `AES` algorithm only if the sender has MSMQ 4.0 installed.</span></span> <span data-ttu-id="42d4f-175">Además, la cola de destino también debe estar hospedada en MSMQ 4.0.</span><span class="sxs-lookup"><span data-stu-id="42d4f-175">In addition, the target queue must also be hosted on MSMQ 4.0.</span></span>  
  
### <a name="msmq-hash-algorithm"></a><span data-ttu-id="42d4f-176">Algoritmo hash de MSMQ</span><span class="sxs-lookup"><span data-stu-id="42d4f-176">MSMQ Hash Algorithm</span></span>  

 <span data-ttu-id="42d4f-177">El algoritmo hash especifica el algoritmo utilizado para crear una firma digital del mensaje de MSMQ.</span><span class="sxs-lookup"><span data-stu-id="42d4f-177">The hash algorithm specifies the algorithm used to create a digital signature of the MSMQ message.</span></span> <span data-ttu-id="42d4f-178">El administrador de la cola receptora utiliza este mismo algoritmo para autenticar el mensaje de MSMQ.</span><span class="sxs-lookup"><span data-stu-id="42d4f-178">The receiving queue manager uses this same algorithm to authenticate the MSMQ message.</span></span> <span data-ttu-id="42d4f-179">Esta propiedad solo se usa si <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> se establece en <xref:System.Net.Security.ProtectionLevel.Sign> o <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span><span class="sxs-lookup"><span data-stu-id="42d4f-179">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.Sign> or <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="42d4f-180">Los algoritmos admitidos son `MD5`, `SHA1`, `SHA256` y `SHA512`.</span><span class="sxs-lookup"><span data-stu-id="42d4f-180">The supported algorithms are `MD5`, `SHA1`, `SHA256`, and `SHA512`.</span></span> <span data-ttu-id="42d4f-181">De manera predeterminada, es `SHA1`.</span><span class="sxs-lookup"><span data-stu-id="42d4f-181">The default is `SHA1`.</span></span>

 <span data-ttu-id="42d4f-182">Debido a problemas de colisión con MD5/SHA1, Microsoft recomienda SHA256 o superior.</span><span class="sxs-lookup"><span data-stu-id="42d4f-182">Due to collision problems with MD5/SHA1, Microsoft recommends SHA256 or better.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="42d4f-183">Vea también</span><span class="sxs-lookup"><span data-stu-id="42d4f-183">See also</span></span>

- [<span data-ttu-id="42d4f-184">Información general de colas</span><span class="sxs-lookup"><span data-stu-id="42d4f-184">Queues Overview</span></span>](queues-overview.md)
- [<span data-ttu-id="42d4f-185">Conceptos de seguridad</span><span class="sxs-lookup"><span data-stu-id="42d4f-185">Security Concepts</span></span>](security-concepts.md)
- [<span data-ttu-id="42d4f-186">Protección de servicios y clientes</span><span class="sxs-lookup"><span data-stu-id="42d4f-186">Securing Services and Clients</span></span>](securing-services-and-clients.md)
