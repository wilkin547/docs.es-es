---
title: Hospedaje en una aplicación de servicios de Windows
ms.date: 03/30/2017
ms.assetid: f4199998-27f3-4dd9-aee4-0a4addfa9f24
ms.openlocfilehash: cb952cfcd670a790033fbec70de00a4db2541237
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/15/2020
ms.locfileid: "90555853"
---
# <a name="hosting-in-a-windows-service-application"></a><span data-ttu-id="e1ad9-102">Hospedaje en una aplicación de servicios de Windows</span><span class="sxs-lookup"><span data-stu-id="e1ad9-102">Hosting in a Windows Service Application</span></span>
<span data-ttu-id="e1ad9-103">Los servicios de Windows (anteriormente conocidos como servicios de Windows NT) proporcionan un modelo de procesamiento particularmente apropiado para las aplicaciones que deben vivir en una aplicación ejecutable de larga duración y que no deben mostrar ninguna forma de interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-103">Windows services (formerly known as Windows NT services) provide a process model particularly suited to applications that must live in a long-running executable and do not display any form of user interface.</span></span> <span data-ttu-id="e1ad9-104">La duración de un proceso de una aplicación de servicios de Windows es administrada mediante el Administrador de control de servicios (SCM) que le permite iniciar, detener y pausar aplicaciones de servicios de Windows.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-104">The process lifetime of a Windows service application is managed by the service control manager (SCM), which allows you to start, stop, and pause Windows service applications.</span></span> <span data-ttu-id="e1ad9-105">Puede configurar un proceso de servicio de Windows para que se inicie automáticamente cuando se inicie el equipo, convirtiéndolo en un entorno de hospedaje adecuado para aplicaciones "AlwaysOn".</span><span class="sxs-lookup"><span data-stu-id="e1ad9-105">You can configure a Windows service process to start automatically when the computer starts, making it a suitable hosting environment for "always on" applications.</span></span> <span data-ttu-id="e1ad9-106">Para obtener más información acerca de las aplicaciones de servicios de Windows, vea [aplicaciones de servicios de Windows](https://go.microsoft.com/fwlink/?LinkId=89450).</span><span class="sxs-lookup"><span data-stu-id="e1ad9-106">For more information about Windows service applications, see [Windows Service Applications](https://go.microsoft.com/fwlink/?LinkId=89450).</span></span>  
  
 <span data-ttu-id="e1ad9-107">Las aplicaciones que hospedan servicios de Windows Communication Foundation de larga duración (WCF) comparten muchas características con los servicios de Windows.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-107">Applications that host long-running Windows Communication Foundation (WCF) services share many characteristics with Windows services.</span></span> <span data-ttu-id="e1ad9-108">En concreto, los servicios WCF son ejecutables de servidor de larga duración que no interactúan directamente con el usuario y, por tanto, no implementan ninguna forma de interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-108">In particular, WCF services are long-running server executables that do not interact directly with the user and therefore do not implement any form of user interface.</span></span> <span data-ttu-id="e1ad9-109">Como tal, el hospedaje de servicios WCF dentro de una aplicación de servicio de Windows es una opción para compilar aplicaciones WCF sólidas y de larga ejecución.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-109">As such, hosting WCF services inside of a Windows service application is one option for building robust, long-running, WCF applications.</span></span>  
  
 <span data-ttu-id="e1ad9-110">A menudo, los desarrolladores de WCF deben decidir si hospedar su aplicación WCF dentro de una aplicación de servicio de Windows o dentro del entorno de hospedaje de Internet Information Services (IIS) o del servicio de activación de procesos de Windows (WAS).</span><span class="sxs-lookup"><span data-stu-id="e1ad9-110">Often, WCF developers must decide whether to host their WCF application inside of a Windows service application or inside of the Internet Information Services (IIS) or Windows Process Activation Service (WAS) hosting environment.</span></span> <span data-ttu-id="e1ad9-111">Debería considerar el uso de aplicaciones de servicios de Windows bajo las siguientes condiciones:</span><span class="sxs-lookup"><span data-stu-id="e1ad9-111">You should consider using Windows service applications under the following conditions:</span></span>  
  
- <span data-ttu-id="e1ad9-112">Su aplicación requiere la activación explícita.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-112">Your application requires explicit activation.</span></span> <span data-ttu-id="e1ad9-113">Por ejemplo, debería utilizar los servicios de Windows cuando su aplicación se deba iniciar automáticamente cuando el servidor se inicie en lugar de iniciarse dinámicamente en respuesta al primer mensaje entrante.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-113">For example, you should use Windows services when your application must start automatically when the server starts instead of being dynamically started in response to the first incoming message.</span></span>  
  
- <span data-ttu-id="e1ad9-114">El proceso que hospeda su aplicación debe seguir ejecutándose una vez iniciado.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-114">The process that hosts your application must remain running once started.</span></span> <span data-ttu-id="e1ad9-115">Una vez iniciado, un proceso de servicio de Windows permanece ejecutándose a menos que sea cerrado explícitamente por parte de un administrador del servidor mediante el Administrador de control de servicios.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-115">Once started, a Windows service process remains running unless explicitly shut down by a server administrator using the service control manager.</span></span> <span data-ttu-id="e1ad9-116">Las aplicaciones hospedadas en IIS o WAS se pueden iniciar y detener dinámicamente para realizar un uso óptimo de los recursos del sistema.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-116">Applications hosted in IIS or WAS may be started and stopped dynamically to make optimal use of system resources.</span></span> <span data-ttu-id="e1ad9-117">Las aplicaciones que requieren el control explícito sobre la duración de su proceso de hospedaje deberían utilizar los servicios de Windows en lugar de IIS o WAS.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-117">Applications that require explicit control over the lifetime of their hosting process should use Windows services instead of IIS or WAS.</span></span>  
  
- <span data-ttu-id="e1ad9-118">El servicio WCF debe ejecutarse en Windows Server 2003 y usar transportes que no sean HTTP.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-118">Your WCF service must run on Windows Server 2003 and use transports other than HTTP.</span></span> <span data-ttu-id="e1ad9-119">En Windows Server 2003, el entorno de hospedaje de IIS 6,0 está restringido únicamente a la comunicación HTTP.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-119">On Windows Server 2003, the IIS 6.0 hosting environment is restricted to HTTP communication only.</span></span> <span data-ttu-id="e1ad9-120">Las aplicaciones de servicios de Windows no están sujetas a esta restricción y pueden usar cualquier protocolo de transporte que admita WCF, incluidos net. TCP, net. Pipe y net. MSMQ.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-120">Windows service applications are not subject to this restriction and can use any transport WCF supports, including net.tcp, net.pipe, and net.msmq.</span></span>  
  
### <a name="to-host-wcf-inside-of-a-windows-service-application"></a><span data-ttu-id="e1ad9-121">Hospedaje de WCF dentro de una aplicación de servicio de Windows</span><span class="sxs-lookup"><span data-stu-id="e1ad9-121">To host WCF inside of a Windows service application</span></span>  
  
1. <span data-ttu-id="e1ad9-122">Cree una aplicación de servicio de Windows.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-122">Create a Windows service application.</span></span> <span data-ttu-id="e1ad9-123">Puede escribir aplicaciones de servicio de Windows mediante código administrado utilizando las clases del espacio de nombres <xref:System.ServiceProcess>.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-123">You can write Windows service applications in managed code using the classes in the <xref:System.ServiceProcess> namespace.</span></span> <span data-ttu-id="e1ad9-124">Esta aplicación debe incluir una clase que herede a partir de <xref:System.ServiceProcess.ServiceBase>.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-124">This application must include one class that inherits from <xref:System.ServiceProcess.ServiceBase>.</span></span>  
  
2. <span data-ttu-id="e1ad9-125">Vincule la duración de los servicios WCF a la duración de la aplicación de servicio de Windows.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-125">Link the lifetime of the WCF services to the lifetime of the Windows service application.</span></span> <span data-ttu-id="e1ad9-126">Normalmente, desea que los servicios WCF hospedados en una aplicación de servicio de Windows se activen cuando se inicie el servicio de hospedaje, dejen de escuchar mensajes cuando se detenga el servicio de hospedaje y cierren el proceso de hospedaje cuando el servicio WCF encuentre un error.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-126">Typically, you want WCF services hosted in a Windows service application to become active when the hosting service starts, stop listening for messages when the hosting service is stopped, and shut down the hosting process when the WCF service encounters an error.</span></span> <span data-ttu-id="e1ad9-127">Esto se puede lograr de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="e1ad9-127">This can be accomplished as follows:</span></span>  
  
    - <span data-ttu-id="e1ad9-128">Invalide <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> para abrir una o más instancias de <xref:System.ServiceModel.ServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-128">Override <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> to open one or more instances of <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="e1ad9-129">Una sola aplicación de servicio de Windows puede hospedar varios servicios WCF que se inician y detienen como un grupo.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-129">A single Windows service application can host multiple WCF services that start and stop as a group.</span></span>  
  
    - <span data-ttu-id="e1ad9-130">Invalide <xref:System.ServiceProcess.ServiceBase.OnStop%2A> para llamar a <xref:System.ServiceModel.Channels.CommunicationObject.Closed> en <xref:System.ServiceModel.ServiceHost> todos los servicios WCF en ejecución que se iniciaron durante <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> .</span><span class="sxs-lookup"><span data-stu-id="e1ad9-130">Override <xref:System.ServiceProcess.ServiceBase.OnStop%2A> to call <xref:System.ServiceModel.Channels.CommunicationObject.Closed> on the <xref:System.ServiceModel.ServiceHost> any running WCF services that were started during <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span></span>  
  
    - <span data-ttu-id="e1ad9-131">Suscríbase al evento <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> de <xref:System.ServiceModel.ServiceHost> y utilice la clase <xref:System.ServiceProcess.ServiceController> para cerrar la aplicación de servicio de Windows en caso de error.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-131">Subscribe to the <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> event of <xref:System.ServiceModel.ServiceHost> and use the <xref:System.ServiceProcess.ServiceController> class to shut down the Windows service application in case of error.</span></span>  
  
     <span data-ttu-id="e1ad9-132">Las aplicaciones de servicios de Windows que hospedan servicios WCF se implementan y administran de la misma manera que las aplicaciones de servicios de Windows que no usan WCF.</span><span class="sxs-lookup"><span data-stu-id="e1ad9-132">Windows service applications that host WCF services are deployed and managed in the same way as Windows service applications that do not make use of WCF.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e1ad9-133">Vea también</span><span class="sxs-lookup"><span data-stu-id="e1ad9-133">See also</span></span>

- <xref:System.ServiceProcess>
- [<span data-ttu-id="e1ad9-134">Tutorial: Creación de una aplicación de servicios de Windows en el Diseñador de componentes</span><span class="sxs-lookup"><span data-stu-id="e1ad9-134">Walkthrough: Creating a Windows Service Application in the Component Designer</span></span>](https://go.microsoft.com/fwlink/?LinkId=94875)
- [<span data-ttu-id="e1ad9-135">Procedimiento para hospedar un servicio WCF en un servicio administrado de Windows</span><span class="sxs-lookup"><span data-stu-id="e1ad9-135">How to: Host a WCF Service in a Managed Windows Service</span></span>](how-to-host-a-wcf-service-in-a-managed-windows-service.md)
- [<span data-ttu-id="e1ad9-136">Host de servicio de Windows</span><span class="sxs-lookup"><span data-stu-id="e1ad9-136">Windows Service Host</span></span>](../samples/windows-service-host.md)
- [<span data-ttu-id="e1ad9-137">Arquitectura de programación de aplicaciones de servicio</span><span class="sxs-lookup"><span data-stu-id="e1ad9-137">Service Application Programming Architecture</span></span>](https://go.microsoft.com/fwlink/?LinkId=94876)
- <span data-ttu-id="e1ad9-138">[Características de hospedaje de Windows Server AppFabric](/previous-versions/appfabric/ee677189(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="e1ad9-138">[Windows Server App Fabric Hosting Features](/previous-versions/appfabric/ee677189(v=azure.10))</span></span>
