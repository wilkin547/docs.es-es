---
title: Seguridad de transporte HTTP
ms.date: 03/30/2017
ms.assetid: d3439262-c58e-4d30-9f2b-a160170582bb
ms.openlocfilehash: 046b57787357623a19ff6d012eb71c179fcffe51
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/15/2020
ms.locfileid: "90556302"
---
# <a name="http-transport-security"></a><span data-ttu-id="85bb9-102">Seguridad de transporte HTTP</span><span class="sxs-lookup"><span data-stu-id="85bb9-102">HTTP Transport Security</span></span>
<span data-ttu-id="85bb9-103">Al utilizar HTTP como transporte, una implementación de Capa de sockets seguros (SSL) proporciona la seguridad.</span><span class="sxs-lookup"><span data-stu-id="85bb9-103">When using HTTP as the transport, security is provided by a Secure Sockets Layer (SSL) implementation.</span></span> <span data-ttu-id="85bb9-104">SSL se utiliza mucho en Internet para autenticar un servicio a un cliente y proporcionar la confidencialidad (cifrado) al canal.</span><span class="sxs-lookup"><span data-stu-id="85bb9-104">SSL is widely used on the Internet to authenticate a service to a client, and then to provide confidentiality (encryption) to the channel.</span></span> <span data-ttu-id="85bb9-105">En este tema se explica cómo funciona SSL y cómo se implementa en Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="85bb9-105">This topic explains how SSL works and how it is implemented in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="basic-ssl"></a><span data-ttu-id="85bb9-106">SSL Básico</span><span class="sxs-lookup"><span data-stu-id="85bb9-106">Basic SSL</span></span>  
 <span data-ttu-id="85bb9-107">El funcionamiento de SSL se explica mejor a través de un escenario típico, en este caso, el sitio web de un banco.</span><span class="sxs-lookup"><span data-stu-id="85bb9-107">How SSL works is best explained through a typical scenario, in this case, a bank's Web site.</span></span> <span data-ttu-id="85bb9-108">El sitio permite que un cliente inicie sesión con un nombre de usuario y contraseña.</span><span class="sxs-lookup"><span data-stu-id="85bb9-108">The site allows a customer to log on with a user name and password.</span></span> <span data-ttu-id="85bb9-109">Después de autenticarse, el usuario puede realizar transacciones, como ver los saldos de la cuenta, pagar facturas y pasar dinero de una cuenta a otra.</span><span class="sxs-lookup"><span data-stu-id="85bb9-109">After being authenticated, the user can perform transactions, such as view account balances, pay bills, and move money from one account to another.</span></span>  
  
 <span data-ttu-id="85bb9-110">Cuando un usuario visita el sitio por primera vez, el mecanismo SSL inicia una serie de negociaciones, denominadas *Protocolo de enlace*, con el cliente del usuario (en este caso, Internet Explorer).</span><span class="sxs-lookup"><span data-stu-id="85bb9-110">When a user first visits the site, the SSL mechanism begins a series of negotiations, called a *handshake*, with the user's client (in this case, Internet Explorer).</span></span> <span data-ttu-id="85bb9-111">SSL autentica primero el sitio bancario al cliente.</span><span class="sxs-lookup"><span data-stu-id="85bb9-111">SSL first authenticates the bank site to the customer.</span></span> <span data-ttu-id="85bb9-112">Éste es un paso esencial porque los clientes deben conocer primero que están comunicando con el sitio real, y que no es un engaño que intenta hacer que escriban su nombre de usuario y contraseña.</span><span class="sxs-lookup"><span data-stu-id="85bb9-112">This is an essential step because customers must first know that they are communicating with the actual site, and not a spoof that tries to lure them into typing in their user name and password.</span></span> <span data-ttu-id="85bb9-113">SSL hace esta autenticación utilizando un Certificado SSL proporcionado por una autoridad de confianza, como VeriSign.</span><span class="sxs-lookup"><span data-stu-id="85bb9-113">SSL does this authentication by using an SSL certificate provided by a trusted authority, such as VeriSign.</span></span> <span data-ttu-id="85bb9-114">La lógica es así: VeriSign asegura la identidad del sitio bancario.</span><span class="sxs-lookup"><span data-stu-id="85bb9-114">The logic goes like this: VeriSign vouches for the identity of the bank site.</span></span> <span data-ttu-id="85bb9-115">Dado que Internet Explorer confía en VeriSign, se confía en el sitio.</span><span class="sxs-lookup"><span data-stu-id="85bb9-115">Because Internet Explorer trusts VeriSign, the site is trusted.</span></span> <span data-ttu-id="85bb9-116">Si desea consultar con VeriSign, puede hacerlo haciendo clic en el logotipo de VeriSign.</span><span class="sxs-lookup"><span data-stu-id="85bb9-116">If you want to check with VeriSign, you can do so as well by clicking on the VeriSign logo.</span></span> <span data-ttu-id="85bb9-117">Eso presenta una instrucción de autenticidad con su fecha de caducidad y a quién se emite (el sitio bancario).</span><span class="sxs-lookup"><span data-stu-id="85bb9-117">That presents a statement of authenticity with its expiration date and who it is issued to (the bank site).</span></span>  
  
 <span data-ttu-id="85bb9-118">Para iniciar una sesión segura, el cliente envía el equivalente de un "hello" al servidor junto con una lista de algoritmos criptográficos que puede utilizar para firmar, generar los hash y cifrar y descifrar.</span><span class="sxs-lookup"><span data-stu-id="85bb9-118">To initiate a secure session, the client sends the equivalent of a "hello" to the server along with a list of cryptographic algorithms it can use to sign, generate hashes, and encrypt and decrypt with.</span></span> <span data-ttu-id="85bb9-119">En respuesta, el sitio devuelve un reconocimiento y su opción de uno de los conjuntos de algoritmos.</span><span class="sxs-lookup"><span data-stu-id="85bb9-119">In response, the site sends back an acknowledgment and its choice of one of the algorithms suites.</span></span> <span data-ttu-id="85bb9-120">Durante este protocolo de enlace inicial, ambas partes envían y reciben valores de seguridad (nonces).</span><span class="sxs-lookup"><span data-stu-id="85bb9-120">During this initial handshake, both parties send and receive nonces.</span></span> <span data-ttu-id="85bb9-121">Un valor de seguridad ( *nonce* ) es una parte de datos generada de forma aleatoria que se usa, junto con la clave pública del sitio, para crear un hash.</span><span class="sxs-lookup"><span data-stu-id="85bb9-121">A *nonce* is a randomly generated piece of data that is used, in combination with the site's public key, to create a hash.</span></span> <span data-ttu-id="85bb9-122">Un *hash* es un número nuevo que se deriva de los dos números mediante un algoritmo estándar, como SHA1.</span><span class="sxs-lookup"><span data-stu-id="85bb9-122">A *hash* is a new number that is derived from the two numbers using a standard algorithm, such as SHA1.</span></span> <span data-ttu-id="85bb9-123">(El cliente y el sitio también intercambian mensajes para acordar qué algoritmo hash usar). El hash es único y solo se usa para la sesión entre el cliente y el sitio para cifrar y descifrar los mensajes.</span><span class="sxs-lookup"><span data-stu-id="85bb9-123">(The client and the site also exchange messages to agree which hash algorithm to use.) The hash is unique and is used only for the session between the client and the site to encrypt and decrypt messages.</span></span> <span data-ttu-id="85bb9-124">El cliente y el servicio tienen el nonce original y la clave pública del certificado, por lo que ambos lados pueden generar el mismo hash.</span><span class="sxs-lookup"><span data-stu-id="85bb9-124">Both client and service have the original nonce and the certificate's public key, so both sides can generate the same hash.</span></span> <span data-ttu-id="85bb9-125">Por consiguiente, el cliente valida el hash enviado por el servicio (a) usando el algoritmo acordado para calcular el hash a partir de los datos y (b) comparándolo con el hash enviado por el servicio; si ambos coinciden, el cliente tiene la convicción de que no se ha manipulado el hash.</span><span class="sxs-lookup"><span data-stu-id="85bb9-125">Therefore, the client validates the hash sent by the service by (a) using the agreed upon algorithm to calculate the hash from the data, and (b) comparing it to the hash sent by the service; if the two match, then the client has assurance that the hash has not been tampered with.</span></span> <span data-ttu-id="85bb9-126">El cliente puede utilizar a continuación este hash como clave para cifrar un mensaje que todavía contiene otro nuevo hash.</span><span class="sxs-lookup"><span data-stu-id="85bb9-126">The client can then use this hash as a key to encrypt a message that contains yet another new hash.</span></span> <span data-ttu-id="85bb9-127">El servicio puede descifrar el mensaje mediante el hash y recupera este antepenúltimo hash.</span><span class="sxs-lookup"><span data-stu-id="85bb9-127">The service can decrypt the message using the hash, and recover this second-to-final hash.</span></span> <span data-ttu-id="85bb9-128">La información acumulada (nonces, clave pública y otros datos) se conoce ahora en ambos lados y se puede crear un hash (o clave maestra) final.</span><span class="sxs-lookup"><span data-stu-id="85bb9-128">The accumulated information (nonces, public key, and other data) is now known to both sides, and a final hash (or master key) can be created.</span></span> <span data-ttu-id="85bb9-129">Esta clave final se envía cifrada mediante el penúltimo hash.</span><span class="sxs-lookup"><span data-stu-id="85bb9-129">This final key is sent encrypted using the next-to-last hash.</span></span> <span data-ttu-id="85bb9-130">La clave maestra se usa para cifrar y descifrar los mensajes para el resto de la sesión.</span><span class="sxs-lookup"><span data-stu-id="85bb9-130">The master key is then used to encrypt and decrypt messages for the rest of the session.</span></span> <span data-ttu-id="85bb9-131">Dado que tanto el cliente como el servicio usan la misma clave, también se denomina *clave de sesión*.</span><span class="sxs-lookup"><span data-stu-id="85bb9-131">Because both client and service use the same key, this is also called a *session key*.</span></span>  
  
 <span data-ttu-id="85bb9-132">La clave de sesión también se caracteriza por ser una clave simétrica o un "secreto compartido."</span><span class="sxs-lookup"><span data-stu-id="85bb9-132">The session key is also characterized as a symmetric key, or a "shared secret."</span></span> <span data-ttu-id="85bb9-133">Tener una clave simétrica es importante, porque reduce el cálculo requerido por ambos lados de la transacción.</span><span class="sxs-lookup"><span data-stu-id="85bb9-133">Having a symmetric key is important because it reduces the computation required by both sides of the transaction.</span></span> <span data-ttu-id="85bb9-134">Si cada mensaje exigiera un nuevo intercambio de nonces y hash, el rendimiento se deterioraría.</span><span class="sxs-lookup"><span data-stu-id="85bb9-134">If every message demanded a new exchange of nonces and hashes, performance would deteriorate.</span></span> <span data-ttu-id="85bb9-135">Por consiguiente, el objetivo último de SSL es utilizar una clave simétrica que permita a los mensajes fluir libremente entre los dos lados con un grado mayor de seguridad y eficacia.</span><span class="sxs-lookup"><span data-stu-id="85bb9-135">Therefore, the ultimate goal of SSL is to use a symmetric key that allows messages to flow freely between the two sides with a greater degree of security and efficiency.</span></span>  
  
 <span data-ttu-id="85bb9-136">La descripción anterior es una versión simplificada de lo que ocurre, porque el protocolo puede variar de sitio a sitio.</span><span class="sxs-lookup"><span data-stu-id="85bb9-136">The previous description is a simplified version of what happens, because the protocol may vary from site to site.</span></span> <span data-ttu-id="85bb9-137">También es posible que el cliente y el sitio generen nonces que se combinan de manera algorítmica durante el protocolo de enlace para agregar más complejidad y, por consiguiente, protección, al proceso de intercambio de datos.</span><span class="sxs-lookup"><span data-stu-id="85bb9-137">It is also possible that both the client and the site both generate nonces that are algorithmically combined during the handshake to add more complexity, and therefore protection, to the process of exchanging data.</span></span>  
  
### <a name="certificates-and-public-key-infrastructure"></a><span data-ttu-id="85bb9-138">Certificados e infraestructura de clave pública (PKI)</span><span class="sxs-lookup"><span data-stu-id="85bb9-138">Certificates and Public Key Infrastructure</span></span>  
 <span data-ttu-id="85bb9-139">Durante el protocolo de enlace, el servicio envía también su Certificado SSL al cliente.</span><span class="sxs-lookup"><span data-stu-id="85bb9-139">During the handshake, the service also sends its SSL certificate to the client.</span></span> <span data-ttu-id="85bb9-140">El certificado contiene información, como su fecha de caducidad, autoridad emisora y el Identificador uniforme de recursos del sitio (URI).</span><span class="sxs-lookup"><span data-stu-id="85bb9-140">The certificate contains information, such as its expiration date, issuing authority, and the site's Uniform Resource Identifier (URI).</span></span> <span data-ttu-id="85bb9-141">El cliente compara el URI con el URI que había contactado originalmente para asegurarse una coincidencia y comprueba, también, la fecha y autoridad emisora.</span><span class="sxs-lookup"><span data-stu-id="85bb9-141">The client compares the URI to the URI it had originally contacted to ensure a match, and also checks the date and issuing authority.</span></span>  
  
 <span data-ttu-id="85bb9-142">Cada certificado tiene dos claves, una clave privada y una clave pública, y las dos se conocen como un *par de claves de intercambio*.</span><span class="sxs-lookup"><span data-stu-id="85bb9-142">Every certificate has two keys, a private key and a public key, and the two are known as an *exchange key pair*.</span></span> <span data-ttu-id="85bb9-143">En resumen, la clave privada solo es conocida por el propietario del certificado mientras que la clave pública es legible por el certificado.</span><span class="sxs-lookup"><span data-stu-id="85bb9-143">In brief, the private key is known only to the owner of the certificate while the public key is readable from the certificate.</span></span> <span data-ttu-id="85bb9-144">La clave se puede utilizar para cifrar o descifrar un resumen, hash u otra clave, pero solo como operaciones contrarias.</span><span class="sxs-lookup"><span data-stu-id="85bb9-144">Either key can be used to encrypt or decrypt a digest, hash, or other key, but only as contrary operations.</span></span> <span data-ttu-id="85bb9-145">Por ejemplo, si el cliente cifra con clave pública, solo el sitio puede descifrar el mensaje mediante la clave privada.</span><span class="sxs-lookup"><span data-stu-id="85bb9-145">For example, if the client encrypts with the public key, only the site can decrypt the message using the private key.</span></span> <span data-ttu-id="85bb9-146">De igual forma, si el sitio cifra la clave privada, el cliente puede descifrar con la clave pública.</span><span class="sxs-lookup"><span data-stu-id="85bb9-146">Similarly, if the site encrypts with the private key, the client can decrypt with the public key.</span></span> <span data-ttu-id="85bb9-147">Esto proporciona garantía al cliente de que los mensajes solo se intercambian con el poseedor de la clave privada, porque solo los mensajes cifrados con la clave privada se pueden descifrar con la clave pública.</span><span class="sxs-lookup"><span data-stu-id="85bb9-147">This provides assurance to the client that the messages are being exchanged only with the possessor of the private key because only messages encrypted with the private key can be decrypted with the public key.</span></span> <span data-ttu-id="85bb9-148">Se garantiza que el sitio está intercambiando los mensajes con un cliente que se ha cifrado utilizando la clave pública.</span><span class="sxs-lookup"><span data-stu-id="85bb9-148">The site is assured that it is exchanging messages with a client that has encrypted using the public key.</span></span> <span data-ttu-id="85bb9-149">Este intercambio solo es seguro para un protocolo de enlace inicial, motivo por el cual se hace mucho más para crear la clave simétrica real.</span><span class="sxs-lookup"><span data-stu-id="85bb9-149">This exchange is secure only for an initial handshake, however, which is why much more is done to create the actual symmetric key.</span></span> <span data-ttu-id="85bb9-150">No obstante, todas las comunicaciones dependen del servicio que tiene un certificado SSL válido.</span><span class="sxs-lookup"><span data-stu-id="85bb9-150">Nevertheless, all communications depend on the service having a valid SSL certificate.</span></span>  
  
## <a name="implementing-ssl-with-wcf"></a><span data-ttu-id="85bb9-151">Implementar SSL con WCF</span><span class="sxs-lookup"><span data-stu-id="85bb9-151">Implementing SSL with WCF</span></span>  
 <span data-ttu-id="85bb9-152">La seguridad de transporte HTTP (o SSL) se proporciona externamente a WCF.</span><span class="sxs-lookup"><span data-stu-id="85bb9-152">HTTP transport security (or SSL) is provided externally to WCF.</span></span> <span data-ttu-id="85bb9-153">Puede implementar SSL de dos maneras; el factor decisivo es cómo se hospeda su aplicación:</span><span class="sxs-lookup"><span data-stu-id="85bb9-153">You can implement SSL in one of two ways; the deciding factor is how your application is hosted:</span></span>  
  
- <span data-ttu-id="85bb9-154">Si usa Internet Information Services (IIS) como host de WCF, use la infraestructura de IIS para configurar un servicio SSL.</span><span class="sxs-lookup"><span data-stu-id="85bb9-154">If you are using Internet Information Services (IIS) as your WCF host, use the IIS infrastructure to set up an SSL service.</span></span>  
  
- <span data-ttu-id="85bb9-155">Si va a crear una aplicación WCF autohospedada, puede enlazar un certificado SSL a la dirección mediante la herramienta HttpCfg.exe.</span><span class="sxs-lookup"><span data-stu-id="85bb9-155">If you are creating a self-hosted WCF application, you can bind an SSL certificate to the address using the HttpCfg.exe tool.</span></span>  
  
### <a name="using-iis-for-transport-security"></a><span data-ttu-id="85bb9-156">Utilizar IIS para seguridad de transporte </span><span class="sxs-lookup"><span data-stu-id="85bb9-156">Using IIS for Transport Security</span></span>  
  
#### <a name="iis-70"></a><span data-ttu-id="85bb9-157">IIS 7.0</span><span class="sxs-lookup"><span data-stu-id="85bb9-157">IIS 7.0</span></span>  
 <span data-ttu-id="85bb9-158">Para configurar IIS 7,0 como un host seguro (mediante SSL), consulte [configuración de capa de sockets seguros en IIS 7,0](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc771438(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="85bb9-158">To set up IIS 7.0 as a secure host (using SSL), see [Configuring Secure Sockets Layer in IIS 7.0](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc771438(v=ws.10)).</span></span>  
  
<span data-ttu-id="85bb9-159">Para configurar los certificados para su uso con IIS 7,0, vea [configurar certificados de servidor en iis 7,0](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732230(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="85bb9-159">To configure certificates for use with IIS 7.0, see [Configuring Server Certificates in IIS 7.0](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732230(v=ws.10)).</span></span>  
  
#### <a name="iis-60"></a><span data-ttu-id="85bb9-160">IIS 6,0</span><span class="sxs-lookup"><span data-stu-id="85bb9-160">IIS 6.0</span></span>  
 <span data-ttu-id="85bb9-161">Para configurar IIS 6,0 como un host seguro (mediante SSL), consulte [configuración de capa de sockets seguros](/previous-versions/windows/it-pro/windows-server-2003/cc736992(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="85bb9-161">To set up IIS 6.0 as a secure host (using SSL), see [Configuring Secure Sockets Layer](/previous-versions/windows/it-pro/windows-server-2003/cc736992(v=ws.10)).</span></span>  
  
 <span data-ttu-id="85bb9-162">Para configurar los certificados para su uso con IIS 6,0, consulte [Certificates_IIS_SP1_Ops](/previous-versions/windows/it-pro/windows-server-2003/cc757474(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="85bb9-162">To configure certificates for use with IIS 6.0, see [Certificates_IIS_SP1_Ops](/previous-versions/windows/it-pro/windows-server-2003/cc757474(v=ws.10)).</span></span>  
  
### <a name="using-httpcfg-for-ssl"></a><span data-ttu-id="85bb9-163">Utilizar HttpCfg para SSL</span><span class="sxs-lookup"><span data-stu-id="85bb9-163">Using HttpCfg for SSL</span></span>  

 <span data-ttu-id="85bb9-164">Si va a crear una aplicación WCF autohospedada, use la herramienta [HttpCfg.exe](/windows/win32/http/httpcfg-exe) .</span><span class="sxs-lookup"><span data-stu-id="85bb9-164">If you're creating a self-hosted WCF application, use the [HttpCfg.exe](/windows/win32/http/httpcfg-exe) tool.</span></span>
  
 <span data-ttu-id="85bb9-165">Para obtener más información acerca del uso de la herramienta HttpCfg.exe para configurar un puerto con un certificado X. 509, consulte [Cómo: configurar un puerto con un certificado SSL](how-to-configure-a-port-with-an-ssl-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="85bb9-165">For more information about using the HttpCfg.exe tool to set up a port with an X.509 certificate, see [How to: Configure a Port with an SSL Certificate](how-to-configure-a-port-with-an-ssl-certificate.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="85bb9-166">Vea también</span><span class="sxs-lookup"><span data-stu-id="85bb9-166">See also</span></span>

- [<span data-ttu-id="85bb9-167">Seguridad de transporte</span><span class="sxs-lookup"><span data-stu-id="85bb9-167">Transport Security</span></span>](transport-security.md)
- [<span data-ttu-id="85bb9-168">Seguridad de los mensajes</span><span class="sxs-lookup"><span data-stu-id="85bb9-168">Message Security</span></span>](message-security-in-wcf.md)
