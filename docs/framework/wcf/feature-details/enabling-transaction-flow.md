---
description: Más información acerca de cómo habilitar el flujo de transacción
title: Habilitar el flujo de transacciones
ms.date: 03/30/2017
helpviewer_keywords:
- transactions [WCF], enabling flow
ms.assetid: a03f5041-5049-43f4-897c-e0292d4718f7
ms.openlocfilehash: abf8875c870894f6c1b0a08138356950a646e4d9
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/06/2021
ms.locfileid: "99704932"
---
# <a name="enabling-transaction-flow"></a><span data-ttu-id="2f5c8-103">Habilitar el flujo de transacciones</span><span class="sxs-lookup"><span data-stu-id="2f5c8-103">Enabling Transaction Flow</span></span>

<span data-ttu-id="2f5c8-104">Windows Communication Foundation (WCF) proporciona opciones muy flexibles para controlar el flujo de la transacción.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-104">Windows Communication Foundation (WCF) provides highly flexible options for controlling transaction flow.</span></span> <span data-ttu-id="2f5c8-105">La configuración del flujo de transacción de un servicio se puede expresar utilizando una combinación de atributos y configuración.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-105">A service's transaction flow settings can be expressed using a combination of attributes and configuration.</span></span>  
  
## <a name="transaction-flow-settings"></a><span data-ttu-id="2f5c8-106">Configuración del flujo de transacción</span><span class="sxs-lookup"><span data-stu-id="2f5c8-106">Transaction Flow Settings</span></span>  

 <span data-ttu-id="2f5c8-107">La configuración del flujo de transacción se genera para un extremo de servicio como resultado de la intersección de los tres valores siguientes:</span><span class="sxs-lookup"><span data-stu-id="2f5c8-107">Transaction flow settings are generated for a service endpoint as a result of the intersection of the following three values:</span></span>  
  
- <span data-ttu-id="2f5c8-108">El atributo <xref:System.ServiceModel.TransactionFlowAttribute> especificado para cada método en el contrato de servicios.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-108">The <xref:System.ServiceModel.TransactionFlowAttribute> attribute specified for each method in the service contract.</span></span>  
  
- <span data-ttu-id="2f5c8-109">La propiedad de enlace `TransactionFlow` en el enlace concreto.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-109">The `TransactionFlow` binding property in the specific binding.</span></span>  
  
- <span data-ttu-id="2f5c8-110">La propiedad de enlace `TransactionFlowProtocol` en el enlace concreto.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-110">The `TransactionFlowProtocol` binding property in the specific binding.</span></span> <span data-ttu-id="2f5c8-111">La propiedad de enlace `TransactionFlowProtocol` le permite elegir entre dos protocolos de transacción diferentes que puede utilizar para el flujo de una transacción.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-111">The `TransactionFlowProtocol` binding property enables you to choose among two different transaction protocols that you can use to flow a transaction.</span></span> <span data-ttu-id="2f5c8-112">Las siguientes secciones describen brevemente cada uno de ellos.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-112">The following sections briefly describe each of them.</span></span>  
  
### <a name="ws-atomictransaction-protocol"></a><span data-ttu-id="2f5c8-113">Protocolo WS-AtomicTransaction</span><span class="sxs-lookup"><span data-stu-id="2f5c8-113">WS-AtomicTransaction Protocol</span></span>  

 <span data-ttu-id="2f5c8-114">El protocolo WS-AtomicTransaction (WS-AT) es útil para los escenarios cuando se requiere la interoperabilidad con pilas de protocolo de terceros.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-114">The WS-AtomicTransaction (WS-AT) protocol is useful for scenarios when interoperability with third-party protocol stacks is required.</span></span>  
  
### <a name="oletransactions-protocol"></a><span data-ttu-id="2f5c8-115">Protocolo OleTransactions</span><span class="sxs-lookup"><span data-stu-id="2f5c8-115">OleTransactions Protocol</span></span>  

 <span data-ttu-id="2f5c8-116">El protocolo OleTransactions es útil para los escenarios cuando no se requiere la interoperabilidad con pilas de protocolo de terceros, y el implementador de un servicio conoce de antemano que el servicio de protocolo WS-AT está deshabilitado localmente o la topología de red existente no favorece el uso de WS-AT.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-116">The OleTransactions protocol is useful for scenarios when interoperability with third-party protocol stacks is not required, and the deployer of a service knows in advance that the WS-AT protocol service is disabled locally or the existing network topology does not favor the usage of WS-AT.</span></span>  
  
 <span data-ttu-id="2f5c8-117">La tabla siguiente muestra los tipos diferentes de flujos de transacción que se pueden generar utilizando estas combinaciones diversas.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-117">The following table shows the different types of transaction flows that can be generated using these various combinations.</span></span>  
  
|<span data-ttu-id="2f5c8-118">TransactionFlow</span><span class="sxs-lookup"><span data-stu-id="2f5c8-118">TransactionFlow</span></span><br /><br /> <span data-ttu-id="2f5c8-119">binding</span><span class="sxs-lookup"><span data-stu-id="2f5c8-119">binding</span></span>|<span data-ttu-id="2f5c8-120">Propiedad de enlace TransactionFlow</span><span class="sxs-lookup"><span data-stu-id="2f5c8-120">TransactionFlow binding property</span></span>|<span data-ttu-id="2f5c8-121">Protocolo de enlace TransactionFlowProtocol</span><span class="sxs-lookup"><span data-stu-id="2f5c8-121">TransactionFlowProtocol binding protocol</span></span>|<span data-ttu-id="2f5c8-122">Tipo de flujo de transacción</span><span class="sxs-lookup"><span data-stu-id="2f5c8-122">Type of transaction flow</span></span>|  
|---------------------------------|--------------------------------------|----------------------------------------------|------------------------------|  
|<span data-ttu-id="2f5c8-123">Mandatory</span><span class="sxs-lookup"><span data-stu-id="2f5c8-123">Mandatory</span></span>|<span data-ttu-id="2f5c8-124">true</span><span class="sxs-lookup"><span data-stu-id="2f5c8-124">true</span></span>|<span data-ttu-id="2f5c8-125">WS-AT</span><span class="sxs-lookup"><span data-stu-id="2f5c8-125">WS-AT</span></span>|<span data-ttu-id="2f5c8-126">La transacción debe fluir en el formato WS-AT interoperable.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-126">Transaction must be flowed in the interoperable WS-AT format.</span></span>|  
|<span data-ttu-id="2f5c8-127">Mandatory</span><span class="sxs-lookup"><span data-stu-id="2f5c8-127">Mandatory</span></span>|<span data-ttu-id="2f5c8-128">true</span><span class="sxs-lookup"><span data-stu-id="2f5c8-128">true</span></span>|<span data-ttu-id="2f5c8-129">OleTransactions</span><span class="sxs-lookup"><span data-stu-id="2f5c8-129">OleTransactions</span></span>|<span data-ttu-id="2f5c8-130">La transacción debe fluir en el formato OleTransactions de WCF.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-130">Transaction must be flowed in the WCF OleTransactions format.</span></span>|  
|<span data-ttu-id="2f5c8-131">Mandatory</span><span class="sxs-lookup"><span data-stu-id="2f5c8-131">Mandatory</span></span>|<span data-ttu-id="2f5c8-132">false</span><span class="sxs-lookup"><span data-stu-id="2f5c8-132">false</span></span>|<span data-ttu-id="2f5c8-133">No aplicable</span><span class="sxs-lookup"><span data-stu-id="2f5c8-133">Not applicable</span></span>|<span data-ttu-id="2f5c8-134">No es aplicable porque se trata de una configuración no válida.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-134">Not applicable because this is an invalid configuration.</span></span>|  
|<span data-ttu-id="2f5c8-135">Permitido</span><span class="sxs-lookup"><span data-stu-id="2f5c8-135">Allowed</span></span>|<span data-ttu-id="2f5c8-136">true</span><span class="sxs-lookup"><span data-stu-id="2f5c8-136">true</span></span>|<span data-ttu-id="2f5c8-137">WS-AT</span><span class="sxs-lookup"><span data-stu-id="2f5c8-137">WS-AT</span></span>|<span data-ttu-id="2f5c8-138">La transacción puede fluir en el formato WS-AT interoperable.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-138">Transaction may be flowed in the interoperable WS-AT format.</span></span>|  
|<span data-ttu-id="2f5c8-139">Permitido</span><span class="sxs-lookup"><span data-stu-id="2f5c8-139">Allowed</span></span>|<span data-ttu-id="2f5c8-140">true</span><span class="sxs-lookup"><span data-stu-id="2f5c8-140">true</span></span>|<span data-ttu-id="2f5c8-141">OleTransactions</span><span class="sxs-lookup"><span data-stu-id="2f5c8-141">OleTransactions</span></span>|<span data-ttu-id="2f5c8-142">La transacción puede fluir en el formato OleTransactions de WCF.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-142">Transaction may be flowed in the WCF OleTransactions format.</span></span>|  
|<span data-ttu-id="2f5c8-143">Permitido</span><span class="sxs-lookup"><span data-stu-id="2f5c8-143">Allowed</span></span>|<span data-ttu-id="2f5c8-144">false</span><span class="sxs-lookup"><span data-stu-id="2f5c8-144">false</span></span>|<span data-ttu-id="2f5c8-145">Cualquier valor</span><span class="sxs-lookup"><span data-stu-id="2f5c8-145">Any value</span></span>|<span data-ttu-id="2f5c8-146">No fluye una transacción.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-146">A transaction is not flowed.</span></span>|  
|<span data-ttu-id="2f5c8-147">No permitidos</span><span class="sxs-lookup"><span data-stu-id="2f5c8-147">NotAllowed</span></span>|<span data-ttu-id="2f5c8-148">Cualquier valor</span><span class="sxs-lookup"><span data-stu-id="2f5c8-148">Any value</span></span>|<span data-ttu-id="2f5c8-149">Cualquier valor</span><span class="sxs-lookup"><span data-stu-id="2f5c8-149">Any value</span></span>|<span data-ttu-id="2f5c8-150">No fluye una transacción.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-150">A transaction is not flowed.</span></span>|  
  
 <span data-ttu-id="2f5c8-151">La tabla siguiente resume el resultado del procesamiento de mensajes.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-151">The following table summarizes the message processing result.</span></span>  
  
|<span data-ttu-id="2f5c8-152">Mensaje entrante</span><span class="sxs-lookup"><span data-stu-id="2f5c8-152">Incoming message</span></span>|<span data-ttu-id="2f5c8-153">Valor TransactionFlow</span><span class="sxs-lookup"><span data-stu-id="2f5c8-153">TransactionFlow setting</span></span>|<span data-ttu-id="2f5c8-154">Encabezado de transacción</span><span class="sxs-lookup"><span data-stu-id="2f5c8-154">Transaction header</span></span>|<span data-ttu-id="2f5c8-155">Resultado del procesamiento de mensajes</span><span class="sxs-lookup"><span data-stu-id="2f5c8-155">Message processing result</span></span>|  
|----------------------|-----------------------------|------------------------|-------------------------------|  
|<span data-ttu-id="2f5c8-156">La transacción coincide con el formato de protocolo esperado</span><span class="sxs-lookup"><span data-stu-id="2f5c8-156">Transaction matches expected protocol format</span></span>|<span data-ttu-id="2f5c8-157">Permitido u obligatorio</span><span class="sxs-lookup"><span data-stu-id="2f5c8-157">Allowed or Mandatory</span></span>|<span data-ttu-id="2f5c8-158">`MustUnderstand` es igual que `true`.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-158">`MustUnderstand` equals `true`.</span></span>|<span data-ttu-id="2f5c8-159">Proceso</span><span class="sxs-lookup"><span data-stu-id="2f5c8-159">Process</span></span>|  
|<span data-ttu-id="2f5c8-160">La transacción no coincide con el formato de protocolo esperado</span><span class="sxs-lookup"><span data-stu-id="2f5c8-160">Transaction does not match expected protocol format</span></span>|<span data-ttu-id="2f5c8-161">Mandatory</span><span class="sxs-lookup"><span data-stu-id="2f5c8-161">Mandatory</span></span>|<span data-ttu-id="2f5c8-162">`MustUnderstand` es igual que `false`.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-162">`MustUnderstand` equals `false`.</span></span>|<span data-ttu-id="2f5c8-163">Rechazado porque se requiere una transacción</span><span class="sxs-lookup"><span data-stu-id="2f5c8-163">Rejected because a transaction is required</span></span>|  
|<span data-ttu-id="2f5c8-164">La transacción no coincide con el formato de protocolo esperado</span><span class="sxs-lookup"><span data-stu-id="2f5c8-164">Transaction does not match expected protocol format</span></span>|<span data-ttu-id="2f5c8-165">Permitido</span><span class="sxs-lookup"><span data-stu-id="2f5c8-165">Allowed</span></span>|<span data-ttu-id="2f5c8-166">`MustUnderstand` es igual que `false`.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-166">`MustUnderstand` equals `false`.</span></span>|<span data-ttu-id="2f5c8-167">Rechazado porque no se entiende el encabezado</span><span class="sxs-lookup"><span data-stu-id="2f5c8-167">Rejected because the header is not understood</span></span>|  
|<span data-ttu-id="2f5c8-168">Transacción que utiliza cualquier formato de protocolo</span><span class="sxs-lookup"><span data-stu-id="2f5c8-168">Transaction using any protocol format</span></span>|<span data-ttu-id="2f5c8-169">No permitidos</span><span class="sxs-lookup"><span data-stu-id="2f5c8-169">NotAllowed</span></span>|<span data-ttu-id="2f5c8-170">`MustUnderstand` es igual que `false`.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-170">`MustUnderstand` equals `false`.</span></span>|<span data-ttu-id="2f5c8-171">Rechazado porque no se entiende el encabezado</span><span class="sxs-lookup"><span data-stu-id="2f5c8-171">Rejected because the header is not understood</span></span>|  
|<span data-ttu-id="2f5c8-172">Sin transacción</span><span class="sxs-lookup"><span data-stu-id="2f5c8-172">No transaction</span></span>|<span data-ttu-id="2f5c8-173">Mandatory</span><span class="sxs-lookup"><span data-stu-id="2f5c8-173">Mandatory</span></span>|<span data-ttu-id="2f5c8-174">N/D</span><span class="sxs-lookup"><span data-stu-id="2f5c8-174">N/A</span></span>|<span data-ttu-id="2f5c8-175">Rechazado porque se requiere una transacción</span><span class="sxs-lookup"><span data-stu-id="2f5c8-175">Rejected because a transaction is required</span></span>|  
|<span data-ttu-id="2f5c8-176">Sin transacción</span><span class="sxs-lookup"><span data-stu-id="2f5c8-176">No transaction</span></span>|<span data-ttu-id="2f5c8-177">Permitido</span><span class="sxs-lookup"><span data-stu-id="2f5c8-177">Allowed</span></span>|<span data-ttu-id="2f5c8-178">N/D</span><span class="sxs-lookup"><span data-stu-id="2f5c8-178">N/A</span></span>|<span data-ttu-id="2f5c8-179">Proceso</span><span class="sxs-lookup"><span data-stu-id="2f5c8-179">Process</span></span>|  
|<span data-ttu-id="2f5c8-180">Sin transacción</span><span class="sxs-lookup"><span data-stu-id="2f5c8-180">No transaction</span></span>|<span data-ttu-id="2f5c8-181">No permitidos</span><span class="sxs-lookup"><span data-stu-id="2f5c8-181">NotAllowed</span></span>|<span data-ttu-id="2f5c8-182">N/D</span><span class="sxs-lookup"><span data-stu-id="2f5c8-182">N/A</span></span>|<span data-ttu-id="2f5c8-183">Proceso</span><span class="sxs-lookup"><span data-stu-id="2f5c8-183">Process</span></span>|  
  
 <span data-ttu-id="2f5c8-184">Mientras cada método en un contrato puede tener requisitos de flujo de transacción diferentes, el valor del protocolo del flujo de transacción se sitúa en el nivel del enlace.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-184">While each method on a contract can have different transaction flow requirements, the transaction flow protocol setting is scoped at the level of the binding.</span></span> <span data-ttu-id="2f5c8-185">Esto significa que todos los métodos que comparten el mismo extremo (y por consiguiente el mismo enlace) también comparten la misma directiva permitiendo o requiriendo el flujo de transacción, así como el mismo protocolo de transacción si es aplicable.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-185">This means that all methods that share the same endpoint (and therefore the same binding) also share the same policy allowing or requiring transaction flow, as well as the same transaction protocol if applicable.</span></span>  
  
## <a name="enabling-transaction-flow-at-the-method-level"></a><span data-ttu-id="2f5c8-186">Habilitar el flujo de transacción en el nivel de método</span><span class="sxs-lookup"><span data-stu-id="2f5c8-186">Enabling Transaction Flow at the Method Level</span></span>  

 <span data-ttu-id="2f5c8-187">Los requisitos de flujo de transacción no son siempre los mismos para todos los métodos en un contrato de servicios.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-187">Transaction flow requirements are not always the same for all methods in a service contract.</span></span> <span data-ttu-id="2f5c8-188">Por lo tanto, WCF también proporciona un mecanismo basado en atributos para permitir expresar las preferencias de flujo de transacción de cada método.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-188">Therefore, WCF also provides an attribute-based mechanism to allow each method's transaction flow preferences to be expressed.</span></span> <span data-ttu-id="2f5c8-189"><xref:System.ServiceModel.TransactionFlowAttribute> que especifica el nivel en el que una operación del servicio acepta un encabezado de transacción logra esto.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-189">This is achieved by the <xref:System.ServiceModel.TransactionFlowAttribute> that specifies the level in which a service operation accepts a transaction header.</span></span> <span data-ttu-id="2f5c8-190">Debería marcar sus métodos de contrato de servicios con este atributo si desea habilitar el flujo de la transacción.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-190">You should mark your service contract methods with this attribute if you want to enable transaction flow.</span></span> <span data-ttu-id="2f5c8-191">Este atributo toma uno de los valores de la enumeración <xref:System.ServiceModel.TransactionFlowOption>, en la que el valor predeterminado es <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-191">This attribute takes one of the values of the <xref:System.ServiceModel.TransactionFlowOption> enumeration, in which the default value is <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span></span> <span data-ttu-id="2f5c8-192">Si se especifica cualquier valor excepto <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>, el método no debe ser unidireccional.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-192">If any value except <xref:System.ServiceModel.TransactionFlowOption.NotAllowed> is specified, the method is required to not be one-way.</span></span> <span data-ttu-id="2f5c8-193">Un programador puede utilizar este atributo para especificar requisitos de flujo de transacción del nivel de método o restricciones en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-193">A developer can use this attribute to specify method-level transaction flow requirements or constraints at design time.</span></span>  
  
## <a name="enabling-transaction-flow-at-the-endpoint-level"></a><span data-ttu-id="2f5c8-194">Habilitar el flujo de transacción en el nivel del extremo</span><span class="sxs-lookup"><span data-stu-id="2f5c8-194">Enabling Transaction Flow at the Endpoint Level</span></span>  

 <span data-ttu-id="2f5c8-195">Además de la configuración del flujo de transacciones del nivel de método que <xref:System.ServiceModel.TransactionFlowAttribute> proporciona el atributo, WCF proporciona una configuración de todo el extremo para que el flujo de la transacción permita a los administradores controlar el flujo de la transacción en un nivel superior.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-195">In addition to the method-level transaction flow setting  the <xref:System.ServiceModel.TransactionFlowAttribute> attribute provides, WCF provides an endpoint-wide setting for transaction flow to allow administrators to control transaction flow at a higher level.</span></span>  
  
 <span data-ttu-id="2f5c8-196"><xref:System.ServiceModel.Channels.TransactionFlowBindingElement>, que le permite habilitar o deshabilitar el flujo de la transacción entrante en el valor de enlace de un extremo logra, así como especificar el formato del protocolo de transacción para las transacciones entrantes.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-196">This is achieved by the <xref:System.ServiceModel.Channels.TransactionFlowBindingElement>, which enables you to enable or disable incoming transaction flow in an endpoint’s binding settings, as well as to specify the desired transaction protocol format for incoming transactions.</span></span>  
  
 <span data-ttu-id="2f5c8-197">Si el enlace ha deshabilitado el flujo de la transacción, pero una de las operaciones en un contrato de servicios requiere una transacción entrante, se produce una excepción de validación en el inicio del servicio.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-197">If the binding has disabled transaction flow, but one of the operations on a service contract requires an incoming transaction, then a validation exception is thrown at service startup.</span></span>  
  
 <span data-ttu-id="2f5c8-198">La mayoría de los enlaces permanentes que proporciona WCF contienen `transactionFlow` los `transactionProtocol` atributos y para permitirle configurar el enlace específico para aceptar las transacciones entrantes.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-198">Most of the standing bindings WCF provides contain the `transactionFlow` and `transactionProtocol` attributes to enable you to configure the specific binding to accept incoming transactions.</span></span> <span data-ttu-id="2f5c8-199">Para obtener más información acerca de cómo establecer los elementos de configuración, vea [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) .</span><span class="sxs-lookup"><span data-stu-id="2f5c8-199">For more information about setting the configuration elements, see [\<binding>](../../configure-apps/file-schema/wcf/bindings.md).</span></span>  
  
 <span data-ttu-id="2f5c8-200">Un administrador o implementador puede utilizar el flujo de la transacción en el nivel del punto de conexión para configurar los requisitos del flujo de transacción o las restricciones en tiempo de implementación utilizando el archivo de configuración.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-200">An administrator or deployer can use endpoint-level transaction flow to configure transaction flow requirements or constraints at deployment time using the configuration file.</span></span>  
  
## <a name="security"></a><span data-ttu-id="2f5c8-201">Seguridad</span><span class="sxs-lookup"><span data-stu-id="2f5c8-201">Security</span></span>  

 <span data-ttu-id="2f5c8-202">Para garantizar la seguridad e integridad del sistema, debe proteger los intercambios de mensajes cuando haya flujo de transacciones entre las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-202">To ensure system security and integrity, you must secure message exchanges when flowing transactions between applications.</span></span> <span data-ttu-id="2f5c8-203">No debería fluir o divulgar los detalles de la transacción a ninguna aplicación que no esté autorizada a participar en la misma transacción.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-203">You should not flow or disclose transaction details to any application that is not entitled to participate in the same transaction.</span></span>  
  
 <span data-ttu-id="2f5c8-204">Al generar clientes WCF en servicios web desconocidos o que no son de confianza mediante el uso de intercambio de metadatos, las llamadas a operaciones en estos servicios web deben suprimir la transacción actual si es posible.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-204">When generating WCF clients to unknown or untrusted Web services through the use of metadata exchange, calls to operations on these Web services should suppress the current transaction if possible.</span></span> <span data-ttu-id="2f5c8-205">En el ejemplo siguiente se muestra cómo hacerlo:</span><span class="sxs-lookup"><span data-stu-id="2f5c8-205">The following example demonstrates how to do this.</span></span>  
  
```csharp
//client code which has an ambient transaction  
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Suppress))  
{  
    // No transaction will flow to this operation  
    untrustedProxy.Operation1(...);  
    scope.Complete();  
}  
//remainder of client code  
```  
  
 <span data-ttu-id="2f5c8-206">Además, los servicios se deberían configurar para aceptar las transacciones entrantes solo de los clientes que han autenticado y han autorizado.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-206">In addition, services should be configured to accept incoming transactions only from clients that they have authenticated and authorized.</span></span> <span data-ttu-id="2f5c8-207">Solo se deberían aceptar las transacciones entrantes si proceden de clientes de mucha confianza.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-207">Incoming transactions should only be accepted if they come from highly trusted clients.</span></span>  
  
## <a name="policy-assertions"></a><span data-ttu-id="2f5c8-208">Aserciones de directiva</span><span class="sxs-lookup"><span data-stu-id="2f5c8-208">Policy Assertions</span></span>  

 <span data-ttu-id="2f5c8-209">WCF usa las aserciones de directiva para controlar el flujo de la transacción.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-209">WCF uses policy assertions to control transaction flow.</span></span> <span data-ttu-id="2f5c8-210">Las aserciones de directiva se pueden encontrar en el documento de directiva de un servicio, que se genera agregando contratos, configuración y atributos.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-210">Policy assertions can be found in a service’s policy document, which is generated by aggregating contracts, configuration, and attributes.</span></span> <span data-ttu-id="2f5c8-211">El cliente puede obtener el documento de directiva del servicio mediante un HTTP GET o una solicitud-respuesta de WS-MetadataExchange.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-211">The client can obtain the service’s policy document using an HTTP GET or a WS-MetadataExchange request-reply.</span></span> <span data-ttu-id="2f5c8-212">Los clientes pueden procesar a continuación el documento de directiva para determinar qué operaciones en un contrato de servicios pueden admitir o cuáles requieren flujo de la transacción.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-212">Clients can then process the policy document to determine which operations on a service contract may support or require transaction flow.</span></span>  
  
 <span data-ttu-id="2f5c8-213">Las aserciones de directiva de flujo de transacción afectan al flujo de la transacción especificando los encabezados SOAP que un cliente debería enviar a un servicio para representar una transacción.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-213">Transaction flow policy assertions affect transaction flow by specifying the SOAP headers that a client should send to a service to represent a transaction.</span></span> <span data-ttu-id="2f5c8-214">Todos los encabezados de transacción se deben marcar con `MustUnderstand` igual que `true`.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-214">All transaction headers must be marked with `MustUnderstand` equal to `true`.</span></span> <span data-ttu-id="2f5c8-215">Cualquier mensaje con un encabezado marcado de otro modo se rechaza con un error SOAP.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-215">Any message with a header marked otherwise is rejected with a SOAP fault.</span></span>  
  
 <span data-ttu-id="2f5c8-216">Solo una aserción de directiva relacionada con transacción puede estar presente en una operación única.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-216">Only one transaction-related policy assertion can be present on a single operation.</span></span> <span data-ttu-id="2f5c8-217">Los documentos de directiva con más de una aserción de transacción en una operación se consideran no válidos y son rechazados por WCF.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-217">Policy documents with more than one transaction assertion on an operation are considered invalid and are rejected by WCF.</span></span> <span data-ttu-id="2f5c8-218">Además, solo un protocolo de transacción único puede estar presente dentro de cada tipo de puerto.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-218">In addition, only a single transaction protocol can be present inside each port type.</span></span> <span data-ttu-id="2f5c8-219">Los documentos de directiva con operaciones que hacen referencia a más de un protocolo de transacción dentro de un solo tipo de puerto se consideran no válidos y son rechazados por la [herramienta de utilidad de metadatos de ServiceModel (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="2f5c8-219">Policy documents with operations referencing more than one transaction protocol inside a single port type are considered invalid, and are rejected by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span> <span data-ttu-id="2f5c8-220">Los documentos de directiva con aserciones de la transacción presentes en mensajes de salida o mensajes de entrada unidireccionales también se consideran no válidos.</span><span class="sxs-lookup"><span data-stu-id="2f5c8-220">Policy documents with transaction assertions present on output messages or one-way input messages are also considered invalid.</span></span>
