---
title: Elección de un codificador de mensajes
ms.date: 03/30/2017
ms.assetid: 2204d82d-d962-4922-a79e-c9a231604f19
ms.openlocfilehash: d93d7039d034262cd47edd437d5d7d8d63890f02
ms.sourcegitcommit: 1c1a1f9ec0bd1efb3040d86a79f7ee94e207cca5
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/03/2020
ms.locfileid: "80635775"
---
# <a name="choose-a-message-encoder"></a><span data-ttu-id="d2e8e-102">Elija un codificador de mensajes</span><span class="sxs-lookup"><span data-stu-id="d2e8e-102">Choose a Message Encoder</span></span>

<span data-ttu-id="d2e8e-103">En este artículo se describen los criterios para elegir entre los codificadores de mensajes que se incluyen en Windows Communication Foundation (WCF): binario, texto y mecanismo de optimización de transmisión de mensajes (MTOM).</span><span class="sxs-lookup"><span data-stu-id="d2e8e-103">This article discusses criteria for choosing among the message encoders that are included in Windows Communication Foundation (WCF): binary, text, and Message Transmission Optimization Mechanism (MTOM).</span></span>  
  
 <span data-ttu-id="d2e8e-104">En WCF, se especifica cómo transferir datos a través de una red entre extremos mediante un *enlace,* que se compone de una secuencia de elementos de *enlace.*</span><span class="sxs-lookup"><span data-stu-id="d2e8e-104">In WCF, you specify how to transfer data across a network between endpoints by means of a *binding*, which is made up of a sequence of *binding elements*.</span></span> <span data-ttu-id="d2e8e-105">Un codificador de mensajes se representa mediante un elemento de enlace de codificación de mensajes en la pila de enlaces.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-105">A message encoder is represented by a message encoding binding element in the binding stack.</span></span> <span data-ttu-id="d2e8e-106">Un enlace incluye elementos de enlace protocolares opcionales, como un elemento de enlace de seguridad o un elemento de enlace de mensajería de confianza, un elemento de enlace de la codificación de mensajes necesario y un elemento de enlace de transporte necesario.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-106">A binding includes optional protocol binding elements, such as a security binding element or reliable messaging binding element, a required message encoding binding element, and a required transport binding element.</span></span>  
  
 <span data-ttu-id="d2e8e-107">El elemento de enlace de codificación de mensajes se sienta bajo los elementos de enlace protocolares opcionales y sobre el elemento de enlace de transporte necesario.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-107">The message encoding binding element sits below the optional protocol binding elements and above the required transport binding element.</span></span> <span data-ttu-id="d2e8e-108">En el lado de salida, un codificador de mensajes serializa los <xref:System.ServiceModel.Channels.Message> de salida y los pasa al transporte.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-108">On the outgoing side, a message encoder serializes the outgoing <xref:System.ServiceModel.Channels.Message> and passes it to the transport.</span></span> <span data-ttu-id="d2e8e-109">En el lado de entrada, un codificador de mensajes recibe la forma serializada de un <xref:System.ServiceModel.Channels.Message> desde el transporte y lo pasa a la capa de protocolo más alta, si estuviese presente, o a la aplicación, si no lo estuviese.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-109">On the incoming side, a message encoder receives the serialized form of a <xref:System.ServiceModel.Channels.Message> from the transport and passes it to the higher protocol layer, if present, or to the application, if not.</span></span>  
  
 <span data-ttu-id="d2e8e-110">Al conectar a un cliente o servidor preexistente, puede que no tenga una opción sobre el uso de una codificación de mensajes determinada, puesto que necesita codificar sus mensajes de la manera que el otro lado espera.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-110">When connecting to a pre-existing client or server, you may not have a choice about using a particular message encoding since you need to encode your messages in a way that the other side is expecting.</span></span> <span data-ttu-id="d2e8e-111">Sin embargo, si está escribiendo un servicio WCF, puede exponer el servicio a través de varios extremos, cada uno con una codificación de mensajes diferente.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-111">However, if you are writing a WCF service, you can expose your service through multiple endpoints, each using a different message encoding.</span></span> <span data-ttu-id="d2e8e-112">Esto permite a los clientes elegir la mejor codificación para hablar con su servicio sobre el punto de conexión que es mejor para ellos, así como dar la flexibilidad a sus clientes para que elijan la codificación que más les convenga.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-112">This allows clients to choose the best encoding for talking to your service over the endpoint that is best for them, as well as giving your clients the flexibility to choose the encoding that is best for them.</span></span> <span data-ttu-id="d2e8e-113">La utilización de múltiples extremos también le permite combinar las ventajas de diferentes codificaciones de mensaje con otros elementos de enlace.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-113">Using multiple endpoints also allows you to combine the advantages of different message encodings with other binding elements.</span></span>  
  
## <a name="system-provided-encoders"></a><span data-ttu-id="d2e8e-114">Codificadores proporcionados por el sistema</span><span class="sxs-lookup"><span data-stu-id="d2e8e-114">System-Provided Encoders</span></span>  
 <span data-ttu-id="d2e8e-115">WCF incluye tres codificadores de mensajes, que se representan mediante las tres clases siguientes:</span><span class="sxs-lookup"><span data-stu-id="d2e8e-115">WCF includes three message encoders, which are represented by the following three classes:</span></span>  
  
- <span data-ttu-id="d2e8e-116"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>, el codificador del mensaje de texto, admite codificación simple XML y codificación SOAP.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-116"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>, the text message encoder, supports both plain XML encoding and SOAP encoding.</span></span> <span data-ttu-id="d2e8e-117">El modo de codificación XML simple del codificador de mensajes de texto se denomina “XML sin formato” (POX) para distinguirlo de la codificación SOAP basada en texto.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-117">The plain XML encoding mode of the text message encoder is called "plain old XML" (POX) to distinguish it from text-based SOAP encoding.</span></span> <span data-ttu-id="d2e8e-118">Para habilitar POX, establezca la propiedad <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement.MessageVersion%2A> en <xref:System.ServiceModel.Channels.MessageVersion.None%2A>.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-118">To enable POX, set the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement.MessageVersion%2A> property to <xref:System.ServiceModel.Channels.MessageVersion.None%2A>.</span></span> <span data-ttu-id="d2e8e-119">Utilice el codificador de mensajes de texto para interoperar con extremos que no sean WCF.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-119">Use the text message encoder to interoperate with non-WCF endpoints.</span></span>  
  
- <span data-ttu-id="d2e8e-120"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, el codificador de mensajes binarios, usa un formato binario compacto y está optimizado para la comunicación de WCF a WCF y, por lo tanto, no es interoperable.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-120"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, the binary message encoder, uses a compact binary format and is optimized for WCF to WCF communication, and hence is not interoperable.</span></span> <span data-ttu-id="d2e8e-121">También es el codificador más realizante de todos los codificadores que proporciona WCF.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-121">This is also the most performant encoder of all the encoders WCF provides.</span></span>  
  
- <span data-ttu-id="d2e8e-122"><xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, el elemento de enlace, especifica la codificación de caracteres y el control de versiones de los mensajes para los mensajes que utilizan la codificación MTOM.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-122"><xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, the binding element, specifies the character encoding and message versioning for messages using MTOM encoding.</span></span> <span data-ttu-id="d2e8e-123">MTOM es una tecnología eficaz para la transmisión de datos binarios en mensajes de WCF.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-123">MTOM is an efficient technology for transmitting binary data in WCF messages.</span></span> <span data-ttu-id="d2e8e-124">El codificador MTOM intenta crear una balanza entre la eficacia y la interoperabilidad.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-124">The MTOM encoder attempts to create a balance between efficiency and interoperability.</span></span> <span data-ttu-id="d2e8e-125">El codificador MTOM transmite la mayoría del XML en formato de texto, pero optimiza bloques grandes de datos binarios transmitiéndolos como son, sin convertirlos en texto.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-125">The MTOM encoding transmits most XML in textual form, but optimizes large blocks of binary data by transmitting them as-is, without conversion to text.</span></span> <span data-ttu-id="d2e8e-126">En términos de eficiencia, entre los codificadores que proporciona WCF, MTOM es de texto intermedio (el más lento) y binario (el más rápido).</span><span class="sxs-lookup"><span data-stu-id="d2e8e-126">In terms of efficiency, among the encoders WCF provides, MTOM is in-between text (the slowest) and binary (the fastest).</span></span>  
  
## <a name="how-to-choose-a-message-encoder"></a><span data-ttu-id="d2e8e-127">Cómo elegir un codificador de mensajes</span><span class="sxs-lookup"><span data-stu-id="d2e8e-127">How to Choose a Message Encoder</span></span>  
 <span data-ttu-id="d2e8e-128">La siguiente tabla describe los factores comunes utilizados para elegir un codificador de mensajes.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-128">The following table describes common factors used to choose a message encoder.</span></span> <span data-ttu-id="d2e8e-129">Clasifique por orden de prioridad los factores que son importantes para su aplicación y, a continuación, elija los codificadores de mensajes que funcionan mejor con estos factores.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-129">Prioritize the factors that are important for your application, and then choose the message encoders that work best with these factors.</span></span> <span data-ttu-id="d2e8e-130">Asegúrese de considerar factores adicionales no enumerados en esta tabla y cualquier codificador de mensajes personalizado que se puedan requerir en su aplicación.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-130">Be sure to consider any additional factors not listed in this table and any custom message encoders that may be required in your application.</span></span>  
  
|<span data-ttu-id="d2e8e-131">Factor</span><span class="sxs-lookup"><span data-stu-id="d2e8e-131">Factor</span></span>|<span data-ttu-id="d2e8e-132">Descripción</span><span class="sxs-lookup"><span data-stu-id="d2e8e-132">Description</span></span>|<span data-ttu-id="d2e8e-133">Codificadores que admiten este factor</span><span class="sxs-lookup"><span data-stu-id="d2e8e-133">Encoders that support this factor</span></span>|  
|------------|-----------------|---------------------------------------|  
|<span data-ttu-id="d2e8e-134">Juegos de caracteres compatibles</span><span class="sxs-lookup"><span data-stu-id="d2e8e-134">Supported Character Sets</span></span>|<span data-ttu-id="d2e8e-135"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>y <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement> soporta sólo las codificaciones Unicode UTF8 y UTF16 (*big-endian* y *little-endian*).</span><span class="sxs-lookup"><span data-stu-id="d2e8e-135"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> and <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement> support only the UTF8 and UTF16 Unicode (*big-endian* and *little-endian*) encodings.</span></span> <span data-ttu-id="d2e8e-136">Si se requieren otras codificaciones, como UTF7 o ASCII, se debe usar un codificador personalizado.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-136">If other encodings are required, such as UTF7 or ASCII, a custom encoder must be used.</span></span> <span data-ttu-id="d2e8e-137">Para obtener un codificador personalizado de ejemplo, vea [Custom Message Encoder](https://docs.microsoft.com/dotnet/framework/wcf/samples/custom-message-encoder-custom-text-encoder).</span><span class="sxs-lookup"><span data-stu-id="d2e8e-137">For a sample custom encoder, see [Custom Message Encoder](https://docs.microsoft.com/dotnet/framework/wcf/samples/custom-message-encoder-custom-text-encoder).</span></span>|<span data-ttu-id="d2e8e-138">Texto</span><span class="sxs-lookup"><span data-stu-id="d2e8e-138">Text</span></span>|  
|<span data-ttu-id="d2e8e-139">Inspección</span><span class="sxs-lookup"><span data-stu-id="d2e8e-139">Inspection</span></span>|<span data-ttu-id="d2e8e-140">La inspección es la capacidad para examinar mensajes durante la transmisión.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-140">Inspection is the ability to examine messages during transmission.</span></span> <span data-ttu-id="d2e8e-141">Las codificaciones de texto, con o sin el uso de SOAP, permiten a muchas aplicaciones inspeccionar y analizar mensajes sin el uso de herramientas especializadas.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-141">Text encodings, either with or without the use of SOAP, allow messages to be inspected and analyzed by many applications without the use of specialized tools.</span></span> <span data-ttu-id="d2e8e-142">El uso de la seguridad de transferencia, ya sea en el nivel de mensaje o de transporte, afecta a su capacidad para inspeccionar mensajes.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-142">The use of transfer security, at either the message or transport level, affects your ability to inspect messages.</span></span> <span data-ttu-id="d2e8e-143">La confidencialidad evita que se examine un mensaje y la integridad evita que se modifique un mensaje.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-143">Confidentiality protects a message from being examined and integrity protects a message from being modified.</span></span>|<span data-ttu-id="d2e8e-144">Texto</span><span class="sxs-lookup"><span data-stu-id="d2e8e-144">Text</span></span>|  
|<span data-ttu-id="d2e8e-145">Confiabilidad</span><span class="sxs-lookup"><span data-stu-id="d2e8e-145">Reliability</span></span>|<span data-ttu-id="d2e8e-146">La fiabilidad es la capacidad de recuperación de que dispone un codificador ante los errores de transmisión.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-146">Reliability is the resiliency of an encoder to transmission errors.</span></span> <span data-ttu-id="d2e8e-147">La fiabilidad también se proporciona en el nivel de mensaje, transporte o aplicación.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-147">Reliability can also be provided at the message, transport, or application layer.</span></span> <span data-ttu-id="d2e8e-148">Todos los codificadores WCF estándar suponen que otra capa proporciona confiabilidad.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-148">All of the standard WCF encoders assume that another layer is providing reliability.</span></span> <span data-ttu-id="d2e8e-149">El codificador tiene poca capacidad de recuperación ante los errores de transmisión.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-149">The encoder has little ability to recover from a transmission error.</span></span>|<span data-ttu-id="d2e8e-150">None</span><span class="sxs-lookup"><span data-stu-id="d2e8e-150">None</span></span>|  
|<span data-ttu-id="d2e8e-151">Simplicidad</span><span class="sxs-lookup"><span data-stu-id="d2e8e-151">Simplicity</span></span>|<span data-ttu-id="d2e8e-152">La simplicidad representa la facilidad con la que puede crear codificadores y decodificadores para una especificación de codificación.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-152">Simplicity represents the ease with which you can create encoders and decoders for an encoding specification.</span></span> <span data-ttu-id="d2e8e-153">Las codificaciones de texto son particularmente ventajosas para proporcionar simplicidad y la codificación de texto de POX tiene la ventaja adicional de que no requiere compatibilidad para procesar SOAP.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-153">Text encodings are particularly advantageous for simplicity, and the POX text encoding has the additional advantage of not requiring support for processing SOAP.</span></span>|<span data-ttu-id="d2e8e-154">Texto (POX)</span><span class="sxs-lookup"><span data-stu-id="d2e8e-154">Text (POX)</span></span>|  
|<span data-ttu-id="d2e8e-155">Tamaño</span><span class="sxs-lookup"><span data-stu-id="d2e8e-155">Size</span></span>|<span data-ttu-id="d2e8e-156">La codificación determina la cantidad de sobrecarga impuesta sobre el contenido.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-156">The encoding determines the amount of overhead imposed on content.</span></span> <span data-ttu-id="d2e8e-157">El tamaño de los mensajes codificados está directamente relacionado con el rendimiento máximo de las operaciones del servicio.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-157">The size of encoded messages is directly related to the maximum throughput of service operations.</span></span> <span data-ttu-id="d2e8e-158">Las codificaciones binarias generalmente son más compactas que las codificaciones de texto.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-158">Binary encodings are generally more compact than text encodings.</span></span> <span data-ttu-id="d2e8e-159">Cuando el tamaño del mensaje es muy importante, considere también la posibilidad de comprimir el contenido del mensaje durante la codificación.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-159">When message size is at a premium, consider also compressing the message contents during encoding.</span></span> <span data-ttu-id="d2e8e-160">Sin embargo, la compresión agrega costes de procesamiento para el remitente y receptor del mensaje.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-160">However, compression adds processing costs for both the message sender and receiver.</span></span>|<span data-ttu-id="d2e8e-161">Binary</span><span class="sxs-lookup"><span data-stu-id="d2e8e-161">Binary</span></span>|  
|<span data-ttu-id="d2e8e-162">Streaming</span><span class="sxs-lookup"><span data-stu-id="d2e8e-162">Streaming</span></span>|<span data-ttu-id="d2e8e-163">La transmisión por secuencias permite a las aplicaciones comenzar a procesar un mensaje antes de que haya llegado el mensaje completo.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-163">Streaming allows applications to begin processing a message before the entire message has arrived.</span></span> <span data-ttu-id="d2e8e-164">El uso eficaz de la transmisión por secuencias requiere que los datos importantes de un mensaje estén disponibles al principio del mensaje para que la aplicación receptora no tenga que esperar a que llegue.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-164">Effectively using streaming requires that the important data for a message be available at the beginning of the message so that the receiving application is not required to wait for it to arrive.</span></span> <span data-ttu-id="d2e8e-165">Es más, las aplicaciones que utilizan la transferencia por secuencias deben organizar incrementalmente los datos en el mensaje para que el contenido no tenga dependencias hacia delante.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-165">Moreover, applications that use streamed transfer must organize data in the message incrementally so that the content does not have forward dependencies.</span></span> <span data-ttu-id="d2e8e-166">En muchos casos, debe establecer un compromiso entre el contenido de transmisión por secuencias y tener el tamaño de transferencia más pequeño posible para ese contenido.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-166">In many cases, you must compromise between streaming content and having the smallest possible transfer size for that content.</span></span>|<span data-ttu-id="d2e8e-167">None</span><span class="sxs-lookup"><span data-stu-id="d2e8e-167">None</span></span>|  
|<span data-ttu-id="d2e8e-168">Soporte de herramientas de terceros</span><span class="sxs-lookup"><span data-stu-id="d2e8e-168">Third-Party Tool Support</span></span>|<span data-ttu-id="d2e8e-169">Entre las áreas de compatibilidad de una codificación se incluyen el desarrollo y el diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-169">Support areas for an encoding include development and diagnosis.</span></span> <span data-ttu-id="d2e8e-170">Los desarrolladores de terceros han realizado una gran inversión en bibliotecas y kits de herramientas para administrar mensajes codificados en formato POX.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-170">Third-party developers have made a large investment in libraries and toolkits for handling messages encoded in the POX format.</span></span>|<span data-ttu-id="d2e8e-171">Texto (POX)</span><span class="sxs-lookup"><span data-stu-id="d2e8e-171">Text (POX)</span></span>|  
|<span data-ttu-id="d2e8e-172">Interoperabilidad</span><span class="sxs-lookup"><span data-stu-id="d2e8e-172">Interoperability</span></span>|<span data-ttu-id="d2e8e-173">Este factor hace referencia a la capacidad de un codificador WCF para interoperar con servicios que no son WCF.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-173">This factor refers to the ability of a WCF encoder to interoperate with non-WCF services.</span></span>|<span data-ttu-id="d2e8e-174">Texto</span><span class="sxs-lookup"><span data-stu-id="d2e8e-174">Text</span></span><br /><br /> <span data-ttu-id="d2e8e-175">MTOM (parcial)</span><span class="sxs-lookup"><span data-stu-id="d2e8e-175">MTOM (partial)</span></span>|  
  
<span data-ttu-id="d2e8e-176">Nota: cuando se usa el codificador binario, el uso del valor IgnoreWhitespace al crear un XMLReader no tendrá ningún efecto.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-176">Note: When using the Binary Encoder, using the IgnoreWhitespace setting when creating a XMLReader will have no effect.</span></span>  <span data-ttu-id="d2e8e-177">Por ejemplo, si hace lo siguiente dentro de una operación de servicio:</span><span class="sxs-lookup"><span data-stu-id="d2e8e-177">For example, if you do the following inside a service operation:</span></span>  

```csharp
public void OperationContract(XElement input)
{
    Console.WriteLine("{0}", input.Value);
    int counter = 0;
    var xreader = input.CreateReader();
    var reader = XmlReader.Create(xreader, new XmlReaderSettings() { IgnoreWhitespace = true });
    while (reader.Read())
    {
        counter++;
    }

    Console.WriteLine("Read {0} lines with reader", counter);
}
```  
  
<span data-ttu-id="d2e8e-178">Se omite el valor de IgnoreWhitespace.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-178">The IgnoreWhitespace setting is ignored.</span></span>  
  
## <a name="compression-and-the-binary-encoder"></a><span data-ttu-id="d2e8e-179">Compresión y el codificador binario</span><span class="sxs-lookup"><span data-stu-id="d2e8e-179">Compression and the Binary Encoder</span></span>

<span data-ttu-id="d2e8e-180">A partir de WCF 4.5, el codificador binario de WCF agrega compatibilidad con la compresión.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-180">Beginning with WCF 4.5 the WCF binary encoder adds support for compression.</span></span> <span data-ttu-id="d2e8e-181">Esto le permite usar el algoritmo gzip/deflate para enviar mensajes comprimidos desde un cliente de WCF y también responder con mensajes comprimidos desde un servicio WCF hospedado a sí mismo.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-181">This enables you to use the gzip/deflate algorithm for sending compressed messages from a WCF client and also respond with compressed messages from a self-hosted WCF service.</span></span> <span data-ttu-id="d2e8e-182">Esta característica habilita la compresión en los transportes HTTP y TCP.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-182">This feature enables compression on both the HTTP and TCP transports.</span></span> <span data-ttu-id="d2e8e-183">Un servicio de WCF hospedado en IIS siempre se puede habilitar para enviar respuestas comprimidas si se configura el servidor host de IIS.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-183">An IIS hosted WCF service can always be enabled for sending compressed responses by configuring the IIS host server.</span></span> <span data-ttu-id="d2e8e-184">El tipo de compresión se configura con la propiedad <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-184">The type of compression is configured with the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="d2e8e-185">Esta propiedad se establece en uno de los valores de la enumeración <xref:System.ServiceModel.Channels.CompressionFormat?displayProperty=nameWithType>:</span><span class="sxs-lookup"><span data-stu-id="d2e8e-185">This property is set to one of the <xref:System.ServiceModel.Channels.CompressionFormat?displayProperty=nameWithType> enum values:</span></span>

- <xref:System.ServiceModel.Channels.CompressionFormat.Deflate>
- <xref:System.ServiceModel.Channels.CompressionFormat.GZip>
- <xref:System.ServiceModel.Channels.CompressionFormat.None>
  
<span data-ttu-id="d2e8e-186">Puesto que esta propiedad solo se expone en el binaryMessageEncodingBindingElement, tendrá que crear un enlace personalizado como el siguiente para usar esta característica:</span><span class="sxs-lookup"><span data-stu-id="d2e8e-186">Since this property is only exposed on the binaryMessageEncodingBindingElement, you will need to create a custom binding like the following to use this feature:</span></span>

 ```xml
 <customBinding>
   <binding name="BinaryCompressionBinding">
     <binaryMessageEncoding compressionFormat ="GZip" />
     <httpTransport />
  </binding>
</customBinding>
 ```

<span data-ttu-id="d2e8e-187">Tanto el cliente como el servicio deben aceptar enviar y recibir mensajes comprimidos y, por lo tanto, la propiedad compressionFormat debe configurarse en el elemento binaryMessageEncoding tanto en el cliente como en el servicio.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-187">Both the client and the service need to agree to send and receive compressed messages and therefore the compressionFormat property must be configured on the binaryMessageEncoding element on both client and service.</span></span> <span data-ttu-id="d2e8e-188">Se produce una excepción ProtocolException si el servicio o el cliente no está configurado para la compresión, pero el otro lado sí.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-188">A ProtocolException is thrown if either the service or client is not configured for compression, but the other side is.</span></span> <span data-ttu-id="d2e8e-189">Se debe considerar cuidadosamente la habilitación de la compresión.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-189">Enabling compression should be carefully considered.</span></span> <span data-ttu-id="d2e8e-190">La compresión es más útil si el ancho de banda de red es un cuello de botella.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-190">Compression is mostly useful if network bandwidth is a bottleneck.</span></span> <span data-ttu-id="d2e8e-191">En el caso en que el cuello de botella sea la CPU, la compresión reducirá el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="d2e8e-191">In the case where the CPU is the bottleneck, compression will decrease throughput.</span></span> <span data-ttu-id="d2e8e-192">Se debe realizar una prueba adecuada en un entorno simulado para averiguar si esto beneficia a la aplicación</span><span class="sxs-lookup"><span data-stu-id="d2e8e-192">Appropriate testing must be done in a simulated environment to find out if this benefits the application</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d2e8e-193">Vea también</span><span class="sxs-lookup"><span data-stu-id="d2e8e-193">See also</span></span>

- [<span data-ttu-id="d2e8e-194">Enlaces</span><span class="sxs-lookup"><span data-stu-id="d2e8e-194">Bindings</span></span>](../../../../docs/framework/wcf/feature-details/bindings.md)
