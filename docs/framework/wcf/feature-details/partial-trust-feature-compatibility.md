---
description: 'Más información sobre: compatibilidad de características de confianza parcial'
title: Compatibilidad de característica de confianza parcial
ms.date: 03/30/2017
ms.assetid: a36a540b-1606-4e63-88e0-b7c59e0e6ab7
ms.openlocfilehash: 470cedde3eb38508feb1c2950f7f504390914834
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/06/2021
ms.locfileid: "99733533"
---
# <a name="partial-trust-feature-compatibility"></a><span data-ttu-id="3b973-103">Compatibilidad de característica de confianza parcial</span><span class="sxs-lookup"><span data-stu-id="3b973-103">Partial Trust Feature Compatibility</span></span>

<span data-ttu-id="3b973-104">Windows Communication Foundation (WCF) admite un subconjunto limitado de funcionalidad cuando se ejecuta en un entorno de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-104">Windows Communication Foundation (WCF) supports a limited subset of functionality when running in a partially-trusted environment.</span></span> <span data-ttu-id="3b973-105">Las características admitidas en confianza parcial están diseñadas alrededor de un conjunto concreto de escenarios, tal y como se describe en el tema [Supported Deployment Scenarios](supported-deployment-scenarios.md) .</span><span class="sxs-lookup"><span data-stu-id="3b973-105">The features supported in partial trust are designed around a specific set of scenarios as described in the [Supported Deployment Scenarios](supported-deployment-scenarios.md) topic.</span></span>  
  
## <a name="minimum-permission-requirements"></a><span data-ttu-id="3b973-106">Requisitos mínimos de permiso</span><span class="sxs-lookup"><span data-stu-id="3b973-106">Minimum Permission Requirements</span></span>  

 <span data-ttu-id="3b973-107">WCF admite un subconjunto de características en aplicaciones que se ejecutan en cualquiera de los siguientes conjuntos de permisos con nombre estándar:</span><span class="sxs-lookup"><span data-stu-id="3b973-107">WCF supports a subset of features in applications running under either of the following standard named permission sets:</span></span>  
  
- <span data-ttu-id="3b973-108">Permisos de nivel de confianza medio</span><span class="sxs-lookup"><span data-stu-id="3b973-108">Medium Trust permissions</span></span>  
  
- <span data-ttu-id="3b973-109">Permisos de zona de Internet</span><span class="sxs-lookup"><span data-stu-id="3b973-109">Internet Zone permissions</span></span>  
  
 <span data-ttu-id="3b973-110">Si se intenta usar WCF en aplicaciones de confianza parcial con permisos más restrictivos, pueden producirse excepciones de seguridad en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="3b973-110">Attempting to use WCF in partially-trusted applications with more restrictive permissions may result in security exceptions at runtime.</span></span>  
  
## <a name="contracts"></a><span data-ttu-id="3b973-111">Contratos</span><span class="sxs-lookup"><span data-stu-id="3b973-111">Contracts</span></span>  

 <span data-ttu-id="3b973-112">Los contratos están sujetos a las restricciones siguientes cuando se ejecutan bajo confianza parcial:</span><span class="sxs-lookup"><span data-stu-id="3b973-112">Contracts are subject to the following restrictions when running under partial trust:</span></span>  
  
- <span data-ttu-id="3b973-113">La clase de servicio que implementa la interfaz `[ServiceContract]` debe ser `public` y tener un constructor `public` .</span><span class="sxs-lookup"><span data-stu-id="3b973-113">The service class that implements the `[ServiceContract]` interface must be `public` and have a `public` constructor.</span></span> <span data-ttu-id="3b973-114">Si define los métodos `[OperationContract]` , éstos deben ser `public`.</span><span class="sxs-lookup"><span data-stu-id="3b973-114">If it defines `[OperationContract]` methods, these must be `public`.</span></span> <span data-ttu-id="3b973-115">Si en su lugar implementa una interfaz `[ServiceContract]` , esas implementaciones de método pueden ser explícitas o `private`, siempre y cuando la interfaz `[ServiceContract]` sea `public`.</span><span class="sxs-lookup"><span data-stu-id="3b973-115">If it instead implements a `[ServiceContract]` interface, those method implementations can be explicit or `private`, provided that the `[ServiceContract]` interface is `public`.</span></span>  
  
- <span data-ttu-id="3b973-116">Al usar el atributo `[ServiceKnownType]` , el método especificado debe ser `public`.</span><span class="sxs-lookup"><span data-stu-id="3b973-116">When using the `[ServiceKnownType]` attribute, the method specified must be `public`.</span></span>  
  
- <span data-ttu-id="3b973-117">Las clases`[MessageContract]` y sus miembros pueden ser `public`.</span><span class="sxs-lookup"><span data-stu-id="3b973-117">`[MessageContract]` classes and their members can be `public`.</span></span> <span data-ttu-id="3b973-118">Si la clase `[MessageContract]` se define en el ensamblado de aplicación puede ser `internal` y tener miembros `internal` .</span><span class="sxs-lookup"><span data-stu-id="3b973-118">If the `[MessageContract]` class is defined in the application assembly it can be `internal` and have `internal` members.</span></span>  
  
## <a name="system-provided-bindings"></a><span data-ttu-id="3b973-119">Enlaces proporcionados por el sistema</span><span class="sxs-lookup"><span data-stu-id="3b973-119">System-Provided Bindings</span></span>  

 <span data-ttu-id="3b973-120"><xref:System.ServiceModel.BasicHttpBinding> y <xref:System.ServiceModel.WebHttpBinding> se admiten totalmente en un entorno de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-120">The <xref:System.ServiceModel.BasicHttpBinding> and <xref:System.ServiceModel.WebHttpBinding> are fully supported in a partial trust environment.</span></span> <span data-ttu-id="3b973-121"><xref:System.ServiceModel.WSHttpBinding> solo se admite para el modo de seguridad de transporte.</span><span class="sxs-lookup"><span data-stu-id="3b973-121">The <xref:System.ServiceModel.WSHttpBinding> is supported for Transport security mode only.</span></span>  
  
 <span data-ttu-id="3b973-122">Los enlaces que utilizan transportes distintos a HTTP, como <xref:System.ServiceModel.NetTcpBinding>, <xref:System.ServiceModel.NetNamedPipeBinding>o <xref:System.ServiceModel.NetMsmqBinding>, no se admiten al ejecutarse en un entorno de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-122">Bindings that use transports other than HTTP, such as the <xref:System.ServiceModel.NetTcpBinding>, the <xref:System.ServiceModel.NetNamedPipeBinding>, or the <xref:System.ServiceModel.NetMsmqBinding>, are not supported when running in a partial trust environment.</span></span>  
  
## <a name="custom-bindings"></a><span data-ttu-id="3b973-123">Enlaces personalizados</span><span class="sxs-lookup"><span data-stu-id="3b973-123">Custom Bindings</span></span>  

 <span data-ttu-id="3b973-124">Se pueden crear y usar enlaces personalizados en un entorno de confianza parcial, pero deben seguir las restricciones especificadas en esta sección.</span><span class="sxs-lookup"><span data-stu-id="3b973-124">Custom bindings can be created and used in a partial trust environment, but must follow the restrictions specified in this section.</span></span>  
  
### <a name="transports"></a><span data-ttu-id="3b973-125">Transportes</span><span class="sxs-lookup"><span data-stu-id="3b973-125">Transports</span></span>  

 <span data-ttu-id="3b973-126">Los únicos elementos de enlace de transporte permitidos son <xref:System.ServiceModel.Channels.HttpTransportBindingElement> y <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="3b973-126">The only allowed transport binding elements are <xref:System.ServiceModel.Channels.HttpTransportBindingElement> and <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>.</span></span>  
  
### <a name="encoders"></a><span data-ttu-id="3b973-127">Codificadores</span><span class="sxs-lookup"><span data-stu-id="3b973-127">Encoders</span></span>  

 <span data-ttu-id="3b973-128">Se permiten los codificadores siguientes:</span><span class="sxs-lookup"><span data-stu-id="3b973-128">The following encoders are allowed:</span></span>  
  
- <span data-ttu-id="3b973-129">El codificador de texto (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="3b973-129">The text encoder (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span></span>  
  
- <span data-ttu-id="3b973-130">El codificador binario (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="3b973-130">The binary encoder (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span></span>  
  
- <span data-ttu-id="3b973-131">El codificador del mensaje web (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="3b973-131">The Web Message encoder (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span></span>  
  
 <span data-ttu-id="3b973-132">No se admiten los codificadores del mecanismo de optimización de transmisión del mensaje (MTOM).</span><span class="sxs-lookup"><span data-stu-id="3b973-132">The Message Transmission Optimization Mechanism (MTOM) encoders are not supported.</span></span>  
  
### <a name="security"></a><span data-ttu-id="3b973-133">Seguridad</span><span class="sxs-lookup"><span data-stu-id="3b973-133">Security</span></span>  

 <span data-ttu-id="3b973-134">Las aplicaciones de confianza parcial pueden utilizar las características de seguridad de nivel de transporte de WCF para proteger su comunicación.</span><span class="sxs-lookup"><span data-stu-id="3b973-134">Partially-trusted applications can use WCF's transport-level security features for securing their communication.</span></span> <span data-ttu-id="3b973-135">No se admite la seguridad de nivel de mensaje.</span><span class="sxs-lookup"><span data-stu-id="3b973-135">Message-level security is not supported.</span></span> <span data-ttu-id="3b973-136">Al configurar un enlace para que use la seguridad de nivel de mensaje, se produce una excepción en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="3b973-136">Configuring a binding to use message-level security results in an exception at runtime.</span></span>  
  
### <a name="unsupported-bindings"></a><span data-ttu-id="3b973-137">Enlaces no admitidos</span><span class="sxs-lookup"><span data-stu-id="3b973-137">Unsupported Bindings</span></span>  

 <span data-ttu-id="3b973-138">No se admiten los enlaces que utilizan mensajería confiable, transacciones o seguridad del nivel de mensaje.</span><span class="sxs-lookup"><span data-stu-id="3b973-138">Bindings that use reliable messaging, transactions, or message-level security are not supported.</span></span>  
  
## <a name="serialization"></a><span data-ttu-id="3b973-139">Serialización</span><span class="sxs-lookup"><span data-stu-id="3b973-139">Serialization</span></span>  

 <span data-ttu-id="3b973-140">Tanto <xref:System.Runtime.Serialization.DataContractSerializer> como <xref:System.Xml.Serialization.XmlSerializer> se admiten en un entorno de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-140">Both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Xml.Serialization.XmlSerializer> are supported in a partial trust environment.</span></span> <span data-ttu-id="3b973-141">Sin embargo, el uso de <xref:System.Runtime.Serialization.DataContractSerializer> está sujeto a las condiciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="3b973-141">However, use of the <xref:System.Runtime.Serialization.DataContractSerializer> is subject to the following conditions:</span></span>  
  
- <span data-ttu-id="3b973-142">Todos los tipos `[DataContract]` serializables deben ser `public`.</span><span class="sxs-lookup"><span data-stu-id="3b973-142">All serializable `[DataContract]` types must be `public`.</span></span>  
  
- <span data-ttu-id="3b973-143">Todos los campos `[DataMember]` serializables o propiedades en un tipo `[DataContract]` deben ser públicos y de lectura/escritura.</span><span class="sxs-lookup"><span data-stu-id="3b973-143">All serializable `[DataMember]` fields or properties in a `[DataContract]` type must be public and read/write.</span></span> <span data-ttu-id="3b973-144">No se admite la serialización y deserialización de campos de [solo lectura](https://go.microsoft.com/fwlink/?LinkID=98854) cuando se ejecuta WCF en una aplicación de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-144">The serialization and deserialization of [readonly](https://go.microsoft.com/fwlink/?LinkID=98854) fields is not supported when running WCF in a partially-trusted application.</span></span>  
  
- <span data-ttu-id="3b973-145">El modelo de programación `[Serializable]`/ISerializable no se admite en un entorno de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-145">The `[Serializable]`/ISerializable programming model is not supported in a partial trust environment.</span></span>  
  
- <span data-ttu-id="3b973-146">Los tipos conocidos se deben especificar mediante código o configuración del nivel de equipo (machine.config).</span><span class="sxs-lookup"><span data-stu-id="3b973-146">Known types must be specified in code or machine-level configuration (machine.config).</span></span> <span data-ttu-id="3b973-147">Los tipos conocidos no se pueden especificar en la configuración del nivel de de aplicación por razones de seguridad.</span><span class="sxs-lookup"><span data-stu-id="3b973-147">Known types cannot be specified in application-level configuration for security reasons.</span></span>  
  
- <span data-ttu-id="3b973-148">Los tipos que implementan <xref:System.Runtime.Serialization.IObjectReference> inician una excepción en un entorno de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-148">Types that implement <xref:System.Runtime.Serialization.IObjectReference> throw an exception in a partially-trusted environment.</span></span>  
  
 <span data-ttu-id="3b973-149">Consulte la sección relativa a la serialización en el tema [Partial Trust Best Practices](partial-trust-best-practices.md) para obtener más información sobre la seguridad al usar <xref:System.Runtime.Serialization.DataContractSerializer> de manera segura en una aplicación de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-149">See the Serialization section in [Partial Trust Best Practices](partial-trust-best-practices.md) for more information about security when using <xref:System.Runtime.Serialization.DataContractSerializer> safely in a partially-trusted application.</span></span>  
  
### <a name="collection-types"></a><span data-ttu-id="3b973-150">Tipos de colección</span><span class="sxs-lookup"><span data-stu-id="3b973-150">Collection Types</span></span>  

 <span data-ttu-id="3b973-151">Algunos tipos de colección implementan <xref:System.Collections.Generic.IEnumerable%601> y <xref:System.Collections.IEnumerable>.</span><span class="sxs-lookup"><span data-stu-id="3b973-151">Some collection types implement both <xref:System.Collections.Generic.IEnumerable%601> and <xref:System.Collections.IEnumerable>.</span></span> <span data-ttu-id="3b973-152">Los ejemplos incluyen tipos que implementan <xref:System.Collections.Generic.ICollection%601>.</span><span class="sxs-lookup"><span data-stu-id="3b973-152">Examples include types that implement <xref:System.Collections.Generic.ICollection%601>.</span></span> <span data-ttu-id="3b973-153">Tales tipos pueden implementar una implementación `public` de `GetEnumerator()`y una implementación explícita de `GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="3b973-153">Such types can implement a `public` implementation of `GetEnumerator()`, and an explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="3b973-154">En este caso, <xref:System.Runtime.Serialization.DataContractSerializer> invoca la implementación `public` de `GetEnumerator()`y no la implementación explícita de `GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="3b973-154">In this case, <xref:System.Runtime.Serialization.DataContractSerializer> invokes the `public` implementation of `GetEnumerator()`, and not the explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="3b973-155">Si ninguna de las implementaciones de `GetEnumerator()` es `public` y todas son implementaciones explícitas, <xref:System.Runtime.Serialization.DataContractSerializer> invoca a `IEnumerable.GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="3b973-155">If none of the `GetEnumerator()` implementations are `public` and all are explicit implementations, then <xref:System.Runtime.Serialization.DataContractSerializer> invokes `IEnumerable.GetEnumerator()`.</span></span>  
  
 <span data-ttu-id="3b973-156">En el caso de los tipos de colección cuando WCF se está ejecutando en un entorno de confianza parcial, si ninguna de las `GetEnumerator()` implementaciones es `public` , o ninguna de ellas son implementaciones de interfaz explícitas, se produce una excepción de seguridad.</span><span class="sxs-lookup"><span data-stu-id="3b973-156">For collection types when WCF is running in a partial trust environment, if none of the `GetEnumerator()` implementations are `public`, or none of them are explicit interface implementations, then a security exception is thrown.</span></span>  
  
### <a name="netdatacontractserializer"></a><span data-ttu-id="3b973-157">NetDataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="3b973-157">NetDataContractSerializer</span></span>  

 <span data-ttu-id="3b973-158"><xref:System.Collections.Generic.List%601>no admite muchos tipos de colección de .NET Framework, como <xref:System.Collections.ArrayList>, <xref:System.Collections.Generic.Dictionary%602> , <xref:System.Collections.Hashtable> y <xref:System.Runtime.Serialization.NetDataContractSerializer> , en un entorno de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-158">Many .NET Framework collection types such as <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ArrayList>, <xref:System.Collections.Generic.Dictionary%602> and <xref:System.Collections.Hashtable> are not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span> <span data-ttu-id="3b973-159">Estos tipos tienen el atributo `[Serializable]` establecido y, tal y como se explicó previamente en la sección acerca de la serialización, este atributo no se admite en confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-159">These types have the `[Serializable]` attribute set, and as stated previously in the Serialization section, this attribute is not supported in partial trust.</span></span> <span data-ttu-id="3b973-160"><xref:System.Runtime.Serialization.DataContractSerializer> trata las colecciones de una manera especial y, por lo tanto, puede resolver esta restricción, pero <xref:System.Runtime.Serialization.NetDataContractSerializer> no tiene ningún mecanismo para evitarla.</span><span class="sxs-lookup"><span data-stu-id="3b973-160">The <xref:System.Runtime.Serialization.DataContractSerializer> treats collections in a special way and is thus able to get around this restriction, but the <xref:System.Runtime.Serialization.NetDataContractSerializer> has no such mechanism to circumvent this restriction.</span></span>  
  
 <span data-ttu-id="3b973-161"><xref:System.DateTimeOffset> no admite el tipo <xref:System.Runtime.Serialization.NetDataContractSerializer> en confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-161">The <xref:System.DateTimeOffset> type is not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span>  
  
 <span data-ttu-id="3b973-162">No se puede usar un suplente con <xref:System.Runtime.Serialization.NetDataContractSerializer> (mediante el mecanismo <xref:System.Runtime.Serialization.SurrogateSelector> ) cuando se ejecuta con confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-162">A surrogate cannot be used with the <xref:System.Runtime.Serialization.NetDataContractSerializer> (using the <xref:System.Runtime.Serialization.SurrogateSelector> mechanism) when running in partial trust.</span></span> <span data-ttu-id="3b973-163">Observe que esta restricción se aplica al uso de un suplente, no a su serialización.</span><span class="sxs-lookup"><span data-stu-id="3b973-163">Note that this restriction applies to using a surrogate, not to serializing it.</span></span>  
  
## <a name="enabling-common-behaviors-to-run"></a><span data-ttu-id="3b973-164">Habilitación de comportamientos habituales que se van a ejecutar</span><span class="sxs-lookup"><span data-stu-id="3b973-164">Enabling Common Behaviors to Run</span></span>  

 <span data-ttu-id="3b973-165">Los comportamientos de servicio o de extremo que no están marcados con el <xref:System.Security.AllowPartiallyTrustedCallersAttribute> atributo (APTCA) que se agregan a la [\<commonBehaviors>](../../configure-apps/file-schema/wcf/commonbehaviors.md) sección de un archivo de configuración no se ejecutan cuando la aplicación se ejecuta en un entorno de confianza parcial y no se produce ninguna excepción cuando esto ocurre.</span><span class="sxs-lookup"><span data-stu-id="3b973-165">Service or endpoint behaviors not marked with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute (APTCA) that are added to the [\<commonBehaviors>](../../configure-apps/file-schema/wcf/commonbehaviors.md) section of a configuration file are not run when the application runs in a partial trust environment and no exception is thrown when this occurs.</span></span> <span data-ttu-id="3b973-166">Para forzar la ejecución de los comportamientos habituales, debe realizar una de las siguientes opciones:</span><span class="sxs-lookup"><span data-stu-id="3b973-166">To enforce the running of common behaviors, you must do one of the following options:</span></span>  
  
- <span data-ttu-id="3b973-167">Marcar el comportamiento habitual con el atributo <xref:System.Security.AllowPartiallyTrustedCallersAttribute> de modo que pueda ejecutarse cuando se implementa como una aplicación de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-167">Mark your common behavior with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute so that it can run when deployed as a partial trust application.</span></span> <span data-ttu-id="3b973-168">Tenga en cuenta que puede establecerse una entrada de registro en el equipo para evitar que se ejecuten los ensamblados marcados con APTCA.</span><span class="sxs-lookup"><span data-stu-id="3b973-168">Note that a registry entry can be set on the computer to prevent APTCA-marked assemblies from running.</span></span> <span data-ttu-id="3b973-169">.</span><span class="sxs-lookup"><span data-stu-id="3b973-169">.</span></span>  
  
- <span data-ttu-id="3b973-170">Asegurarse de implementar la aplicación como una aplicación de confianza total en la que los usuarios no pueden modificar los valores de la seguridad de acceso del código para ejecutar la aplicación en un entorno de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-170">Ensure that if the application is deployed as a fully-trusted application that users cannot modify the code-access security settings to run the application in a partial trust environment.</span></span> <span data-ttu-id="3b973-171">De poder hacerlo, el comportamiento no se ejecutaría y no se iniciaría ninguna excepción.</span><span class="sxs-lookup"><span data-stu-id="3b973-171">If they can do so, the behavior does not run and no exception is thrown.</span></span> <span data-ttu-id="3b973-172">Para asegurarse de esto, vea la opción **LevelFinal** mediante [Caspol.exe (herramienta de la Directiva de seguridad de acceso del código)](../../tools/caspol-exe-code-access-security-policy-tool.md).</span><span class="sxs-lookup"><span data-stu-id="3b973-172">To ensure this, see the **levelfinal** option using [Caspol.exe (Code Access Security Policy Tool)](../../tools/caspol-exe-code-access-security-policy-tool.md).</span></span>  
  
 <span data-ttu-id="3b973-173">Para obtener un ejemplo de un comportamiento común, consulte [Cómo: bloquear puntos de conexión en la empresa](../extending/how-to-lock-down-endpoints-in-the-enterprise.md).</span><span class="sxs-lookup"><span data-stu-id="3b973-173">For an example of a common behavior, see [How to: Lock Down Endpoints in the Enterprise](../extending/how-to-lock-down-endpoints-in-the-enterprise.md).</span></span>  
  
## <a name="configuration"></a><span data-ttu-id="3b973-174">Configuración</span><span class="sxs-lookup"><span data-stu-id="3b973-174">Configuration</span></span>  

 <span data-ttu-id="3b973-175">Con una excepción, el código de confianza parcial solo puede cargar secciones de configuración de WCF en el `app.config` archivo local.</span><span class="sxs-lookup"><span data-stu-id="3b973-175">With one exception, partially-trusted code can only load WCF configuration sections in the local `app.config` file.</span></span> <span data-ttu-id="3b973-176">Para cargar las secciones de configuración de WCF que hacen referencia a las secciones de WCF en machine.config o en un archivo de web.config raíz, se requiere ConfigurationPermission (Unrestricted).</span><span class="sxs-lookup"><span data-stu-id="3b973-176">To load WCF configuration sections that reference WCF sections in machine.config or in a root web.config file requires ConfigurationPermission(Unrestricted).</span></span> <span data-ttu-id="3b973-177">Sin este permiso, las referencias a las secciones de configuración de WCF (comportamientos, enlaces) fuera del archivo de configuración local producen una excepción cuando se carga la configuración.</span><span class="sxs-lookup"><span data-stu-id="3b973-177">Without this permission, references to WCF configuration sections (behaviors, bindings) outside of the local configuration file results in an exception when the configuration is loaded.</span></span>  
  
 <span data-ttu-id="3b973-178">La única excepción es la configuración de tipos conocidos para la serialización, tal y como se describe en la sección relativa a la serialización de este tema.</span><span class="sxs-lookup"><span data-stu-id="3b973-178">The one exception is known-type configuration for serialization, as described in the Serialization section of this topic.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="3b973-179">Las extensiones de configuración solo se admiten cuando se ejecutan bajo plena confianza.</span><span class="sxs-lookup"><span data-stu-id="3b973-179">Configuration extensions are only supported when running under Full Trust.</span></span>  
  
## <a name="diagnostics"></a><span data-ttu-id="3b973-180">Diagnóstico</span><span class="sxs-lookup"><span data-stu-id="3b973-180">Diagnostics</span></span>  
  
### <a name="event-logging"></a><span data-ttu-id="3b973-181">Registro de eventos</span><span class="sxs-lookup"><span data-stu-id="3b973-181">Event Logging</span></span>  

 <span data-ttu-id="3b973-182">El registro de eventos limitado se admite bajo confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-182">Limited event logging is supported under partial trust.</span></span> <span data-ttu-id="3b973-183">En el registro de eventos solo se registran los errores de activación de servicio y los errores de registro de seguimiento/mensajes.</span><span class="sxs-lookup"><span data-stu-id="3b973-183">Only service activation faults and tracing/message logging failures are logged to the Event Log.</span></span> <span data-ttu-id="3b973-184">El número máximo de eventos que se pueden registrar por proceso es 5, para evitar que se escriban demasiados mensajes en el registro de eventos.</span><span class="sxs-lookup"><span data-stu-id="3b973-184">The maximum number of events that can be logged by a process is 5, to avoid writing excessive messages to the Event Log.</span></span>  
  
### <a name="message-logging"></a><span data-ttu-id="3b973-185">Registro de mensajes</span><span class="sxs-lookup"><span data-stu-id="3b973-185">Message Logging</span></span>  

 <span data-ttu-id="3b973-186">El registro de mensajes no funciona cuando se ejecuta WCF en un entorno de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-186">Message logging does not work when WCF is run in a partial trust environment.</span></span> <span data-ttu-id="3b973-187">Si está habilitado bajo confianza parcial, no produce un error en la activación del servicio, pero no se registra ningún mensaje.</span><span class="sxs-lookup"><span data-stu-id="3b973-187">If enabled under partial trust, it does not fail service activation, but no message is logged.</span></span>  
  
### <a name="tracing"></a><span data-ttu-id="3b973-188">Seguimiento</span><span class="sxs-lookup"><span data-stu-id="3b973-188">Tracing</span></span>  

 <span data-ttu-id="3b973-189">La funcionalidad de seguimiento restringido está disponible al ejecutarse en un entorno de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-189">Restricted tracing functionality is available when running in a partial trust environment.</span></span> <span data-ttu-id="3b973-190">En el `listeners` elemento <> del archivo de configuración, los únicos tipos que puede Agregar son <xref:System.Diagnostics.TextWriterTraceListener> y el nuevo <xref:System.Diagnostics.EventSchemaTraceListener> .</span><span class="sxs-lookup"><span data-stu-id="3b973-190">In the <`listeners`> element in the configuration file, the only types that you can add are <xref:System.Diagnostics.TextWriterTraceListener> and the new <xref:System.Diagnostics.EventSchemaTraceListener>.</span></span> <span data-ttu-id="3b973-191">El uso del <xref:System.Diagnostics.XmlWriterTraceListener> estándar puede producir registros incompletos o incorrectos.</span><span class="sxs-lookup"><span data-stu-id="3b973-191">Use of the standard <xref:System.Diagnostics.XmlWriterTraceListener> may result in incomplete or incorrect logs.</span></span>  
  
 <span data-ttu-id="3b973-192">Los orígenes de seguimiento admitidos son:</span><span class="sxs-lookup"><span data-stu-id="3b973-192">Supported trace sources are:</span></span>  
  
- <xref:System.ServiceModel>  
  
- <xref:System.Runtime.Serialization>  
  
- <span data-ttu-id="3b973-193"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors> y <xref:System.IdentityModel.Tokens>.</span><span class="sxs-lookup"><span data-stu-id="3b973-193"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors>, and <xref:System.IdentityModel.Tokens>.</span></span>  
  
 <span data-ttu-id="3b973-194">No se admiten los siguientes orígenes de seguimiento:</span><span class="sxs-lookup"><span data-stu-id="3b973-194">The following trace sources are not supported:</span></span>  
  
- <span data-ttu-id="3b973-195">CardSpace</span><span class="sxs-lookup"><span data-stu-id="3b973-195">CardSpace</span></span>  
  
- <xref:System.IO.Log>  

- <span data-ttu-id="3b973-196">[System. ServiceModel. Internal. TransactionBridge](/previous-versions/aa346556(v=vs.110))]</span><span class="sxs-lookup"><span data-stu-id="3b973-196">[System.ServiceModel.Internal.TransactionBridge](/previous-versions/aa346556(v=vs.110))]</span></span>
  
 <span data-ttu-id="3b973-197">No se deben especificar los siguientes miembros de la enumeración <xref:System.Diagnostics.TraceOptions> :</span><span class="sxs-lookup"><span data-stu-id="3b973-197">The following members of the <xref:System.Diagnostics.TraceOptions> enumeration should not be specified:</span></span>  
  
- <xref:System.Diagnostics.TraceOptions.Callstack?displayProperty=nameWithType>  
  
- <xref:System.Diagnostics.TraceOptions.ProcessId?displayProperty=nameWithType>  
  
 <span data-ttu-id="3b973-198">Al utilizar el seguimiento en un entorno de confianza parcial, asegúrese de que la aplicación tiene los permisos necesarios para almacenar el resultado del agente de escucha de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="3b973-198">When using tracing in a partial trust environment, ensure that the application has sufficient permissions to store the output of the trace listener.</span></span> <span data-ttu-id="3b973-199">Por ejemplo, al utilizar <xref:System.Diagnostics.TextWriterTraceListener> para escribir el resultado de seguimiento en un archivo de texto, asegúrese de que la aplicación tiene el FileIOPermission necesario exigido para escribir correctamente en el archivo de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="3b973-199">For example, when using the <xref:System.Diagnostics.TextWriterTraceListener> to write trace output to a text file, ensure that the application has the necessary FileIOPermission required to successfully write to the trace file.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="3b973-200">Para evitar inundar los archivos de seguimiento con errores duplicados, WCF deshabilita el seguimiento del recurso o de la acción después del primer error de seguridad.</span><span class="sxs-lookup"><span data-stu-id="3b973-200">To avoid flooding the trace files with duplicate errors, WCF disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="3b973-201">Hay un seguimiento de excepción para cada acceso erróneo a recurso la primera vez que se realiza un intento de tener acceso al recurso o realizar la acción.</span><span class="sxs-lookup"><span data-stu-id="3b973-201">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="wcf-service-host"></a><span data-ttu-id="3b973-202">Host de servicio de WCF</span><span class="sxs-lookup"><span data-stu-id="3b973-202">WCF Service Host</span></span>  

 <span data-ttu-id="3b973-203">El host de servicio WCF no admite la confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="3b973-203">WCF service host does not support partial trust.</span></span> <span data-ttu-id="3b973-204">Si desea usar un servicio WCF en confianza parcial, no use la plantilla de proyecto Biblioteca de servicios WCF de Visual Studio para compilar el servicio.</span><span class="sxs-lookup"><span data-stu-id="3b973-204">If you want to use a WCF service in partial trust, do not use the WCF Service Library Project template in Visual Studio to build your service.</span></span> <span data-ttu-id="3b973-205">En su lugar, cree un nuevo sitio web en Visual Studio; para ello, elija la plantilla sitio web del servicio WCF, que puede hospedar el servicio en un servidor Web en el que se admita la confianza parcial de WCF.</span><span class="sxs-lookup"><span data-stu-id="3b973-205">Instead, create a new Web site in Visual Studio by choosing the WCF service Web site template, which can host the service in a Web server on which WCF partial trust is supported.</span></span>  
  
## <a name="other-limitations"></a><span data-ttu-id="3b973-206">Otras limitaciones</span><span class="sxs-lookup"><span data-stu-id="3b973-206">Other Limitations</span></span>  

  <span data-ttu-id="3b973-207">WCF generalmente se limita a las consideraciones de seguridad impuestas por la aplicación de hospedaje.</span><span class="sxs-lookup"><span data-stu-id="3b973-207">WCF is generally limited to the security considerations imposed upon it by the hosting application.</span></span> <span data-ttu-id="3b973-208">Por ejemplo, si WCF se hospeda en una aplicación de explorador XAML (XBAP), está sujeto a las limitaciones de XBAP, como se describe en [Windows Presentation Foundation la seguridad de confianza parcial](/dotnet/desktop/wpf/wpf-partial-trust-security).</span><span class="sxs-lookup"><span data-stu-id="3b973-208">For example, if WCF is hosted in a XAML Browser Application (XBAP), it is subject to XBAP limitations, as described in [Windows Presentation Foundation Partial Trust Security](/dotnet/desktop/wpf/wpf-partial-trust-security).</span></span>  
  
 <span data-ttu-id="3b973-209">Las características adicionales siguientes no están habilitadas al ejecutar indigo2 en un entorno de confianza parcial:</span><span class="sxs-lookup"><span data-stu-id="3b973-209">The following additional features are not enabled when running indigo2 in a partial trust environment:</span></span>  
  
- <span data-ttu-id="3b973-210">Instrumental de administración de Windows (WMI)</span><span class="sxs-lookup"><span data-stu-id="3b973-210">Windows Management Instrumentation (WMI)</span></span>  
  
- <span data-ttu-id="3b973-211">El registro de eventos solo está parcialmente habilitado (consulte la explicación en la sección **Diagnósticos** ).</span><span class="sxs-lookup"><span data-stu-id="3b973-211">Event logging is only partially enabled (see discussion in **Diagnostics** section).</span></span>  
  
- <span data-ttu-id="3b973-212">Contadores de rendimiento</span><span class="sxs-lookup"><span data-stu-id="3b973-212">Performance counters</span></span>  
  
 <span data-ttu-id="3b973-213">El uso de las características de WCF que no se admiten en un entorno de confianza parcial puede producir excepciones en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="3b973-213">Use of WCF features that are not supported in a partial trust environment may result in exceptions at runtime.</span></span>  
  
## <a name="unlisted-features"></a><span data-ttu-id="3b973-214">Características no enumeradas</span><span class="sxs-lookup"><span data-stu-id="3b973-214">Unlisted Features</span></span>  

 <span data-ttu-id="3b973-215">La mejor manera de detectar que una parte de la información o acción no está disponible al ejecutarse en un entorno de confianza parcial es intentar tener acceso al recurso o realizar la acción dentro de un bloque `try` , y, a continuación, `catch` el error.</span><span class="sxs-lookup"><span data-stu-id="3b973-215">The best way to discover that a piece of information or action is unavailable when running in a partial trust environment is to try to access the resource or do the action inside of a `try` block, and then `catch` the failure.</span></span> <span data-ttu-id="3b973-216">Para evitar inundar los archivos de seguimiento con errores duplicados, WCF deshabilita el seguimiento del recurso o de la acción después del primer error de seguridad.</span><span class="sxs-lookup"><span data-stu-id="3b973-216">To avoid flooding the trace files with duplicate errors, WCF disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="3b973-217">Hay un seguimiento de excepción para cada acceso erróneo a recurso la primera vez que se realiza un intento de tener acceso al recurso o realizar la acción.</span><span class="sxs-lookup"><span data-stu-id="3b973-217">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3b973-218">Vea también</span><span class="sxs-lookup"><span data-stu-id="3b973-218">See also</span></span>

- <xref:System.ServiceModel.Channels.HttpTransportBindingElement>
- <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>
- <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>
- <xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>
- [<span data-ttu-id="3b973-219">Escenarios de implementación admitidos</span><span class="sxs-lookup"><span data-stu-id="3b973-219">Supported Deployment Scenarios</span></span>](supported-deployment-scenarios.md)
- [<span data-ttu-id="3b973-220">Procedimientos recomendados de confianza parcial</span><span class="sxs-lookup"><span data-stu-id="3b973-220">Partial Trust Best Practices</span></span>](partial-trust-best-practices.md)
