---
description: 'Más información acerca de: puesta en cola en WCF'
title: Las colas en WCF
ms.date: 03/30/2017
ms.assetid: e98d76ba-1acf-42cd-b137-0f8214661112
ms.openlocfilehash: 21ba3980d7ef5d043a1bf9fed03e0c98ea34a933
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/06/2021
ms.locfileid: "99733364"
---
# <a name="queuing-in-wcf"></a><span data-ttu-id="cd8d8-103">Las colas en WCF</span><span class="sxs-lookup"><span data-stu-id="cd8d8-103">Queuing in WCF</span></span>

<span data-ttu-id="cd8d8-104">En esta sección se describe cómo usar la comunicación en cola en Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="cd8d8-104">This section describes how to use queued communication in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="queues-as-a-wcf-transport-binding"></a><span data-ttu-id="cd8d8-105">Las colas como enlace de transporte de WCF</span><span class="sxs-lookup"><span data-stu-id="cd8d8-105">Queues as a WCF transport binding</span></span>  

 <span data-ttu-id="cd8d8-106">En WCF, los contratos especifican lo que se intercambia.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-106">In WCF, the contracts specify what is being exchanged.</span></span> <span data-ttu-id="cd8d8-107">Los contratos son intercambios de mensajes que dependen de lo comercial, o intercambios específicos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-107">Contracts are business-dependent or application-specific message exchanges.</span></span> <span data-ttu-id="cd8d8-108">El mecanismo utilizado para intercambiar los mensajes (o el "cómo") se especifica en los enlaces.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-108">The mechanism used to exchange messages (or the "how") is specified in the bindings.</span></span> <span data-ttu-id="cd8d8-109">Los enlaces de WCF encapsulan los detalles del intercambio de mensajes.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-109">Bindings in WCF encapsulate details of the message exchange.</span></span> <span data-ttu-id="cd8d8-110">Exponen botones de configuración para que el usuario controle distintos aspectos del transporte o el protocolo que representan los enlaces.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-110">They expose configuration knobs for the user to control various aspects of the transport or the protocol that the bindings represent.</span></span> <span data-ttu-id="cd8d8-111">La puesta en cola en WCF se trata como cualquier otro enlace de transporte, que es una gran ventaja para muchas aplicaciones de puesta en cola.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-111">Queuing in WCF is treated like any other transport binding, which is a big advantage for many queuing applications.</span></span> <span data-ttu-id="cd8d8-112">Hoy en día, muchas aplicaciones de colas se escriben de manera diferente a otras aplicaciones de estilo distribuido de llamada a procedimiento remoto (RPC), lo que dificulta su seguimiento y mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-112">Today, many queuing applications are written differently from other remote procedure call (RPC)-style distributed applications, making it harder to follow and maintain.</span></span> <span data-ttu-id="cd8d8-113">Con WCF, el estilo de escritura de una aplicación distribuida es muy similar, lo que facilita su seguimiento y mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-113">With WCF, the style of writing a distributed application is much the same, making it easier to follow and maintain.</span></span> <span data-ttu-id="cd8d8-114">Es más, separando la factorización del mecanismo de intercambio de la lógica comercial, es más sencillo configurar el transporte o cambiarlo sin alterar el código específico de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-114">Moreover, by factoring out the mechanism of exchange separately from the business logic, it is easier to configure the transport or make changes to it without affecting application specific code.</span></span> <span data-ttu-id="cd8d8-115">La figura siguiente muestra la estructura de un servicio y un cliente WCF que utilizan MSMQ como transporte.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-115">The following figure illustrates the structure of a WCF service and client using MSMQ as a transport.</span></span>  
  
 <span data-ttu-id="cd8d8-116">![Diagrama de aplicaciones puestas en cola](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span><span class="sxs-lookup"><span data-stu-id="cd8d8-116">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="cd8d8-117">Como puede verse en la figura anterior, el cliente y el servicio sólo tienen que definir las semánticas de la aplicación, es decir, el contrato y la implementación.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-117">As you can see from the preceding figure, the client and service must define only the application semantics, that is, the contract and implementation.</span></span> <span data-ttu-id="cd8d8-118">El servicio configura un enlace en cola con los valores preferentes.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-118">The service configures a queued binding with preferred settings.</span></span> <span data-ttu-id="cd8d8-119">El cliente usa la [herramienta de utilidad de metadatos de ServiceModel (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) para generar un cliente de WCF para el servicio y para generar un archivo de configuración que describe los enlaces que se van a usar para enviar mensajes al servicio.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-119">The client uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) to generate a WCF client to the service and to generate a configuration file that describes the bindings to use to send messages to the service.</span></span> <span data-ttu-id="cd8d8-120">Por lo tanto, para enviar un mensaje en cola, el cliente crea una instancia de un cliente WCF e invoca una operación en él.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-120">Thus, to send a queued message, the client instantiates a WCF client and invokes an operation on it.</span></span> <span data-ttu-id="cd8d8-121">Esto provoca el envío del mensaje a la cola de transmisión y su transferencia a la cola de destino.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-121">This causes the message to be sent to the transmission queue and transferred to the target queue.</span></span> <span data-ttu-id="cd8d8-122">Toda la complejidad de la comunicación en cola permanece oculta a la aplicación que envía y recibe los mensajes.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-122">All the complexities of queued communication are hidden from the application that is sending and receiving messages.</span></span>  
  
 <span data-ttu-id="cd8d8-123">Las advertencias sobre el enlace en cola en WCF incluyen:</span><span class="sxs-lookup"><span data-stu-id="cd8d8-123">Caveats about queued binding in WCF include:</span></span>  
  
- <span data-ttu-id="cd8d8-124">Todas las operaciones de servicio deben ser unidireccionales porque el enlace en cola predeterminado en WCF no admite la comunicación dúplex mediante colas.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-124">All service operations must be one-way because the default queued binding in WCF does not support duplex communication using queues.</span></span> <span data-ttu-id="cd8d8-125">Un ejemplo de comunicación bidireccional ([comunicación bidireccional](../samples/two-way-communication.md)) muestra cómo usar contratos de 2 1 para implementar la comunicación dúplex mediante colas.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-125">A two-way communication sample ([Two-Way Communication](../samples/two-way-communication.md)) illustrates how to use two one-way contracts to implement duplex communication using queues.</span></span>  
  
- <span data-ttu-id="cd8d8-126">Para generar un cliente de WCF mediante el intercambio de metadatos, se requiere un extremo HTTP adicional en el servicio para que se pueda consultar directamente para generar el cliente de WCF y obtener información de enlace para configurar correctamente la comunicación en cola.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-126">To generate a WCF client using metadata exchange requires an additional HTTP endpoint on the service so that it can be queried directly to generate the WCF client and obtain binding information to appropriately configure queued communication.</span></span>  
  
- <span data-ttu-id="cd8d8-127">Según el enlace en cola, se requiere una configuración adicional fuera de WCF.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-127">Based on the queued binding, extra configuration outside of WCF is required.</span></span> <span data-ttu-id="cd8d8-128">Por ejemplo, la <xref:System.ServiceModel.NetMsmqBinding> clase que se suministra con WCF requiere la configuración de los enlaces y la configuración mínima de Message Queuing (MSMQ).</span><span class="sxs-lookup"><span data-stu-id="cd8d8-128">For example, the <xref:System.ServiceModel.NetMsmqBinding> class that is shipped with WCF requires you to configure the bindings as well as minimally configure Message Queuing (MSMQ).</span></span>  
  
 <span data-ttu-id="cd8d8-129">En las secciones siguientes se describen los enlaces en cola específicos que se incluyen con WCF, que se basan en MSMQ.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-129">The following sections describe the specific queued bindings shipped with WCF, which are based on MSMQ.</span></span>  
  
### <a name="msmq"></a><span data-ttu-id="cd8d8-130">MSMQ</span><span class="sxs-lookup"><span data-stu-id="cd8d8-130">MSMQ</span></span>  

 <span data-ttu-id="cd8d8-131">El transporte en cola en WCF utiliza MSMQ para su comunicación en cola.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-131">The queued transport in WCF uses MSMQ for its queued communication.</span></span>  
  
 <span data-ttu-id="cd8d8-132">MSMQ se distribuye como componente opcional de Windows y se ejecuta como un servicio NT.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-132">MSMQ ships as an optional component with Windows and runs as an NT service.</span></span> <span data-ttu-id="cd8d8-133">Captura los mensajes para su transmisión en una cola de transmisión, y para la entrega en una cola de destino.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-133">It captures messages for transmission in a transmission queue and for delivery in a target queue.</span></span> <span data-ttu-id="cd8d8-134">Los administradores de cola de MSMQ implementan un protocolo de transferencias de mensajes de confianza para que los mensajes no se pierdan durante la transmisión.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-134">The MSMQ queue managers implement a reliable message-transfer protocol so that messages are not lost in transmission.</span></span> <span data-ttu-id="cd8d8-135">El protocolo puede ser nativo o basado en SOAP, como el protocolo de mensajes de confianza (SRMP) de SOAP.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-135">The protocol can be either native or SOAP-based, such as the SOAP Reliable Message Protocol (SRMP).</span></span>  
  
 <span data-ttu-id="cd8d8-136">En MSMQ, las colas pueden ser transaccionales o no transaccionales.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-136">In MSMQ, queues can be transactional or non-transactional.</span></span> <span data-ttu-id="cd8d8-137">Una cola transaccional permite capturar los mensajes y entregarlos en una transacción y, a continuación, almacenarlos de manera duradera en la cola.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-137">A transactional queue allows messages to be captured and delivered in a transaction and then stored durably in the queue.</span></span> <span data-ttu-id="cd8d8-138">Los mensajes enviados a una cola transaccional se transfieren con precisión una vez en orden.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-138">Messages sent to a transactional queue are transferred exactly once in order.</span></span> <span data-ttu-id="cd8d8-139">Puede utilizar una cola no transaccional para enviar tanto los mensajes volátiles como los duraderos.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-139">You can use a non-transactional queue to send both volatile and durable messages.</span></span> <span data-ttu-id="cd8d8-140">Un mensaje enviado a una cola no transaccional no posee ninguna garantía de transferencia de confianza, por lo que puede perderse.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-140">A message sent to a non-transactional queue does not carry any reliable transfer assurances; thus, messages can be lost.</span></span>  
  
 <span data-ttu-id="cd8d8-141">Las colas de MSMQ también pueden protegerse utilizando una identidad de Windows registrada con el servicio de directorio Active Directory.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-141">MSMQ queues can also be secured using a Windows identity registered with the Active Directory directory service.</span></span> <span data-ttu-id="cd8d8-142">Al instalar MSMQ puede instalar la integración de Active Directory, para lo que es necesario que el equipo forme parte de una red de dominios de Windows.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-142">When installing MSMQ, you can install Active Directory integration, which requires the computer to be part of a Windows domain network.</span></span>  
  
 <span data-ttu-id="cd8d8-143">Para obtener más información acerca de MSMQ, vea [instalar Message Queue Server (MSMQ)](../samples/installing-message-queuing-msmq.md).</span><span class="sxs-lookup"><span data-stu-id="cd8d8-143">For more information about MSMQ, see [Installing Message Queuing (MSMQ)](../samples/installing-message-queuing-msmq.md).</span></span>  
  
### <a name="netmsmqbinding"></a><span data-ttu-id="cd8d8-144">NetMsmqBinding</span><span class="sxs-lookup"><span data-stu-id="cd8d8-144">NetMsmqBinding</span></span>  

 <span data-ttu-id="cd8d8-145">[\<netMsmqBinding>](../../configure-apps/file-schema/wcf/netmsmqbinding.md)Es el enlace en cola que proporciona WCF para que dos extremos de WCF se comuniquen mediante MSMQ.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-145">The [\<netMsmqBinding>](../../configure-apps/file-schema/wcf/netmsmqbinding.md) is the queued binding WCF provides for two WCF endpoints to communicate using MSMQ.</span></span> <span data-ttu-id="cd8d8-146">Por lo tanto, el enlace expone propiedades que son específicas de MSMQ.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-146">The binding, therefore, exposes properties that are specific to MSMQ.</span></span> <span data-ttu-id="cd8d8-147">No obstante, no todas las características y propiedades MSMQ se exponen en `NetMsmqBinding`.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-147">However, not all MSMQ features and properties are exposed in the `NetMsmqBinding`.</span></span> <span data-ttu-id="cd8d8-148">El `NetMsmqBinding` compacto está diseñado con un conjunto óptimo de características que la mayoría de los clientes debería encontrar suficiente.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-148">The compact `NetMsmqBinding` is designed with an optimal set of features that most customers should find sufficient.</span></span>  
  
 <span data-ttu-id="cd8d8-149">`NetMsmqBinding` expone los conceptos fundamentales de las colas explicados hasta ahora como propiedades de los enlaces.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-149">The `NetMsmqBinding` manifests the core queuing concepts discussed thus far in the form of properties on the bindings.</span></span> <span data-ttu-id="cd8d8-150">Por su parte, estas propiedades comunican a MSMQ cómo transferir y entregar los mensajes.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-150">These properties, in turn, communicate to MSMQ how to transfer and deliver the messages.</span></span> <span data-ttu-id="cd8d8-151">Hay una descripción de las categorías de propiedad en las secciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-151">A discussion of the property categories is in the following sections.</span></span> <span data-ttu-id="cd8d8-152">Para obtener más información, vea los temas conceptuales que describen las propiedades específicas más completamente.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-152">For more information, see the conceptual topics that describe specific properties more completely.</span></span>  
  
#### <a name="exactlyonce-and-durable-properties"></a><span data-ttu-id="cd8d8-153">ExactlyOnce y propiedades durables</span><span class="sxs-lookup"><span data-stu-id="cd8d8-153">ExactlyOnce and Durable Properties</span></span>  

 <span data-ttu-id="cd8d8-154">`ExactlyOnce` y las propiedades `Durable` afectan a cómo los mensajes se transfieren entre las colas:</span><span class="sxs-lookup"><span data-stu-id="cd8d8-154">The `ExactlyOnce` and `Durable` properties affect how messages are transferred between queues:</span></span>  
  
- <span data-ttu-id="cd8d8-155">`ExactlyOnce`: cuando se establece en `true` (el valor predeterminado), el canal en cola garantiza que, si se entrega, el mensaje no se duplica.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-155">`ExactlyOnce`: When set to `true` (the default), the queued channel ensures that the message, if delivered, is not duplicated.</span></span> <span data-ttu-id="cd8d8-156">Además, garantiza que el mensaje no se pierda.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-156">It also ensures that the message is not lost.</span></span> <span data-ttu-id="cd8d8-157">Si no puede entregarse el mensaje, o expira el periodo de vida del mismo antes de poder entregarlo, tanto el mensaje fallido como la razón del error en la entrega se registran en una cola de componentes con problemas de entrega.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-157">If the message cannot be delivered, or the message Time-To Live expires before the message can be delivered, the failed message along with the delivery failure reason is recorded in a dead-letter queue.</span></span> <span data-ttu-id="cd8d8-158">Cuando se establece en `false`, el canal en cola realiza un esfuerzo para transferir el mensaje.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-158">When set to `false`, the queued channel makes an effort to transfer the message.</span></span> <span data-ttu-id="cd8d8-159">En este caso, se puede optar por elegir una cola de mensajes no enviados.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-159">In this case, you can optionally choose a dead-letter queue.</span></span>  
  
- <span data-ttu-id="cd8d8-160">`Durable:` cuando se establece en `true` (el valor predeterminado), el canal en cola garantiza que MSMQ almacena el mensaje en el disco de manera duradera.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-160">`Durable:` When set to `true` (the default), the queued channel ensures that MSMQ stores the message durably on disk.</span></span> <span data-ttu-id="cd8d8-161">Así, si el servicio de MSMQ se detiene y reinicia, los mensajes del disco se transfieren a la cola de destino o se entregan al servicio.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-161">Thus, if the MSMQ service were to stop and restart, the messages on disk is transferred to the target queue or delivered to the service.</span></span> <span data-ttu-id="cd8d8-162">Cuando se establece en `false`, los mensajes se guardan en un almacén volátil y se pierden en caso de que se detenga y reinicie el servicio de MSMQ.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-162">When set to `false`, the messages are stored in volatile store and are lost on stopping and restarting the MSMQ service.</span></span>  
  
 <span data-ttu-id="cd8d8-163">MSMQ exige una cola transaccional para que la transferencia `ExactlyOnce` sea de confianza.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-163">For `ExactlyOnce` reliable transfer, MSMQ requires the queue to be transactional.</span></span> <span data-ttu-id="cd8d8-164">Además, MSMQ exige que la transacción lea desde una cola transaccional.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-164">Also, MSMQ requires a transaction to read from a transactional queue.</span></span> <span data-ttu-id="cd8d8-165">Por lo tanto, cuando utilice `NetMsmqBinding`, recuerde que se requiere una transacción para enviar o recibir mensajes cuando `ExactlyOnce` está establecido en `true`.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-165">As such, when you use the `NetMsmqBinding`, remember that a transaction is required to send or receive messages when `ExactlyOnce` is set to `true`.</span></span> <span data-ttu-id="cd8d8-166">De igual forma, MSMQ exige a la cola que sea no transaccional para una mayor garantía, como cuando `ExactlyOnce` es `false` y en mensajería volátil.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-166">Similarly, MSMQ requires the queue to be non-transactional for best-effort assurances, such as when `ExactlyOnce` is `false` and for volatile messaging.</span></span> <span data-ttu-id="cd8d8-167">Así, al establecer `ExactlyOnce` en `false` o durable en `false`, no puede enviar o recibir mediante una transacción.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-167">Thus, when setting `ExactlyOnce` to `false` or durable to `false`, you cannot send or receive using a transaction.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="cd8d8-168">Asegurarse de que la cola correcta (transaccional o no transaccional) se crea basándose en los valores de los enlaces.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-168">Ensure that the correct queue (transactional or non-transactional) is created based on settings in the bindings.</span></span> <span data-ttu-id="cd8d8-169">Si `ExactlyOnce` es `true`, utilice una cola transaccional; de lo contrario, utilice una cola no transaccional.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-169">If `ExactlyOnce` is `true`, use a transactional queue; otherwise, use a non-transactional queue.</span></span>  
  
#### <a name="dead-letter-queue-properties"></a><span data-ttu-id="cd8d8-170">Propiedades de la cola de mensajes no enviados</span><span class="sxs-lookup"><span data-stu-id="cd8d8-170">Dead-Letter Queue Properties</span></span>  

 <span data-ttu-id="cd8d8-171">La cola de mensajes no enviados se utiliza para guardar los mensajes cuya entrega ha sido fallida.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-171">The dead-letter queue is used to store messages that fail delivery.</span></span> <span data-ttu-id="cd8d8-172">El usuario puede escribir una lógica de compensación que expulse los mensajes fuera de la cola de mensajes no enviados.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-172">The user can write compensating logic that reads messages out of the dead-letter queue.</span></span>  
  
 <span data-ttu-id="cd8d8-173">Muchos sistemas de colas proporcionan una cola de mensajes no enviados para todo el sistema.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-173">Many queuing systems provide for a system-wide dead-letter queue.</span></span> <span data-ttu-id="cd8d8-174">MSMQ proporciona una cola de mensajes no enviados no transaccional para todo el sistema, para los mensajes con entrega fallida en colas no transaccionales; y una cola de mensajes no enviados transaccional para todo el sistema para los mensajes con entrega fallida en colas transaccionales.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-174">MSMQ provides a system-wide non-transactional dead-letter queue for messages that fail delivery to non-transactional queues and a system-wide transactional dead-letter queue for messages that fail delivery to transactional queues.</span></span>  
  
 <span data-ttu-id="cd8d8-175">Si varios clientes que envían mensajes a distintas colas de destino comparten el servicio MSMQ, todos los mensajes enviados por los clientes irán a la misma cola de mensajes no enviados.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-175">If multiple clients sending messages to different target queues share the MSMQ service, all messages sent by the clients go to the same dead-letter queue.</span></span> <span data-ttu-id="cd8d8-176">Esto no siempre es lo mejor.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-176">This is not always preferable.</span></span> <span data-ttu-id="cd8d8-177">Para un mejor aislamiento, WCF y MSMQ en Windows Vista proporcionan una cola de mensajes no enviados personalizada (o una cola de mensajes no enviados específica de la aplicación) que el usuario puede especificar para almacenar los mensajes que no se han podido entregar.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-177">For better isolation, WCF and MSMQ in Windows Vista provide a custom dead-letter queue (or application-specific dead-letter queue) that the user can specify to store messages that fail delivery.</span></span> <span data-ttu-id="cd8d8-178">Por lo tanto, los distintos clientes no comparten la misma cola de mensajes no enviados.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-178">Therefore, different clients do not share the same dead-letter queue.</span></span>  
  
 <span data-ttu-id="cd8d8-179">El enlace tiene dos propiedades interesantes:</span><span class="sxs-lookup"><span data-stu-id="cd8d8-179">The binding has two properties of interest:</span></span>  
  
- <span data-ttu-id="cd8d8-180">`DeadLetterQueue`: esta propiedad es una enumeración que indica si se envía una solicitud a una cola de mensajes no enviados.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-180">`DeadLetterQueue`: This property is an enumeration that indicates whether a dead-letter queue is requested.</span></span> <span data-ttu-id="cd8d8-181">La enumeración también contiene el tipo de cola de mensajes no enviados, en caso de que se solicite uno.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-181">The enumeration also contains the kind of dead-letter queue, if one is requested.</span></span> <span data-ttu-id="cd8d8-182">Los valores son `None`, `System` y `Custom`.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-182">The values are `None`, `System`, and `Custom`.</span></span> <span data-ttu-id="cd8d8-183">Para obtener más información acerca de la interpretación de estas propiedades, consulte [usar colas de Dead-Letter para controlar los errores de transferencia de mensajes](using-dead-letter-queues-to-handle-message-transfer-failures.md)</span><span class="sxs-lookup"><span data-stu-id="cd8d8-183">For more information about the interpretation of these properties, see [Using Dead-Letter Queues to Handle Message Transfer Failures](using-dead-letter-queues-to-handle-message-transfer-failures.md)</span></span>  
  
- <span data-ttu-id="cd8d8-184">`CustomDeadLetterQueue`: esta propiedad es la dirección del identificador uniforme de recursos (URI) de la cola de mensajes no enviados específica de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-184">`CustomDeadLetterQueue`: This property is the Uniform Resource Identifier (URI) address of the application-specific dead-letter queue.</span></span> <span data-ttu-id="cd8d8-185">Esto es necesario si `DeadLetterQueue` .`Custom`</span><span class="sxs-lookup"><span data-stu-id="cd8d8-185">This is required if `DeadLetterQueue`.`Custom`</span></span> <span data-ttu-id="cd8d8-186">se elige.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-186">is chosen.</span></span>  
  
#### <a name="poison-message-handling-properties"></a><span data-ttu-id="cd8d8-187">Propiedades de control de mensajes dudosos</span><span class="sxs-lookup"><span data-stu-id="cd8d8-187">Poison Message Handling properties</span></span>  

 <span data-ttu-id="cd8d8-188">Cuando el servicio lee mensajes de la cola de destino en una transacción, puede no procesar el mensaje debido a distintas razones.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-188">When the service reads messages from the target queue under a transaction, the service may fail to process the message for various reasons.</span></span> <span data-ttu-id="cd8d8-189">En este caso, el mensaje se devuelve a la cola para volver a leerse.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-189">The message is then put back into the queue to be read again.</span></span> <span data-ttu-id="cd8d8-190">Para gestionar los mensajes en los que se producen errores repetidamente, se puede configurar un conjunto propiedades de control de mensajes dudosos en el enlace.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-190">To deal with messages that fail repeatedly, a set of poison-message handling properties can be configured in the binding.</span></span> <span data-ttu-id="cd8d8-191">Hay cuatro propiedades: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay` y `ReceiveErrorHandling`.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-191">There are four properties: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay`, and `ReceiveErrorHandling`.</span></span> <span data-ttu-id="cd8d8-192">Para obtener más información acerca de estas propiedades, vea [control de mensajes dudosos](poison-message-handling.md).</span><span class="sxs-lookup"><span data-stu-id="cd8d8-192">For more information about these properties, see [Poison Message Handling](poison-message-handling.md).</span></span>  
  
#### <a name="security-properties"></a><span data-ttu-id="cd8d8-193">Propiedades de seguridad</span><span class="sxs-lookup"><span data-stu-id="cd8d8-193">Security Properties</span></span>  

 <span data-ttu-id="cd8d8-194">MSMQ expone su propio modelo de seguridad, como las listas de control de acceso (ACL) en una cola o el envío de mensajes autenticados.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-194">MSMQ exposes its own security model, such as access control lists (ACLs) on a queue or sending authenticated messages.</span></span> <span data-ttu-id="cd8d8-195">`NetMsmqBinding` expone estas propiedades de seguridad como parte de sus valores de seguridad de transporte.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-195">The `NetMsmqBinding` exposes these security properties as part of its transport security settings.</span></span> <span data-ttu-id="cd8d8-196">Hay dos propiedades en el enlace para la seguridad de transporte: `MsmqAuthenticationMode` y `MsmqProtectionLevel`.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-196">There are two properties in the binding for transport security: `MsmqAuthenticationMode` and `MsmqProtectionLevel`.</span></span> <span data-ttu-id="cd8d8-197">Los valores de estas propiedades dependen de la configuración de MSMQ.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-197">Settings in these properties depend on how MSMQ is configured.</span></span> <span data-ttu-id="cd8d8-198">Para obtener más información, consulte [protección de mensajes mediante la seguridad de transporte](securing-messages-using-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="cd8d8-198">For more information, see [Securing Messages Using Transport Security](securing-messages-using-transport-security.md).</span></span>  
  
 <span data-ttu-id="cd8d8-199">Además de la seguridad de transporte, el propio mensaje SOAP puede protegerse utilizando la seguridad de mensaje.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-199">In addition to transport security, the actual SOAP message itself can be secured using message security.</span></span> <span data-ttu-id="cd8d8-200">Para obtener más información, consulte [protección de mensajes mediante la seguridad de mensajes](securing-messages-using-message-security.md).</span><span class="sxs-lookup"><span data-stu-id="cd8d8-200">For more information, see [Securing Messages Using Message Security](securing-messages-using-message-security.md).</span></span>  
  
 <span data-ttu-id="cd8d8-201">`MsmqTransportSecurity` también expone dos propiedades, `MsmqEncryptionAlgorithm` y `MsmqHashAlgorithm`.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-201">`MsmqTransportSecurity` also exposes two properties, `MsmqEncryptionAlgorithm` and `MsmqHashAlgorithm`.</span></span> <span data-ttu-id="cd8d8-202">Éstas son enumeraciones de distintos algoritmos que permiten elegir el cifrado de la transferencia cola a cola de mensajes y el algoritmo hash de las firmas.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-202">These are enumerations of different algorithms to choose for queue-to-queue transfer encryption of messages and hashing of the signatures.</span></span>  
  
#### <a name="other-properties"></a><span data-ttu-id="cd8d8-203">Otras propiedades</span><span class="sxs-lookup"><span data-stu-id="cd8d8-203">Other Properties</span></span>  

 <span data-ttu-id="cd8d8-204">Además de las propiedades anteriores, existen otras propiedades específicas de MSMQ expuestas en el enlace:</span><span class="sxs-lookup"><span data-stu-id="cd8d8-204">In addition to the preceding properties, other MSMQ-specific properties exposed in the binding include:</span></span>  
  
- <span data-ttu-id="cd8d8-205">`UseSourceJournal`: una propiedad que indica la activación del registro en el diario de origen.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-205">`UseSourceJournal`: A property to indicate that source journaling is turned on.</span></span> <span data-ttu-id="cd8d8-206">El registro en el diario de origen es una característica de MSMQ que hace un seguimiento de los mensajes transmitidos correctamente desde la cola de transmisión.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-206">Source journaling is an MSMQ feature that keeps track of messages that have been successfully transmitted from the transmission queue.</span></span>  
  
- <span data-ttu-id="cd8d8-207">`UseMsmqTracing`: una propiedad que indica que el seguimiento de la traza de MSMQ está activado.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-207">`UseMsmqTracing`: A property to indicate that MSMQ tracing is turned on.</span></span> <span data-ttu-id="cd8d8-208">El seguimiento de la traza de MSMQ envía mensajes de informe a una cola de informes cada vez que un mensaje sale o llega a un equipo en el que se aloja un administrador de cola de MSMQ.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-208">MSMQ tracing sends report messages to a report queue each time a message leaves or arrives at a machine hosting an MSMQ queue manager.</span></span>  
  
- <span data-ttu-id="cd8d8-209">`QueueTransferProtocol`: una enumeración del protocolo utilizado para las transferencias de mensajes cola a cola.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-209">`QueueTransferProtocol`: An enumeration of the protocol to use for queue-to-queue message transfers.</span></span> <span data-ttu-id="cd8d8-210">MSMQ implementa un protocolo de transferencia cola a cola nativo y un protocolo basado en SOAP, denominado protocolo de mensajería de confianza (SRMP) de SOAP.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-210">MSMQ implements a native queue-to-queue transfer protocol and a SOAP-based protocol called SOAP Reliable Messaging Protocol (SRMP).</span></span> <span data-ttu-id="cd8d8-211">Se utiliza SRMP cuando se recurre al transporte HTTP para las transferencias cola a cola.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-211">SRMP is used when using HTTP transport for queue-to-queue transfers.</span></span> <span data-ttu-id="cd8d8-212">La protección SRMP se utiliza cuando se recurre a HTTPS para las transferencias cola a cola.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-212">SRMP secure is used when using HTTPS for queue-to-queue transfers.</span></span>  
  
- <span data-ttu-id="cd8d8-213">`UseActiveDirectory`: un valor booleano que indica si debe utilizarse Active Directory para la resolución de direcciones de cola.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-213">`UseActiveDirectory`: A Boolean value to indicate whether the Active Directory must be used for queue address resolution.</span></span> <span data-ttu-id="cd8d8-214">De manera predeterminada, está desactivado.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-214">By default, this is off.</span></span> <span data-ttu-id="cd8d8-215">Para obtener más información, consulte [puntos de conexión de servicio y direccionamiento de colas](service-endpoints-and-queue-addressing.md).</span><span class="sxs-lookup"><span data-stu-id="cd8d8-215">For more information, see [Service Endpoints and Queue Addressing](service-endpoints-and-queue-addressing.md).</span></span>  
  
### <a name="msmqintegrationbinding"></a><span data-ttu-id="cd8d8-216">MsmqIntegrationBinding</span><span class="sxs-lookup"><span data-stu-id="cd8d8-216">MsmqIntegrationBinding</span></span>  

 <span data-ttu-id="cd8d8-217">`MsmqIntegrationBinding`Se usa cuando se desea que un punto de conexión de WCF se comunique con una aplicación MSMQ existente escrita en las API de C, C++, com o System. Messaging.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-217">The `MsmqIntegrationBinding` is used when you want a WCF endpoint to communicate with an existing MSMQ application written in C, C++, COM, or System.Messaging APIs.</span></span>  
  
 <span data-ttu-id="cd8d8-218">Las propiedades de enlace son la mismas que para `NetMsmqBinding`.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-218">The binding properties are the same as for `NetMsmqBinding`.</span></span> <span data-ttu-id="cd8d8-219">No obstante, se aplican las siguientes diferencias.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-219">However, the following differences apply:</span></span>  
  
- <span data-ttu-id="cd8d8-220">El contrato de operación para `MsmqIntegrationBinding` está restringido a tomar un único parámetro de tipo <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601>, en el que el parámetro de tipo, es el tipo del cuerpo.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-220">The operation contract for `MsmqIntegrationBinding` is restricted to taking a single parameter of type <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> where the type parameter is the body type.</span></span>  
  
- <span data-ttu-id="cd8d8-221">Muchas de las propiedades de mensaje nativas de MSMQ se exponen en <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> para su uso</span><span class="sxs-lookup"><span data-stu-id="cd8d8-221">Much of MSMQ native message properties are exposed in the <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> for use.</span></span>  
  
- <span data-ttu-id="cd8d8-222">Para facilitar la serialización y deserialización del cuerpo del mensaje, se proporcionan serializadores como XML y ActiveX.</span><span class="sxs-lookup"><span data-stu-id="cd8d8-222">To help with serialization and deserialization of the message body, serializers such as XML and ActiveX are provided.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="cd8d8-223">Código de ejemplo</span><span class="sxs-lookup"><span data-stu-id="cd8d8-223">Sample Code</span></span>  

 <span data-ttu-id="cd8d8-224">Si desea obtener instrucciones paso a paso sobre cómo escribir servicios WCF que usen MSMQ, vea los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="cd8d8-224">For step by step instructions on how to write WCF services that use MSMQ see the following topics:</span></span>  
  
- [<span data-ttu-id="cd8d8-225">Procedimiento para intercambiar mensajes con puntos de conexión de WCF y aplicaciones de Message Queue Server</span><span class="sxs-lookup"><span data-stu-id="cd8d8-225">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)  
  
- [<span data-ttu-id="cd8d8-226">Procedimiento para intercambiar mensajes en cola con puntos de conexión de WCF</span><span class="sxs-lookup"><span data-stu-id="cd8d8-226">How to: Exchange Queued Messages with WCF Endpoints</span></span>](how-to-exchange-queued-messages-with-wcf-endpoints.md)  
  
 <span data-ttu-id="cd8d8-227">Si desea obtener un ejemplo de código completo que muestre el uso de MSMQ en WCF, vea los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="cd8d8-227">For a completed code sample illustrating the use of MSMQ in WCF see the following topics:</span></span>  
  
- [<span data-ttu-id="cd8d8-228">Enlace MSMQ por transacciones</span><span class="sxs-lookup"><span data-stu-id="cd8d8-228">Transacted MSMQ Binding</span></span>](../samples/transacted-msmq-binding.md)  
  
- [<span data-ttu-id="cd8d8-229">Comunicación en cola volátil</span><span class="sxs-lookup"><span data-stu-id="cd8d8-229">Volatile Queued Communication</span></span>](../samples/volatile-queued-communication.md)  
  
- [<span data-ttu-id="cd8d8-230">Colas de mensajes con problemas de entrega</span><span class="sxs-lookup"><span data-stu-id="cd8d8-230">Dead Letter Queues</span></span>](../samples/dead-letter-queues.md)  
  
- [<span data-ttu-id="cd8d8-231">Sesiones y colas</span><span class="sxs-lookup"><span data-stu-id="cd8d8-231">Sessions and Queues</span></span>](../samples/sessions-and-queues.md)  
  
- [<span data-ttu-id="cd8d8-232">Comunicación bidireccional</span><span class="sxs-lookup"><span data-stu-id="cd8d8-232">Two-Way Communication</span></span>](../samples/two-way-communication.md)
  
- [<span data-ttu-id="cd8d8-233">SRMP</span><span class="sxs-lookup"><span data-stu-id="cd8d8-233">SRMP</span></span>](../samples/srmp.md)  
  
- [<span data-ttu-id="cd8d8-234">Seguridad de mensajes mediante Message Queuing</span><span class="sxs-lookup"><span data-stu-id="cd8d8-234">Message Security over Message Queuing</span></span>](../samples/message-security-over-message-queuing.md)  
  
## <a name="see-also"></a><span data-ttu-id="cd8d8-235">Vea también</span><span class="sxs-lookup"><span data-stu-id="cd8d8-235">See also</span></span>

- [<span data-ttu-id="cd8d8-236">Extremos de servicio y direccionamiento de la cola</span><span class="sxs-lookup"><span data-stu-id="cd8d8-236">Service Endpoints and Queue Addressing</span></span>](service-endpoints-and-queue-addressing.md)
- [<span data-ttu-id="cd8d8-237">Alojamiento web de una aplicación en cola</span><span class="sxs-lookup"><span data-stu-id="cd8d8-237">Web Hosting a Queued Application</span></span>](web-hosting-a-queued-application.md)
