---
title: Consideraciones de seguridad con metadatos
ms.date: 03/30/2017
ms.assetid: e78ef8ab-4f63-4656-ab93-b1deab2666d5
ms.openlocfilehash: c41ebf5c39e74932a4bade610c4e236b28444327
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/09/2020
ms.locfileid: "84601028"
---
# <a name="security-considerations-with-metadata"></a><span data-ttu-id="eef15-102">Consideraciones de seguridad con metadatos</span><span class="sxs-lookup"><span data-stu-id="eef15-102">Security Considerations with Metadata</span></span>
<span data-ttu-id="eef15-103">Al usar las características de metadatos en Windows Communication Foundation (WCF), tenga en cuenta las implicaciones de seguridad de la publicación, recuperación y uso de los metadatos de servicio.</span><span class="sxs-lookup"><span data-stu-id="eef15-103">When using the metadata features in Windows Communication Foundation (WCF), consider the security implications of publishing, retrieving, and using service metadata.</span></span>  
  
## <a name="when-to-publish-metadata"></a><span data-ttu-id="eef15-104">Cuándo publicar metadatos</span><span class="sxs-lookup"><span data-stu-id="eef15-104">When to Publish Metadata</span></span>  
 <span data-ttu-id="eef15-105">Los servicios WCF no publican metadatos de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="eef15-105">WCF services do not publish metadata by default.</span></span> <span data-ttu-id="eef15-106">Para publicar los metadatos de un servicio WCF, debe habilitar explícitamente la publicación de metadatos agregando extremos de metadatos al servicio (consulte [metadatos de publicación](publishing-metadata.md)).</span><span class="sxs-lookup"><span data-stu-id="eef15-106">To publish metadata for a WCF service you must explicitly enable metadata publishing by adding metadata endpoints to your service (see [Publishing Metadata](publishing-metadata.md)).</span></span> <span data-ttu-id="eef15-107">Deshabilitar la publicación de metadatos reduce la superficie de ataque de su servicio y disminuye el riesgo de divulgación involuntaria de información.</span><span class="sxs-lookup"><span data-stu-id="eef15-107">Leaving metadata publishing disabled reduces the attack surface for your service and lowers the risk of unintentional information disclosure.</span></span> <span data-ttu-id="eef15-108">No todos los servicios deben publicar metadatos.</span><span class="sxs-lookup"><span data-stu-id="eef15-108">Not all services must publish metadata.</span></span> <span data-ttu-id="eef15-109">Si no tiene que publicar metadatos, considere el mantener esta opción desactivada.</span><span class="sxs-lookup"><span data-stu-id="eef15-109">If you do not have to publish metadata, consider leaving it turned off.</span></span> <span data-ttu-id="eef15-110">Tenga en cuenta que todavía puede generar metadatos y código de cliente directamente desde los ensamblados del servicio mediante la [herramienta de utilidad de metadatos de ServiceModel (SvcUtil. exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="eef15-110">Note that you can still generate metadata and client code directly from your service assemblies using the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span> <span data-ttu-id="eef15-111">Para obtener más información sobre cómo usar SvcUtil. exe para exportar metadatos, vea [Cómo: usar SvcUtil. exe para exportar metadatos desde el código de servicio compilado](how-to-use-svcutil-exe-to-export-metadata-from-compiled-service-code.md).</span><span class="sxs-lookup"><span data-stu-id="eef15-111">For more information about using Svcutil.exe to export metadata, see [How to: Use Svcutil.exe to Export Metadata from Compiled Service Code](how-to-use-svcutil-exe-to-export-metadata-from-compiled-service-code.md).</span></span>  
  
## <a name="publishing-metadata-using-a-secure-binding"></a><span data-ttu-id="eef15-112">Publicar metadatos mediante un enlace seguro</span><span class="sxs-lookup"><span data-stu-id="eef15-112">Publishing Metadata Using a Secure Binding</span></span>  
 <span data-ttu-id="eef15-113">Los enlaces de metadatos predeterminados que proporciona WCF no son seguros y permiten el acceso anónimo a los metadatos.</span><span class="sxs-lookup"><span data-stu-id="eef15-113">The default metadata bindings that WCF provides are not secure and they allow anonymous access to the metadata.</span></span> <span data-ttu-id="eef15-114">Los metadatos de servicio que publica un servicio WCF contienen una descripción detallada del servicio y pueden contener información confidencial intencionada o accidentalmente.</span><span class="sxs-lookup"><span data-stu-id="eef15-114">The service metadata that a WCF service publishes contains a detailed description about the service and may intentionally or unintentionally contain sensitive information.</span></span> <span data-ttu-id="eef15-115">Por ejemplo, los metadatos de servicio pueden contener información sobre operaciones de infraestructura que no se tenía intención de divulgar públicamente.</span><span class="sxs-lookup"><span data-stu-id="eef15-115">For example, service metadata may contain information about infrastructure operations that was not intended to be broadcast publicly.</span></span> <span data-ttu-id="eef15-116">Para proteger los metadatos de servicio de los accesos no autorizados, utilice un enlace de seguridad para el punto de conexión de los metadatos.</span><span class="sxs-lookup"><span data-stu-id="eef15-116">To protect service metadata from unauthorized access, you can use a secure binding for your metadata endpoint.</span></span> <span data-ttu-id="eef15-117">Los puntos de conexión de metadatos responden a las solicitudes HTTP/GET que pueden utilizar la capa de sockets seguros (SSL) para proteger los metadatos.</span><span class="sxs-lookup"><span data-stu-id="eef15-117">Metadata endpoints respond to HTTP/GET requests that can use Secure Sockets Layer (SSL) to secure the metadata.</span></span> <span data-ttu-id="eef15-118">Para obtener más información, consulte [Cómo: proteger los extremos de metadatos](how-to-secure-metadata-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="eef15-118">For more information, see [How to: Secure Metadata Endpoints](how-to-secure-metadata-endpoints.md).</span></span>  
  
 <span data-ttu-id="eef15-119">La protección de los puntos de conexión de metadatos también proporciona un método para que los solicitantes recuperen metadatos de servicio de manera segura, sin el riesgo de manipulación o suplantación.</span><span class="sxs-lookup"><span data-stu-id="eef15-119">Securing your metadata endpoints also provides a way for requesters to securely retrieve service metadata without the risk of tampering or spoofing.</span></span>  
  
## <a name="using-only-trusted-metadata"></a><span data-ttu-id="eef15-120">Utilización únicamente de metadatos de confianza</span><span class="sxs-lookup"><span data-stu-id="eef15-120">Using Only Trusted Metadata</span></span>  
 <span data-ttu-id="eef15-121">Se pueden utilizar metadatos de servicio para construir automáticamente los componentes en tiempo de ejecución necesarios para llamar al servicio.</span><span class="sxs-lookup"><span data-stu-id="eef15-121">You can use service metadata to automatically construct the run-time components required to call the service.</span></span> <span data-ttu-id="eef15-122">Asimismo, pueden utilizarse metadatos en tiempo de diseño para desarrollar una aplicación cliente, o en el tiempo de ejecución para actualizar dinámicamente el enlace utilizado por un cliente para llamar a un servicio.</span><span class="sxs-lookup"><span data-stu-id="eef15-122">You can also use metadata at design time to develop a client application or at runtime to dynamically update the binding a client uses to call a service.</span></span>  
  
 <span data-ttu-id="eef15-123">Los metadatos de servicio pueden manipularse o suplantarse cuando se recuperan de manera insegura.</span><span class="sxs-lookup"><span data-stu-id="eef15-123">Service metadata can be tampered with or spoofed when retrieved in an insecure manner.</span></span> <span data-ttu-id="eef15-124">Los metadatos modificados pueden redirigir el cliente a un servicio malintencionado, incluir parámetros de seguridad comprometedores o contener estructuras XML malintencionadas.</span><span class="sxs-lookup"><span data-stu-id="eef15-124">Tampered metadata can redirect your client to a malicious service, contain compromised security settings, or contain malicious XML structures.</span></span> <span data-ttu-id="eef15-125">Los documentos de metadatos pueden ser grandes y con frecuencia se almacenan en el sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="eef15-125">Metadata documents can be large and are frequently saved to the file system.</span></span> <span data-ttu-id="eef15-126">Para protegerse de la manipulación y suplantación, use un enlace seguro para solicitar los metadatos de servicio cuando haya uno disponible.</span><span class="sxs-lookup"><span data-stu-id="eef15-126">To protect against tampering and spoofing, use a secure binding to request service metadata when one is available.</span></span>  
  
## <a name="using-safe-techniques-for-processing-metadata"></a><span data-ttu-id="eef15-127">Utilización de técnicas seguras para procesar metadatos</span><span class="sxs-lookup"><span data-stu-id="eef15-127">Using Safe Techniques for Processing Metadata</span></span>  
 <span data-ttu-id="eef15-128">Con frecuencia, los metadatos de servicio se recuperan desde un servicio, a través de una red, utilizando protocolos normalizados como WS-MetadataExchange (MEX).</span><span class="sxs-lookup"><span data-stu-id="eef15-128">Service metadata is frequently retrieved from a service over a network using standardized protocols such as WS-MetadataExchange (MEX).</span></span> <span data-ttu-id="eef15-129">Muchos formatos de metadatos incluyen mecanismos de referencia que señalan a metadatos adicionales.</span><span class="sxs-lookup"><span data-stu-id="eef15-129">Many metadata formats include referencing mechanisms for pointing to additional metadata.</span></span> <span data-ttu-id="eef15-130">El tipo <xref:System.ServiceModel.Description.MetadataExchangeClient> procesa automáticamente las referencias a documentos del lenguaje de descripción de servicios Web (WSDL), el esquema XML y documentos MEX.</span><span class="sxs-lookup"><span data-stu-id="eef15-130">The <xref:System.ServiceModel.Description.MetadataExchangeClient> type automatically processes references for you in Web Services Description Language (WSDL) documents, XML Schema, and MEX documents.</span></span> <span data-ttu-id="eef15-131">El tamaño del objeto <xref:System.ServiceModel.Description.MetadataSet> creado a partir de los metadatos recuperados es directamente proporcional al valor <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> para la instancia <xref:System.ServiceModel.Description.MetadataExchangeClient> que se utiliza, y el valor `MaxReceivedMessageSize` para el enlace utilizado por esa instancia <xref:System.ServiceModel.Description.MetadataExchangeClient>.</span><span class="sxs-lookup"><span data-stu-id="eef15-131">The size of the <xref:System.ServiceModel.Description.MetadataSet> object created from the retrieved metadata is directly proportional to the <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> value for the <xref:System.ServiceModel.Description.MetadataExchangeClient> instance that is used and the `MaxReceivedMessageSize` value for the binding being used by that <xref:System.ServiceModel.Description.MetadataExchangeClient> instance.</span></span> <span data-ttu-id="eef15-132">Establezca estas cuotas en los valores adecuados siguiendo el dictado de su escenario.</span><span class="sxs-lookup"><span data-stu-id="eef15-132">Set these quotas to appropriate values as dictated by your scenario.</span></span>  
  
 <span data-ttu-id="eef15-133">En WCF, los metadatos de servicio se procesan como XML.</span><span class="sxs-lookup"><span data-stu-id="eef15-133">In WCF, service metadata is processed as XML.</span></span> <span data-ttu-id="eef15-134">Cuando se procesan documentos XML, las aplicaciones deberían protegerse de las estructuras XML malintencionadas.</span><span class="sxs-lookup"><span data-stu-id="eef15-134">When processing XML documents, applications should protect themselves against malicious XML structures.</span></span> <span data-ttu-id="eef15-135">Use el <xref:System.Xml.XmlDictionaryReader> con las cuotas adecuadas al procesar XML y también establezca la <xref:System.Xml.XmlTextReader.DtdProcessing%2A> propiedad en <xref:System.Xml.DtdProcessing.Prohibit> .</span><span class="sxs-lookup"><span data-stu-id="eef15-135">Use the <xref:System.Xml.XmlDictionaryReader> with appropriate quotas when processing XML and also set the <xref:System.Xml.XmlTextReader.DtdProcessing%2A> property to <xref:System.Xml.DtdProcessing.Prohibit>.</span></span>  
  
 <span data-ttu-id="eef15-136">El sistema de metadatos de WCF es extensible y las extensiones de metadatos pueden registrarse en el archivo de configuración de la aplicación (consulte [extensión del sistema de metadatos](../extending/extending-the-metadata-system.md)).</span><span class="sxs-lookup"><span data-stu-id="eef15-136">The metadata system in WCF is extensible and metadata extensions can be registered in your application configuration file (see [Extending the Metadata System](../extending/extending-the-metadata-system.md)).</span></span> <span data-ttu-id="eef15-137">Las extensiones de metadatos pueden ejecutar código arbitrario, por lo que debería proteger su archivo de configuración de la aplicación con listas de control de acceso (ACL) adecuadas, y registrar sólo implementaciones de extensión de metadatos de confianza.</span><span class="sxs-lookup"><span data-stu-id="eef15-137">Metadata extensions can run arbitrary code, so you should protect your application configuration file with appropriate access control lists (ACLs) and register only trusted metadata extension implementations.</span></span>  
  
## <a name="validating-generated-clients"></a><span data-ttu-id="eef15-138">Validación de los clientes generados</span><span class="sxs-lookup"><span data-stu-id="eef15-138">Validating Generated Clients</span></span>  
 <span data-ttu-id="eef15-139">Al generar código de cliente a partir de los metadatos recuperados de un origen que no es de confianza, valide el código de cliente generado para asegurarse de que el cliente generado cumple las directivas de seguridad de las aplicaciones cliente.</span><span class="sxs-lookup"><span data-stu-id="eef15-139">When generating client code from metadata retrieved from a source that is not trusted, validate the generated client code to ensure that the generated client conforms to your client applications security policies.</span></span> <span data-ttu-id="eef15-140">Puede utilizar un comportamiento de validación para comprobar los valores del enlace del cliente o, inspeccionar visualmente el código generado mediante herramientas.</span><span class="sxs-lookup"><span data-stu-id="eef15-140">You can use a validating behavior to check settings on your client binding or visually inspect code generated by tools.</span></span> <span data-ttu-id="eef15-141">Para obtener un ejemplo de cómo implementar un cliente que valida los comportamientos, consulte [validación de cliente](../samples/client-validation.md).</span><span class="sxs-lookup"><span data-stu-id="eef15-141">For an example of how to implement a client that validates behaviors, see [Client Validation](../samples/client-validation.md).</span></span>  
  
## <a name="protecting-application-configuration-files"></a><span data-ttu-id="eef15-142">Protección de los archivos de configuración de la aplicación</span><span class="sxs-lookup"><span data-stu-id="eef15-142">Protecting Application Configuration Files</span></span>  
 <span data-ttu-id="eef15-143">El archivo de configuración de la aplicación de un servicio puede controlar si se publican metadatos y cómo.</span><span class="sxs-lookup"><span data-stu-id="eef15-143">A service's application configuration file may control how and if metadata is published.</span></span> <span data-ttu-id="eef15-144">Es recomendable proteger el archivo de configuración de la aplicación con listas de control de acceso (ACL) adecuadas, para asegurarse de que un atacante no pueda modificar esos valores.</span><span class="sxs-lookup"><span data-stu-id="eef15-144">It is a good idea to protect the application configuration file with appropriate access control lists (ACLs) to ensure an attacker cannot modify such settings.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="eef15-145">Vea también</span><span class="sxs-lookup"><span data-stu-id="eef15-145">See also</span></span>

- [<span data-ttu-id="eef15-146">Procedimiento para proteger puntos de conexión de metadatos</span><span class="sxs-lookup"><span data-stu-id="eef15-146">How to: Secure Metadata Endpoints</span></span>](how-to-secure-metadata-endpoints.md)
- [<span data-ttu-id="eef15-147">Seguridad</span><span class="sxs-lookup"><span data-stu-id="eef15-147">Security</span></span>](security.md)
