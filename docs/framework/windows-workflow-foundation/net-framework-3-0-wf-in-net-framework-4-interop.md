---
title: Usar actividades de WF de .NET Framework 3.0 en .NET Framework 4 con la actividad Interop
ms.date: 03/30/2017
ms.assetid: 71f112ba-abb0-46f7-b05f-a5d2eb9d0c5c
ms.openlocfilehash: fb9536d5ee7a31039d77deffc3c0b0c7a6263b66
ms.sourcegitcommit: 32a575bf4adccc901f00e264f92b759ced633379
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/04/2019
ms.locfileid: "74802575"
---
# <a name="using-net-framework-30-wf-activities-in-net-framework-4-with-the-interop-activity"></a><span data-ttu-id="8b5b7-102">Usar actividades de WF de .NET Framework 3.0 en .NET Framework 4 con la actividad Interop</span><span class="sxs-lookup"><span data-stu-id="8b5b7-102">Using .NET Framework 3.0 WF Activities in .NET Framework 4 with the Interop Activity</span></span>
<span data-ttu-id="8b5b7-103">La actividad <xref:System.Activities.Statements.Interop> es una actividad [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] (WF 4,5) que contiene una actividad .NET Framework 3,5 (WF 3,5) dentro de un flujo de trabajo de [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8b5b7-103">The <xref:System.Activities.Statements.Interop> activity is a [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] (WF 4.5) activity that wraps a .NET Framework 3.5 (WF 3.5) activity within a [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] workflow.</span></span> <span data-ttu-id="8b5b7-104">La actividad WF 3 puede ser una actividad de hoja única o un árbol completo de actividades.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-104">The WF 3 activity can be a single leaf activity or an entire tree of activities.</span></span> <span data-ttu-id="8b5b7-105">La ejecución (incluida la cancelación y el control de excepciones) y la persistencia de la actividad .NET Framework 3,5 se producen en el contexto del [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] instancia de flujo de trabajo que se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-105">The execution (including cancellation and exception handling) and the persistence of the .NET Framework 3.5 activity occur within the context of the [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] workflow instance that is executing.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8b5b7-106">La actividad <xref:System.Activities.Statements.Interop> no aparece en el cuadro de herramientas del diseñador de flujo de trabajo a menos que el proyecto del flujo de trabajo tenga la configuración de la **plataforma de destino** establecida en **.NET Framework 4,5**.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-106">The <xref:System.Activities.Statements.Interop> activity does not appear in the workflow designer toolbox unless the workflow's project has its **Target Framework** setting set to **.NET Framework 4.5**.</span></span>  
  
## <a name="criteria-for-using-a-wf-3-activity-with-an-interop-activity"></a><span data-ttu-id="8b5b7-107">Criterios para usar una actividad WF 3 con una actividad de interoperabilidad</span><span class="sxs-lookup"><span data-stu-id="8b5b7-107">Criteria for Using a WF 3 Activity with an Interop Activity</span></span>  
 <span data-ttu-id="8b5b7-108">Para ejecutar una actividad WF3 dentro de una actividad <xref:System.Activities.Statements.Interop>, se deben cumplir los siguientes criterios:</span><span class="sxs-lookup"><span data-stu-id="8b5b7-108">For a WF 3 activity to successfully execute within an <xref:System.Activities.Statements.Interop> activity, the following criteria must be met:</span></span>  
  
- <span data-ttu-id="8b5b7-109">La actividad WF 3 debe derivarse de <xref:System.Workflow.ComponentModel.Activity?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-109">The WF 3 activity must derive from <xref:System.Workflow.ComponentModel.Activity?displayProperty=nameWithType>.</span></span>  
  
- <span data-ttu-id="8b5b7-110">La actividad WF 3 debe declararse como `public` y no ser `abstract`.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-110">The WF 3 activity must be declared as `public` and cannot be `abstract`.</span></span>  
  
- <span data-ttu-id="8b5b7-111">La actividad WF 3 debe tener un constructor sin parámetros público.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-111">The WF 3 activity must have a public parameterless constructor.</span></span>  
  
- <span data-ttu-id="8b5b7-112">Debido a las limitaciones en los tipos de interfaz que la actividad <xref:System.Activities.Statements.Interop> puede admitir, <xref:System.Workflow.Activities.HandleExternalEventActivity> y <xref:System.Workflow.Activities.CallExternalMethodActivity> no se pueden usar directamente, aunque se pueden usar actividades derivativas creadas con la herramienta de actividad de comunicación de flujo de trabajo (WCA.exe).</span><span class="sxs-lookup"><span data-stu-id="8b5b7-112">Due to limitations in the interface types that the <xref:System.Activities.Statements.Interop> activity can support, <xref:System.Workflow.Activities.HandleExternalEventActivity> and <xref:System.Workflow.Activities.CallExternalMethodActivity> cannot be used directly, but derivative activities created using the Workflow Communication Activity tool (WCA.exe) can be used.</span></span> <span data-ttu-id="8b5b7-113">Consulte [herramientas de Windows Workflow Foundation](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms734408(v=vs.90)) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-113">See [Windows Workflow Foundation Tools](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms734408(v=vs.90)) for details.</span></span>  
  
## <a name="configuring-a-wf-3-activity-within-an-interop-activity"></a><span data-ttu-id="8b5b7-114">Configurar una actividad WF 3 dentro de una actividad de interoperabilidad</span><span class="sxs-lookup"><span data-stu-id="8b5b7-114">Configuring a WF 3 Activity Within an Interop Activity</span></span>  
 <span data-ttu-id="8b5b7-115">Para configurar y pasar datos dentro y fuera de una actividad WF 3 (a través del límite de interoperabilidad), la actividad <xref:System.Activities.Statements.Interop> expone las propiedades de los metadatos y de la actividad WF 3.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-115">To configure and pass data into and out of a WF 3 activity, across the interoperation boundary, the WF 3 activity’s properties and metadata properties are exposed by the <xref:System.Activities.Statements.Interop> activity.</span></span> <span data-ttu-id="8b5b7-116">Las propiedades de metadatos de la actividad WF 3 (como <xref:System.Workflow.ComponentModel.Activity.Name%2A>) se exponen a través de la colección de <xref:System.Activities.Statements.Interop.ActivityMetaProperties%2A>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-116">The WF 3 activity’s metadata properties (such as <xref:System.Workflow.ComponentModel.Activity.Name%2A>) are exposed through the <xref:System.Activities.Statements.Interop.ActivityMetaProperties%2A> collection.</span></span> <span data-ttu-id="8b5b7-117">Se trata de una colección de valores nombre-valor que se usa para definir los valores para las propiedades de metadatos de la actividad WF 3.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-117">This is a collection of name-value pairs used to define the values for the WF 3 activity’s metadata properties.</span></span> <span data-ttu-id="8b5b7-118">Una propiedad de metadatos es una propiedad respaldada por la propiedad de dependencia para la que se define la marca <xref:System.Workflow.ComponentModel.DependencyPropertyOptions.Metadata>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-118">A metadata property is a property backed by dependency property for which the <xref:System.Workflow.ComponentModel.DependencyPropertyOptions.Metadata> flag is set.</span></span>  
  
 <span data-ttu-id="8b5b7-119">Las propiedades de la actividad WF 3 se exponen mediante la colección de <xref:System.Activities.Statements.Interop.ActivityProperties%2A>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-119">The WF 3 activity’s properties are exposed through the <xref:System.Activities.Statements.Interop.ActivityProperties%2A> collection.</span></span> <span data-ttu-id="8b5b7-120">Se trata de un conjunto de pares nombre-valor, en el que cada valor es un objeto <xref:System.Activities.Argument> que se usa para definir los argumentos para las propiedades de la actividad WF 3.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-120">This is a set of name-value pairs, where each value is a <xref:System.Activities.Argument> object, used to define the arguments for the WF 3 activity’s properties.</span></span> <span data-ttu-id="8b5b7-121">Dado que no se puede inferir la dirección de una propiedad de actividad de WF 3, todas las propiedades se muestran como <xref:System.Activities.InArgument>/<xref:System.Activities.OutArgument> par.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-121">Because the direction of a WF 3 activity property cannot be inferred, every property is surfaced as an <xref:System.Activities.InArgument>/<xref:System.Activities.OutArgument> pair.</span></span> <span data-ttu-id="8b5b7-122">Dependiendo del uso de la actividad de la propiedad, es posible que desee proporcionar una entrada <xref:System.Activities.InArgument>, una entrada <xref:System.Activities.OutArgument> o ambas.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-122">Depending on the activity’s usage of the property, you may want to provide an <xref:System.Activities.InArgument> entry, an <xref:System.Activities.OutArgument> entry, or both.</span></span> <span data-ttu-id="8b5b7-123">El nombre que se espera para la entrada <xref:System.Activities.InArgument> en la colección es el nombre de la propiedad tal y como se define en la actividad WF 3.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-123">The expected name of the <xref:System.Activities.InArgument> entry in the collection is the name of the property as defined on the WF 3 activity.</span></span> <span data-ttu-id="8b5b7-124">El nombre esperado de la entrada <xref:System.Activities.OutArgument> en la colección es una concatenación del nombre de la propiedad y la cadena "out".</span><span class="sxs-lookup"><span data-stu-id="8b5b7-124">The expected name of the <xref:System.Activities.OutArgument> entry in the collection is a concatenation of the name of the property and the string "Out".</span></span>  
  
## <a name="limitations-of-using-a-wf-3-activity-within-an-interop-activity"></a><span data-ttu-id="8b5b7-125">Limitaciones de usar una actividad WF 3 dentro de una actividad de interoperabilidad</span><span class="sxs-lookup"><span data-stu-id="8b5b7-125">Limitations of Using a WF 3 Activity Within an Interop Activity</span></span>  
 <span data-ttu-id="8b5b7-126">Las actividades WF 3 proporcionadas por el sistema no se pueden encapsular en una actividad <xref:System.Activities.Statements.Interop>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-126">The WF 3 system-provided activities cannot be directly wrapped in an <xref:System.Activities.Statements.Interop> activity.</span></span> <span data-ttu-id="8b5b7-127">Para algunas actividades WF 3, como <xref:System.Workflow.Activities.DelayActivity>, esto se debe a que hay una actividad WF 4.5 análoga.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-127">For some WF 3 activities, such as <xref:System.Workflow.Activities.DelayActivity>, this is because there is an analogous WF 4.5 activity.</span></span> <span data-ttu-id="8b5b7-128">En otros casos, esto se debe a que no se admite la funcionalidad de la actividad.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-128">For others, this is because the functionality of the activity is not supported.</span></span> <span data-ttu-id="8b5b7-129">Se pueden usar muchas actividades proporcionadas por el sistema WF 3 dentro de los flujos de trabajo encapsulados por la actividad <xref:System.Activities.Statements.Interop>, aunque sujetas a las siguientes restricciones:</span><span class="sxs-lookup"><span data-stu-id="8b5b7-129">Many WF 3 system-provided activities can be used within workflows wrapped by the <xref:System.Activities.Statements.Interop> activity, subject to the following restrictions:</span></span>  
  
1. <span data-ttu-id="8b5b7-130">No se puede usar <xref:System.ServiceModel.Activities.Send> y <xref:System.ServiceModel.Activities.Receive> en una actividad <xref:System.Activities.Statements.Interop>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-130"><xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> cannot be used in an <xref:System.Activities.Statements.Interop> activity.</span></span>  
  
2. <span data-ttu-id="8b5b7-131">No se pueden usar <xref:System.Workflow.Activities.WebServiceInputActivity>, <xref:System.Workflow.Activities.WebServiceOutputActivity> y <xref:System.Workflow.Activities.WebServiceFaultActivity> en una actividad <xref:System.Activities.Statements.Interop>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-131"><xref:System.Workflow.Activities.WebServiceInputActivity>, <xref:System.Workflow.Activities.WebServiceOutputActivity>, and <xref:System.Workflow.Activities.WebServiceFaultActivity> cannot be used within an <xref:System.Activities.Statements.Interop> activity.</span></span>  
  
3. <span data-ttu-id="8b5b7-132">No se puede usar <xref:System.Workflow.Activities.InvokeWorkflowActivity> en una actividad <xref:System.Activities.Statements.Interop>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-132"><xref:System.Workflow.Activities.InvokeWorkflowActivity> cannot be used within an <xref:System.Activities.Statements.Interop> activity.</span></span>  
  
4. <span data-ttu-id="8b5b7-133">No se puede usar <xref:System.Workflow.ComponentModel.SuspendActivity> en una actividad <xref:System.Activities.Statements.Interop>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-133"><xref:System.Workflow.ComponentModel.SuspendActivity> cannot be used within an <xref:System.Activities.Statements.Interop> activity.</span></span>  
  
5. <span data-ttu-id="8b5b7-134">Las actividades relacionadas con la compensación no se pueden usar dentro de una actividad <xref:System.Activities.Statements.Interop>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-134">Compensation-related activities cannot be used within an <xref:System.Activities.Statements.Interop> activity.</span></span>  
  
 <span data-ttu-id="8b5b7-135">Hay también algunas características de comportamiento que entender según el uso de las actividades WF 3 dentro de la actividad <xref:System.Activities.Statements.Interop>:</span><span class="sxs-lookup"><span data-stu-id="8b5b7-135">There are also some behavioral specifics to understand regarding the use of WF 3 activities within the <xref:System.Activities.Statements.Interop> activity:</span></span>  
  
1. <span data-ttu-id="8b5b7-136">Las actividades WF 3 incluidas en una actividad <xref:System.Activities.Statements.Interop> se inicializan cuando se ejecuta la actividad <xref:System.Activities.Statements.Interop>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-136">WF 3 activities contained within an <xref:System.Activities.Statements.Interop> activity are initialized when the <xref:System.Activities.Statements.Interop> activity is executed.</span></span> <span data-ttu-id="8b5b7-137">En WF 4.5 no hay ninguna fase de inicialización para una instancia de flujo de trabajo antes de su ejecución.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-137">In WF 4.5 there is no initialization phase for a workflow instance prior to its execution.</span></span>  
  
2. <span data-ttu-id="8b5b7-138">El runtime de WF 4.5 no controla el estado de la instancia de flujo de trabajo cuando comienza una transacción, independientemente del lugar donde empiece (dentro o fuera de una actividad <xref:System.Activities.Statements.Interop> ).</span><span class="sxs-lookup"><span data-stu-id="8b5b7-138">The WF 4.5 runtime does not checkpoint workflow instance state when a transaction begins, regardless of where that transaction begins (within or outside of an <xref:System.Activities.Statements.Interop> activity).</span></span>  
  
3. <span data-ttu-id="8b5b7-139">Los registros de seguimiento de WF 3 para las actividades dentro de una actividad <xref:System.Activities.Statements.Interop> se proporcionan a los participantes de seguimiento de WF 4.5 como objetos <xref:System.Activities.Tracking.InteropTrackingRecord>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-139">WF 3 tracking records for activities within an <xref:System.Activities.Statements.Interop> activity are provided to WF 4.5 tracking participants as <xref:System.Activities.Tracking.InteropTrackingRecord> objects.</span></span> <span data-ttu-id="8b5b7-140"><xref:System.Activities.Tracking.InteropTrackingRecord> es un derivado de <xref:System.Activities.Tracking.CustomTrackingRecord>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-140"><xref:System.Activities.Tracking.InteropTrackingRecord> is a derivative of <xref:System.Activities.Tracking.CustomTrackingRecord>.</span></span>  
  
4. <span data-ttu-id="8b5b7-141">Una actividad personalizada WF 3 puede tener acceso a los datos usando las colas del flujo de trabajo incluidas en el entorno de interoperación exactamente de la misma manera que dentro del tiempo de ejecución del flujo de trabajo de WF 3.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-141">A WF 3 custom activity can access data using workflow queues within the interoperation environment in exactly the same way as within the WF 3 workflow runtime.</span></span> <span data-ttu-id="8b5b7-142">No se requiere ningún cambio en el código de actividad personalizado.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-142">No custom activity code changes are required.</span></span> <span data-ttu-id="8b5b7-143">En el host, los datos son colocan en una cola de flujo de trabajo de WF 3 al reanudar <xref:System.Activities.Bookmark>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-143">On the host, data is enqueued to a WF 3 workflow queue by resuming a <xref:System.Activities.Bookmark>.</span></span> <span data-ttu-id="8b5b7-144">El nombre del marcador es la forma de la cadena del nombre de la cola de flujo de trabajo <xref:System.IComparable>.</span><span class="sxs-lookup"><span data-stu-id="8b5b7-144">The name of the bookmark is the string form of the <xref:System.IComparable> workflow queue name.</span></span>
