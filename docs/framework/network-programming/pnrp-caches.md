---
title: Cachés PNRP
ms.date: 03/30/2017
ms.assetid: 270068d9-1b6b-4eb9-9e14-e02326bb88df
ms.openlocfilehash: 3ed3e11e702c8933b500421de5654b212cdd80d8
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/15/2020
ms.locfileid: "64622992"
---
# <a name="pnrp-caches"></a><span data-ttu-id="f79b9-102">Cachés PNRP</span><span class="sxs-lookup"><span data-stu-id="f79b9-102">PNRP Caches</span></span>
<span data-ttu-id="f79b9-103">Las cachés del Protocolo de resolución de nombres de mismo nivel (PNRP) son colecciones locales de puntos de conexión de mismo nivel seleccionados de forma algorítmica y mantenidos en el elemento de mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="f79b9-103">Peer Name Resolution Protocol (PNRP) caches are local collections of algorithmically selected peer endpoints maintained on the peer.</span></span>  
  
## <a name="pnrp-cache-initialization"></a><span data-ttu-id="f79b9-104">Inicialización de la caché de PNRP</span><span class="sxs-lookup"><span data-stu-id="f79b9-104">PNRP Cache Initialization</span></span>  
 <span data-ttu-id="f79b9-105">Para inicializar la caché de PNRP, o la colección de registros de nombre de mismo nivel cuando se inicia un nodo de mismo nivel, un nodo puede usar los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="f79b9-105">To initialize the PNRP cache, or Peer Name Record Collection, when a peer node starts up, a node can use the following methods:</span></span>  
  
- <span data-ttu-id="f79b9-106">Las entradas de caché persistente que se encontraban cuando se cerró el nodo se cargan desde el almacenamiento de disco duro.</span><span class="sxs-lookup"><span data-stu-id="f79b9-106">Persistent cache entries that were present when the node was shut down are loaded from hard disk storage.</span></span>  
  
- <span data-ttu-id="f79b9-107">Si una aplicación usa la infraestructura de colaboración P2P, la información de colaboración está disponible en el Administrador de contactos para ese nodo.</span><span class="sxs-lookup"><span data-stu-id="f79b9-107">If an application uses the P2P collaboration infrastructure, collaboration information is available in the Contact Manager for that node.</span></span>  
  
## <a name="scaling-peer-name-resolution-with-a-multi-level-cache"></a><span data-ttu-id="f79b9-108">Escalado de la resolución de nombres de mismo nivel con una caché de varios niveles</span><span class="sxs-lookup"><span data-stu-id="f79b9-108">Scaling Peer Name Resolution with a Multi-Level Cache</span></span>  
 <span data-ttu-id="f79b9-109">Para mantener reducidos los tamaños de las caché de PNRP, los nodos de mismo nivel usan una caché de varios niveles en la que cada nivel contiene un número máximo de entradas.</span><span class="sxs-lookup"><span data-stu-id="f79b9-109">To keep the sizes of the PNRP caches small, peer nodes use a multi-level cache, in which each level contains a maximum number of entries.</span></span> <span data-ttu-id="f79b9-110">Cada nivel de la memoria caché representa una parte que es una décima parte menor del espacio de números de identificador PNRP (2<sup>256</sup>).</span><span class="sxs-lookup"><span data-stu-id="f79b9-110">Each level in the cache represents a one tenth smaller portion of the PNRP ID number space (2<sup>256</sup>).</span></span> <span data-ttu-id="f79b9-111">El nivel más bajo en la memoria caché contiene un identificador PNRP registrado localmente y otros identificadores PNRP que están numéricamente cerca de él.</span><span class="sxs-lookup"><span data-stu-id="f79b9-111">The lowest level in the cache contains a locally registered PNRP ID and other PNRP IDs that are numerically close to it.</span></span> <span data-ttu-id="f79b9-112">Cuando un nivel de la memoria caché se rellena con un máximo de 20 entradas, se crea un nuevo nivel inferior.</span><span class="sxs-lookup"><span data-stu-id="f79b9-112">As a level of the cache is filled with a maximum of 20 entries, a new lower level is created.</span></span> <span data-ttu-id="f79b9-113">El número máximo de niveles en la memoria caché es del orden de log10(número total de identificadores PNRP en la nube).</span><span class="sxs-lookup"><span data-stu-id="f79b9-113">The maximum number of levels in the cache is on the order of log10(Total number of PNRP IDs in the cloud).</span></span> <span data-ttu-id="f79b9-114">Por ejemplo, para una nube global con 100 millones de identificadores PNRP, no hay más de 8 (=log10(100,000,000)) niveles en la memoria caché y un número similar de saltos para resolver un identificador PNRP durante la resolución de nombres.</span><span class="sxs-lookup"><span data-stu-id="f79b9-114">For example, for a global cloud with 100 million PNRP IDs, there are no more than 8 (=log10(100,000,000)) levels in the cache and a similar number of hops to resolve a PNRP ID during name resolution.</span></span> <span data-ttu-id="f79b9-115">Este mecanismo permite una tabla hash distribuida para la que se puede resolver un identificador PNRP arbitrario mediante el reenvío de mensajes de solicitud de PNRP al siguiente elemento de mismo nivel más cercano hasta que se encuentra el elemento de mismo nivel con la CPA correspondiente.</span><span class="sxs-lookup"><span data-stu-id="f79b9-115">This mechanism allows for a distributed hash table for which an arbitrary PNRP ID can be resolved by forwarding PNRP Request messages to the next-closest peer until the peer with the corresponding CPA is found.</span></span>  
  
 <span data-ttu-id="f79b9-116">Para asegurarse de que se puede completar la resolución, cada vez que un nodo agrega una entrada al nivel más bajo de su caché, envía una copia de la entrada a todos los nodos en el último nivel de la caché.</span><span class="sxs-lookup"><span data-stu-id="f79b9-116">To ensure that resolution can complete, each time a node adds an entry to the lowest level of its cache, it floods a copy of the entry to all the nodes within the last level of the cache.</span></span>  
  
 <span data-ttu-id="f79b9-117">Las entradas de caché se actualizan con el tiempo.</span><span class="sxs-lookup"><span data-stu-id="f79b9-117">The cache entries are refreshed over time.</span></span> <span data-ttu-id="f79b9-118">Las entradas de caché que están obsoletas se quitan de la caché.</span><span class="sxs-lookup"><span data-stu-id="f79b9-118">Cache entries that are stale are removed from the cache.</span></span> <span data-ttu-id="f79b9-119">El resultado es que la tabla hash distribuida de identificadores PNRP se basa en los puntos de conexión activos, a diferencia de DNS, donde los registros de dirección y el protocolo DNS no proporcionan ninguna garantía de que el nodo asociado con la dirección esté activo en la red.</span><span class="sxs-lookup"><span data-stu-id="f79b9-119">The result is that the distributed hash table of PNRP IDs is based on active endpoints, unlike DNS in which address records and the DNS protocol provide no guarantee that the node associated with the address is actively on the network.</span></span>  
  
## <a name="other-pnrp-caches"></a><span data-ttu-id="f79b9-120">Otras cachés de PNRP</span><span class="sxs-lookup"><span data-stu-id="f79b9-120">Other PNRP Caches</span></span>  
 <span data-ttu-id="f79b9-121">Otro almacén de datos persistente es la memoria caché local.</span><span class="sxs-lookup"><span data-stu-id="f79b9-121">Another persistent data store is the local cache.</span></span>  <span data-ttu-id="f79b9-122">Además de los otros objetos necesarios para la actividad de PNRP, puede incluir los registros asociados con una sesión en la nube o de colaboración PNRP que se publica y se sincroniza entre todos los miembros de la nube de forma segura.</span><span class="sxs-lookup"><span data-stu-id="f79b9-122">In addition to the other objects needed for PNRP activity, it may include the records associated with a PNRP cloud or collaboration session that is securely published and synchronized between all the members of the cloud.</span></span> <span data-ttu-id="f79b9-123">Este almacén replicado representa la vista de los datos del grupo, que debe ser la misma para todos los miembros del grupo.</span><span class="sxs-lookup"><span data-stu-id="f79b9-123">This replicated store represents the view of the group data, which should be the same for all group members.</span></span> <span data-ttu-id="f79b9-124">Técnicamente, estos objetos no son registros por sí mismos, sino datos de aplicación, presencia y objeto destinados a una memoria caché local.</span><span class="sxs-lookup"><span data-stu-id="f79b9-124">Technically, these objects are not records per se, but rather application, presence, and object data destined for a local cache.</span></span> <span data-ttu-id="f79b9-125">El uso de la nube PNRP garantiza que los objetos se propaguen a todos los nodos de la sesión de colaboración o en la nube PNRP.</span><span class="sxs-lookup"><span data-stu-id="f79b9-125">Use of the PNRP cloud ensures that objects are propagated to all nodes in the collaboration session or PNRP cloud.</span></span>  <span data-ttu-id="f79b9-126">La replicación de registros entre los miembros de la nube usa SSL para proporcionar cifrado e integridad de datos.</span><span class="sxs-lookup"><span data-stu-id="f79b9-126">Record replication between cloud members uses SSL to provide encryption and data integrity.</span></span>  
  
 <span data-ttu-id="f79b9-127">Cuando un equipo de mismo nivel se une a una nube, no recibe automáticamente datos de la memoria caché local del host de mismo nivel al que se conecta; tiene que suscribirse al host de mismo nivel para recibir actualizaciones de los datos de aplicación, presencia y objeto.</span><span class="sxs-lookup"><span data-stu-id="f79b9-127">When a peer joins a cloud, they do not automatically receive local cache data from the host peer to which they attach; they have to subscribe to the host peer to receive updates in application, presence, and object data.</span></span> <span data-ttu-id="f79b9-128">Después de la sincronización inicial, los equipos de mismo nivel resincronizan periódicamente sus almacenes replicados para garantizar que todos los miembros del grupo tengan la misma vista.</span><span class="sxs-lookup"><span data-stu-id="f79b9-128">After the initial synchronization, peers periodically resynchronize their replicated stores to ensure that all group members consistently have the same view.</span></span>  <span data-ttu-id="f79b9-129">La sesión de colaboración o las aplicaciones dentro de la sesión de colaboración también pueden realizar la misma función.</span><span class="sxs-lookup"><span data-stu-id="f79b9-129">The collaboration session or applications within the collaboration session may also perform the same function.</span></span>  
  
 <span data-ttu-id="f79b9-130">Una vez iniciada una sesión de colaboración para una nube, las aplicaciones pueden registrar elementos de mismo nivel y empezar a publicar su información con la seguridad definida por el ámbito de nube.</span><span class="sxs-lookup"><span data-stu-id="f79b9-130">After a collaboration session has begun for a cloud, applications can register peers and begin publishing their information using the security defined by the cloud scope.</span></span> <span data-ttu-id="f79b9-131">Cuando un equipo del mismo nivel se une a una nube, los mecanismos de seguridad de la nube se aplican a ese equipo, dándole un ámbito en el que participar.</span><span class="sxs-lookup"><span data-stu-id="f79b9-131">When a peer joins a cloud, the security mechanisms for the cloud are applied to the peer, giving it a scope in which to participate.</span></span>  <span data-ttu-id="f79b9-132">Después, sus registros se pueden publicar de forma segura desde del ámbito de la nube.</span><span class="sxs-lookup"><span data-stu-id="f79b9-132">Its records can then be published securely within the scope of the cloud.</span></span> <span data-ttu-id="f79b9-133">Tenga en cuenta que el ámbito de nube no puede ser el mismo que el ámbito de la aplicación de colaboración.</span><span class="sxs-lookup"><span data-stu-id="f79b9-133">Note that cloud scope may not be the same as collaboration application scope.</span></span>  
  
 <span data-ttu-id="f79b9-134">Los equipos de mismo nivel pueden registrar su interés por recibir objetos de otros equipos de mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="f79b9-134">Peers can register interest in receiving objects from other peers.</span></span> <span data-ttu-id="f79b9-135">Cuando se actualiza un objeto, se notifica a la aplicación de colaboración y el nuevo objeto se pasa a todos los suscriptores de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f79b9-135">When an object is updated, the collaboration application is notified and the new object is passed to all subscribers of the application.</span></span> <span data-ttu-id="f79b9-136">Por ejemplo, un equipo de mismo nivel en una aplicación de chat de grupo puede registrar su interés en recibir información de la aplicación, que se enviará todos los registros de chat como datos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f79b9-136">For example, a peer in a group chat application can register interest in receiving application information, which will send it all chat records as application data.</span></span>  <span data-ttu-id="f79b9-137">Esto le permite supervisar la actividad de chat dentro de la nube.</span><span class="sxs-lookup"><span data-stu-id="f79b9-137">This allows it to monitor chat activity within the cloud.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f79b9-138">Vea también</span><span class="sxs-lookup"><span data-stu-id="f79b9-138">See also</span></span>

- <xref:System.Net.PeerToPeer>
