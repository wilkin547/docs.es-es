---
title: Mpgo.exe (Herramienta de optimización guiada por perfiles administrados)
description: Use Mpgo.exe, la Herramienta de optimización guiada por perfiles administrados. Con esta herramienta, podrá optimizar los ensamblados de imágenes nativas creados por el Generador de imágenes nativas (Ngen.exe).
ms.date: 03/30/2017
helpviewer_keywords:
- Mpgo.exe
- training scenarios, generating profiles with
- Managed Profile Guided Optimization Tool
- Ngen.exe
- Ngen.exe, profilers and native images
ms.assetid: f6976502-a000-4fbe-aaf5-a7aab9ce4ec2
ms.openlocfilehash: 050822d12ef4e0a7dfa752e4789f9861c4894cfa
ms.sourcegitcommit: 9c589b25b005b9a7f87327646020eb85c3b6306f
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2021
ms.locfileid: "102259387"
---
# <a name="mpgoexe-managed-profile-guided-optimization-tool"></a><span data-ttu-id="713d1-104">Mpgo.exe (Herramienta de optimización guiada por perfiles administrados)</span><span class="sxs-lookup"><span data-stu-id="713d1-104">Mpgo.exe (Managed Profile Guided Optimization Tool)</span></span>

<span data-ttu-id="713d1-105">La herramienta de optimización guiada por perfiles administrados (Mpgo.exe) es una herramienta de línea de comandos que usa escenarios de usuario final comunes para optimizar los ensamblados de imagen nativa creados por el [Generador de imágenes nativas (Ngen.exe)](ngen-exe-native-image-generator.md).</span><span class="sxs-lookup"><span data-stu-id="713d1-105">The Managed Profile Guided Optimization Tool (Mpgo.exe) is a command-line tool that uses common end-user scenarios to optimize the native image assemblies that are created by the [Native Image Generator (Ngen.exe)](ngen-exe-native-image-generator.md).</span></span> <span data-ttu-id="713d1-106">Esta herramienta permite ejecutar escenarios de aprendizaje que generan datos de perfil.</span><span class="sxs-lookup"><span data-stu-id="713d1-106">This tool enables you to run training scenarios that generate profile data.</span></span> <span data-ttu-id="713d1-107">El [Generador de imágenes nativas (Ngen.exe)](ngen-exe-native-image-generator.md) usa estos datos para optimizar los ensamblados de aplicación de imagen nativa generados.</span><span class="sxs-lookup"><span data-stu-id="713d1-107">The [Native Image Generator (Ngen.exe)](ngen-exe-native-image-generator.md) uses this data to optimize its generated native image application assemblies.</span></span> <span data-ttu-id="713d1-108">Un escenario de aprendizaje es una ejecución de prueba de un uso previsto de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="713d1-108">A training scenario is a trial run of an expected use of your application.</span></span> <span data-ttu-id="713d1-109">Mpgo.exe está disponible en Visual Studio Ultimate 2012 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="713d1-109">Mpgo.exe is available in Visual Studio Ultimate 2012 and later versions.</span></span> <span data-ttu-id="713d1-110">A partir de Visual Studio 2013, también puede usar Mpgo.exe para optimizar las aplicaciones de la Tienda Windows 8.x.</span><span class="sxs-lookup"><span data-stu-id="713d1-110">Starting with Visual Studio 2013, you can also use Mpgo.exe to optimize Windows 8.x Store apps.</span></span>

<span data-ttu-id="713d1-111">La optimización guiada por perfiles mejora el tiempo de inicio de la aplicación, el uso de la memoria (tamaño del espacio de trabajo) y el rendimiento mediante la recopilación de datos procedentes de escenarios de aprendizaje y el uso de dichos datos para optimizar el diseño de las imágenes nativas.</span><span class="sxs-lookup"><span data-stu-id="713d1-111">Profile-guided optimization improves application startup time, memory utilization (working set size), and throughput by gathering data from training scenarios and using it to optimize the layout of native images.</span></span>

<span data-ttu-id="713d1-112">Si encuentra problemas de rendimiento relacionados con el tiempo de inicio y el tamaño del espacio de trabajo de los ensamblados de Lenguaje intermedio (IL), le recomendamos que primero use Ngen.exe para eliminar los costos de compilación Just-In-Time (JIT) y facilitar el uso compartido de código.</span><span class="sxs-lookup"><span data-stu-id="713d1-112">When you encounter performance issues with startup time and working set size for Intermediate Language (IL) assemblies, we recommend that you first use Ngen.exe to eliminate just-in-time (JIT) compilation costs and to facilitate code sharing.</span></span> <span data-ttu-id="713d1-113">Si necesita mejoras adicionales, después puede usar Mpgo.exe para optimizar aún más la aplicación.</span><span class="sxs-lookup"><span data-stu-id="713d1-113">If you need additional improvements, you can then use Mpgo.exe to further optimize your application.</span></span> <span data-ttu-id="713d1-114">Puede usar los datos de rendimiento de los ensamblados de imagen nativa no optimizados como línea base para evaluar las mejoras de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="713d1-114">You can use the performance data from the un-optimized native image assemblies as a baseline to evaluate the performance gains.</span></span> <span data-ttu-id="713d1-115">Mpgo.exe puede agilizar los tiempos de inicio en frío y reducir el tamaño del espacio de trabajo.</span><span class="sxs-lookup"><span data-stu-id="713d1-115">Using Mpgo.exe may result in faster cold startup times and a smaller working set size.</span></span> <span data-ttu-id="713d1-116">Mpgo.exe agrega información a los ensamblados de IL que Ngen.exe usa para crear ensamblados de imagen nativa optimizados.</span><span class="sxs-lookup"><span data-stu-id="713d1-116">Mpgo.exe adds information to IL assemblies that Ngen.exe uses to create optimized native image assemblies.</span></span> <span data-ttu-id="713d1-117">Para obtener más información, vea la entrada sobre cómo [mejorar el rendimiento de inicio de las aplicaciones de escritorio](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/) del blog de .NET.</span><span class="sxs-lookup"><span data-stu-id="713d1-117">For more information, see the entry [Improving Launch Performance for your Desktop Applications](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/) in the .NET blog.</span></span>

<span data-ttu-id="713d1-118">Esta herramienta se instala automáticamente con Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="713d1-118">This tool is automatically installed with Visual Studio.</span></span> <span data-ttu-id="713d1-119">Para ejecutar la herramienta, use un [shell de línea de comandos para desarrolladores](/visualstudio/ide/reference/command-prompt-powershell) con credenciales de administrador.</span><span class="sxs-lookup"><span data-stu-id="713d1-119">To run the tool, use a [developer command-line shell](/visualstudio/ide/reference/command-prompt-powershell) with administrator credentials.</span></span>

<span data-ttu-id="713d1-120">En el símbolo del sistema, escriba el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="713d1-120">Enter the following command at the command prompt:</span></span>

<span data-ttu-id="713d1-121">Para aplicaciones de escritorio:</span><span class="sxs-lookup"><span data-stu-id="713d1-121">For desktop apps:</span></span>

```console
mpgo –Scenario <command> [-Import <directory>] –AssemblyList <assembly1>  <assembly2> ... -OutDir <directory> [options]
```

<span data-ttu-id="713d1-122">Para aplicaciones de la Tienda Windows 8.x:</span><span class="sxs-lookup"><span data-stu-id="713d1-122">For Windows 8.x Store apps:</span></span>

```console
mpgo –Scenario <packageName> -AppID <appId> -Timeout <seconds>
```

## <a name="parameters"></a><span data-ttu-id="713d1-123">Parámetros</span><span class="sxs-lookup"><span data-stu-id="713d1-123">Parameters</span></span>

 <span data-ttu-id="713d1-124">Ninguno de los argumentos de Mpgo.exe distingue entre mayúsculas y minúsculas.</span><span class="sxs-lookup"><span data-stu-id="713d1-124">All arguments to Mpgo.exe are case-insensitive.</span></span> <span data-ttu-id="713d1-125">Los comandos llevan como prefijo un guion.</span><span class="sxs-lookup"><span data-stu-id="713d1-125">Commands are prefixed with a dash.</span></span>

> [!NOTE]
> <span data-ttu-id="713d1-126">Puede usar `–Scenario` o `–Import` como comando requerido, pero no ambos.</span><span class="sxs-lookup"><span data-stu-id="713d1-126">You can use either `–Scenario` or `–Import` as a required command, but not both.</span></span> <span data-ttu-id="713d1-127">Si especifica la opción `–Reset`, no se usa ninguno de los parámetros requeridos.</span><span class="sxs-lookup"><span data-stu-id="713d1-127">None of the required parameters are used if you specify the `–Reset` option.</span></span>

|<span data-ttu-id="713d1-128">Parámetro requerido</span><span class="sxs-lookup"><span data-stu-id="713d1-128">Required parameter</span></span>|<span data-ttu-id="713d1-129">Descripción</span><span class="sxs-lookup"><span data-stu-id="713d1-129">Description</span></span>|
|------------------------|-----------------|
|<span data-ttu-id="713d1-130">`-Scenario` \<*command*></span><span class="sxs-lookup"><span data-stu-id="713d1-130">`-Scenario` \<*command*></span></span><br /><br /> <span data-ttu-id="713d1-131">-O bien-</span><span class="sxs-lookup"><span data-stu-id="713d1-131">—or—</span></span><br /><br /> <span data-ttu-id="713d1-132">`-Scenario` \<*packageName*></span><span class="sxs-lookup"><span data-stu-id="713d1-132">`-Scenario` \<*packageName*></span></span><br /><br /> <span data-ttu-id="713d1-133">o bien</span><span class="sxs-lookup"><span data-stu-id="713d1-133">-or-</span></span><br /><br /> <span data-ttu-id="713d1-134">`-Import` \<*directory*></span><span class="sxs-lookup"><span data-stu-id="713d1-134">`-Import` \<*directory*></span></span>|<span data-ttu-id="713d1-135">Para las aplicaciones de escritorio, use `–Scenario` para especificar el comando que ejecutará la aplicación que desea optimizar, incluidos los argumentos de la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="713d1-135">For desktop apps, use `–Scenario` to specify the command to run the application you want to optimize, including any command-line arguments.</span></span> <span data-ttu-id="713d1-136">Ponga tres conjuntos de comillas dobles alrededor de *command* si especifica una ruta de acceso que contiene espacios, por ejemplo: `mpgo.exe -scenario """C:\My App\myapp.exe""" -assemblylist """C:\My App\myapp.exe""" -outdir "C:\optimized files"`.</span><span class="sxs-lookup"><span data-stu-id="713d1-136">Use three sets of double quotation marks around *command* if it specifies a path that includes spaces; for example: `mpgo.exe -scenario """C:\My App\myapp.exe""" -assemblylist """C:\My App\myapp.exe""" -outdir "C:\optimized files"`.</span></span> <span data-ttu-id="713d1-137">No use un único juego de comillas dobles; no funcionará correctamente si *command* contiene espacios.</span><span class="sxs-lookup"><span data-stu-id="713d1-137">Do not use double quotation marks; they will not work correctly if *command* includes spaces.</span></span><br /><br /> <span data-ttu-id="713d1-138">o bien</span><span class="sxs-lookup"><span data-stu-id="713d1-138">-or-</span></span><br /><br /> <span data-ttu-id="713d1-139">Para las aplicaciones de la Tienda Windows 8.x, use `–Scenario` para especificar el paquete para el que desea generar información de perfil.</span><span class="sxs-lookup"><span data-stu-id="713d1-139">For Windows 8.x Store apps, use `–Scenario` to specify the package that you want to generate profile information for.</span></span> <span data-ttu-id="713d1-140">Si especifica el nombre para mostrar del paquete o su nombre de familia en lugar del nombre completo, Mpgo.exe seleccionará el paquete cuyo nombre coincide con el nombre proporcionado, si solo hay uno.</span><span class="sxs-lookup"><span data-stu-id="713d1-140">If you specify the package display name or the package family name instead of the full package name, Mpgo.exe will select the package that matches the name you provided if there is only one match.</span></span> <span data-ttu-id="713d1-141">Si hay varios paquetes que tienen el nombre especificado, Mpgo.exe le pedirá que elija uno.</span><span class="sxs-lookup"><span data-stu-id="713d1-141">If multiple packages match the specified name, Mpgo.exe will prompt you to choose a package.</span></span><br /><br /> <span data-ttu-id="713d1-142">-O bien-</span><span class="sxs-lookup"><span data-stu-id="713d1-142">—or—</span></span><br /><br /> <span data-ttu-id="713d1-143">Use `-Import` para especificar que desea usar los datos de optimización de ensamblados optimizados previamente para optimizar los ensamblados de `-AssemblyList`.</span><span class="sxs-lookup"><span data-stu-id="713d1-143">Use `-Import` to specify that optimization data from previously optimized assemblies should be used to optimize the assemblies in `-AssemblyList`.</span></span> <span data-ttu-id="713d1-144">*directory* especifica el directorio que contiene los archivos optimizados previamente.</span><span class="sxs-lookup"><span data-stu-id="713d1-144">*directory* specifies the directory that contains the previously optimized files.</span></span> <span data-ttu-id="713d1-145">Los ensamblados especificados en `–AssemblyList` o `–AssemblyListFile` son las nuevas versiones de los ensamblados que se optimizarán usando los datos de los archivos importados.</span><span class="sxs-lookup"><span data-stu-id="713d1-145">The assemblies specified in `–AssemblyList` or `–AssemblyListFile` are the new versions of the assemblies to be optimized using the data from the imported files.</span></span> <span data-ttu-id="713d1-146">Usar los datos de optimización de una versión anterior de los ensamblados permite optimizar las versiones más recientes sin necesidad de volver a ejecutar el escenario.</span><span class="sxs-lookup"><span data-stu-id="713d1-146">Using optimization data from older version of assemblies enables you to optimize newer versions of assemblies without re-running the scenario.</span></span>  <span data-ttu-id="713d1-147">Sin embargo, si los ensamblados importados y de destino incluyen código significativamente diferente, los datos de optimización resultarán ineficaces.</span><span class="sxs-lookup"><span data-stu-id="713d1-147">However, if the imported and target assemblies include significantly different code, the optimization data will be ineffective.</span></span> <span data-ttu-id="713d1-148">Los nombres de ensamblados especificados en `–AssemblyList` o en `–AssemblyListFile` deben existir en el directorio especificado en `–Import`*directory*.</span><span class="sxs-lookup"><span data-stu-id="713d1-148">The assembly names specified in `–AssemblyList` or `–AssemblyListFile` must be present in the directory specified by `–Import`*directory*.</span></span> <span data-ttu-id="713d1-149">Ponga tres conjuntos de comillas dobles alrededor de *directory* si especifica una ruta de acceso que contiene espacios.</span><span class="sxs-lookup"><span data-stu-id="713d1-149">Use three sets of double quotation marks around *directory* if it specifies a path that includes spaces.</span></span><br /><br /> <span data-ttu-id="713d1-150">Debe especificar `–Scenario` o `–Import`, pero no ambos parámetros.</span><span class="sxs-lookup"><span data-stu-id="713d1-150">You must specify either `–Scenario` or `–Import`, but not both parameters.</span></span>|
|<span data-ttu-id="713d1-151">`-OutDir` \<*directory*></span><span class="sxs-lookup"><span data-stu-id="713d1-151">`-OutDir` \<*directory*></span></span>|<span data-ttu-id="713d1-152">El directorio en el que se colocarán los ensamblados optimizados.</span><span class="sxs-lookup"><span data-stu-id="713d1-152">The directory in which to place the optimized assemblies.</span></span> <span data-ttu-id="713d1-153">Si un ensamblado ya existe en la carpeta del directorio de salida, se crea una nueva copia y se anexa un número de índice al nombre del ensamblado; por ejemplo: *assemblyname*-1.exe.</span><span class="sxs-lookup"><span data-stu-id="713d1-153">If an assembly already exists in the output directory folder, a new copy is created and an index number is appended to its name; for example: *assemblyname*-1.exe.</span></span> <span data-ttu-id="713d1-154">Ponga comillas dobles alrededor de *directory* si especifica una ruta que contiene espacios.</span><span class="sxs-lookup"><span data-stu-id="713d1-154">Use double quotation marks around *directory* if it specifies a path that contains spaces.</span></span>|
|<span data-ttu-id="713d1-155">`-AssemblyList` \<*assembly1 assembly2 ...*></span><span class="sxs-lookup"><span data-stu-id="713d1-155">`-AssemblyList` \<*assembly1 assembly2 ...*></span></span><br /><br /> <span data-ttu-id="713d1-156">-O bien-</span><span class="sxs-lookup"><span data-stu-id="713d1-156">—or—</span></span><br /><br /> <span data-ttu-id="713d1-157">`-AssemblyListFile` \<*file*></span><span class="sxs-lookup"><span data-stu-id="713d1-157">`-AssemblyListFile` \<*file*></span></span>|<span data-ttu-id="713d1-158">Lista de ensamblados (incluidos los archivos .exe y .dll), separados por espacios, sobre los que desea recopilar información de perfil.</span><span class="sxs-lookup"><span data-stu-id="713d1-158">A list of assemblies (including .exe and .dll files), separated by spaces, that you want collect profile information about.</span></span> <span data-ttu-id="713d1-159">Puede especificar `C:\Dir\*.dll` o `*.dll` para seleccionar todos los ensamblados existentes en el directorio de trabajo especificado o en el actual.</span><span class="sxs-lookup"><span data-stu-id="713d1-159">You can specify `C:\Dir\*.dll` or `*.dll` to select all the assemblies in the designated or current working directory.</span></span> <span data-ttu-id="713d1-160">Vea la sección Comentarios para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="713d1-160">See the Remarks section for more information.</span></span><br /><br /> <span data-ttu-id="713d1-161">-O bien-</span><span class="sxs-lookup"><span data-stu-id="713d1-161">—or—</span></span><br /><br /> <span data-ttu-id="713d1-162">Archivo de texto que contiene la lista de ensamblados sobre la que desea recopilar información de perfil y en el que cada ensamblado aparece en una línea.</span><span class="sxs-lookup"><span data-stu-id="713d1-162">A text file that contains the list of assemblies you want to collect profile information about, listed one assembly per line.</span></span> <span data-ttu-id="713d1-163">Si un nombre de ensamblado comienza con un guion (-), use una lista de archivos de ensamblado o cambie el nombre del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="713d1-163">If an assembly name begins with a hyphen (-), use an assembly file list or rename the assembly.</span></span>|
|<span data-ttu-id="713d1-164">`-AppID` \<*appId*></span><span class="sxs-lookup"><span data-stu-id="713d1-164">`-AppID` \<*appId*></span></span>|<span data-ttu-id="713d1-165">El identificador de la aplicación del paquete especificado.</span><span class="sxs-lookup"><span data-stu-id="713d1-165">The ID of the application in the specified package.</span></span> <span data-ttu-id="713d1-166">Si usa el carácter comodín (\*), Mpgo.exe intentará enumerar los valores de AppID del paquete y recurrirá a \<*package_family_name*>!App si se produce un error.</span><span class="sxs-lookup"><span data-stu-id="713d1-166">If you use the wildcard (\*), Mpgo.exe will try to enumerate the AppIDs in the package and will fall back to \<*package_family_name*>!App if it fails.</span></span> <span data-ttu-id="713d1-167">Si especifica una cadena que lleva como prefijo un signo de exclamación (!), Mpgo.exe concatenará el nombre de familia del paquete con el argumento proporcionado.</span><span class="sxs-lookup"><span data-stu-id="713d1-167">If you specify a string that is prefixed by an exclamation point (!), Mpgo.exe will concatenate the package family name with the argument provided.</span></span>|
|<span data-ttu-id="713d1-168">`-Timeout` \<*seconds*></span><span class="sxs-lookup"><span data-stu-id="713d1-168">`-Timeout` \<*seconds*></span></span>|<span data-ttu-id="713d1-169">La cantidad de tiempo del que dispone la aplicación de la Tienda Windows 8.x para ejecutarse antes de que se cierre.</span><span class="sxs-lookup"><span data-stu-id="713d1-169">The amount of time to allow the Windows 8.x Store app to run before the app exits.</span></span>|

|<span data-ttu-id="713d1-170">Parámetro opcional</span><span class="sxs-lookup"><span data-stu-id="713d1-170">Optional parameter</span></span>|<span data-ttu-id="713d1-171">Descripción</span><span class="sxs-lookup"><span data-stu-id="713d1-171">Description</span></span>|
|------------------------|-----------------|
|`-64bit`|<span data-ttu-id="713d1-172">Instrumenta los ensamblados para los sistemas de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="713d1-172">Instruments the assemblies for 64-bit systems.</span></span>  <span data-ttu-id="713d1-173">Debe especificar este parámetro para los ensamblados de 64 bits, incluso si el ensamblado se declara como de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="713d1-173">You must specify this parameter for 64-bit assemblies, even if your assembly declares itself as 64 bit.</span></span>|
|<span data-ttu-id="713d1-174">`-ExeConfig` \<*filename*></span><span class="sxs-lookup"><span data-stu-id="713d1-174">`-ExeConfig` \<*filename*></span></span>|<span data-ttu-id="713d1-175">Especifica el archivo de configuración que el escenario usa para proporcionar la información de versión y del cargador.</span><span class="sxs-lookup"><span data-stu-id="713d1-175">Specifies the configuration file that your scenario uses to provide version and loader information.</span></span>|
|`-f`|<span data-ttu-id="713d1-176">Fuerza la inclusión de datos de perfil en un ensamblado binario, incluso si está firmado.</span><span class="sxs-lookup"><span data-stu-id="713d1-176">Forces the inclusion of the profile data in a binary assembly, even if it's signed.</span></span>  <span data-ttu-id="713d1-177">Si el ensamblado está firmado, deberá firmarse de nuevo; de lo contrario, no podrá cargarse ni ejecutarse.</span><span class="sxs-lookup"><span data-stu-id="713d1-177">If the assembly is signed, it must be re-signed; otherwise, the assembly will fail to load and run.</span></span>|
|`-Reset`|<span data-ttu-id="713d1-178">Restablece el entorno para asegurarse de que una sesión de generación de perfiles anulada no afecta a los ensamblados; a continuación, la herramienta se cierra.</span><span class="sxs-lookup"><span data-stu-id="713d1-178">Resets the environment to make certain that an aborted profiling session doesn't affect your assemblies, and then quits.</span></span> <span data-ttu-id="713d1-179">El entorno se restablece de forma predeterminada antes y después de una sesión de generación de perfiles.</span><span class="sxs-lookup"><span data-stu-id="713d1-179">The environment is reset by default before and after a profiling session.</span></span>|
|<span data-ttu-id="713d1-180">`-Timeout` \<*time in seconds*></span><span class="sxs-lookup"><span data-stu-id="713d1-180">`-Timeout` \<*time in seconds*></span></span>|<span data-ttu-id="713d1-181">Especifica la duración del proceso de generación de perfiles en segundos.</span><span class="sxs-lookup"><span data-stu-id="713d1-181">Specifies the profiling duration in seconds.</span></span> <span data-ttu-id="713d1-182">Use un valor algo mayor que los tiempos de inicio observados para las aplicaciones GUI.</span><span class="sxs-lookup"><span data-stu-id="713d1-182">Use a value that is slightly more than your observed startup times for GUI applications.</span></span> <span data-ttu-id="713d1-183">Al final del período de tiempo de espera, los datos de perfil se graban aunque la aplicación continúe ejecutándose.</span><span class="sxs-lookup"><span data-stu-id="713d1-183">At the end of the time-out period, the profile data is recorded although the application continues to run.</span></span> <span data-ttu-id="713d1-184">Si no establece esta opción, la generación de perfiles continuará hasta el cierre de la aplicación, momento en el que se grabarán los datos.</span><span class="sxs-lookup"><span data-stu-id="713d1-184">If you don't set this option, profiling will continue until application shutdown, at which time the data will be recorded.</span></span>|
|`-LeaveNativeImages`|<span data-ttu-id="713d1-185">Especifica que las imágenes nativas instrumentadas no deben quitarse después de ejecutar el escenario.</span><span class="sxs-lookup"><span data-stu-id="713d1-185">Specifies that the instrumented native images shouldn't be removed after running the scenario.</span></span> <span data-ttu-id="713d1-186">Esta opción se usa principalmente cuando se obtiene la aplicación que se especificó para la ejecución del escenario.</span><span class="sxs-lookup"><span data-stu-id="713d1-186">This option is primarily used when you're getting the application that you specified for the scenario running.</span></span> <span data-ttu-id="713d1-187">Evitará que se vuelvan a crear las imágenes nativas en las ejecuciones posteriores de Mpgo.exe.</span><span class="sxs-lookup"><span data-stu-id="713d1-187">It will prevent the recreation of native images for subsequent runs of Mpgo.exe.</span></span> <span data-ttu-id="713d1-188">Si especifica esta opción, cuando haya terminado de ejecutar la aplicación puede haber imágenes nativas huérfanas en la caché.</span><span class="sxs-lookup"><span data-stu-id="713d1-188">When you have finished running your application, there may be orphaned native images in the cache if you specify this option.</span></span> <span data-ttu-id="713d1-189">En este caso, ejecute Mpgo.exe con el mismo escenario y la misma lista de ensamblados y use el parámetro `–RemoveNativeImages` para quitar estas imágenes nativas.</span><span class="sxs-lookup"><span data-stu-id="713d1-189">In this case, run Mpgo.exe with the same scenario and assembly list and use the `–RemoveNativeImages` parameter to remove these native images.</span></span>|
|`-RemoveNativeImages`|<span data-ttu-id="713d1-190">Realiza la limpieza tras una ejecución en la que se especificó `–LeaveNativeImages`.</span><span class="sxs-lookup"><span data-stu-id="713d1-190">Cleans up from a run where `–LeaveNativeImages` was specified.</span></span> <span data-ttu-id="713d1-191">Si especifica `-RemoveNativeImages`, Mpgo.exe omite cualquier argumento excepto `-64bit` y `–AssemblyList`, y se cierra después de quitar todas las imágenes nativas instrumentadas.</span><span class="sxs-lookup"><span data-stu-id="713d1-191">If you specify `-RemoveNativeImages`, Mpgo.exe ignores any arguments except `-64bit` and `–AssemblyList`, and exits after removing all instrumented native images.</span></span>|

## <a name="remarks"></a><span data-ttu-id="713d1-192">Comentarios</span><span class="sxs-lookup"><span data-stu-id="713d1-192">Remarks</span></span>

 <span data-ttu-id="713d1-193">Puede usar `–AssemblyList` y `- AssemblyListFile` varias veces en la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="713d1-193">You can use both `–AssemblyList` and `- AssemblyListFile` multiple times on the command line.</span></span>

 <span data-ttu-id="713d1-194">Si no especifica nombres de rutas de acceso completas al especificar los ensamblados, Mpgo.exe busca en el directorio actual.</span><span class="sxs-lookup"><span data-stu-id="713d1-194">If you do not specify full path names when specifying assemblies, Mpgo.exe looks in the current directory.</span></span> <span data-ttu-id="713d1-195">Si especifica una ruta de acceso incorrecta, Mpgo.exe muestra un mensaje de error, pero continúa generando datos para otros ensamblados.</span><span class="sxs-lookup"><span data-stu-id="713d1-195">If you specify an incorrect path, Mpgo.exe displays an error message but continues to generate data for other assemblies.</span></span> <span data-ttu-id="713d1-196">Si especifica un ensamblado que no se carga durante el escenario de aprendizaje, no se genera ningún dato de aprendizaje para ese ensamblado.</span><span class="sxs-lookup"><span data-stu-id="713d1-196">If you specify an assembly that is not loaded during the training scenario, no training data is generated for that assembly.</span></span>

 <span data-ttu-id="713d1-197">Si un ensamblado de la lista se encuentra en la caché global de ensamblados, no se actualizará con la información de perfil.</span><span class="sxs-lookup"><span data-stu-id="713d1-197">If an assembly in the list is in the global assembly cache, it will not be updated to contain the profile information.</span></span>  <span data-ttu-id="713d1-198">Quítelo de la caché global de ensamblados para que obtenga la información de perfil.</span><span class="sxs-lookup"><span data-stu-id="713d1-198">Remove it from the global assembly cache to collect profile information.</span></span>

 <span data-ttu-id="713d1-199">Solo se recomienda usar Ngen.exe y Mpgo.exe en aplicaciones administradas grandes, ya que normalmente solo se aprecia la ventaja que conllevan las imágenes nativas precompiladas cuando se elimina de forma significativa la compilación JIT en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="713d1-199">The use of Ngen.exe and Mpgo.exe is recommended only for large managed applications, because the benefit of precompiled native images is typically seen only when it eliminates significant JIT compilation at run time.</span></span> <span data-ttu-id="713d1-200">Ejecutar Mpgo.exe en aplicaciones del estilo de "Hello World", que no usan el espacio de trabajo de manera intensiva, no solo no proporciona ninguna ventaja, sino que podría impedir que Mpgo.exe recopilara los datos de perfil.</span><span class="sxs-lookup"><span data-stu-id="713d1-200">Running Mpgo.exe on "Hello World" style applications that aren’t working-set intensive will not provide any benefits, and Mpgo.exe may even fail to gather profile data.</span></span>

> [!NOTE]
> <span data-ttu-id="713d1-201">No se recomienda usar Ngen.exe y Mpgo.exe en aplicaciones ASP.NET y servicios de Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="713d1-201">Ngen.exe and Mpgo.exe are not recommended for ASP.NET applications and Windows Communication Foundation (WCF) services.</span></span>

## <a name="to-use-mpgoexe"></a><span data-ttu-id="713d1-202">Para usar Mpgo.exe</span><span class="sxs-lookup"><span data-stu-id="713d1-202">To Use Mpgo.exe</span></span>

1. <span data-ttu-id="713d1-203">Use un equipo que tenga instalados Visual Studio Ultimate 2012 y la aplicación.</span><span class="sxs-lookup"><span data-stu-id="713d1-203">Use a computer that has the Visual Studio Ultimate 2012 and your application installed.</span></span>

2. <span data-ttu-id="713d1-204">Ejecute Mpgo.exe como administrador con los parámetros necesarios.</span><span class="sxs-lookup"><span data-stu-id="713d1-204">Run Mpgo.exe as an administrator with the necessary parameters.</span></span>  <span data-ttu-id="713d1-205">En la sección siguiente hallará comandos de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="713d1-205">See the next section for sample commands.</span></span>

     <span data-ttu-id="713d1-206">Se crean los ensamblados optimizados de lenguaje intermedio (IL) en la carpeta especificada en el parámetro `–OutDir` (en los ejemplos, esta es la carpeta `C:\Optimized`).</span><span class="sxs-lookup"><span data-stu-id="713d1-206">The optimized intermediate language (IL) assemblies are created in the folder specified by the `–OutDir` parameter (in the examples, this is the `C:\Optimized` folder).</span></span>

3. <span data-ttu-id="713d1-207">Reemplace los ensamblados de IL que usó para Ngen.exe por los nuevos ensamblados de IL que contienen información de perfil procedente del directorio especificado en `–OutDir`.</span><span class="sxs-lookup"><span data-stu-id="713d1-207">Replace the IL assemblies you used for Ngen.exe  with the new IL assemblies that contain the profile information from the directory specified by `–OutDir`.</span></span>

4. <span data-ttu-id="713d1-208">Al instalar la aplicación (con las imágenes proporcionadas por Mpgo.exe) se instalan las imágenes nativas optimizadas.</span><span class="sxs-lookup"><span data-stu-id="713d1-208">The application setup (using the images provided by Mpgo.exe) will install optimized native images.</span></span>

## <a name="suggested-workflow"></a><span data-ttu-id="713d1-209">Flujo de trabajo sugerido</span><span class="sxs-lookup"><span data-stu-id="713d1-209">Suggested Workflow</span></span>

1. <span data-ttu-id="713d1-210">Cree un conjunto de ensamblados optimizados de IL usando Mpgo.exe con el parámetro `–Scenario`.</span><span class="sxs-lookup"><span data-stu-id="713d1-210">Create a set of optimized IL assemblies by using Mpgo.exe with the `–Scenario` parameter.</span></span>

2. <span data-ttu-id="713d1-211">Proteja los ensamblados optimizados de IL en el control de código fuente.</span><span class="sxs-lookup"><span data-stu-id="713d1-211">Check the optimized IL assemblies into source control.</span></span>

3. <span data-ttu-id="713d1-212">Durante el proceso de compilación, llame a Mpgo.exe con el parámetro `–Import` como paso posterior a la compilación para generar las imágenes de IL optimizadas que se pasarán a Ngen.exe.</span><span class="sxs-lookup"><span data-stu-id="713d1-212">In the build process, call Mpgo.exe with the `–Import` parameter as a post-build step to generate optimized IL images to pass to Ngen.exe.</span></span>

 <span data-ttu-id="713d1-213">Este proceso garantiza que todos los ensamblados dispongan de datos de optimización.</span><span class="sxs-lookup"><span data-stu-id="713d1-213">This process ensures that all assemblies have optimization data.</span></span> <span data-ttu-id="713d1-214">Si protege los ensamblados optimizados actualizados (pasos 1 y 2) con más frecuencia, las cifras de rendimiento serán más coherentes durante el desarrollo del producto.</span><span class="sxs-lookup"><span data-stu-id="713d1-214">If you check in updated optimized assemblies (steps 1 and 2) more frequently, the performance numbers will be more consistent throughout product development.</span></span>

## <a name="using-mpgoexe-from-visual-studio"></a><span data-ttu-id="713d1-215">Uso de Mpgo.exe desde Visual Studio</span><span class="sxs-lookup"><span data-stu-id="713d1-215">Using Mpgo.exe from Visual Studio</span></span>

 <span data-ttu-id="713d1-216">Puede ejecutar Mpgo.exe desde Visual Studio (vea el artículo [Cómo: Especificación de eventos de compilación (C#)](/visualstudio/ide/how-to-specify-build-events-csharp)) con las siguientes restricciones:</span><span class="sxs-lookup"><span data-stu-id="713d1-216">You can run Mpgo.exe from Visual Studio (see the article [How to: Specify Build Events (C#)](/visualstudio/ide/how-to-specify-build-events-csharp)) with the following restrictions:</span></span>

- <span data-ttu-id="713d1-217">No puede usar rutas de acceso entre comillas con barras diagonales finales, ya que las macros de Visual Studio también usan barras diagonales finales de forma predeterminada</span><span class="sxs-lookup"><span data-stu-id="713d1-217">You cannot use quoted paths with trailing slash marks, because Visual Studio macros also use trailing slash marks by default.</span></span> <span data-ttu-id="713d1-218">(por ejemplo, `–OutDir "C:\Output Folder\"` no es válido). Para evitar esta restricción, puede omitir la barra diagonal final</span><span class="sxs-lookup"><span data-stu-id="713d1-218">(For example, `–OutDir "C:\Output Folder\"` is invalid.) To work around this restriction, you can escape the trailing slash.</span></span> <span data-ttu-id="713d1-219">(por ejemplo, en su lugar, use `-OutDir "$(OutDir)\"`).</span><span class="sxs-lookup"><span data-stu-id="713d1-219">(For example, use `-OutDir "$(OutDir)\"` instead.)</span></span>

- <span data-ttu-id="713d1-220">De forma predeterminada, Mpgo.exe no está en la ruta de acceso de compilación de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="713d1-220">By default, Mpgo.exe is not on the Visual Studio build path.</span></span> <span data-ttu-id="713d1-221">Debe agregar la ruta de acceso a Visual Studio o especificar la ruta de acceso completa en la línea de comandos de Mpgo.</span><span class="sxs-lookup"><span data-stu-id="713d1-221">You must either add the path to Visual Studio or specify the full path on the Mpgo command line.</span></span> <span data-ttu-id="713d1-222">Puede usar `–Scenario` o el parámetro `–Import` en el evento posterior a la compilación en Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="713d1-222">You can use either the `–Scenario` or the `–Import` parameter in the post-build event in Visual Studio.</span></span> <span data-ttu-id="713d1-223">Pero el proceso típico es usar `–Scenario` una vez desde Símbolo del sistema para desarrolladores de Visual Studio y, luego, usar `–Import` para actualizar los ensamblados optimizados después de cada compilación; por ejemplo: `"C:\Program Files\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\mpgo.exe" -import "$(OutDir)tmp" -assemblylist "$(TargetPath)" -outdir "$(OutDir)\"`.</span><span class="sxs-lookup"><span data-stu-id="713d1-223">However, the typical process is to use `–Scenario` one time from a Developer Command Prompt for Visual Studio, and then use `–Import` to update the optimized assemblies after each build; for example:  `"C:\Program Files\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\mpgo.exe" -import "$(OutDir)tmp" -assemblylist "$(TargetPath)" -outdir "$(OutDir)\"`.</span></span>

<a name="samples"></a>

## <a name="examples"></a><span data-ttu-id="713d1-224">Ejemplos</span><span class="sxs-lookup"><span data-stu-id="713d1-224">Examples</span></span>

 <span data-ttu-id="713d1-225">El siguiente comando de Mpgo.exe usado desde Símbolo del sistema para desarrolladores de Visual Studio optimiza una aplicación fiscal:</span><span class="sxs-lookup"><span data-stu-id="713d1-225">The following Mpgo.exe command from a Developer Command Prompt for Visual Studio optimizes a tax application:</span></span>

```console
mpgo –scenario "C:\MyApp\MyTax.exe /params par" –AssemblyList Mytax.dll MyTaxUtil2011.dll –OutDir C:\Optimized –TimeOut 15
```

 <span data-ttu-id="713d1-226">El siguiente comando de Mpgo.exe optimiza una aplicación de sonido:</span><span class="sxs-lookup"><span data-stu-id="713d1-226">The following Mpgo.exe command optimizes a sound application:</span></span>

```console
mpgo –scenario "C:\MyApp\wav2wma.exe –input song1.wav –output song1.wma" –AssemblyList transcode.dll –OutDir C:\Optimized –TimeOut 15
```

 <span data-ttu-id="713d1-227">El siguiente comando de Mpgo.exe usa datos de ensamblados optimizados previamente para optimizar las versiones más recientes de los ensamblados:</span><span class="sxs-lookup"><span data-stu-id="713d1-227">The following Mpgo.exe command uses data from previously optimized assemblies to optimize newer versions of the assemblies:</span></span>

```console
mpgo.exe -import "C:\Optimized" -assemblylist "C:\MyApp\MyTax.dll" "C:\MyApp\MyTaxUtil2011.dll" -outdir C:\ReOptimized
```

## <a name="see-also"></a><span data-ttu-id="713d1-228">Consulte también</span><span class="sxs-lookup"><span data-stu-id="713d1-228">See also</span></span>

- [<span data-ttu-id="713d1-229">Ngen.exe (Generador de imágenes nativas)</span><span class="sxs-lookup"><span data-stu-id="713d1-229">Ngen.exe (Native Image Generator)</span></span>](ngen-exe-native-image-generator.md)
- [<span data-ttu-id="713d1-230">Shells de línea de comandos para desarrolladores</span><span class="sxs-lookup"><span data-stu-id="713d1-230">Developer command-line shells</span></span>](/visualstudio/ide/reference/command-prompt-powershell)
- [<span data-ttu-id="713d1-231">Improving Launch Performance for your Desktop Applications (Mejorar el rendimiento de inicio de las aplicaciones de escritorio)</span><span class="sxs-lookup"><span data-stu-id="713d1-231">Improving Launch Performance for your Desktop Applications</span></span>](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/)
- [<span data-ttu-id="713d1-232">Información general de las mejoras de rendimiento en .NET Framework 4.5</span><span class="sxs-lookup"><span data-stu-id="713d1-232">An Overview of Performance Improvements in .NET Framework 4.5</span></span>](/archive/msdn-magazine/2012/april/clr-an-overview-of-performance-improvements-in-net-4-5)
