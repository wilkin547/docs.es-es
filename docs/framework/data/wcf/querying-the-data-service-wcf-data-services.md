---
description: Más información acerca de cómo consultar el servicio de datos (Servicios de datos de WCF)
title: Consultar el servicio de datos (Data Services de WCF)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
- WCF Data Services, accessing data
ms.assetid: 823e9444-27aa-4f1f-be8e-0486d67f54c0
ms.openlocfilehash: 7eb76b9d90273235d97318a70a4c880f869f249b
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/06/2021
ms.locfileid: "99794941"
---
# <a name="querying-the-data-service-wcf-data-services"></a><span data-ttu-id="ce8b9-103">Consultar el servicio de datos (Data Services de WCF)</span><span class="sxs-lookup"><span data-stu-id="ce8b9-103">Querying the Data Service (WCF Data Services)</span></span>

[!INCLUDE [wcf-deprecated](~/includes/wcf-deprecated.md)]

<span data-ttu-id="ce8b9-104">La biblioteca de cliente de Servicios de datos de WCF permite ejecutar consultas en un servicio de datos usando patrones de programación de .NET Framework conocidos, incluido el uso de Language Integrated Query (LINQ).</span><span class="sxs-lookup"><span data-stu-id="ce8b9-104">The WCF Data Services client library enables you to execute queries against a data service by using familiar .NET Framework programming patterns, including using language integrated query (LINQ).</span></span> <span data-ttu-id="ce8b9-105">La biblioteca de cliente traduce una consulta, que se define en el cliente como instancia de la clase <xref:System.Data.Services.Client.DataServiceQuery%601>, en un mensaje de solicitud HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-105">The client library translates a query, which is defined on the client as an instance of the <xref:System.Data.Services.Client.DataServiceQuery%601> class, into an HTTP GET request message.</span></span> <span data-ttu-id="ce8b9-106">La biblioteca recibe el mensaje de respuesta y lo traduce en instancias de las clases del servicio de datos de cliente.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-106">The library receives the response message and translates it into instances of client data service classes.</span></span> <span data-ttu-id="ce8b9-107">El seguimiento de estas clases lo realiza la clase <xref:System.Data.Services.Client.DataServiceContext> a la que pertenece <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-107">These classes are tracked by the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span>

## <a name="data-service-queries"></a><span data-ttu-id="ce8b9-108">Consultas del servicio de datos</span><span class="sxs-lookup"><span data-stu-id="ce8b9-108">Data Service Queries</span></span>

<span data-ttu-id="ce8b9-109">La clase <xref:System.Data.Services.Client.DataServiceQuery%601> genérica representa una consulta que devuelve una colección de cero o más instancias de tipo de entidad.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-109">The <xref:System.Data.Services.Client.DataServiceQuery%601> generic class represents a query that returns a collection of zero or more entity type instances.</span></span> <span data-ttu-id="ce8b9-110">Una consulta del servicio de datos siempre pertenece al contexto de un servicio de datos existente.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-110">A data service query always belongs to an existing data service context.</span></span> <span data-ttu-id="ce8b9-111">Este contexto mantiene la información necesaria del URI del servicio y la de los metadatos para crear y ejecutar la consulta.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-111">This context maintains the service URI and metadata information that is required to compose and execute the query.</span></span>

<span data-ttu-id="ce8b9-112">Cuando se usa el cuadro de diálogo **Agregar referencia de servicio** para agregar un servicio de datos a una aplicación cliente basada en .NET Framework, se crea una clase de contenedor de entidades que hereda de la <xref:System.Data.Services.Client.DataServiceContext> clase.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-112">When you use the **Add Service Reference** dialog to add a data service to a .NET Framework-based client application, an entity container class is created that inherits from the <xref:System.Data.Services.Client.DataServiceContext> class.</span></span> <span data-ttu-id="ce8b9-113">Esta clase incluye propiedades que devuelven instancias de <xref:System.Data.Services.Client.DataServiceQuery%601> con tipo.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-113">This class includes properties that return typed <xref:System.Data.Services.Client.DataServiceQuery%601> instances.</span></span> <span data-ttu-id="ce8b9-114">Existe una propiedad para cada conjunto de entidades que expone el servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-114">There is one property for each entity set that the data service exposes.</span></span> <span data-ttu-id="ce8b9-115">Estas propiedades facilitan la creación de una instancia de <xref:System.Data.Services.Client.DataServiceQuery%601> con tipo.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-115">These properties make it easier to create an instance of a typed <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>

<span data-ttu-id="ce8b9-116">Las consultas se ejecutan en los escenarios siguientes:</span><span class="sxs-lookup"><span data-stu-id="ce8b9-116">A query is executed in the following scenarios:</span></span>

- <span data-ttu-id="ce8b9-117">Cuando se enumeran los resultados implícitamente, por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="ce8b9-117">When results are enumerated implicitly, such as:</span></span>

  - <span data-ttu-id="ce8b9-118">Cuando se enumeran una propiedad de la clase <xref:System.Data.Services.Client.DataServiceContext> que representa un conjunto de entidades, como ocurre en un bucle `foreach` (C#) o `For Each` (Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="ce8b9-118">When a property on the <xref:System.Data.Services.Client.DataServiceContext> that represents and entity set is enumerated, such as during a `foreach` (C#) or `For Each` (Visual Basic) loop.</span></span>

  - <span data-ttu-id="ce8b9-119">Cuando se asigna la consulta a una colección `List`.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-119">When the query is assigned to a `List` collection.</span></span>

- <span data-ttu-id="ce8b9-120">Cuando se llama explícitamente a los métodos <xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A> o <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A>.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-120">When the <xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A> or <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> method is explicitly called.</span></span>

- <span data-ttu-id="ce8b9-121">Cuando se llama a un operador de ejecución de consultas LINQ, como <xref:System.Linq.Enumerable.First%2A> o <xref:System.Linq.Enumerable.Single%2A>.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-121">When a LINQ query execution operator, such as <xref:System.Linq.Enumerable.First%2A> or <xref:System.Linq.Enumerable.Single%2A> is called.</span></span>

<span data-ttu-id="ce8b9-122">Cuando se ejecuta la siguiente consulta, devuelve todas las entidades `Customers` del servicio de datos de Northwind:</span><span class="sxs-lookup"><span data-stu-id="ce8b9-122">The following query, when it is executed, returns all `Customers` entities in the Northwind data service:</span></span>

[!code-csharp[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#getallcustomersspecific)]
[!code-vb[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#getallcustomersspecific)]

<span data-ttu-id="ce8b9-123">Para obtener más información, vea [Cómo: ejecutar consultas de servicio de datos](how-to-execute-data-service-queries-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="ce8b9-123">For more information, see [How to: Execute Data Service Queries](how-to-execute-data-service-queries-wcf-data-services.md).</span></span>

<span data-ttu-id="ce8b9-124">El cliente de Servicios de datos de WCF admite consultas para objetos enlazados en tiempo de ejecución, como cuando se usa el tipo *dinámico* en C#.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-124">The WCF Data Services client supports queries for late-bound objects, such as when you use the *dynamic* type in C#.</span></span> <span data-ttu-id="ce8b9-125">Sin embargo, por motivos de rendimiento, siempre debe crear consultas fuertemente tipadas en el servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-125">However, for performance reasons you should always compose strongly typed queries against the data service.</span></span> <span data-ttu-id="ce8b9-126">El cliente no admite los objetos de tipo y dinámicos de la clase <xref:System.Tuple>.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-126">The <xref:System.Tuple> type and dynamic objects are not supported by the client.</span></span>

## <a name="linq-queries"></a><span data-ttu-id="ce8b9-127">Consultas LINQ</span><span class="sxs-lookup"><span data-stu-id="ce8b9-127">LINQ Queries</span></span>

<span data-ttu-id="ce8b9-128">Dado <xref:System.Data.Services.Client.DataServiceQuery%601> que la clase implementa la <xref:System.Linq.IQueryable%601> interfaz definida por LINQ, la biblioteca de cliente de servicios de datos de WCF puede transformar consultas LINQ en datos del conjunto de entidades en un URI que representa una expresión de consulta evaluada en un recurso del servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-128">Because the <xref:System.Data.Services.Client.DataServiceQuery%601> class implements the <xref:System.Linq.IQueryable%601> interface defined by LINQ, the WCF Data Services client library is able to transform LINQ queries against entity set data into a URI that represents a query expression evaluated against a data service resource.</span></span> <span data-ttu-id="ce8b9-129">En el siguiente ejemplo hay una consulta LINQ que es equivalente a la clase <xref:System.Data.Services.Client.DataServiceQuery%601> anterior que devuelve `Orders` con un costo de flete de más de 30 dólares y ordena los resultados por el costo del flete:</span><span class="sxs-lookup"><span data-stu-id="ce8b9-129">The following example is a LINQ query that is equivalent to the previous <xref:System.Data.Services.Client.DataServiceQuery%601> that returns `Orders` that have a freight cost of more than $30 and orders the results by the freight cost:</span></span>

[!code-csharp[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionslinqspecific)]
[!code-vb[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionslinqspecific)]

<span data-ttu-id="ce8b9-130">Esta consulta LINQ se traduce en el siguiente URI de consulta que se ejecuta en el servicio de datos de [Inicio rápido](quickstart-wcf-data-services.md) basado en Northwind:</span><span class="sxs-lookup"><span data-stu-id="ce8b9-130">This LINQ query is translated into the following query URI that is executed against the Northwind-based [quickstart](quickstart-wcf-data-services.md) data service:</span></span>

```http
http://localhost:12345/Northwind.svc/Orders?Orderby=ShippedDate&?filter=Freight gt 30
```

> [!NOTE]
> <span data-ttu-id="ce8b9-131">El conjunto de consultas que se pueden expresar en la sintaxis de LINQ es más amplio que los habilitados en la sintaxis URI basada en REST (Representational State Transfer) usada por los servicios de datos.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-131">The set of queries expressible in the LINQ syntax is broader than those enabled in the representational state transfer (REST)-based URI syntax that is used by data services.</span></span> <span data-ttu-id="ce8b9-132">Cuando la consulta no se puede asignar a ningún URI del servicio de datos de destino, se produce una excepción <xref:System.NotSupportedException>.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-132">A <xref:System.NotSupportedException> is raised when the query cannot be mapped to a URI in the target data service.</span></span>

<span data-ttu-id="ce8b9-133">Para obtener más información, vea [consideraciones sobre LINQ](linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="ce8b9-133">For more information, see [LINQ Considerations](linq-considerations-wcf-data-services.md).</span></span>

## <a name="adding-query-options"></a><span data-ttu-id="ce8b9-134">Agregar opciones de consulta</span><span class="sxs-lookup"><span data-stu-id="ce8b9-134">Adding Query Options</span></span>

<span data-ttu-id="ce8b9-135">Las consultas del servicio de datos admiten todas las opciones de consulta que proporciona Servicios de datos de WCF.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-135">Data service queries support all the query options that WCF Data Services provides.</span></span> <span data-ttu-id="ce8b9-136">Puede llamar al método <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> para anexar opciones de consulta a una instancia de <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-136">You call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method to append query options to a <xref:System.Data.Services.Client.DataServiceQuery%601> instance.</span></span> <span data-ttu-id="ce8b9-137">El método <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> devuelve una nueva instancia de <xref:System.Data.Services.Client.DataServiceQuery%601> que es equivalente a la consulta original pero con el nuevo conjunto de opciones de consulta.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-137"><xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> returns a new <xref:System.Data.Services.Client.DataServiceQuery%601> instance that is equivalent to the original query but with the new query option set.</span></span> <span data-ttu-id="ce8b9-138">Cuando se ejecuta la siguiente consulta, devuelve el valor `Orders` filtrado por el valor `Freight` y ordenado por `OrderID`, en orden descendente:</span><span class="sxs-lookup"><span data-stu-id="ce8b9-138">The following query, when executed, returns `Orders` that are filtered by the `Freight` value and ordered by the `OrderID`, descending:</span></span>

[!code-csharp[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionsspecific)]
[!code-vb[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionsspecific)]

<span data-ttu-id="ce8b9-139">Puede usar la opción de consulta `$orderby` tanto para ordenar como para filtrar una consulta basada en una sola propiedad, como en el siguiente ejemplo que filtra y ordena los objetos `Orders` devueltos basados en el valor de la propiedad `Freight`:</span><span class="sxs-lookup"><span data-stu-id="ce8b9-139">You can use the `$orderby` query option to both order and filter a query based on a single property, as in the following example that filters and orders the returned `Orders` objects based on the value of the `Freight` property:</span></span>

[!code-csharp[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#orderwithfilter)]
[!code-vb[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#orderwithfilter)]

<span data-ttu-id="ce8b9-140">Puede llamar al método <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> consecutivamente para construir expresiones de consulta complejas.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-140">You can call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method consecutively to construct complex query expressions.</span></span> <span data-ttu-id="ce8b9-141">Para obtener más información, vea [Cómo: agregar opciones de consulta a una consulta de servicio de datos](how-to-add-query-options-to-a-data-service-query-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="ce8b9-141">For more information, see [How to: Add Query Options to a Data Service Query](how-to-add-query-options-to-a-data-service-query-wcf-data-services.md).</span></span>

<span data-ttu-id="ce8b9-142">Las opciones de consulta le proporcionan otra forma de expresar los componentes estáticos de una consulta LINQ.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-142">Query options give you another way to express the syntactic components of a LINQ query.</span></span> <span data-ttu-id="ce8b9-143">Para obtener más información, vea [consideraciones sobre LINQ](linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="ce8b9-143">For more information, see [LINQ Considerations](linq-considerations-wcf-data-services.md).</span></span>

> [!NOTE]
> <span data-ttu-id="ce8b9-144">La opción de consulta `$select` no se puede agregar a ningún URI de la consulta mediante el uso del método <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A>.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-144">The `$select` query option cannot be added to a query URI by using the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method.</span></span> <span data-ttu-id="ce8b9-145">Se recomienda usar el método <xref:System.Linq.Enumerable.Select%2A> de LINQ para que el cliente genere la opción de consulta `$select` en el URI de solicitud.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-145">We recommend that you use the LINQ <xref:System.Linq.Enumerable.Select%2A> method to have the client generate the `$select` query option in the request URI.</span></span>

<a name="executingQueries"></a>

## <a name="client-versus-server-execution"></a><span data-ttu-id="ce8b9-146">Ejecución de cliente frente a servidor</span><span class="sxs-lookup"><span data-stu-id="ce8b9-146">Client versus Server Execution</span></span>

<span data-ttu-id="ce8b9-147">El cliente ejecuta una consulta en dos partes.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-147">The client executes a query in two parts.</span></span> <span data-ttu-id="ce8b9-148">Siempre que sea posible, las expresiones de una consulta primero se evalúan en el cliente y, a continuación, se generan y se envían al servicio de datos para su evaluación en los datos del servicio.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-148">Whenever possible, expressions in a query are first evaluated on the client, and then a URI-based query is generated and sent to the data service for evaluation against data in the service.</span></span> <span data-ttu-id="ce8b9-149">Considere la siguiente consulta LINQ:</span><span class="sxs-lookup"><span data-stu-id="ce8b9-149">Consider the following LINQ query:</span></span>

[!code-csharp[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqqueryclientevalspecific)]
[!code-vb[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqqueryclientevalspecific)]

<span data-ttu-id="ce8b9-150">En este ejemplo, la expresión `(basePrice – (basePrice * discount))` se evalúa en el cliente.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-150">In this example, the expression `(basePrice – (basePrice * discount))` is evaluated on the client.</span></span> <span data-ttu-id="ce8b9-151">Por ello, el URI de la consulta real `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)` que se envía al servicio de datos contiene el valor decimal ya calculado de `90` en la cláusula de filtro.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-151">Because of this, the actual query URI `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)` that is sent to the data service contains the already calculated decimal value of `90` in the filter clause.</span></span> <span data-ttu-id="ce8b9-152">El resto de las partes de la expresión de filtrado, incluida la expresión de subcadena, las evalúa el servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-152">The other parts of the filtering expression, including the substring expression, are evaluated by the data service.</span></span> <span data-ttu-id="ce8b9-153">Las expresiones que se evalúan en el cliente siguen la semántica de Common Language Runtime (CLR), mientras que las expresiones enviadas al servicio de datos se basan en la implementación del servicio de datos del protocolo OData.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-153">Expressions that are evaluated on the client follow common language runtime (CLR) semantics, while expressions sent to the data service rely on the data service implementation of the OData Protocol.</span></span> <span data-ttu-id="ce8b9-154">Debe tener en cuenta los escenarios en los que esta evaluación independiente pueda causar resultados inesperados, como cuando tanto el cliente como el servidor realicen evaluaciones basadas en la hora en distintas zonas horarias.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-154">You should also be aware of scenarios where this separate evaluation may cause unexpected results, such as when both the client and service perform time-based evaluations in different time zones.</span></span>

## <a name="query-responses"></a><span data-ttu-id="ce8b9-155">Respuestas de consulta</span><span class="sxs-lookup"><span data-stu-id="ce8b9-155">Query Responses</span></span>

<span data-ttu-id="ce8b9-156">Cuando se ejecuta, el objeto <xref:System.Data.Services.Client.DataServiceQuery%601> devuelve una interfaz <xref:System.Collections.Generic.IEnumerable%601> del tipo de entidad solicitado.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-156">When executed, the <xref:System.Data.Services.Client.DataServiceQuery%601> returns an <xref:System.Collections.Generic.IEnumerable%601> of the requested entity type.</span></span> <span data-ttu-id="ce8b9-157">Este resultado de consulta se puede convertir en un objeto <xref:System.Data.Services.Client.QueryOperationResponse%601>, como en el siguiente ejemplo:</span><span class="sxs-lookup"><span data-stu-id="ce8b9-157">This query result can be cast to a <xref:System.Data.Services.Client.QueryOperationResponse%601> object, as in the following example:</span></span>

[!code-csharp[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#getresponsespecific)]
[!code-vb[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#getresponsespecific)]

<span data-ttu-id="ce8b9-158">Las instancias de tipo de entidad que representan entidades del servicio de datos se crean en el cliente mediante un proceso denominado materialización de objetos.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-158">The entity type instances that represent entities in the data service are created on the client by a process called object materialization.</span></span> <span data-ttu-id="ce8b9-159">Para obtener más información, consulte [materialización de objetos](object-materialization-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="ce8b9-159">For more information, see [Object Materialization](object-materialization-wcf-data-services.md).</span></span> <span data-ttu-id="ce8b9-160">El objeto <xref:System.Data.Services.Client.QueryOperationResponse%601> implementa <xref:System.Collections.Generic.IEnumerable%601> para proporcionar acceso a los resultados de la consulta.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-160">The <xref:System.Data.Services.Client.QueryOperationResponse%601> object implements <xref:System.Collections.Generic.IEnumerable%601> to provide access to the results of the query.</span></span>

<span data-ttu-id="ce8b9-161"><xref:System.Data.Services.Client.QueryOperationResponse%601> también tiene los siguientes miembros que le permiten tener acceso a información adicional sobre el resultado de una consulta:</span><span class="sxs-lookup"><span data-stu-id="ce8b9-161">The <xref:System.Data.Services.Client.QueryOperationResponse%601> also has the following members that enable you to access additional information about a query result:</span></span>

- <span data-ttu-id="ce8b9-162">La propiedad <xref:System.Data.Services.Client.OperationResponse.Error%2A>: obtiene un error provocado por la operación, si se ha producido alguna.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-162"><xref:System.Data.Services.Client.OperationResponse.Error%2A> - gets an error thrown by the operation, if any has occurred.</span></span>

- <span data-ttu-id="ce8b9-163">La propiedad <xref:System.Data.Services.Client.OperationResponse.Headers%2A>: contiene una colección de encabezados de respuesta HTTP asociados con la respuesta de la consulta.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-163"><xref:System.Data.Services.Client.OperationResponse.Headers%2A> - contains the collection of HTTP response headers associated with the query response.</span></span>

- <span data-ttu-id="ce8b9-164">La propiedad <xref:System.Data.Services.Client.QueryOperationResponse.Query%2A>: obtiene el objeto <xref:System.Data.Services.Client.DataServiceQuery%601> original generado por <xref:System.Data.Services.Client.QueryOperationResponse%601>.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-164"><xref:System.Data.Services.Client.QueryOperationResponse.Query%2A> - gets the original <xref:System.Data.Services.Client.DataServiceQuery%601> that generated the <xref:System.Data.Services.Client.QueryOperationResponse%601>.</span></span>

- <span data-ttu-id="ce8b9-165">La propiedad <xref:System.Data.Services.Client.OperationResponse.StatusCode%2A>: obtiene el código de respuesta HTTP para la respuesta de la consulta.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-165"><xref:System.Data.Services.Client.OperationResponse.StatusCode%2A> - gets the HTTP response code for the query response.</span></span>

- <span data-ttu-id="ce8b9-166">La propiedad <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A>: obtiene el número total de entidades establecidas cuando se llamó al método <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> en <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-166"><xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> - gets the total number of entities in the entity set when the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method was called on the <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>

- <span data-ttu-id="ce8b9-167">La propiedad <xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A>: devuelve un objeto <xref:System.Data.Services.Client.DataServiceQueryContinuation> que contiene el URI de la siguiente página de resultados.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-167"><xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A> - returns a <xref:System.Data.Services.Client.DataServiceQueryContinuation> object that contains the URI of the next page of results.</span></span>

<span data-ttu-id="ce8b9-168">De forma predeterminada, Servicios de datos de WCF solo devuelve datos seleccionados explícitamente por el URI de la consulta.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-168">By default, WCF Data Services only returns data that is explicitly selected by the query URI.</span></span> <span data-ttu-id="ce8b9-169">De esta forma, puede cargar explícitamente datos desde el servicio de datos cuando sea necesario.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-169">This gives you the option to explicitly load additional data from the data service when it is needed.</span></span> <span data-ttu-id="ce8b9-170">Se envía una solicitud al servicio de datos cada vez que carga datos explícitamente desde el servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-170">A request is sent to the data service each time you explicitly load data from the data service.</span></span> <span data-ttu-id="ce8b9-171">Los datos que se pueden cargar explícitamente incluyen entidades relacionadas, datos de respuesta paginados y flujos de datos binarios.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-171">Data that can be explicitly loaded includes related entities, paged response data, and binary data streams.</span></span>

> [!NOTE]
> <span data-ttu-id="ce8b9-172">Puesto que un servicio de datos puede devolver una respuesta paginada, se recomienda que la aplicación use el patrón de programación para controlar la respuesta paginada de un servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-172">Because a data service may return a paged response, we recommend that your application use the programming pattern to handle a paged data service response.</span></span> <span data-ttu-id="ce8b9-173">Para obtener más información, vea [cargar contenido diferido](loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="ce8b9-173">For more information, see [Loading Deferred Content](loading-deferred-content-wcf-data-services.md).</span></span>

<span data-ttu-id="ce8b9-174">La cantidad de datos devueltos por una consulta también se puede reducir especificando que solo se devuelvan algunas propiedades de una entidad en la respuesta.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-174">The amount of data returned by a query can also be reduced by specifying that only certain properties of an entity are returned in the response.</span></span> <span data-ttu-id="ce8b9-175">Para obtener más información, consulte [proyecciones de consultas](query-projections-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="ce8b9-175">For more information, see [Query Projections](query-projections-wcf-data-services.md).</span></span>

## <a name="getting-a-count-of-the-total-number-of-entities-in-the-set"></a><span data-ttu-id="ce8b9-176">Obtener un recuento del número total de entidades del conjunto</span><span class="sxs-lookup"><span data-stu-id="ce8b9-176">Getting a Count of the Total Number of Entities in the Set</span></span>

<span data-ttu-id="ce8b9-177">En algunos escenarios, es útil saber el número total de entidades de una entidad establecida y no solamente el número devuelto por la consulta.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-177">In some scenarios, it is helpful to know the total number of entities in an entity set and not merely the number returned by the query.</span></span> <span data-ttu-id="ce8b9-178">Llame al método <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> de <xref:System.Data.Services.Client.DataServiceQuery%601> para solicitar que se incluya este recuento total de entidades del conjunto con los resultados de la consulta.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-178">Call the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method on the <xref:System.Data.Services.Client.DataServiceQuery%601> to request that this total count of entities in the set be included with the query result.</span></span> <span data-ttu-id="ce8b9-179">En este caso, la propiedad <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> del objeto <xref:System.Data.Services.Client.QueryOperationResponse%601> devuelto devuelve el número total de entidades del conjunto.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-179">In this case, the <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> property of the returned <xref:System.Data.Services.Client.QueryOperationResponse%601> returns the total number of entities in the set.</span></span>

<span data-ttu-id="ce8b9-180">Además, puede obtener el recuento total de entidades del conjunto como valor de las estructuras <xref:System.Int32> o <xref:System.Int64> llamando a los métodos <xref:System.Linq.Enumerable.Count%2A> o <xref:System.Linq.Enumerable.LongCount%2A>, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-180">You can also get only the total count of entities in the set either as an <xref:System.Int32> or as a <xref:System.Int64> value by calling the <xref:System.Linq.Enumerable.Count%2A> or <xref:System.Linq.Enumerable.LongCount%2A> methods respectively.</span></span> <span data-ttu-id="ce8b9-181">Cuando se llama a estos métodos, no se devuelve ningún objeto <xref:System.Data.Services.Client.QueryOperationResponse%601>; solo se devuelve el valor de recuento.</span><span class="sxs-lookup"><span data-stu-id="ce8b9-181">When these methods are called, a <xref:System.Data.Services.Client.QueryOperationResponse%601> is not returned; only the count value is returned.</span></span> <span data-ttu-id="ce8b9-182">Para obtener más información, vea [Cómo: determinar el número de entidades devueltas por una consulta](number-of-entities-returned-by-a-query-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="ce8b9-182">For more information, see [How to: Determine the Number of Entities Returned by a Query](number-of-entities-returned-by-a-query-wcf.md).</span></span>

## <a name="in-this-section"></a><span data-ttu-id="ce8b9-183">En esta sección</span><span class="sxs-lookup"><span data-stu-id="ce8b9-183">In This Section</span></span>

- [<span data-ttu-id="ce8b9-184">Proyecciones de consultas</span><span class="sxs-lookup"><span data-stu-id="ce8b9-184">Query Projections</span></span>](query-projections-wcf-data-services.md)

- [<span data-ttu-id="ce8b9-185">Materialización de objetos</span><span class="sxs-lookup"><span data-stu-id="ce8b9-185">Object Materialization</span></span>](object-materialization-wcf-data-services.md)

- [<span data-ttu-id="ce8b9-186">Consideraciones sobre LINQ</span><span class="sxs-lookup"><span data-stu-id="ce8b9-186">LINQ Considerations</span></span>](linq-considerations-wcf-data-services.md)

- [<span data-ttu-id="ce8b9-187">Procedimiento para ejecutar consultas de servicios de datos</span><span class="sxs-lookup"><span data-stu-id="ce8b9-187">How to: Execute Data Service Queries</span></span>](how-to-execute-data-service-queries-wcf-data-services.md)

- [<span data-ttu-id="ce8b9-188">Procedimiento para agregar opciones de consulta a una consulta de servicio de datos</span><span class="sxs-lookup"><span data-stu-id="ce8b9-188">How to: Add Query Options to a Data Service Query</span></span>](how-to-add-query-options-to-a-data-service-query-wcf-data-services.md)

- [<span data-ttu-id="ce8b9-189">Procedimiento para determinar el número de entidades devueltas por una consulta</span><span class="sxs-lookup"><span data-stu-id="ce8b9-189">How to: Determine the Number of Entities Returned by a Query</span></span>](number-of-entities-returned-by-a-query-wcf.md)

- [<span data-ttu-id="ce8b9-190">Procedimiento para especificar las credenciales del cliente para una solicitud de servicio de datos</span><span class="sxs-lookup"><span data-stu-id="ce8b9-190">How to: Specify Client Credentials for a Data Service Request</span></span>](specify-client-creds-for-a-data-service-request-wcf.md)

- [<span data-ttu-id="ce8b9-191">Procedimiento para establecer encabezados en la solicitud de cliente</span><span class="sxs-lookup"><span data-stu-id="ce8b9-191">How to: Set Headers in the Client Request</span></span>](how-to-set-headers-in-the-client-request-wcf-data-services.md)

- [<span data-ttu-id="ce8b9-192">Procedimiento relativo a los resultados de la consulta del proyecto</span><span class="sxs-lookup"><span data-stu-id="ce8b9-192">How to: Project Query Results</span></span>](how-to-project-query-results-wcf-data-services.md)

## <a name="see-also"></a><span data-ttu-id="ce8b9-193">Vea también</span><span class="sxs-lookup"><span data-stu-id="ce8b9-193">See also</span></span>

- [<span data-ttu-id="ce8b9-194">Biblioteca cliente de Data Services de WCF</span><span class="sxs-lookup"><span data-stu-id="ce8b9-194">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
