---
title: Proteger WCF Data Services
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- securing application [WCF Data Services]
- WCF Data Services, security
ms.assetid: 99fc2baa-a040-4549-bc4d-f683d60298af
ms.openlocfilehash: 097e387fa8f79345e4f0b64f1368435fddc3417f
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/15/2020
ms.locfileid: "90543425"
---
# <a name="securing-wcf-data-services"></a><span data-ttu-id="8f061-102">Proteger WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="8f061-102">Securing WCF Data Services</span></span>

<span data-ttu-id="8f061-103">En este artículo se describen las consideraciones de seguridad específicas para el desarrollo, la implementación y la ejecución de WCF Data Services y aplicaciones que tienen acceso a los servicios que admiten el Open Data Protocol (OData).</span><span class="sxs-lookup"><span data-stu-id="8f061-103">This article describes security considerations that are specific to developing, deploying, and running WCF Data Services and applications that access services that support the Open Data Protocol (OData).</span></span> <span data-ttu-id="8f061-104">También debe seguir las recomendaciones para crear aplicaciones de .NET Framework seguras.</span><span class="sxs-lookup"><span data-stu-id="8f061-104">You should also follow recommendations for creating secure .NET Framework applications.</span></span>  
  
<span data-ttu-id="8f061-105">Al planear cómo proteger un servicio de OData basado en WCF Data Services, debe abordar la autenticación, el proceso de detección y comprobación de la identidad de una entidad de seguridad y la autorización, el proceso de determinar si una entidad de seguridad autenticada tiene permiso para acceder a los recursos solicitados.</span><span class="sxs-lookup"><span data-stu-id="8f061-105">When planning how to secure a WCF Data Services-based OData service, you must address both authentication, the process of discovering and verifying the identity of a principal, and authorization, the process of determining whether an authenticated principal is allowed to access the requested resources.</span></span> <span data-ttu-id="8f061-106">Considere también si desea cifrar el mensaje mediante SSL.</span><span class="sxs-lookup"><span data-stu-id="8f061-106">Also consider whether to encrypt the message by using SSL.</span></span>  
  
## <a name="authenticating-client-requests"></a><span data-ttu-id="8f061-107">Autenticar las solicitudes de clientes</span><span class="sxs-lookup"><span data-stu-id="8f061-107">Authenticating Client Requests</span></span>  
<span data-ttu-id="8f061-108">WCF Data Services no implementa ningún tipo de autenticación propia, sino que se basa en las disposiciones de autenticación del host del servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="8f061-108">WCF Data Services does not implement any kind of authentication of its own, but rather relies on the authentication provisions of the data service host.</span></span> <span data-ttu-id="8f061-109">Esto significa que el servicio supone que cualquier solicitud que reciba ya se ha autenticado por el host de red y que el host ha identificado correctamente el principio de la solicitud adecuadamente a través de las interfaces proporcionadas por WCF Data Services.</span><span class="sxs-lookup"><span data-stu-id="8f061-109">This means that the service assumes that any request that it receives has already been authenticated by the network host and that the host has correctly identified the principle for the request appropriately via the interfaces provided by WCF Data Services.</span></span> <span data-ttu-id="8f061-110">Estas opciones y enfoques de autenticación se detallan en la [serie de autenticación y OData](https://devblogs.microsoft.com/odata/?s=%22OData+and+authentication%22)de varias partes.</span><span class="sxs-lookup"><span data-stu-id="8f061-110">These authentication options and approaches are detailed in the multipart [OData and Authentication series](https://devblogs.microsoft.com/odata/?s=%22OData+and+authentication%22).</span></span>  
  
### <a name="authentication-options-for-a-wcf-data-service"></a><span data-ttu-id="8f061-111">Opciones de autenticación para un servicio de datos de WCF</span><span class="sxs-lookup"><span data-stu-id="8f061-111">Authentication Options for a WCF Data Service</span></span>  
 <span data-ttu-id="8f061-112">En la siguiente tabla se enumeran algunos de los mecanismos de autenticación disponibles para ayudar al usuario a autenticar solicitudes en el servicio de datos de WCF.</span><span class="sxs-lookup"><span data-stu-id="8f061-112">The following table lists some of the authentication mechanisms that are available to help you authenticate requests to a WCF Data Service.</span></span>  
  
|<span data-ttu-id="8f061-113">Opciones de autenticación</span><span class="sxs-lookup"><span data-stu-id="8f061-113">Authentication Options</span></span>|<span data-ttu-id="8f061-114">Descripción</span><span class="sxs-lookup"><span data-stu-id="8f061-114">Description</span></span>|  
|----------------------------|-----------------|  
|<span data-ttu-id="8f061-115">Autenticación anónima</span><span class="sxs-lookup"><span data-stu-id="8f061-115">Anonymous authentication</span></span>|<span data-ttu-id="8f061-116">Cuando está habilitada la autenticación HTTP anónima, cualquier entidad de seguridad puede conectarse al servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="8f061-116">When HTTP anonymous authentication is enabled, any principle is able to connect to the data service.</span></span> <span data-ttu-id="8f061-117">No se necesitan credenciales para el acceso anónimo.</span><span class="sxs-lookup"><span data-stu-id="8f061-117">Credentials are not required for anonymous access.</span></span> <span data-ttu-id="8f061-118">Use esta opción solo cuando desee permitir a alguien el acceso al servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="8f061-118">Use this option only when you want to allow anyone to access the data service.</span></span>|  
|<span data-ttu-id="8f061-119">Autenticación básica e implícita</span><span class="sxs-lookup"><span data-stu-id="8f061-119">Basic and digest authentication</span></span>|<span data-ttu-id="8f061-120">Se necesitan credenciales formadas por un nombre de usuario y una contraseña para la autenticación.</span><span class="sxs-lookup"><span data-stu-id="8f061-120">Credentials consisting of a user name and password are required for authentication.</span></span> <span data-ttu-id="8f061-121">Admite autenticación de clientes que no sean de Windows.</span><span class="sxs-lookup"><span data-stu-id="8f061-121">Supports authentication of non-Windows clients.</span></span> <span data-ttu-id="8f061-122">**Nota de seguridad:**  Las credenciales de autenticación básica (nombre de usuario y contraseña) se envían sin cifrar y se pueden interceptar.</span><span class="sxs-lookup"><span data-stu-id="8f061-122">**Security Note:**  Basic authentication credentials (user name and password) are sent in the clear and can be intercepted.</span></span> <span data-ttu-id="8f061-123">La autenticación implícita envía un hash basado en las credenciales proporcionadas. De esta forma, la protección es mayor que la de la autenticación básica.</span><span class="sxs-lookup"><span data-stu-id="8f061-123">Digest authentication sends a hash based-on the supplied credentials, which makes it more secure than basic authentication.</span></span> <span data-ttu-id="8f061-124">Ambas son susceptibles de sufrir ataques de tipo " Man in the middle".</span><span class="sxs-lookup"><span data-stu-id="8f061-124">Both are susceptible to man-in-the-middle attacks.</span></span> <span data-ttu-id="8f061-125">Cuando se usan estos métodos de autenticación, debe plantearse la comunicación cifrada entre el cliente y el servicio de datos mediante el uso de la Capa de sockets seguros (SSL).</span><span class="sxs-lookup"><span data-stu-id="8f061-125">When using these authentication methods, you should consider encrypting communication between client and the data service by using the Secure Sockets Layer (SSL).</span></span> <br /><br /> <span data-ttu-id="8f061-126">Microsoft Internet Information Services (IIS) proporciona una implementación de autenticación básica e implícita para solicitudes HTTP en una aplicación ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8f061-126">Microsoft Internet Information Services (IIS) provides an implementation of both basic and digest authentication for HTTP requests in an ASP.NET application.</span></span> <span data-ttu-id="8f061-127">Esta implementación del proveedor de autenticación de Windows permite que una aplicación cliente de .NET Framework proporcione credenciales en el encabezado HTTP de la solicitud al servicio de datos para negociar sin ningún problema la autenticación de un usuario de Windows.</span><span class="sxs-lookup"><span data-stu-id="8f061-127">This Windows Authentication Provider implementation enables a .NET Framework client application to supply credentials in the HTTP header of the request to the data service to seamlessly negotiate authentication of a Windows user.</span></span> <span data-ttu-id="8f061-128">Para obtener más información, consulte [referencia técnica de autenticación implícita](/previous-versions/windows/it-pro/windows-server-2003/cc782794(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="8f061-128">For more information, see [Digest Authentication Technical Reference](/previous-versions/windows/it-pro/windows-server-2003/cc782794(v=ws.10)).</span></span><br /><br /> <span data-ttu-id="8f061-129">Si desea que el servicio de datos use la autenticación básica basada en algún servicio de autenticación personalizado y no en las credenciales de Windows, debe implementar un módulo HTTP ADP.NET personalizado para la autenticación.</span><span class="sxs-lookup"><span data-stu-id="8f061-129">When you want to have your data service use basic authentication based on some custom authentication service and not Windows credentials, you must implement a custom ADP.NET HTTP Module for authentication.</span></span><br /><br /> <span data-ttu-id="8f061-130">Para ver un ejemplo de cómo usar un esquema de autenticación básica personalizado con WCF Data Services, consulte la entrada de blog [OData and Authentication (parte 6): autenticación básica personalizada](https://devblogs.microsoft.com/odata/odata-and-authentication-part-6-custom-basic-authentication/).</span><span class="sxs-lookup"><span data-stu-id="8f061-130">For an example of how to use a custom basic authentication scheme with WCF Data Services, see the blog post [OData and Authentication – Part 6 – Custom Basic Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-6-custom-basic-authentication/).</span></span>|  
|<span data-ttu-id="8f061-131">Autenticación de Windows</span><span class="sxs-lookup"><span data-stu-id="8f061-131">Windows authentication</span></span>|<span data-ttu-id="8f061-132">Las credenciales basadas en Windows se intercambian mediante el uso de NTLM o Kerberos.</span><span class="sxs-lookup"><span data-stu-id="8f061-132">Windows-based credentials are exchanged by using NTLM or Kerberos.</span></span> <span data-ttu-id="8f061-133">Este mecanismo es más seguro que la autenticación básica o implícita, pero requiere que el cliente sea una aplicación basada en Windows.</span><span class="sxs-lookup"><span data-stu-id="8f061-133">This mechanism is more secure than basic or digest authentication, but it requires that the client be a Windows-based application.</span></span> <span data-ttu-id="8f061-134">IIS también proporciona una implementación de autenticación de Windows para las solicitudes HTTP en una aplicación ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8f061-134">IIS also provides an implementation of Windows authentication for HTTP requests in an ASP.NET application.</span></span> <span data-ttu-id="8f061-135">Para obtener más información, consulte [Introducción a la autenticación de formularios ASP.net](/previous-versions/aspnet/7t6b43z4(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="8f061-135">For more information, see [ASP.NET Forms Authentication Overview](/previous-versions/aspnet/7t6b43z4(v=vs.100)).</span></span><br /><br /> <span data-ttu-id="8f061-136">Para ver un ejemplo de cómo usar la autenticación de Windows con WCF Data Services, consulte la entrada de blog sobre [OData y autenticación, parte 2, autenticación de Windows](https://devblogs.microsoft.com/odata/odata-and-authentication-part-2-windows-authentication/).</span><span class="sxs-lookup"><span data-stu-id="8f061-136">For an example of how to use Windows authentication with WCF Data Services, see the blog post [OData and Authentication – Part 2 – Windows Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-2-windows-authentication/).</span></span>|  
|<span data-ttu-id="8f061-137">Autenticación de formularios ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8f061-137">ASP.NET forms authentication</span></span>|<span data-ttu-id="8f061-138">La autenticación de formularios permite autenticar a los usuarios mediante su propio código y, a continuación, conservar un token de autenticación en una cookie o en la dirección URL de la página.</span><span class="sxs-lookup"><span data-stu-id="8f061-138">Forms authentication lets you authenticate users by using your own code and then maintain an authentication token in a cookie or in the page URL.</span></span> <span data-ttu-id="8f061-139">Autentique el nombre de usuario y la contraseña de los usuarios que usen un formulario de inicio de sesión que cree.</span><span class="sxs-lookup"><span data-stu-id="8f061-139">You authenticate the user name and password of your users using a login form that you create.</span></span> <span data-ttu-id="8f061-140">Las solicitudes no autenticadas se redirigen a una página de inicio de sesión, en la que el usuario proporciona las credenciales y envía el formulario.</span><span class="sxs-lookup"><span data-stu-id="8f061-140">Unauthenticated requests are redirected to a login page, where the user provides credentials and submits the form.</span></span> <span data-ttu-id="8f061-141">Si la aplicación autentica la solicitud, el sistema emite un vale que contiene una clave con el fin de restablecer la identidad para posteriores solicitudes.</span><span class="sxs-lookup"><span data-stu-id="8f061-141">If the application authenticates the request, the system issues a ticket that contains a key for reestablishing the identity for subsequent requests.</span></span> <span data-ttu-id="8f061-142">Para obtener más información, vea [proveedor de autenticación de formularios](/previous-versions/aspnet/9wff0kyh(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="8f061-142">For more information, see [Forms Authentication Provider](/previous-versions/aspnet/9wff0kyh(v=vs.100)).</span></span> <span data-ttu-id="8f061-143">**Nota de seguridad:**  De forma predeterminada, la cookie que contiene el vale de autenticación de formularios no se protege cuando se usa la autenticación de formularios en una aplicación Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8f061-143">**Security Note:**  By default, the cookie that contains the forms authentication ticket is not secured when you use forms authentication in a ASP.NET Web application.</span></span> <span data-ttu-id="8f061-144">Debe plantearse exigir SSL para proteger tanto el vale de autenticación como las credenciales de inicio de sesión iniciales.</span><span class="sxs-lookup"><span data-stu-id="8f061-144">You should consider requiring SSL to protect both the authentication ticket and the initial login credentials.</span></span> <br /><br /> <span data-ttu-id="8f061-145">Para obtener un ejemplo de cómo usar la autenticación de formularios con WCF Data Services, vea la entrada de blog [OData and Authentication – parte 7: autenticación de formularios](https://devblogs.microsoft.com/odata/odata-and-authentication-part-7-forms-authentication/).</span><span class="sxs-lookup"><span data-stu-id="8f061-145">For an example of how to use forms authentication with WCF Data Services, see the blog post [OData and Authentication – Part 7 – Forms Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-7-forms-authentication/).</span></span>|  
|<span data-ttu-id="8f061-146">Autenticación basada en notificaciones</span><span class="sxs-lookup"><span data-stu-id="8f061-146">Claims-based authentication</span></span>|<span data-ttu-id="8f061-147">En la autenticación basada en notificaciones, el servicio de datos se basa en un servicio de proveedor de identidad "de terceros" de confianza para autenticar al usuario.</span><span class="sxs-lookup"><span data-stu-id="8f061-147">In claims-based authentication, the data service relies on a trusted "third-party" identity provider service to authenticate the user.</span></span> <span data-ttu-id="8f061-148">El proveedor de identidad autentica positivamente al usuario que solicita acceso a los recursos del servicio de datos y emite un token que concede acceso a los recursos solicitados.</span><span class="sxs-lookup"><span data-stu-id="8f061-148">The identity provider positively authenticates the user that is requesting access to data service resources and issues a token that grants access to the requested resources.</span></span> <span data-ttu-id="8f061-149">A continuación, este token se presenta en el servicio de datos, que concede acceso al usuario basándose en la relación de confianza con el servicio de identidad que emitió el token de acceso.</span><span class="sxs-lookup"><span data-stu-id="8f061-149">This token is then presented to the data service, which then grants access to the user based on the trust relationship with the identity service that issued the access token.</span></span><br /><br /> <span data-ttu-id="8f061-150">La ventaja de usar un proveedor de autenticación basado en notificaciones es que se pueden usar para autenticar distintos tipos de clientes en dominios de confianza.</span><span class="sxs-lookup"><span data-stu-id="8f061-150">The benefit of using a claims-based authentication provider is that they can be used to authenticate various types of clients across trust domains.</span></span> <span data-ttu-id="8f061-151">Si se usan tales proveedores de terceros, un servicio de datos puede descargar los requisitos de mantenimiento y autenticación de usuarios.</span><span class="sxs-lookup"><span data-stu-id="8f061-151">By employing such a third-party provider, a data service can offload the requirements of maintaining and authenticating users.</span></span> <span data-ttu-id="8f061-152">OAuth 2,0 es un protocolo de autenticación basado en notificaciones compatible con Azure AppFabric Access Control para la autorización federada como servicio.</span><span class="sxs-lookup"><span data-stu-id="8f061-152">OAuth 2.0 is a claims-based authentication protocol that is supported by Azure AppFabric Access Control for federated authorization as a service.</span></span> <span data-ttu-id="8f061-153">Este protocolo admite servicios basados en REST.</span><span class="sxs-lookup"><span data-stu-id="8f061-153">This protocol supports REST-based services.</span></span> <span data-ttu-id="8f061-154">Para ver un ejemplo de cómo usar OAuth 2,0 con WCF Data Services, consulte la entrada de blog [OData and Authentication – Part 8 – OAUTH Wrap](https://devblogs.microsoft.com/odata/odata-and-authentication-part-8-oauth-wrap/).</span><span class="sxs-lookup"><span data-stu-id="8f061-154">For an example of how to use OAuth 2.0 with WCF Data Services, see the blog post [OData and Authentication – Part 8 – OAuth WRAP](https://devblogs.microsoft.com/odata/odata-and-authentication-part-8-oauth-wrap/).</span></span>|  
  
<a name="clientAuthentication"></a>
### <a name="authentication-in-the-client-library"></a><span data-ttu-id="8f061-155">Autenticación de la biblioteca cliente</span><span class="sxs-lookup"><span data-stu-id="8f061-155">Authentication in the Client Library</span></span>  
 <span data-ttu-id="8f061-156">De forma predeterminada, la biblioteca de cliente de WCF Data Services no proporciona credenciales cuando se realiza una solicitud a un servicio de OData.</span><span class="sxs-lookup"><span data-stu-id="8f061-156">By default, the WCF Data Services client library does not supply credentials when making a request to an OData service.</span></span> <span data-ttu-id="8f061-157">Cuando el servicio de datos necesita credenciales de inicio de sesión para autenticar a un usuario, estas credenciales se puedan proporcionar en una clase <xref:System.Net.NetworkCredential> a la que se accede desde la propiedad <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> de la clase <xref:System.Data.Services.Client.DataServiceContext>, como en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="8f061-157">When login credentials are required by the data service to authenticate a user, these credentials can be supplied in a <xref:System.Net.NetworkCredential> accessed from the <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>, as in the following example:</span></span>  
  
```csharp  
// Set the client authentication credentials.  
context.Credentials =  
    new NetworkCredential(userName, password, domain);  
```  
  
```vb  
' Set the client authentication credentials.  
context.Credentials = _  
    New NetworkCredential(userName, password, domain)  
```  
  
 <span data-ttu-id="8f061-158">Para obtener más información, vea [Cómo: especificar credenciales de cliente para una solicitud de servicio de datos](specify-client-creds-for-a-data-service-request-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="8f061-158">For more information, see [How to: Specify Client Credentials for a Data Service Request](specify-client-creds-for-a-data-service-request-wcf.md).</span></span>  
  
 <span data-ttu-id="8f061-159">Cuando el servicio de datos necesite credenciales de inicio de sesión que no se puedan especificar mediante el uso de un objeto <xref:System.Net.NetworkCredential>, como un token basado en notificaciones o una cookie, debe establecer manualmente los encabezados en la solicitud HTTP, que suelen ser los encabezados `Authorization` y `Cookie`.</span><span class="sxs-lookup"><span data-stu-id="8f061-159">When the data service requires login credentials that cannot be specified by using a <xref:System.Net.NetworkCredential> object, such as a claims-based token or cookie, you must manually set headers in the HTTP request, usually the `Authorization` and `Cookie` headers.</span></span> <span data-ttu-id="8f061-160">Para obtener más información sobre este tipo de escenario de autenticación, vea la entrada de blog sobre [ OData y autenticación, parte 3, enlaces de cliente](https://devblogs.microsoft.com/odata/odata-and-authentication-part-3-clientside-hooks/).</span><span class="sxs-lookup"><span data-stu-id="8f061-160">For more information about this kind of authentication scenario, see the blog post [ OData and Authentication – Part 3 – ClientSide Hooks](https://devblogs.microsoft.com/odata/odata-and-authentication-part-3-clientside-hooks/).</span></span> <span data-ttu-id="8f061-161">Para obtener un ejemplo de cómo establecer encabezados HTTP en un mensaje de solicitud, consulte [Cómo: establecer encabezados en la solicitud de cliente](how-to-set-headers-in-the-client-request-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="8f061-161">For an example of how to set HTTP headers in a request message, see [How to: Set Headers in the Client Request](how-to-set-headers-in-the-client-request-wcf-data-services.md).</span></span>  
  
## <a name="impersonation"></a><span data-ttu-id="8f061-162">Suplantación</span><span class="sxs-lookup"><span data-stu-id="8f061-162">Impersonation</span></span>  
 <span data-ttu-id="8f061-163">Por lo general, el servicio de datos accede a los recursos necesarios, como los archivos del servidor o de la base de datos, mediante el uso de las credenciales del proceso de trabajo que hospeda el servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="8f061-163">Generally, the data service accesses required resources, such as files on the server or a database, by using the credentials of the worker process that is hosting the data service.</span></span> <span data-ttu-id="8f061-164">Al usar la suplantación, las aplicaciones de ASP.NET pueden ejecutarse con la identidad de Windows (cuenta de usuario) del usuario que realiza la solicitud.</span><span class="sxs-lookup"><span data-stu-id="8f061-164">When using impersonation, ASP.NET applications can execute with the Windows identity (user account) of the user making the request.</span></span> <span data-ttu-id="8f061-165">La suplantación se suele usar en aplicaciones que confían en IIS para autenticar al usuario y las credenciales de esta entidad de seguridad se usan para obtener acceso a los recursos necesarios.</span><span class="sxs-lookup"><span data-stu-id="8f061-165">Impersonation is commonly used in applications that rely on IIS to authenticate the user, and the credentials of this principle are used to access the required resources.</span></span> <span data-ttu-id="8f061-166">Para obtener más información, vea [suplantación de ASP.net](/previous-versions/aspnet/xh507fc5(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="8f061-166">For more information, see [ASP.NET Impersonation](/previous-versions/aspnet/xh507fc5(v=vs.100)).</span></span>  
  
## <a name="configuring-data-service-authorization"></a><span data-ttu-id="8f061-167">Configurar la autorización del servicio de datos</span><span class="sxs-lookup"><span data-stu-id="8f061-167">Configuring Data Service Authorization</span></span>  
 <span data-ttu-id="8f061-168">La autorización es la concesión de acceso a los recursos de la aplicación a una entidad de seguridad o a un proceso que se identifique basándose en una autenticación correcta previa.</span><span class="sxs-lookup"><span data-stu-id="8f061-168">Authorization is the granting of access to application resources to a principle or process that is identified based on a previously successful authentication.</span></span> <span data-ttu-id="8f061-169">Como regla general, solo debe conceder los derechos estrictamente necesarios a los usuarios del servicio de datos para realizar las operaciones que necesiten las aplicaciones cliente.</span><span class="sxs-lookup"><span data-stu-id="8f061-169">As a general practice, you should only grant sufficient rights to users of the data service to perform the operations required by client applications.</span></span>  
  
### <a name="restrict-access-to-data-service-resources"></a><span data-ttu-id="8f061-170">Restringir el acceso a los recursos del servicio de datos</span><span class="sxs-lookup"><span data-stu-id="8f061-170">Restrict Access to Data Service Resources</span></span>  
 <span data-ttu-id="8f061-171">De forma predeterminada, WCF Data Services le permite conceder acceso de lectura y escritura común a los recursos del servicio de datos (conjunto de entidades y operaciones de servicio) a cualquier usuario que pueda tener acceso al servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="8f061-171">By default, WCF Data Services enables you to grant common read and write access against data service resources (entity set and service operations) to any user that is able to access the data service.</span></span> <span data-ttu-id="8f061-172">Las reglas que definen el acceso de lectura y escritura se pueden definir por separado para cada conjunto de entidades expuesto por el servicio de datos, así como a las operaciones de servicio.</span><span class="sxs-lookup"><span data-stu-id="8f061-172">Rules that define read and write access can be defined separately for each entity set exposed by the data service, as well as to any service operations.</span></span> <span data-ttu-id="8f061-173">Se recomienda limitar el acceso tanto de lectura como de escritura a solo los recursos que necesite la aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="8f061-173">We recommend limiting both read and write access to only the resources required by the client application.</span></span> <span data-ttu-id="8f061-174">Para obtener más información, vea [requisitos mínimos de acceso a recursos](configuring-the-data-service-wcf-data-services.md#accessRequirements).</span><span class="sxs-lookup"><span data-stu-id="8f061-174">For more information, see [Minimum Resource Access Requirements](configuring-the-data-service-wcf-data-services.md#accessRequirements).</span></span>  
  
### <a name="implement-role-based-interceptors"></a><span data-ttu-id="8f061-175">Implementar interceptores basados en roles</span><span class="sxs-lookup"><span data-stu-id="8f061-175">Implement Role-Based Interceptors</span></span>  
 <span data-ttu-id="8f061-176">Los interceptores permiten interceptar solicitudes en los recursos del servicio de datos antes de que actúe en ellos dicho servicio.</span><span class="sxs-lookup"><span data-stu-id="8f061-176">Interceptors enable you to intercept requests against data service resources before they are acted on by the data service.</span></span> <span data-ttu-id="8f061-177">Para obtener más información, vea [interceptores](interceptors-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="8f061-177">For more information, see [Interceptors](interceptors-wcf-data-services.md).</span></span> <span data-ttu-id="8f061-178">Los interceptores le permiten tomar decisiones de autorización basadas el usuario autenticado que está realizando la solicitud.</span><span class="sxs-lookup"><span data-stu-id="8f061-178">Interceptors enable you to make authorization decisions based the authenticated user that is making the request.</span></span> <span data-ttu-id="8f061-179">Para obtener un ejemplo de cómo restringir el acceso a los recursos del servicio de datos en función de una identidad de usuario autenticada, consulte [Cómo: Interceptar mensajes del servicio de datos](how-to-intercept-data-service-messages-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="8f061-179">For an example of how to restrict access to data service resources based on an authenticated user identity, see [How to: Intercept Data Service Messages](how-to-intercept-data-service-messages-wcf-data-services.md).</span></span>  
  
### <a name="restrict-access-to-the-persisted-data-store-and-local-resources"></a><span data-ttu-id="8f061-180">Restringir el acceso al almacén de datos persistentes y a los recursos locales</span><span class="sxs-lookup"><span data-stu-id="8f061-180">Restrict Access to the Persisted Data Store and Local Resources</span></span>  
 <span data-ttu-id="8f061-181">A las cuentas que se usan para acceder al almacén persistente se les deben conceder solo los derechos estrictamente necesarios en una base de datos o en el sistema de archivos para admitir los requisitos del servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="8f061-181">The accounts that are used to access the persisted store should be granted only enough rights in a database or the file system to support the requirements of the data service.</span></span> <span data-ttu-id="8f061-182">Cuando se usa la autenticación anónima, se trata de la cuenta usada para ejecutar la aplicación de hospedaje.</span><span class="sxs-lookup"><span data-stu-id="8f061-182">When anonymous authentication is used, this is the account used to run the hosting application.</span></span> <span data-ttu-id="8f061-183">Para obtener más información, consulta [How to: Develop a WCF Data Service Running on IIS](how-to-develop-a-wcf-data-service-running-on-iis.md).</span><span class="sxs-lookup"><span data-stu-id="8f061-183">For more information, see [How to: Develop a WCF Data Service Running on IIS](how-to-develop-a-wcf-data-service-running-on-iis.md).</span></span> <span data-ttu-id="8f061-184">Cuando se usa la suplantación, a los usuarios autenticados se les debe conceder acceso a estos recursos, normalmente como parte de un grupo de Windows.</span><span class="sxs-lookup"><span data-stu-id="8f061-184">When impersonation is used, authenticated users must be granted access to these resources, usually as part of a Windows group.</span></span>  
  
## <a name="other-security-considerations"></a><span data-ttu-id="8f061-185">Otras consideraciones de seguridad</span><span class="sxs-lookup"><span data-stu-id="8f061-185">Other Security Considerations</span></span>  
  
### <a name="secure-the-data-in-the-payload"></a><span data-ttu-id="8f061-186">Proteger los datos de la carga</span><span class="sxs-lookup"><span data-stu-id="8f061-186">Secure the Data in the Payload</span></span>  
<span data-ttu-id="8f061-187">OData se basa en el protocolo HTTP.</span><span class="sxs-lookup"><span data-stu-id="8f061-187">OData is based on the HTTP protocol.</span></span> <span data-ttu-id="8f061-188">En un mensaje HTTP, el encabezado puede contener valiosas credenciales de usuario, en función de la autenticación implementada por el servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="8f061-188">In an HTTP message, the header may contain valuable user credentials, depending on the authentication implemented by the data service.</span></span> <span data-ttu-id="8f061-189">El cuerpo del mensaje también puede contener datos valiosos de clientes que se deben proteger.</span><span class="sxs-lookup"><span data-stu-id="8f061-189">The message body may also contain valuable customer data that must be protected.</span></span> <span data-ttu-id="8f061-190">En ambos casos, se recomienda que use SSL para proteger esta información a través de la conexión.</span><span class="sxs-lookup"><span data-stu-id="8f061-190">In both of these cases, we recommend that you use SSL to protect this information over the wire.</span></span>  
  
### <a name="ignored-message-headers-and-cookies"></a><span data-ttu-id="8f061-191">Cookies y encabezados del mensaje ignorados</span><span class="sxs-lookup"><span data-stu-id="8f061-191">Ignored Message Headers and Cookies</span></span>  
 <span data-ttu-id="8f061-192">Los encabezados de solicitudes HTTP, que no sean los que declaran los tipos de contenido y las ubicaciones de los recursos, se ignoran y nunca los establece el servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="8f061-192">HTTP request headers, other than those that declare content types and resource locations, are ignored and are never set by the data service.</span></span>  
  
 <span data-ttu-id="8f061-193">Las cookies se pueden usar como parte de un esquema de autenticación, por ejemplo, con la autenticación de formularios ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8f061-193">Cookies can be used as part of an authentication scheme, such as with ASP.NET Forms Authentication.</span></span> <span data-ttu-id="8f061-194">Sin embargo, las cookies HTTP establecidas en una solicitud entrante se omiten en los servicios de servicio de WCF.</span><span class="sxs-lookup"><span data-stu-id="8f061-194">However, any HTTP cookies set on an incoming request are ignored by WCF DataServices.</span></span> <span data-ttu-id="8f061-195">El host de un servicio de datos puede procesar la cookie, pero el tiempo de ejecución de WCF Data Services nunca analiza o devuelve cookies.</span><span class="sxs-lookup"><span data-stu-id="8f061-195">The host of a data service may process the cookie, but the WCF Data Services runtime never analyzes or returns cookies.</span></span> <span data-ttu-id="8f061-196">La biblioteca de cliente de WCF Data Services tampoco procesa cookies enviadas en la respuesta.</span><span class="sxs-lookup"><span data-stu-id="8f061-196">The WCF Data Services client library also does not process cookies sent in the response.</span></span>  
  
### <a name="custom-hosting-requirements"></a><span data-ttu-id="8f061-197">Requisitos personalizados de hospedaje</span><span class="sxs-lookup"><span data-stu-id="8f061-197">Custom Hosting Requirements</span></span>  
 <span data-ttu-id="8f061-198">De forma predeterminada, WCF Data Services se crea como una aplicación ASP.NET hospedada en IIS.</span><span class="sxs-lookup"><span data-stu-id="8f061-198">By default, WCF Data Services is created as an ASP.NET application hosted in IIS.</span></span> <span data-ttu-id="8f061-199">De esta forma, el servicio de datos puede sacar provecho de los comportamientos seguros de esta plataforma.</span><span class="sxs-lookup"><span data-stu-id="8f061-199">This enables the data service to leverage the secure behaviors of this platform.</span></span> <span data-ttu-id="8f061-200">Puede definir WCF Data Services que se hospedan en un host personalizado.</span><span class="sxs-lookup"><span data-stu-id="8f061-200">You can define WCF Data Services that are hosted by a custom host.</span></span> <span data-ttu-id="8f061-201">Para obtener más información, vea [hospedar el servicio de datos](hosting-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="8f061-201">For more information, see [Hosting the Data Service](hosting-the-data-service-wcf-data-services.md).</span></span> <span data-ttu-id="8f061-202">Los componentes y la plataforma que hospedan un servicio de datos deben asegurar los siguientes comportamientos de seguridad para impedir ataques contra el servicio de datos:</span><span class="sxs-lookup"><span data-stu-id="8f061-202">The components and platform hosting a data service must ensure the following security behaviors to prevent attacks on the data service:</span></span>  
  
- <span data-ttu-id="8f061-203">Limitar la longitud del URI aceptada en una solicitud del servicio de datos para todas las operaciones posibles.</span><span class="sxs-lookup"><span data-stu-id="8f061-203">Limit the length of the URI accepted in a data service request for all possible operations.</span></span>  
  
- <span data-ttu-id="8f061-204">Limitar el tamaño de los mensajes HTTP tanto entrantes como salientes.</span><span class="sxs-lookup"><span data-stu-id="8f061-204">Limit the size of both incoming and outgoing HTTP messages.</span></span>  
  
- <span data-ttu-id="8f061-205">Limitar el número total de solicitudes pendientes en cualquier momento dado.</span><span class="sxs-lookup"><span data-stu-id="8f061-205">Limit the total number of outstanding requests at any given time.</span></span>  
  
- <span data-ttu-id="8f061-206">Limite el tamaño de los encabezados HTTP y sus valores, y proporcione WCF Data Services acceso a los datos de encabezado.</span><span class="sxs-lookup"><span data-stu-id="8f061-206">Limit the size of HTTP headers and their values, and provide WCF Data Services access to header data.</span></span>  
  
- <span data-ttu-id="8f061-207">Detectar y contraatacar los ataques conocidos, como ataques SYN de TCP y de reproducción de mensajes.</span><span class="sxs-lookup"><span data-stu-id="8f061-207">Detect and counter known attacks, such as TCP SYN and message replay attacks.</span></span>  
  
### <a name="values-are-not-further-encoded"></a><span data-ttu-id="8f061-208">Los valores ya no se codifican</span><span class="sxs-lookup"><span data-stu-id="8f061-208">Values Are Not Further Encoded</span></span>  
 <span data-ttu-id="8f061-209">Los valores de propiedad enviados al servicio de datos no se codifican en tiempo de ejecución de WCF Data Services.</span><span class="sxs-lookup"><span data-stu-id="8f061-209">Property values sent to the data service are not further encoded by the WCF Data Services runtime.</span></span> <span data-ttu-id="8f061-210">Por ejemplo, cuando una propiedad de cadena de una entidad contiene contenido HTML con formato, el servicio de datos no codifica las etiquetas en HTML.</span><span class="sxs-lookup"><span data-stu-id="8f061-210">For example, when a string property of an entity contains formatted HTML content, the tags are not HTML encoded by the data service.</span></span> <span data-ttu-id="8f061-211">Además, el servicio de datos ya no codifica los valores de propiedad de la respuesta.</span><span class="sxs-lookup"><span data-stu-id="8f061-211">The data service also does not further encode property values in the response.</span></span> <span data-ttu-id="8f061-212">Asimismo, la biblioteca cliente ya no efectúa ningún tipo de codificación adicional.</span><span class="sxs-lookup"><span data-stu-id="8f061-212">The client library also does not perform any additional encoding.</span></span>  
  
### <a name="considerations-for-client-applications"></a><span data-ttu-id="8f061-213">Consideraciones sobre aplicaciones cliente</span><span class="sxs-lookup"><span data-stu-id="8f061-213">Considerations for Client Applications</span></span>  
 <span data-ttu-id="8f061-214">Las siguientes consideraciones de seguridad se aplican a las aplicaciones que utilizan el cliente de WCF Data Services para tener acceso a los servicios de OData:</span><span class="sxs-lookup"><span data-stu-id="8f061-214">The following security considerations apply to applications that use the WCF Data Services client to access OData services:</span></span>  
  
- <span data-ttu-id="8f061-215">La biblioteca cliente asume que los protocolos usados para acceder al servicio de datos proporcionan un nivel de seguridad adecuado.</span><span class="sxs-lookup"><span data-stu-id="8f061-215">The client library assumes that the protocols used to access the data service provide an appropriate level of security.</span></span>  
  
- <span data-ttu-id="8f061-216">La biblioteca cliente usa todos los valores predeterminados para las opciones de tiempos de espera y de análisis de las pilas de transporte proporcionadas por la plataforma subyacente.</span><span class="sxs-lookup"><span data-stu-id="8f061-216">The client library uses all the default values for timeouts and parsing options of the underlying platform-provided transport stacks.</span></span>  
  
- <span data-ttu-id="8f061-217">La biblioteca cliente no lee la configuración a partir de los archivos de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="8f061-217">The client library does not read any settings from application configuration files.</span></span>  
  
- <span data-ttu-id="8f061-218">La biblioteca cliente no implementa los mecanismos de acceso entre dominios.</span><span class="sxs-lookup"><span data-stu-id="8f061-218">The client library does not implement any cross domain access mechanisms.</span></span> <span data-ttu-id="8f061-219">En su lugar, confía en los mecanismos proporcionados por la pila HTTP subyacente.</span><span class="sxs-lookup"><span data-stu-id="8f061-219">Instead, it relies on the mechanisms provided by the underlying HTTP stack.</span></span>  
  
- <span data-ttu-id="8f061-220">La biblioteca cliente no dispone de elementos de interfaz de usuario y nunca intenta mostrar o presentar los datos que recibe o envía.</span><span class="sxs-lookup"><span data-stu-id="8f061-220">The client library has no user interface elements, and it never tries to display or render the data that it receives or sends.</span></span>  
  
- <span data-ttu-id="8f061-221">Se recomienda que las aplicaciones cliente siempre validen la entrada del usuario, así como los datos aceptados de servicios que no sean de confianza.</span><span class="sxs-lookup"><span data-stu-id="8f061-221">We recommend that client applications always validate user input as well as data accepted from untrusted services.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8f061-222">Vea también</span><span class="sxs-lookup"><span data-stu-id="8f061-222">See also</span></span>

- [<span data-ttu-id="8f061-223">Definir Servicios de datos de WCF</span><span class="sxs-lookup"><span data-stu-id="8f061-223">Defining WCF Data Services</span></span>](defining-wcf-data-services.md)
- [<span data-ttu-id="8f061-224">Biblioteca cliente de Data Services de WCF</span><span class="sxs-lookup"><span data-stu-id="8f061-224">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
