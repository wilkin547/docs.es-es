---
title: Configurar el servicio de datos (Data Services de WCF)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, configuring
ms.assetid: 59efd4c8-cc7a-4800-a0a4-d3f8abe6c55c
ms.openlocfilehash: 0824a43cba1a21cc9ae92b1f807c6a1369fd63ed
ms.sourcegitcommit: 2350a091ef6459f0fcfd894301242400374d8558
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/21/2018
ms.locfileid: "46530289"
---
# <a name="configuring-the-data-service-wcf-data-services"></a>Configurar el servicio de datos (Data Services de WCF)
Con [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], puede crear servicios de datos que exponen [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] fuentes de distribución. Los datos de estas fuentes pueden proceder de diferentes orígenes de datos. [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] usa los proveedores de datos para exponer estos datos como un [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] fuentes de distribución. Estos proveedores incluyen un proveedor de [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)], un proveedor de reflexión y un conjunto de interfaces de proveedor de servicio de datos personalizados. La implementación del proveedor define el modelo de datos del servicio. Para obtener más información, consulte [proveedores de servicios de datos](../../../../docs/framework/data/wcf/data-services-providers-wcf-data-services.md).  
  
 En [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], un servicio de datos es una clase que hereda de la clase <xref:System.Data.Services.DataService%601>, donde el tipo del servicio de datos es el contenedor de entidades del modelo de datos. Este contenedor de entidades tiene una o varias propiedades que devuelven una interfaz <xref:System.Linq.IQueryable%601>, que se usa para tener acceso a los conjuntos de entidades del modelo de datos.  
  
 Los miembros de la clase <xref:System.Data.Services.DataServiceConfiguration> definen los comportamientos del servicio de datos junto con los miembros de la clase <xref:System.Data.Services.DataServiceBehavior>, a la que se tiene acceso desde la propiedad <xref:System.Data.Services.DataServiceConfiguration.DataServiceBehavior%2A> de la clase <xref:System.Data.Services.DataServiceConfiguration>. La clase <xref:System.Data.Services.DataServiceConfiguration> se proporciona al método `InitializeService` que implementa el servicio de datos, como en la siguiente implementación de un servicio de datos de Northwind:  
  
[!code-csharp[Astoria Northwind Service#DataServiceConfigComplete](../../../../samples/snippets/csharp/VS_Snippets_Misc/Astoria Northwind Service/cs/northwind.svc.cs#dataserviceconfigcomplete)]  
[!code-vb[Astoria Northwind Service#DataServiceConfigComplete](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/Astoria Northwind Service/vb/northwind.svc.vb#dataserviceconfigcomplete)]  
  
## <a name="data-service-configuration-settings"></a>Configuración del servicio de datos  
 La clase <xref:System.Data.Services.DataServiceConfiguration> permite especificar los comportamientos siguientes del servicio de datos.  
  
|Miembro|Comportamiento|  
|------------|--------------|  
|<xref:System.Data.Services.DataServiceBehavior.AcceptCountRequests%2A>|Permite deshabilitar las solicitudes de recuento que se envían al servicio de datos usando el segmento de ruta de acceso `$count` y la opción de consulta `$inlinecount`. Para obtener más información, consulte [OData: convenciones URI](https://go.microsoft.com/fwlink/?LinkId=185564).|  
|<xref:System.Data.Services.DataServiceBehavior.AcceptProjectionRequests%2A>|Permite deshabilitar la compatibilidad con la proyección de los datos en las solicitudes que se envían al servicio de datos usando la opción de consulta `$select`. Para obtener más información, consulte [OData: convenciones URI](https://go.microsoft.com/fwlink/?LinkId=185564).|  
|<xref:System.Data.Services.DataServiceConfiguration.EnableTypeAccess%2A>|Permite exponer un tipo de datos en los metadatos para un proveedor de metadatos dinámico definido mediante la interfaz <xref:System.Data.Services.Providers.IDataServiceMetadataProvider>.|  
|<xref:System.Data.Services.DataServiceConfiguration.EnableTypeConversion%2A>|Le permite especificar si el motor en tiempo de ejecución del servicio de datos debe convertir el tipo contenido en la carga al tipo de propiedad real que se especifica en la solicitud.|  
|<xref:System.Data.Services.DataServiceBehavior.InvokeInterceptorsOnLinkDelete%2A>|Permite especificar si se invocan o no interceptores de cambio registrados en las entidades relacionadas cuando se elimina un vínculo de relación entre dos entidades.|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxBatchCount%2A>|Permite limitar el número de conjuntos de cambios y operaciones de consulta que se permiten en un solo lote. Para obtener más información, consulte [OData: Batch](https://go.microsoft.com/fwlink/?LinkId=185602) y [realizar operaciones por lotes](../../../../docs/framework/data/wcf/batching-operations-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxChangesetCount%2A>|Permite limitar el número máximo de cambios que se pueden incluir en un solo conjunto de cambios. Para obtener más información, consulte [Cómo: habilitar la paginación de datos los resultados de servicio](../../../../docs/framework/data/wcf/how-to-enable-paging-of-data-service-results-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxExpandCount%2A>|Permite limitar el tamaño de una respuesta limitando el número de entidades relacionadas que pueden incluirse en una sola solicitud utilizando el operador de consulta `$expand`. Para obtener más información, consulte vea [OData: convenciones URI](https://go.microsoft.com/fwlink/?LinkId=185564) y [cargar contenido diferido](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxExpandDepth%2A>|Permite limitar el tamaño de una respuesta limitando la profundidad del gráfico de las entidades relacionadas que pueden incluirse en una sola solicitud usando el operador de consulta `$expand`. Para obtener más información, consulte vea [OData: convenciones URI](https://go.microsoft.com/fwlink/?LinkId=185564) y [cargar contenido diferido](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxObjectCountOnInsert%2A>|Permite limitar el número de entidades que se van a insertar que puede contener una sola solicitud POST.|  
|<xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A>|Define la versión del protocolo Atom utilizado por el servicio de datos. Cuando el valor de la propiedad <xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A> se establece en un valor menor que el valor máximo de <xref:System.Data.Services.Common.DataServiceProtocolVersion>, la funcionalidad más reciente de [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] no está disponible para los clientes que tengan acceso al servicio de datos. Para obtener más información, consulte [versiones del servicio de datos](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.MaxResultsPerCollection%2A>|Le permite limitar el tamaño de una respuesta limitando el número de entidades de cada conjunto de entidades que se devuelve como fuente de distribución de datos.|  
|<xref:System.Data.Services.DataServiceConfiguration.RegisterKnownType%2A>|Agrega un tipo de datos a la lista de tipos reconocidos por el servicio de datos.|  
|<xref:System.Data.Services.DataServiceConfiguration.SetEntitySetAccessRule%2A>|Establece los derechos de acceso para los recursos del conjunto de entidades que están disponibles en el servicio de datos. Se puede proporcionar el valor asterisco (`*` para el parámetro de nombre para establecer el acceso en el mismo nivel para todos los conjuntos de entidades restantes. Se recomienda establecer el acceso a los conjuntos de entidades para proporcionar el acceso con privilegios mínimos a los recursos del servicio de datos requeridos por las aplicaciones cliente. Para obtener más información, consulta [Securing WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md). Para obtener ejemplos de los derechos de acceso mínimos requeridos para una determinada acción URI y HTTP, vea la tabla en la [requisitos mínimos de acceso de recurso](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md#accessRequirements) sección.|  
|<xref:System.Data.Services.DataServiceConfiguration.SetEntitySetPageSize%2A>|Establece el tamaño de página máximo de un recurso de conjunto de entidades. Para obtener más información, consulte [Cómo: habilitar la paginación de datos los resultados de servicio](../../../../docs/framework/data/wcf/how-to-enable-paging-of-data-service-results-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.SetServiceOperationAccessRule%2A>|Establece los derechos de acceso para las operaciones de servicio definidas en el servicio de datos. Para obtener más información, consulte [las operaciones de servicio](../../../../docs/framework/data/wcf/service-operations-wcf-data-services.md). Se puede proporcionar el valor asterisco (`*`) para el parámetro de nombre con objeto de establecer el acceso en el mismo nivel para todas las operaciones de servicio. Se recomienda establecer el acceso a las operaciones de servicio para proporcionar el acceso con privilegios mínimos a los recursos del servicio de datos requeridos por las aplicaciones cliente. Para obtener más información, consulta [Securing WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md).|  
|<xref:System.Data.Services.DataServiceConfiguration.UseVerboseErrors%2A>|Esta propiedad de configuración le permite solucionar más fácilmente los problemas de un servicio de datos devolviendo más información en el mensaje de respuesta del error. Esta opción no está pensada para su uso en un entorno de producción. Para obtener más información, consulte [vías de desarrollo y la implementación de WCF Data Services](../../../../docs/framework/data/wcf/developing-and-deploying-wcf-data-services.md).|  
  
<a name="accessRequirements"></a>   
## <a name="minimum-resource-access-requirements"></a>Requisitos mínimos de acceso a recursos  
 En la siguiente tabla se detallan los derechos mínimos del conjunto de entidades que se deben conceder para ejecutar una operación concreta. Ejemplos de ruta de acceso se basan en el servicio de datos de Northwind que se crea cuando se completa la [quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md). Puesto que las enumeraciones <xref:System.Data.Services.EntitySetRights> y <xref:System.Data.Services.ServiceOperationRights> se definen usando la clase <xref:System.FlagsAttribute>, puede usar un operador OR lógico con el fin de especificar varios permisos para una operación o un conjunto de entidades únicos. Para obtener más información, consulte [Cómo: habilitar el acceso al servicio de datos](../../../../docs/framework/data/wcf/how-to-enable-access-to-the-data-service-wcf-data-services.md).  
  
|Ruta de acceso/acción|`GET`|`DELETE`|`MERGE`|`POST`|`PUT`|  
|------------------|-----------|--------------|-------------|------------|-----------|  
|`/Customers`|<xref:System.Data.Services.EntitySetRights.ReadMultiple>|No compatibles|No compatibles|<xref:System.Data.Services.EntitySetRights.WriteAppend>|No compatibles|  
|`/Customers('ALFKI')`|<xref:System.Data.Services.EntitySetRights.ReadSingle>|<xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteDelete>|<xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteMerge>|N/D|<xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers('ALFKI')/Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|No compatibles|No compatibles|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteMerge> o <xref:System.Data.Services.EntitySetRights.WriteReplace><br /><br /> - y -<br /><br /> `Orders` `:` Y <xref:System.Data.Services.EntitySetRights.WriteAppend>|No compatibles|  
|`/Customers('ALFKI')/Orders(10643)`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteDelete>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteMerge>|No compatibles|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Orders(10643)/Customer`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteDelete><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteMerge>;<br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.WriteAppend><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.WriteAppend> y <xref:System.Data.Services.EntitySetRights.ReadSingle>|No compatibles|  
|`/Customers('ALFKI')/$links/Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|No compatibles|No compatibles|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteMerge> o <xref:System.Data.Services.EntitySetRights.WriteReplace><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|No compatibles|  
|`/Customers('ALFKI')/$links/Orders(10643)`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteMerge> o <xref:System.Data.Services.EntitySetRights.WriteReplace><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|No compatibles|No compatibles|No compatibles|  
|`/Orders(10643)/$links/Customer`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle>|`Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteMerge> o <xref:System.Data.Services.EntitySetRights.WriteReplace>|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteMerge>|No compatibles|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle>;<br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers/$count`|<xref:System.Data.Services.EntitySetRights.ReadMultiple>|No compatibles|No compatibles|No compatibles|No compatibles|  
|`/Customers('ALFKI')/ContactName`|<xref:System.Data.Services.EntitySetRights.ReadSingle>|No compatibles|<xref:System.Data.Services.EntitySetRights.WriteMerge>|No compatibles|<xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers('ALFKI')/Address/StreetAddress/$value` <sup>1</sup>|<xref:System.Data.Services.EntitySetRights.ReadSingle>|<xref:System.Data.Services.EntitySetRights.WriteDelete>|No compatibles|No compatibles|No compatibles|  
|`/Customers('ALFKI')/ContactName/$value`|<xref:System.Data.Services.EntitySetRights.ReadSingle>|<xref:System.Data.Services.EntitySetRights.ReadSingle> y <xref:System.Data.Services.EntitySetRights.WriteDelete>|<xref:System.Data.Services.EntitySetRights.WriteMerge>|No compatibles|<xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers('ALFKI')/$value` <sup>2</sup>|<xref:System.Data.Services.EntitySetRights.ReadSingle>|No compatibles|No compatibles|No compatibles|<xref:System.Data.Services.EntitySetRights.WriteReplace>|  
|`/Customers?$select=Orders/*&$expand=Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|No compatibles|No compatibles|`Customers`: <xref:System.Data.Services.EntitySetRights.WriteAppend>|No compatibles|  
|`/Customers('ALFKI')?$select=Orders/*&$expand=Orders`|`Customers`: <xref:System.Data.Services.EntitySetRights.ReadSingle><br /><br /> - y -<br /><br /> `Orders`: <xref:System.Data.Services.EntitySetRights.ReadMultiple>|No compatibles|No compatibles|No compatibles|No compatibles|  
  
 <sup>1</sup> en este ejemplo, `Address` representa una propiedad de tipo complejo de la `Customers` entidad que tiene una propiedad denominada `StreetAddress`. El modelo utilizado por los servicios de datos de Northwind no define este tipo complejo explícitamente. Cuando el modelo de datos se define con el proveedor de [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)], puede usar las herramientas de [!INCLUDE[adonet_edm](../../../../includes/adonet-edm-md.md)] para definir este tipo complejo. Para obtener más información, consulte [Cómo: crear y modificar tipos complejos](https://msdn.microsoft.com/library/afb8e206-0ffe-4597-b6d4-6ab566897e1d).  
  
 <sup>2</sup> se admite este URI cuando se define una propiedad que devuelve un objeto binario grande (BLOB) como el recurso multimedia que pertenece a una entidad que es una entrada de vínculo multimedia, que en este caso, es `Customers`. Para obtener más información, consulte [proveedor de transmisión](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md).  
  
<a name="versioning"></a>   
## <a name="versioning-requirements"></a>Requisitos de control de versiones  
 Los siguientes comportamientos de configuración del servicio de datos requieren la versión 2 del protocolo [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] o versiones posteriores:  
  
-   Compatibilidad para las solicitudes de recuento.  
  
-   Compatibilidad para la opción de consulta $select de proyección.  
  
 Para obtener más información, consulte [versiones del servicio de datos](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).  
  
## <a name="see-also"></a>Vea también  
 [Definir Servicios de datos de WCF](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)  
 [Hospedaje del servicio de datos](../../../../docs/framework/data/wcf/hosting-the-data-service-wcf-data-services.md)
