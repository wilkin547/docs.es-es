---
title: Consideraciones de seguridad sobre la reflexión
ms.date: 03/30/2017
helpviewer_keywords:
- permissions [.NET Framework], reflection
- MethodInfo parameters
- reflection, security
- partial trust,reflection
- nonpublic members
- reflection,partial trust
- link demands
ms.assetid: 42d9dc2a-8fcc-4ff3-b002-4ff260ef3dc5
ms.openlocfilehash: 1bdaf3abd39797274236ace4cb2967d2e7d199b2
ms.sourcegitcommit: 62285ec11fa8e8424bab00511a90760c60e63c95
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 04/20/2020
ms.locfileid: "81644188"
---
# <a name="security-considerations-for-reflection"></a><span data-ttu-id="a734e-102">Consideraciones de seguridad sobre la reflexión</span><span class="sxs-lookup"><span data-stu-id="a734e-102">Security Considerations for Reflection</span></span>

<span data-ttu-id="a734e-103">La reflexión proporciona la capacidad de obtener información sobre tipos y miembros, así como de obtener acceso a miembros (es decir, para llamar a métodos y constructores, obtener y establecer valores de propiedades, agregar y quitar controladores de eventos etc.).</span><span class="sxs-lookup"><span data-stu-id="a734e-103">Reflection provides the ability to obtain information about types and members, and to access members (that is, to call methods and constructors, to get and set property values, to add and remove event handlers, and so on).</span></span> <span data-ttu-id="a734e-104">No hay restricciones en el uso de la reflexión para obtener información sobre tipos y miembros.</span><span class="sxs-lookup"><span data-stu-id="a734e-104">The use of reflection to obtain information about types and members is not restricted.</span></span> <span data-ttu-id="a734e-105">Todo el código puede usar la reflexión para realizar las siguientes tareas:</span><span class="sxs-lookup"><span data-stu-id="a734e-105">All code can use reflection to perform the following tasks:</span></span>

- <span data-ttu-id="a734e-106">Enumerar tipos y miembros y examinar sus metadatos.</span><span class="sxs-lookup"><span data-stu-id="a734e-106">Enumerate types and members, and examine their metadata.</span></span>

- <span data-ttu-id="a734e-107">Enumerar y examinar los ensamblados y módulos.</span><span class="sxs-lookup"><span data-stu-id="a734e-107">Enumerate and examine assemblies and modules.</span></span>

<span data-ttu-id="a734e-108">Por el contrario, el uso de la reflexión para obtener acceso a miembros está sujeto a restricciones.</span><span class="sxs-lookup"><span data-stu-id="a734e-108">Using reflection to access members, by contrast, is subject to restrictions.</span></span> <span data-ttu-id="a734e-109">A partir de .NET Framework 4, solo el código de confianza puede usar la reflexión para obtener acceso a los miembros críticos para la seguridad.</span><span class="sxs-lookup"><span data-stu-id="a734e-109">Beginning with the .NET Framework 4, only trusted code can use reflection to access security-critical members.</span></span> <span data-ttu-id="a734e-110">Además, solo el código de confianza puede usar la reflexión para obtener acceso a miembros no públicos a los que no tendría acceso directo el código compilado.</span><span class="sxs-lookup"><span data-stu-id="a734e-110">Furthermore, only trusted code can use reflection to access nonpublic members that would not be directly accessible to compiled code.</span></span> <span data-ttu-id="a734e-111">Por último, el código que usa la reflexión para tener acceso a un miembro crítico para la seguridad debe tener los permisos que exija el miembro crítico para la seguridad, al igual que con el código compilado.</span><span class="sxs-lookup"><span data-stu-id="a734e-111">Finally, code that uses reflection to access a safe-critical member must have whatever permissions the safe-critical member demands, just as with compiled code.</span></span>

<span data-ttu-id="a734e-112">En función de los permisos necesarios, el código puede usar la reflexión para realizar los siguientes tipos de acceso:</span><span class="sxs-lookup"><span data-stu-id="a734e-112">Subject to necessary permissions, code can use reflection to perform the following kinds of access:</span></span>

- <span data-ttu-id="a734e-113">Acceso a miembros públicos que no son críticos para la seguridad.</span><span class="sxs-lookup"><span data-stu-id="a734e-113">Access public members that are not security-critical.</span></span>

- <span data-ttu-id="a734e-114">Acceso a miembros no públicos accesibles para el código compilado, si esos miembros no son críticos para la seguridad.</span><span class="sxs-lookup"><span data-stu-id="a734e-114">Access nonpublic members that would be accessible to compiled code, if those members are not security-critical.</span></span> <span data-ttu-id="a734e-115">Algunos ejemplos de estos miembros no públicos son:</span><span class="sxs-lookup"><span data-stu-id="a734e-115">Examples of such nonpublic members include:</span></span>

  - <span data-ttu-id="a734e-116">Miembros protegidos de clases base del código de llamada.</span><span class="sxs-lookup"><span data-stu-id="a734e-116">Protected members of the calling code's base classes.</span></span> <span data-ttu-id="a734e-117">(En la reflexión, esto se conoce como acceso de nivel familiar).</span><span class="sxs-lookup"><span data-stu-id="a734e-117">(In reflection, this is referred to as family-level access.)</span></span>

  - <span data-ttu-id="a734e-118">Miembros `internal` (`Friend` en Visual Basic) del ensamblado del código de llamada.</span><span class="sxs-lookup"><span data-stu-id="a734e-118">`internal` members (`Friend` members in Visual Basic) in the calling code's assembly.</span></span> <span data-ttu-id="a734e-119">(En la reflexión, esto se conoce como acceso de nivel de ensamblado).</span><span class="sxs-lookup"><span data-stu-id="a734e-119">(In reflection, this is referred to as assembly-level access.)</span></span>

  - <span data-ttu-id="a734e-120">Miembros privados de otras instancias de la clase que contiene el código de llamada.</span><span class="sxs-lookup"><span data-stu-id="a734e-120">Private members of other instances of the class that contains the calling code.</span></span>

<span data-ttu-id="a734e-121">Por ejemplo, el código que se ejecuta en un dominio de aplicación en espacio aislado se limita al acceso descrito en esta lista, a menos que el dominio de aplicación conceda permisos adicionales.</span><span class="sxs-lookup"><span data-stu-id="a734e-121">For example, code that is run in a sandboxed application domain is limited to the access described in this list, unless the application domain grants additional permissions.</span></span>

<span data-ttu-id="a734e-122">A partir de .NET Framework 2.0 Service Pack 1, si se intenta tener acceso a los miembros que no suelen estar accesibles, se genera una petición para el conjunto de permisos del objeto de destino más <xref:System.Security.Permissions.ReflectionPermission> con la marca <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a734e-122">Starting with the .NET Framework 2.0 Service Pack 1, attempting to access members that are normally inaccessible generates a demand for the grant set of the target object plus <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag.</span></span> <span data-ttu-id="a734e-123">El código que se ejecuta con plena confianza (por ejemplo, el código de una aplicación que se inicia desde la línea de comandos) siempre puede satisfacer estos permisos.</span><span class="sxs-lookup"><span data-stu-id="a734e-123">Code that is running with full trust (for example, code in an application that is launched from the command line) can always satisfy these permissions.</span></span> <span data-ttu-id="a734e-124">(Esto está sujeto a las limitaciones de acceso a miembros críticos para la seguridad, como se describe más adelante en este artículo).</span><span class="sxs-lookup"><span data-stu-id="a734e-124">(This is subject to limitations in accessing security-critical members, as described later in this article.)</span></span>

<span data-ttu-id="a734e-125">Si quiere, un dominio de aplicación en espacio aislado puede conceder <xref:System.Security.Permissions.ReflectionPermission> con la marca <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType>, tal como se describe en la sección [Acceso a miembros que suelen ser inaccesibles](#accessingNormallyInaccessible), más adelante en este artículo.</span><span class="sxs-lookup"><span data-stu-id="a734e-125">Optionally, a sandboxed application domain can grant <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag, as described in the section [Accessing Members That Are Normally Inaccessible](#accessingNormallyInaccessible), later in this article.</span></span>

<a name="accessingSecurityCritical"></a>

## <a name="accessing-security-critical-members"></a><span data-ttu-id="a734e-126">Acceso a miembros críticos para la seguridad</span><span class="sxs-lookup"><span data-stu-id="a734e-126">Accessing Security-Critical Members</span></span>

<span data-ttu-id="a734e-127">Un miembro es crítico para la seguridad si tiene el <xref:System.Security.SecurityCriticalAttribute>, si pertenece a un tipo que tiene el <xref:System.Security.SecurityCriticalAttribute>, o si se encuentra en un ensamblado crítico para la seguridad.</span><span class="sxs-lookup"><span data-stu-id="a734e-127">A member is security-critical if it has the <xref:System.Security.SecurityCriticalAttribute>, if it belongs to a type that has the <xref:System.Security.SecurityCriticalAttribute>, or if it is in a security-critical assembly.</span></span> <span data-ttu-id="a734e-128">A partir de .NET Framework 4, las reglas para tener acceso a los miembros críticos para la seguridad son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="a734e-128">Beginning with the .NET Framework 4, the rules for accessing security-critical members are as follows:</span></span>

- <span data-ttu-id="a734e-129">El código transparente no puede usar la reflexión para tener acceso a miembros críticos para la seguridad, incluso si el código es de plena confianza.</span><span class="sxs-lookup"><span data-stu-id="a734e-129">Transparent code cannot use reflection to access security-critical members, even if the code is fully trusted.</span></span> <span data-ttu-id="a734e-130">Se produce un <xref:System.MethodAccessException>, <xref:System.FieldAccessException> o <xref:System.TypeAccessException>.</span><span class="sxs-lookup"><span data-stu-id="a734e-130">A <xref:System.MethodAccessException>, <xref:System.FieldAccessException>, or <xref:System.TypeAccessException> is thrown.</span></span>

- <span data-ttu-id="a734e-131">El código que se ejecuta con confianza parcial se trata como transparente.</span><span class="sxs-lookup"><span data-stu-id="a734e-131">Code that is running with partial trust is treated as transparent.</span></span>

<span data-ttu-id="a734e-132">Estas reglas son las mismas independientemente de si el código compilado accede directamente al miembro crítico para la seguridad, o si se accede a ese miembro él mediante reflexión.</span><span class="sxs-lookup"><span data-stu-id="a734e-132">These rules are the same whether a security-critical member is accessed directly by compiled code, or accessed by using reflection.</span></span>

<span data-ttu-id="a734e-133">El código de aplicación que se ejecuta desde la línea de comandos se ejecuta con plena confianza.</span><span class="sxs-lookup"><span data-stu-id="a734e-133">Application code that is run from the command line runs with full trust.</span></span> <span data-ttu-id="a734e-134">Siempre y cuando no esté marcado como transparente, puede usar la reflexión para obtener acceso a los miembros críticos para la seguridad.</span><span class="sxs-lookup"><span data-stu-id="a734e-134">As long as it is not marked as transparent, it can use reflection to access security-critical members.</span></span> <span data-ttu-id="a734e-135">Cuando se ejecuta el mismo código con confianza parcial (por ejemplo, en un dominio de aplicación en el espacio aislado), el nivel de confianza del ensamblado determina si puede acceder a código crítico para la seguridad: si el ensamblado tiene un nombre seguro y se instala en la caché global de ensamblados, es un ensamblado de confianza y puede llamar a miembros críticos para la seguridad.</span><span class="sxs-lookup"><span data-stu-id="a734e-135">When the same code is run with partial trust (for example, in a sandboxed application domain) the assembly's trust level determines whether it can access security-critical code: If the assembly has a strong name and is installed in the global assembly cache, it is a trusted assembly and can call security-critical members.</span></span> <span data-ttu-id="a734e-136">Si no es de confianza, se vuelve transparente aunque no esté marcado como tal y no tiene acceso a los miembros críticos para la seguridad.</span><span class="sxs-lookup"><span data-stu-id="a734e-136">If it is not trusted, it becomes transparent even though it was not marked as transparent, and it cannot access security-critical members.</span></span>

<span data-ttu-id="a734e-137">Para obtener más información sobre el modelo de seguridad en .NET Framework 4, consulte [Cambios en la seguridad](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes).</span><span class="sxs-lookup"><span data-stu-id="a734e-137">For more information about the security model in the .NET Framework 4, see [Security Changes](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes).</span></span>

## <a name="reflection-and-transparency"></a><span data-ttu-id="a734e-138">Reflexión y transparencia</span><span class="sxs-lookup"><span data-stu-id="a734e-138">Reflection and Transparency</span></span>

<span data-ttu-id="a734e-139">A partir de .NET Framework 4, Common Language Runtime determina el nivel de transparencia de un tipo o miembro de varios factores, como el nivel de confianza del ensamblado y el nivel de confianza del dominio de aplicación.</span><span class="sxs-lookup"><span data-stu-id="a734e-139">Beginning with the .NET Framework 4, the common language runtime determines the transparency level of a type or member from several factors, including the trust level of the assembly and the trust level of the application domain.</span></span> <span data-ttu-id="a734e-140">La reflexión proporciona las propiedades <xref:System.Type.IsSecurityCritical%2A>, <xref:System.Type.IsSecuritySafeCritical%2A> y <xref:System.Type.IsSecurityTransparent%2A> para que pueda detectar el nivel de transparencia de un tipo.</span><span class="sxs-lookup"><span data-stu-id="a734e-140">Reflection provides the <xref:System.Type.IsSecurityCritical%2A>, <xref:System.Type.IsSecuritySafeCritical%2A>, and <xref:System.Type.IsSecurityTransparent%2A> properties to enable you to discover the transparency level of a type.</span></span> <span data-ttu-id="a734e-141">En la tabla siguiente se muestran las combinaciones válidas de estas propiedades.</span><span class="sxs-lookup"><span data-stu-id="a734e-141">The following table shows the valid combinations of these properties.</span></span>

|<span data-ttu-id="a734e-142">Nivel de seguridad</span><span class="sxs-lookup"><span data-stu-id="a734e-142">Security level</span></span>|<span data-ttu-id="a734e-143">IsSecurityCritical</span><span class="sxs-lookup"><span data-stu-id="a734e-143">IsSecurityCritical</span></span>|<span data-ttu-id="a734e-144">IsSecuritySafeCritical</span><span class="sxs-lookup"><span data-stu-id="a734e-144">IsSecuritySafeCritical</span></span>|<span data-ttu-id="a734e-145">IsSecurityTransparent</span><span class="sxs-lookup"><span data-stu-id="a734e-145">IsSecurityTransparent</span></span>|
|--------------------|------------------------|----------------------------|---------------------------|
|<span data-ttu-id="a734e-146">Crítico</span><span class="sxs-lookup"><span data-stu-id="a734e-146">Critical</span></span>|`true`|`false`|`false`|
|<span data-ttu-id="a734e-147">Crítico para la seguridad</span><span class="sxs-lookup"><span data-stu-id="a734e-147">Safe-critical</span></span>|`true`|`true`|`false`|
|<span data-ttu-id="a734e-148">Transparente</span><span class="sxs-lookup"><span data-stu-id="a734e-148">Transparent</span></span>|`false`|`false`|`true`|

<span data-ttu-id="a734e-149">Usar estas propiedades es mucho más fácil que examinar las anotaciones de seguridad de un ensamblado y sus tipos, comprobar el nivel de confianza actual e intentar duplicar las reglas del runtime.</span><span class="sxs-lookup"><span data-stu-id="a734e-149">Using these properties is much simpler than examining the security annotations of an assembly and its types, checking the current trust level, and attempting to duplicate the runtime's rules.</span></span> <span data-ttu-id="a734e-150">Por ejemplo, el mismo tipo puede ser crítico para la seguridad cuando se ejecuta desde la línea de comandos o transparente en seguridad cuando se ejecuta en un dominio de aplicación en espacio aislado.</span><span class="sxs-lookup"><span data-stu-id="a734e-150">For example, the same type can be security-critical when it is run from the command line, or security-transparent when it is run in a sandboxed application domain.</span></span>

<span data-ttu-id="a734e-151">Hay propiedades similares las clases <xref:System.Reflection.MethodBase>, <xref:System.Reflection.FieldInfo>, <xref:System.Reflection.Emit.TypeBuilder>, <xref:System.Reflection.Emit.MethodBuilder> y <xref:System.Reflection.Emit.DynamicMethod>.</span><span class="sxs-lookup"><span data-stu-id="a734e-151">There are similar properties on the <xref:System.Reflection.MethodBase>, <xref:System.Reflection.FieldInfo>, <xref:System.Reflection.Emit.TypeBuilder>, <xref:System.Reflection.Emit.MethodBuilder>, and <xref:System.Reflection.Emit.DynamicMethod> classes.</span></span> <span data-ttu-id="a734e-152">(Para otras abstracciones de reflexión y emisión de la reflexión, los atributos de seguridad se aplican a los métodos asociados; por ejemplo, en el caso de las propiedades se aplican a los descriptores de acceso de propiedad).</span><span class="sxs-lookup"><span data-stu-id="a734e-152">(For other reflection and reflection emit abstractions, security attributes are applied to the associated methods; for example, in the case of properties they are applied to the property accessors.)</span></span>

<a name="accessingNormallyInaccessible"></a>

## <a name="accessing-members-that-are-normally-inaccessible"></a><span data-ttu-id="a734e-153">Acceso a miembros que suelen ser inaccesibles</span><span class="sxs-lookup"><span data-stu-id="a734e-153">Accessing Members That Are Normally Inaccessible</span></span>

<span data-ttu-id="a734e-154">Para usar la reflexión para invocar a los miembros que son inaccesibles según las reglas de accesibilidad de Common Language Runtime, el código debe disponer de uno de los siguientes permisos:</span><span class="sxs-lookup"><span data-stu-id="a734e-154">To use reflection to invoke members that are inaccessible according to the accessibility rules of the common language runtime, your code must be granted one of two permissions:</span></span>

- <span data-ttu-id="a734e-155">Para permitir que el código invoque miembros no públicos: el código debe tener concedido <xref:System.Security.Permissions.ReflectionPermission> con la marca <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a734e-155">To allow code to invoke any nonpublic member:Your code must be granted <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag.</span></span>

  > [!NOTE]
  > <span data-ttu-id="a734e-156">De forma predeterminada, la directiva de seguridad deniega este permiso al código que se origina desde Internet.</span><span class="sxs-lookup"><span data-stu-id="a734e-156">By default, security policy denies this permission to code that originates from the Internet.</span></span> <span data-ttu-id="a734e-157">Este permiso nunca debe concederse al código que se origina desde Internet.</span><span class="sxs-lookup"><span data-stu-id="a734e-157">This permission should never be granted to code that originates from the Internet.</span></span>

- <span data-ttu-id="a734e-158">Para permitir que el código invoque miembros no públicos, siempre que el conjunto de permisos del ensamblado que contiene el miembro invocado sea igual (o un subconjunto) al conjunto de permisos del código del ensamblado que contiene la llamada: el código debe tener concedido <xref:System.Security.Permissions.ReflectionPermission> con la marca <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a734e-158">To allow code to invoke any nonpublic member, as long as the grant set of the assembly that contains the invoked member is the same as, or a subset of, the grant set of the assembly that contains the invoking code: Your code must be granted <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flag.</span></span>

<span data-ttu-id="a734e-159">Por ejemplo, suponga que concede a un dominio de aplicación permisos de Internet más <xref:System.Security.Permissions.ReflectionPermission> con la marca <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> y, a continuación, ejecuta una aplicación de Internet con dos ensamblados, A y B.</span><span class="sxs-lookup"><span data-stu-id="a734e-159">For example, suppose you grant an application domain Internet permissions plus <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flag, and then run an Internet application with two assemblies, A and B.</span></span>

- <span data-ttu-id="a734e-160">En ensamblado A puede usar la reflexión para obtener acceso a los miembros privados del ensamblado B, ya que el conjunto de permisos del ensamblado B no incluye los permisos que no se han concedido al A.</span><span class="sxs-lookup"><span data-stu-id="a734e-160">Assembly A can use reflection to access private members of assembly B, because the grant set of assembly B does not include any permissions that A has not been granted.</span></span>

- <span data-ttu-id="a734e-161">El ensamblado A no puede usar la reflexión para acceder a los miembros privados de ensamblados de .NET Framework, como mscorlib.dll, ya que mscorlib.dll es de plena confianza y, por tanto, tiene permisos que no se han concedido al ensamblado A. Cuando la seguridad de acceso del código recorre la pila en tiempo de ejecución, se produce una <xref:System.MemberAccessException>.</span><span class="sxs-lookup"><span data-stu-id="a734e-161">Assembly A cannot use reflection to access private members of .NET Framework assemblies such as mscorlib.dll, because mscorlib.dll is fully trusted and therefore has permissions that have not been granted to assembly A. A <xref:System.MemberAccessException> is thrown when code access security walks the stack at run time.</span></span>

## <a name="serialization"></a><span data-ttu-id="a734e-162">Serialización</span><span class="sxs-lookup"><span data-stu-id="a734e-162">Serialization</span></span>

<span data-ttu-id="a734e-163">Para la serialización, <xref:System.Security.Permissions.SecurityPermission> con la marca <xref:System.Security.Permissions.SecurityPermissionAttribute.SerializationFormatter%2A?displayProperty=nameWithType> proporciona la capacidad de obtener y establecer miembros de tipos serializables, independientemente de la accesibilidad.</span><span class="sxs-lookup"><span data-stu-id="a734e-163">For serialization, <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionAttribute.SerializationFormatter%2A?displayProperty=nameWithType> flag provides the ability to get and set members of serializable types, regardless of accessibility.</span></span> <span data-ttu-id="a734e-164">Este permiso permite al código descubrir y cambiar el estado privado de una instancia.</span><span class="sxs-lookup"><span data-stu-id="a734e-164">This permission enables code to discover and change the private state of an instance.</span></span> <span data-ttu-id="a734e-165">(Además de tener concedidos los permisos adecuados, el tipo debe estar [marcado](../../standard/attributes/applying-attributes.md) como serializable en los metadatos).</span><span class="sxs-lookup"><span data-stu-id="a734e-165">(In addition to being granted the appropriate permissions, the type must be [marked](../../standard/attributes/applying-attributes.md) as serializable in metadata.)</span></span>

## <a name="parameters-of-type-methodinfo"></a><span data-ttu-id="a734e-166">Parámetros de tipo MethodInfo</span><span class="sxs-lookup"><span data-stu-id="a734e-166">Parameters of Type MethodInfo</span></span>

<span data-ttu-id="a734e-167">Evite escribir miembros públicos que toman parámetros <xref:System.Reflection.MethodInfo>, especialmente para código de confianza.</span><span class="sxs-lookup"><span data-stu-id="a734e-167">Avoid writing public members that take <xref:System.Reflection.MethodInfo> parameters, especially for trusted code.</span></span> <span data-ttu-id="a734e-168">Estos miembros podrían ser más vulnerables al código malintencionado.</span><span class="sxs-lookup"><span data-stu-id="a734e-168">Such members might be more vulnerable to malicious code.</span></span> <span data-ttu-id="a734e-169">Por ejemplo, imagine un miembro público en código de plena confianza que toma un parámetro <xref:System.Reflection.MethodInfo>.</span><span class="sxs-lookup"><span data-stu-id="a734e-169">For example, consider a public member in highly trusted code that takes a <xref:System.Reflection.MethodInfo> parameter.</span></span> <span data-ttu-id="a734e-170">Suponga que el miembro público llama indirectamente al método <xref:System.Reflection.MethodBase.Invoke%2A> en el parámetro proporcionado.</span><span class="sxs-lookup"><span data-stu-id="a734e-170">Assume that the public member indirectly calls the <xref:System.Reflection.MethodBase.Invoke%2A> method on the supplied parameter.</span></span> <span data-ttu-id="a734e-171">Si el miembro público no realiza las comprobaciones de permiso necesarias, la llamada al método <xref:System.Reflection.MethodBase.Invoke%2A> siempre se realizará correctamente porque el sistema de seguridad determina que el llamador es de gran confianza.</span><span class="sxs-lookup"><span data-stu-id="a734e-171">If the public member does not perform the necessary permission checks, the call to the <xref:System.Reflection.MethodBase.Invoke%2A> method will always succeed, because the security system determines that the caller is highly trusted.</span></span> <span data-ttu-id="a734e-172">Incluso si el código malintencionado no tiene permiso para invocar directamente al método, podrá hacerlo indirectamente mediante una llamada al miembro público.</span><span class="sxs-lookup"><span data-stu-id="a734e-172">Even if malicious code does not have the permission to directly invoke the method, it can still do so indirectly by calling the public member.</span></span>

## <a name="version-information"></a><span data-ttu-id="a734e-173">Información de versión</span><span class="sxs-lookup"><span data-stu-id="a734e-173">Version Information</span></span>

- <span data-ttu-id="a734e-174">A partir de .NET Framework 4, el código transparente no puede usar la reflexión para obtener acceso a los miembros críticos para la seguridad.</span><span class="sxs-lookup"><span data-stu-id="a734e-174">Beginning with the .NET Framework 4, transparent code cannot use reflection to access security-critical members.</span></span>

- <span data-ttu-id="a734e-175">La marca <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> se introdujo en .NET Framework 2.0 Service Pack 1.</span><span class="sxs-lookup"><span data-stu-id="a734e-175">The <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flag is introduced in the .NET Framework 2.0 Service Pack 1.</span></span> <span data-ttu-id="a734e-176">Las versiones anteriores de .NET Framework requieren la marca <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> en el código que usa la reflexión para acceder a miembros no públicos.</span><span class="sxs-lookup"><span data-stu-id="a734e-176">Earlier versions of the .NET Framework require the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag for code that uses reflection to access nonpublic members.</span></span> <span data-ttu-id="a734e-177">Se trata de un permiso que nunca debe concederse al código de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="a734e-177">This is a permission that should never be granted to partially trusted code.</span></span>

- <span data-ttu-id="a734e-178">A partir de .NET Framework 2.0, el uso de la reflexión para obtener información sobre tipos y miembros no públicos no requiere ningún permiso.</span><span class="sxs-lookup"><span data-stu-id="a734e-178">Beginning with the .NET Framework 2.0, using reflection to obtain information about nonpublic types and members does not require any permissions.</span></span> <span data-ttu-id="a734e-179">En versiones anteriores, se requiere <xref:System.Security.Permissions.ReflectionPermission> con la marca <xref:System.Security.Permissions.ReflectionPermissionFlag.TypeInformation?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a734e-179">In earlier versions, <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.TypeInformation?displayProperty=nameWithType> flag is required.</span></span>

## <a name="see-also"></a><span data-ttu-id="a734e-180">Vea también</span><span class="sxs-lookup"><span data-stu-id="a734e-180">See also</span></span>

- <xref:System.Security.Permissions.ReflectionPermissionFlag>
- <xref:System.Security.Permissions.ReflectionPermission>
- <xref:System.Security.Permissions.SecurityPermission>
- [<span data-ttu-id="a734e-181">Cambios de seguridad</span><span class="sxs-lookup"><span data-stu-id="a734e-181">Security Changes</span></span>](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes)
- [<span data-ttu-id="a734e-182">Seguridad de acceso del código</span><span class="sxs-lookup"><span data-stu-id="a734e-182">Code Access Security</span></span>](../misc/code-access-security.md)
- [<span data-ttu-id="a734e-183">Problemas de seguridad en la emisión de la reflexión</span><span class="sxs-lookup"><span data-stu-id="a734e-183">Security Issues in Reflection Emit</span></span>](security-issues-in-reflection-emit.md)
- [<span data-ttu-id="a734e-184">Ver información tipos</span><span class="sxs-lookup"><span data-stu-id="a734e-184">Viewing Type Information</span></span>](viewing-type-information.md)
- [<span data-ttu-id="a734e-185">Aplicar atributos</span><span class="sxs-lookup"><span data-stu-id="a734e-185">Applying Attributes</span></span>](../../standard/attributes/applying-attributes.md)
- [<span data-ttu-id="a734e-186">Acceso a atributos personalizados</span><span class="sxs-lookup"><span data-stu-id="a734e-186">Accessing Custom Attributes</span></span>](accessing-custom-attributes.md)
