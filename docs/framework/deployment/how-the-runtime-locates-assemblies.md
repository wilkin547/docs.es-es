---
title: Cómo el motor en tiempo de ejecución ubica ensamblados
description: Aprenda como Common Language Runtime (CLR) localiza los ensamblados que conforman la aplicación en .NET y se enlaza con ellos.
ms.date: 03/30/2017
helpviewer_keywords:
- app.config files, assembly locations
- deploying applications [.NET Framework], assembly locations
- application configuration files, locating assemblies
- .NET Framework application deployment, locating assemblies
- locating assemblies
- assemblies [.NET Framework], location
ms.assetid: 772ac6f4-64d2-4cfb-92fd-58096dcd6c34
ms.openlocfilehash: 4cf1e5787fe2e430d20208d8e79b610e9126c67c
ms.sourcegitcommit: e02d17b2cf9c1258dadda4810a5e6072a0089aee
ms.contentlocale: es-ES
ms.lasthandoff: 07/01/2020
ms.locfileid: "85622632"
---
# <a name="how-the-runtime-locates-assemblies"></a><span data-ttu-id="a6c85-103">Cómo el motor en tiempo de ejecución ubica ensamblados</span><span class="sxs-lookup"><span data-stu-id="a6c85-103">How the Runtime Locates Assemblies</span></span>

<span data-ttu-id="a6c85-104">Para implementar correctamente una aplicación de .NET Framework, debe entender la manera en que Common Language Runtime busca y enlaza los ensamblados que componen la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-104">To successfully deploy your .NET Framework application, you must understand how the common language runtime locates and binds to the assemblies that make up your application.</span></span> <span data-ttu-id="a6c85-105">De forma predeterminada, runtime intenta enlazar con la versión exacta de un ensamblado con el que se creó la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-105">By default, the runtime attempts to bind with the exact version of an assembly that the application was built with.</span></span> <span data-ttu-id="a6c85-106">Este comportamiento predeterminado puede reemplazarse con los valores del archivo de configuración.</span><span class="sxs-lookup"><span data-stu-id="a6c85-106">This default behavior can be overridden by configuration file settings.</span></span>

<span data-ttu-id="a6c85-107">Common Language Runtime realiza una serie de pasos cuando intenta buscar un ensamblado y resolver una referencia de ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-107">The common language runtime performs a number of steps when attempting to locate an assembly and resolve an assembly reference.</span></span> <span data-ttu-id="a6c85-108">Cada paso se explica en las secciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="a6c85-108">Each step is explained in the following sections.</span></span> <span data-ttu-id="a6c85-109">El sondeo de términos suele usarse cuando se describe la manera en que el tiempo de ejecución busca ensamblados; hace referencia al conjunto de heurística que se usa para buscar el ensamblado en función de su nombre y referencia cultural.</span><span class="sxs-lookup"><span data-stu-id="a6c85-109">The term probing is often used when describing how the runtime locates assemblies; it refers to the set of heuristics used to locate the assembly based on its name and culture.</span></span>

> [!NOTE]
> <span data-ttu-id="a6c85-110">Puede ver la información de enlace en el archivo de registro usando el [visor de registro de enlaces de ensamblados (Fuslogvw.exe)](../tools/fuslogvw-exe-assembly-binding-log-viewer.md), que se incluye en Windows SDK.</span><span class="sxs-lookup"><span data-stu-id="a6c85-110">You can view binding information in the log file using the [Assembly Binding Log Viewer (Fuslogvw.exe)](../tools/fuslogvw-exe-assembly-binding-log-viewer.md), which is included in the Windows SDK.</span></span>

## <a name="initiating-the-bind"></a><span data-ttu-id="a6c85-111">Iniciar el enlace</span><span class="sxs-lookup"><span data-stu-id="a6c85-111">Initiating the Bind</span></span>

<span data-ttu-id="a6c85-112">El proceso de buscar y enlazar a un ensamblado comienza cuando el tiempo de ejecución intenta resolver una referencia a otro ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-112">The process of locating and binding to an assembly begins when the runtime attempts to resolve a reference to another assembly.</span></span> <span data-ttu-id="a6c85-113">Esta referencia puede ser estática o dinámica.</span><span class="sxs-lookup"><span data-stu-id="a6c85-113">This reference can be either static or dynamic.</span></span> <span data-ttu-id="a6c85-114">El compilador registra las referencias estáticas en los metadatos del manifiesto del ensamblado en tiempo de compilación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-114">The compiler records static references in the assembly manifest's metadata at build time.</span></span> <span data-ttu-id="a6c85-115">Las referencias dinámicas se construyen sobre la marcha como resultado de llamar a varios métodos, como <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a6c85-115">Dynamic references are constructed on the fly as a result of calling various methods, such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="a6c85-116">La mejor manera de hacer referencia a un ensamblado es usar una referencia completa, incluido el nombre del ensamblado, la versión, la referencia cultural y el token de clave pública (si existe).</span><span class="sxs-lookup"><span data-stu-id="a6c85-116">The preferred way to reference an assembly is to use a full reference, including the assembly name, version, culture, and public key token (if one exists).</span></span> <span data-ttu-id="a6c85-117">El tiempo de ejecución usa esta información para buscar el ensamblado, siguiendo los pasos descritos más adelante en esta sección.</span><span class="sxs-lookup"><span data-stu-id="a6c85-117">The runtime uses this information to locate the assembly, following the steps described later in this section.</span></span> <span data-ttu-id="a6c85-118">El tiempo de ejecución usa el mismo proceso de resolución, sin tener en cuenta si la referencia es para un ensamblado estático o dinámico.</span><span class="sxs-lookup"><span data-stu-id="a6c85-118">The runtime uses the same resolution process regardless of whether the reference is for a static or dynamic assembly.</span></span>

<span data-ttu-id="a6c85-119">También puede hacer una referencia dinámica a un ensamblado proporcionando el método de llamada únicamente con información parcial sobre el ensamblado, por ejemplo especificando solo el nombre de ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-119">You can also make a dynamic reference to an assembly by providing the calling method with only partial information about the assembly, such as specifying only the assembly name.</span></span> <span data-ttu-id="a6c85-120">En este caso, el ensamblado solo se busca en el directorio de la aplicación y no se realiza ninguna otra comprobación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-120">In this case, only the application directory is searched for the assembly, and no other checking occurs.</span></span> <span data-ttu-id="a6c85-121">Se hace una referencia parcial mediante cualquiera de los diversos métodos para cargar ensamblados, como <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> o <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="a6c85-121">You make a partial reference using any of the various methods for loading assemblies such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> or <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="a6c85-122">Por último, puede hacer una referencia dinámica mediante un método como <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> y facilitar solo información parcial. Después, califique la referencia mediante el elemento [\<qualifyAssembly>](../configure-apps/file-schema/runtime/qualifyassembly-element.md) en el archivo de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-122">Finally, you can make a dynamic reference using a method such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> and provide only partial information; you then qualify the reference using the [\<qualifyAssembly>](../configure-apps/file-schema/runtime/qualifyassembly-element.md) element in the application configuration file.</span></span> <span data-ttu-id="a6c85-123">Este elemento permite proporcionar información de referencia completa (nombre, versión, referencia cultural y, si procede, el token de clave pública) en el archivo de configuración de la aplicación, en lugar de en el código.</span><span class="sxs-lookup"><span data-stu-id="a6c85-123">This element allows you to provide the full reference information (name, version, culture and, if applicable, the public key token) in your application configuration file instead of in your code.</span></span> <span data-ttu-id="a6c85-124">Use esta técnica si desea completar una referencia a un ensamblado fuera del directorio de la aplicación, o si desea hacer referencia a un ensamblado en la caché global de ensamblados pero prefiere la comodidad de especificar la referencia completa en el archivo de configuración en lugar de en el código.</span><span class="sxs-lookup"><span data-stu-id="a6c85-124">You would use this technique if you wanted to fully qualify a reference to an assembly outside the application directory, or if you wanted to reference an assembly in the global assembly cache but you wanted the convenience of specifying the full reference in the configuration file instead of in your code.</span></span>

> [!NOTE]
> <span data-ttu-id="a6c85-125">Este tipo de referencia parcial no debe usarse con ensamblados que se comparten entre varias aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="a6c85-125">This type of partial reference should not be used with assemblies that are shared among several applications.</span></span> <span data-ttu-id="a6c85-126">Como los valores de configuración se aplican por aplicación y no por ensamblado, un ensamblado compartido que use este tipo de referencia parcial requerirá que cada aplicación que use el ensamblado compartido tenga la información calificadora en su archivo de configuración.</span><span class="sxs-lookup"><span data-stu-id="a6c85-126">Because configuration settings are applied per application and not per assembly, a shared assembly using this type of partial reference would require each application using the shared assembly to have the qualifying information in its configuration file.</span></span>

<span data-ttu-id="a6c85-127">El tiempo de ejecución sigue estos pasos para resolver una referencia de ensamblado:</span><span class="sxs-lookup"><span data-stu-id="a6c85-127">The runtime uses the following steps to resolve an assembly reference:</span></span>

1. <span data-ttu-id="a6c85-128">[Determina la versión correcta del ensamblado](#step1) examinando los archivos de configuración aplicables, incluido el archivo de configuración de la aplicación, el archivo de directiva de edición y el archivo de configuración del equipo.</span><span class="sxs-lookup"><span data-stu-id="a6c85-128">[Determines the correct assembly version](#step1) by examining applicable configuration files, including the application configuration file, publisher policy file, and machine configuration file.</span></span> <span data-ttu-id="a6c85-129">Si el archivo de configuración se encuentra en un equipo remoto, el tiempo de ejecución debe buscar y descargar el archivo de configuración de la aplicación en primer lugar.</span><span class="sxs-lookup"><span data-stu-id="a6c85-129">If the configuration file is located on a remote machine, the runtime must locate and download the application configuration file first.</span></span>

2. <span data-ttu-id="a6c85-130">[Comprueba si el nombre de ensamblado ya estuvo enlazado](#step2) y, si es así, usa el ensamblado cargado previamente.</span><span class="sxs-lookup"><span data-stu-id="a6c85-130">[Checks whether the assembly name has been bound to before](#step2) and, if so, uses the previously loaded assembly.</span></span> <span data-ttu-id="a6c85-131">Si una solicitud anterior para cargar el ensamblado produjo un error, la solicitud produce un error inmediatamente sin intentar cargar el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-131">If a previous request to load the assembly failed, the request is failed immediately without attempting to load the assembly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a6c85-132">El almacenamiento en caché de errores de enlace de ensamblados es nuevo en .NET Framework versión 2.0.</span><span class="sxs-lookup"><span data-stu-id="a6c85-132">The caching of assembly binding failures is new in the .NET Framework version 2.0.</span></span>

3. <span data-ttu-id="a6c85-133">[Comprueba la caché global de ensamblados](#step3).</span><span class="sxs-lookup"><span data-stu-id="a6c85-133">[Checks the global assembly cache](#step3).</span></span> <span data-ttu-id="a6c85-134">Si el ensamblado se encuentra allí, el tiempo de ejecución usa este ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-134">If the assembly is found there, the runtime uses this assembly.</span></span>

4. <span data-ttu-id="a6c85-135">[Sondea el ensamblado](#step4) siguiendo estos siguientes pasos:</span><span class="sxs-lookup"><span data-stu-id="a6c85-135">[Probes for the assembly](#step4) using the following steps:</span></span>

    1. <span data-ttu-id="a6c85-136">Si la directiva de configuración y edición no afecta a la referencia original y si la solicitud de enlace se creó usando el método <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> , el tiempo de ejecución comprueba las sugerencias de ubicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-136">If configuration and publisher policy do not affect the original reference and if the bind request was created using the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> method, the runtime checks for location hints.</span></span>

    2. <span data-ttu-id="a6c85-137">Si se encuentra un código base en los archivos de configuración, el tiempo de ejecución solo comprueba esta ubicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-137">If a codebase is found in the configuration files, the runtime checks only this location.</span></span> <span data-ttu-id="a6c85-138">Si se produce un error en este sondeo, el tiempo de ejecución determina que la solicitud de enlace produjo un error y no se llevan a cabo más sondeos.</span><span class="sxs-lookup"><span data-stu-id="a6c85-138">If this probe fails, the runtime determines that the binding request failed and no other probing occurs.</span></span>

    3. <span data-ttu-id="a6c85-139">Sondea el ensamblado mediante la heurística descrita en la [sección de sondeo](#step4).</span><span class="sxs-lookup"><span data-stu-id="a6c85-139">Probes for the assembly using the heuristics described in the [probing section](#step4).</span></span> <span data-ttu-id="a6c85-140">Si no se encuentra el ensamblado tras el sondeo, el tiempo de ejecución solicita a Windows Installer que proporcione un ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-140">If the assembly is not found after probing, the runtime requests the Windows Installer to provide the assembly.</span></span> <span data-ttu-id="a6c85-141">Esto actúa como una característica de instalación a petición.</span><span class="sxs-lookup"><span data-stu-id="a6c85-141">This acts as an install-on-demand feature.</span></span>

        > [!NOTE]
        > <span data-ttu-id="a6c85-142">No se produce ninguna comprobación de versión en busca de ensamblados sin nombres seguros, y el tiempo de ejecución no protege la caché global de ensamblados para los ensamblados sin nombres seguros.</span><span class="sxs-lookup"><span data-stu-id="a6c85-142">There is no version checking for assemblies without strong names, nor does the runtime check in the global assembly cache for assemblies without strong names.</span></span>

<a name="step1"></a>

## <a name="step-1-examining-the-configuration-files"></a><span data-ttu-id="a6c85-143">Paso 1: Examen de los archivos de configuración</span><span class="sxs-lookup"><span data-stu-id="a6c85-143">Step 1: Examining the Configuration Files</span></span>

<span data-ttu-id="a6c85-144">El comportamiento de enlace de ensamblados puede configurarse en niveles diferentes en función de tres archivos XML:</span><span class="sxs-lookup"><span data-stu-id="a6c85-144">Assembly binding behavior can be configured at different levels based on three XML files:</span></span>

- <span data-ttu-id="a6c85-145">Archivo de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-145">Application configuration file.</span></span>

- <span data-ttu-id="a6c85-146">Archivo de directiva de edición.</span><span class="sxs-lookup"><span data-stu-id="a6c85-146">Publisher policy file.</span></span>

- <span data-ttu-id="a6c85-147">Archivo de configuración del equipo.</span><span class="sxs-lookup"><span data-stu-id="a6c85-147">Machine configuration file.</span></span>

<span data-ttu-id="a6c85-148">Estos archivos tienen la misma sintaxis y proporcionan información como las redirecciones de enlaces, la ubicación del código y los modos de enlace de ensamblados concretos.</span><span class="sxs-lookup"><span data-stu-id="a6c85-148">These files follow the same syntax and provide information such as binding redirects, the location of code, and binding modes for particular assemblies.</span></span> <span data-ttu-id="a6c85-149">Cada archivo de configuración puede contener un elemento [\<assemblyBinding> ](../configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) que redirige el proceso de enlace.</span><span class="sxs-lookup"><span data-stu-id="a6c85-149">Each configuration file can contain an [\<assemblyBinding> element](../configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) that redirects the binding process.</span></span> <span data-ttu-id="a6c85-150">Los elementos secundarios del elemento [\<assemblyBinding> ](../configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) incluyen el elemento [\<dependentAssembly> ](../configure-apps/file-schema/runtime/dependentassembly-element.md).</span><span class="sxs-lookup"><span data-stu-id="a6c85-150">The child elements of the [\<assemblyBinding> element](../configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) include the [\<dependentAssembly> element](../configure-apps/file-schema/runtime/dependentassembly-element.md).</span></span> <span data-ttu-id="a6c85-151">Los elementos secundarios del elemento [\<dependentAssembly> ](../configure-apps/file-schema/runtime/dependentassembly-element.md) incluyen el elemento [\<assemblyIdentity> ](/visualstudio/deployment/assemblyidentity-element-clickonce-deployment), el elemento [\<bindingRedirect> ](../configure-apps/file-schema/runtime/bindingredirect-element.md) y el elemento [\<codeBase> ](../configure-apps/file-schema/runtime/codebase-element.md).</span><span class="sxs-lookup"><span data-stu-id="a6c85-151">The children of [\<dependentAssembly> element](../configure-apps/file-schema/runtime/dependentassembly-element.md) include the [\<assemblyIdentity> element](/visualstudio/deployment/assemblyidentity-element-clickonce-deployment), the [\<bindingRedirect> element](../configure-apps/file-schema/runtime/bindingredirect-element.md), and the [\<codeBase> element](../configure-apps/file-schema/runtime/codebase-element.md).</span></span>

> [!NOTE]
> <span data-ttu-id="a6c85-152">Puede encontrarse información de configuración en los tres archivos de configuración; no todos los elementos son válidos en todos los archivos de configuración.</span><span class="sxs-lookup"><span data-stu-id="a6c85-152">Configuration information can be found in the three configuration files; not all elements are valid in all configuration files.</span></span> <span data-ttu-id="a6c85-153">Por ejemplo, la información sobre el modo de enlace y la ruta de acceso privada solo puede estar en el archivo de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-153">For example, binding mode and private path information can only be in the application configuration file.</span></span> <span data-ttu-id="a6c85-154">Para obtener una lista completa de la información contenida en cada archivo, consulte [Configurar aplicaciones con archivos de configuración](../configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="a6c85-154">For a complete list of the information that is contained in each file, see [Configuring Apps by Using Configuration Files](../configure-apps/index.md).</span></span>

### <a name="application-configuration-file"></a><span data-ttu-id="a6c85-155">Archivo de configuración de aplicación</span><span class="sxs-lookup"><span data-stu-id="a6c85-155">Application Configuration File</span></span>

<span data-ttu-id="a6c85-156">En primer lugar, Common Language Runtime comprueba el archivo de configuración de la aplicación en busca de información que reemplace la información de versión almacenada en el manifiesto del ensamblado que realiza la llamada.</span><span class="sxs-lookup"><span data-stu-id="a6c85-156">First, the common language runtime checks the application configuration file for information that overrides the version information stored in the calling assembly's manifest.</span></span> <span data-ttu-id="a6c85-157">El archivo de configuración de la aplicación puede implementarse con una aplicación, pero no es necesario para la ejecución de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-157">The application configuration file can be deployed with an application, but is not required for application execution.</span></span> <span data-ttu-id="a6c85-158">Normalmente, la recuperación de este archivo es casi instantánea, pero en los casos en que la base de la aplicación se encuentra en un equipo remoto, como en un escenario basado en web de Internet Explorer, el archivo de configuración debe estar descargado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-158">Usually the retrieval of this file is almost instantaneous, but in situations where the application base is on a remote computer, such as in an Internet Explorer Web-based scenario, the configuration file must be downloaded.</span></span>

<span data-ttu-id="a6c85-159">Para los ejecutables de cliente, el archivo de configuración de la aplicación reside en el mismo directorio que el ejecutable de la aplicación y tiene el mismo nombre base que el ejecutable con la extensión .config.</span><span class="sxs-lookup"><span data-stu-id="a6c85-159">For client executables, the application configuration file resides in the same directory as the application's executable and has the same base name as the executable with a .config extension.</span></span> <span data-ttu-id="a6c85-160">Por ejemplo, el archivo de configuración de C:\Program Files\Myapp\Myapp.exe es C:\Program Files\Myapp\Myapp.exe.config. En un escenario basado en explorador, el archivo HTML debe usar el elemento **\<link>** para apuntar explícitamente al archivo de configuración.</span><span class="sxs-lookup"><span data-stu-id="a6c85-160">For example, the configuration file for C:\Program Files\Myapp\Myapp.exe is C:\Program Files\Myapp\Myapp.exe.config. In a browser-based scenario, the HTML file must use the **\<link>** element to explicitly point to the configuration file.</span></span>

<span data-ttu-id="a6c85-161">El código siguiente proporciona un ejemplo sencillo de un archivo de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-161">The following code provides a simple example of an application configuration file.</span></span> <span data-ttu-id="a6c85-162">Este ejemplo agrega un <xref:System.Diagnostics.TextWriterTraceListener> a la colección <xref:System.Diagnostics.Debug.Listeners%2A> para habilitar la grabación de la información de depuración en un archivo.</span><span class="sxs-lookup"><span data-stu-id="a6c85-162">This example adds a <xref:System.Diagnostics.TextWriterTraceListener> to the <xref:System.Diagnostics.Debug.Listeners%2A> collection to enable recording debug information to a file.</span></span>

```xml
<configuration>
   <system.diagnostics>
      <trace useGlobalLock="false" autoflush="true" indentsize="0">
         <listeners>
            <add name="myListener" type="System.Diagnostics.TextWriterTraceListener, system version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" initializeData="c:\myListener.log" />
         </listeners>
      </trace>
   </system.diagnostics>
</configuration>
```

### <a name="publisher-policy-file"></a><span data-ttu-id="a6c85-163">Archivo de directiva de edición</span><span class="sxs-lookup"><span data-stu-id="a6c85-163">Publisher Policy File</span></span>

<span data-ttu-id="a6c85-164">En segundo lugar, el tiempo de ejecución examina el archivo de directiva de edición, si existe.</span><span class="sxs-lookup"><span data-stu-id="a6c85-164">Second, the runtime examines the publisher policy file, if one exists.</span></span> <span data-ttu-id="a6c85-165">Los archivos de directiva de edición se distribuyen mediante un editor de componentes como una corrección o actualización de un componente compartido.</span><span class="sxs-lookup"><span data-stu-id="a6c85-165">Publisher policy files are distributed by a component publisher as a fix or update to a shared component.</span></span> <span data-ttu-id="a6c85-166">Estos archivos contienen información de compatibilidad emitida por el editor del componente compartido, que dirige una referencia de ensamblado a una nueva versión.</span><span class="sxs-lookup"><span data-stu-id="a6c85-166">These files contain compatibility information issued by the publisher of the shared component that directs an assembly reference to a new version.</span></span> <span data-ttu-id="a6c85-167">A diferencia de los archivos de configuración de la aplicación y del equipo, los archivos de directiva de edición están contenidos en su propio ensamblado, que debe instalarse en la caché global de ensamblados.</span><span class="sxs-lookup"><span data-stu-id="a6c85-167">Unlike application and machine configuration files, publisher policy files are contained in their own assembly that must be installed in the global assembly cache.</span></span>

<span data-ttu-id="a6c85-168">A continuación se muestra un ejemplo de un archivo de configuración de directiva de edición:</span><span class="sxs-lookup"><span data-stu-id="a6c85-168">The following is an example of a Publisher Policy configuration file:</span></span>

```xml
<configuration>
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">

            <dependentAssembly>
                <assemblyIdentity name="asm6" publicKeyToken="c0305c36380ba429" />
                <bindingRedirect oldVersion="3.0.0.0" newVersion="2.0.0.0"/>
            </dependentAssembly>

        </assemblyBinding>
    </runtime>
</configuration>
```

<span data-ttu-id="a6c85-169">Para crear un ensamblado, puede usar la herramienta [Al.exe (Assembly Linker)](../tools/al-exe-assembly-linker.md) con un comando como el siguiente:</span><span class="sxs-lookup"><span data-stu-id="a6c85-169">To create an assembly, you can use the [Al.exe (Assembly Linker)](../tools/al-exe-assembly-linker.md) tool with a command such as the following:</span></span>

```console
Al.exe /link:asm6.exe.config /out:policy.3.0.asm6.dll /keyfile: compatkey.dat /v:3.0.0.0
```

<span data-ttu-id="a6c85-170">`compatkey.dat` es un archivo de clave de nombre seguro.</span><span class="sxs-lookup"><span data-stu-id="a6c85-170">`compatkey.dat` is a strong-name key file.</span></span> <span data-ttu-id="a6c85-171">Este comando crea un ensamblado con nombre seguro que se puede colocar en la caché global de ensamblados.</span><span class="sxs-lookup"><span data-stu-id="a6c85-171">This command creates a strong-named assembly you can place in the global assembly cache.</span></span>

> [!NOTE]
> <span data-ttu-id="a6c85-172">La directiva de edición afecta a todas las aplicaciones que usan un componente compartido.</span><span class="sxs-lookup"><span data-stu-id="a6c85-172">Publisher policy affects all applications that use a shared component.</span></span>

<span data-ttu-id="a6c85-173">El archivo de configuración de directiva de edición reemplaza la información de versión que procede de la aplicación (es decir, que procede del manifiesto del ensamblado o del archivo de configuración de la aplicación).</span><span class="sxs-lookup"><span data-stu-id="a6c85-173">The publisher policy configuration file overrides version information that comes from the application (that is, from the assembly manifest or from the application configuration file).</span></span> <span data-ttu-id="a6c85-174">Si no hay ninguna instrucción en el archivo de configuración de la aplicación para redirigir la versión especificada en el manifiesto del ensamblado, el archivo de directiva de edición reemplaza la versión especificada en el manifiesto del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-174">If there is no statement in the application configuration file to redirect the version specified in the assembly manifest, the publisher policy file overrides the version specified in the assembly manifest.</span></span> <span data-ttu-id="a6c85-175">Sin embargo, si hay una instrucción de redirección en el archivo de configuración de la aplicación, la directiva de edición reemplaza esa versión, en lugar de la especificada en el manifiesto.</span><span class="sxs-lookup"><span data-stu-id="a6c85-175">However, if there is a redirecting statement in the application configuration file, publisher policy overrides that version rather than the one specified in the manifest.</span></span>

<span data-ttu-id="a6c85-176">Cuando se actualiza un componente compartido y todas las aplicaciones que lo usan deben seleccionar la nueva versión de dicho componente, se usa un archivo de directiva de edición.</span><span class="sxs-lookup"><span data-stu-id="a6c85-176">A publisher policy file is used when a shared component is updated and the new version of the shared component should be picked up by all applications using that component.</span></span> <span data-ttu-id="a6c85-177">La configuración del archivo de directiva de edición invalida la configuración del archivo de configuración de la aplicación, a menos que este último aplique el modo seguro.</span><span class="sxs-lookup"><span data-stu-id="a6c85-177">The settings in the publisher policy file override settings in the application configuration file, unless the application configuration file enforces safe mode.</span></span>

#### <a name="safe-mode"></a><span data-ttu-id="a6c85-178">Modo seguro</span><span class="sxs-lookup"><span data-stu-id="a6c85-178">Safe Mode</span></span>
<span data-ttu-id="a6c85-179">Los archivos de directiva de edición por lo general se instalan explícitamente como parte de un Service Pack o de una actualización del programa.</span><span class="sxs-lookup"><span data-stu-id="a6c85-179">Publisher policy files are usually explicitly installed as part of a service pack or program update.</span></span> <span data-ttu-id="a6c85-180">Si hay algún problema con el componente compartido actualizado, puede pasar por alto los reemplazos realizados en el archivo de directiva de edición usando el modo seguro.</span><span class="sxs-lookup"><span data-stu-id="a6c85-180">If there is any problem with the upgraded shared component, you can ignore the overrides in the publisher policy file using safe mode.</span></span> <span data-ttu-id="a6c85-181">El modo seguro está determinado por el elemento **\<publisherPolicy apply="yes**&#124;**no"/>** , que se encuentra solo en el archivo de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-181">Safe mode is determined by the **\<publisherPolicy apply="yes**&#124;**no"/>** element, located only in the application configuration file.</span></span> <span data-ttu-id="a6c85-182">Especifica si la información de configuración de directiva de edición debe quitarse del proceso de enlace.</span><span class="sxs-lookup"><span data-stu-id="a6c85-182">It specifies whether the publisher policy configuration information should be removed from the binding process.</span></span>

<span data-ttu-id="a6c85-183">El modo seguro se puede establecer para toda la aplicación o para los ensamblados seleccionados.</span><span class="sxs-lookup"><span data-stu-id="a6c85-183">Safe mode can be set for the entire application or for selected assemblies.</span></span> <span data-ttu-id="a6c85-184">Es decir, puede desactivar la directiva para todos los ensamblados que componen la aplicación, o bien activarla para algunos ensamblados pero no para otros.</span><span class="sxs-lookup"><span data-stu-id="a6c85-184">That is, you can turn off the policy for all assemblies that make up the application, or turn it on for some assemblies but not others.</span></span> <span data-ttu-id="a6c85-185">Para aplicar de forma selectiva la directiva de publicador a los ensamblados que componen una aplicación, establezca **\<publisherPolicy apply\=no/>** y especifique los ensamblados que desee que se vean afectados mediante el elemento \<**dependentAssembly**>.</span><span class="sxs-lookup"><span data-stu-id="a6c85-185">To selectively apply publisher policy to assemblies that make up an application, set **\<publisherPolicy apply\=no/>** and specify which assemblies you want to be affected using the \<**dependentAssembly**> element.</span></span> <span data-ttu-id="a6c85-186">Para aplicar la directiva de edición a todos los ensamblados que componen la aplicación, establezca **\<publisherPolicy apply\=no/>** sin elementos de ensamblado dependiente.</span><span class="sxs-lookup"><span data-stu-id="a6c85-186">To apply publisher policy to all assemblies that make up the application, set **\<publisherPolicy apply\=no/>** with no dependent assembly elements.</span></span> <span data-ttu-id="a6c85-187">Para obtener más información acerca de la configuración, consulte [Configurar aplicaciones con archivos de configuración](../configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="a6c85-187">For more about configuration, see [Configuring Apps by using Configuration Files](../configure-apps/index.md).</span></span>

### <a name="machine-configuration-file"></a><span data-ttu-id="a6c85-188">Archivo de configuración del equipo</span><span class="sxs-lookup"><span data-stu-id="a6c85-188">Machine Configuration File</span></span>
<span data-ttu-id="a6c85-189">En tercer lugar, el tiempo de ejecución examina el archivo de configuración del equipo.</span><span class="sxs-lookup"><span data-stu-id="a6c85-189">Third, the runtime examines the machine configuration file.</span></span> <span data-ttu-id="a6c85-190">Este archivo, denominado Machine.config, reside en el equipo local, el subdirectorio Config del directorio raíz donde está instalado el tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="a6c85-190">This file, called Machine.config, resides on the local computer in the Config subdirectory of the root directory where the runtime is installed.</span></span> <span data-ttu-id="a6c85-191">Los administradores pueden usar este archivo para especificar las restricciones de enlace de ensamblado locales de ese equipo.</span><span class="sxs-lookup"><span data-stu-id="a6c85-191">This file can be used by administrators to specify assembly binding restrictions that are local to that computer.</span></span> <span data-ttu-id="a6c85-192">La configuración incluida en el archivo de configuración del equipo tiene prioridad sobre otras opciones de configuración; sin embargo, esto no significa que todos los valores de configuración deban colocarse en este archivo.</span><span class="sxs-lookup"><span data-stu-id="a6c85-192">The settings in the machine configuration file take precedence over all other configuration settings; however, this does not mean that all configuration settings should be put in this file.</span></span> <span data-ttu-id="a6c85-193">La versión determinada por el archivo de directiva del administrador es final y no se puede invalidar.</span><span class="sxs-lookup"><span data-stu-id="a6c85-193">The version determined by the administrator policy file is final, and cannot be overridden.</span></span> <span data-ttu-id="a6c85-194">Los reemplazos especificados en el archivo Machine.config afectan a todas las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="a6c85-194">Overrides specified in the Machine.config file affect all applications.</span></span> <span data-ttu-id="a6c85-195">Para obtener más información acerca de los archivos de configuración, consulte [Configurar aplicaciones con archivos de configuración](../configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="a6c85-195">For more information about configuration files, see [Configuring Apps by using Configuration Files](../configure-apps/index.md).</span></span>

<a name="step2"></a>

## <a name="step-2-checking-for-previously-referenced-assemblies"></a><span data-ttu-id="a6c85-196">Paso 2: Comprobación de los ensamblados a los que se ha hecho referencia previamente</span><span class="sxs-lookup"><span data-stu-id="a6c85-196">Step 2: Checking for Previously Referenced Assemblies</span></span>

<span data-ttu-id="a6c85-197">Si el ensamblado solicitado también se solicitó en llamadas anteriores, Common Language Runtime usa el ensamblado que ya está cargado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-197">If the requested assembly has also been requested in previous calls, the common language runtime uses the assembly that is already loaded.</span></span> <span data-ttu-id="a6c85-198">Esto puede tener consecuencias cuando se asignan nombres a los ensamblados que componen una aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-198">This can have ramifications when naming assemblies that make up an application.</span></span> <span data-ttu-id="a6c85-199">Para obtener más información sobre los nombres de ensamblados, vea [Nombres de ensamblados](../../standard/assembly/names.md).</span><span class="sxs-lookup"><span data-stu-id="a6c85-199">For more information about naming assemblies, see [Assembly Names](../../standard/assembly/names.md).</span></span>

<span data-ttu-id="a6c85-200">Si una solicitud anterior para el ensamblado produjo un error, las solicitudes posteriores para el ensamblado producen un error inmediatamente sin intentar cargar el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-200">If a previous request for the assembly failed, subsequent requests for the assembly are failed immediately without attempting to load the assembly.</span></span> <span data-ttu-id="a6c85-201">A partir de .NET Framework versión 2.0, los errores de enlace de ensamblado se almacenan en caché y la información en caché se usa para determinar si se intenta cargar el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-201">Starting with the .NET Framework version 2.0, assembly binding failures are cached, and the cached information is used to determine whether to attempt to load the assembly.</span></span>

> [!NOTE]
> <span data-ttu-id="a6c85-202">Para revertir al comportamiento de .NET Framework versiones 1.0 y 1.1, que no almacenaban en caché los errores de enlace, incluya el elemento [\<disableCachingBindingFailures> ](../configure-apps/file-schema/runtime/disablecachingbindingfailures-element.md) en el archivo de configuración.</span><span class="sxs-lookup"><span data-stu-id="a6c85-202">To revert to the behavior of the .NET Framework versions 1.0 and 1.1, which did not cache binding failures, include the [\<disableCachingBindingFailures> Element](../configure-apps/file-schema/runtime/disablecachingbindingfailures-element.md) in your configuration file.</span></span>

<a name="step3"></a>

## <a name="step-3-checking-the-global-assembly-cache"></a><span data-ttu-id="a6c85-203">Paso 3: Comprobación de la memoria caché global de ensamblados</span><span class="sxs-lookup"><span data-stu-id="a6c85-203">Step 3: Checking the Global Assembly Cache</span></span>

<span data-ttu-id="a6c85-204">Para los ensamblados con nombre seguro, el proceso de enlace continúa con la búsqueda en la caché global de ensamblados.</span><span class="sxs-lookup"><span data-stu-id="a6c85-204">For strong-named assemblies, the binding process continues by looking in the global assembly cache.</span></span> <span data-ttu-id="a6c85-205">La caché global de ensamblados almacena los ensamblados que varias aplicaciones pueden usar en un equipo.</span><span class="sxs-lookup"><span data-stu-id="a6c85-205">The global assembly cache stores assemblies that can be used by several applications on a computer.</span></span> <span data-ttu-id="a6c85-206">Todos los ensamblados de la caché global de ensamblados deben tener nombres seguros.</span><span class="sxs-lookup"><span data-stu-id="a6c85-206">All assemblies in the global assembly cache must have strong names.</span></span>

<a name="step4"></a>

## <a name="step-4-locating-the-assembly-through-codebases-or-probing"></a><span data-ttu-id="a6c85-207">Paso 4: Localización del ensamblado a través de códigos base o sondeos</span><span class="sxs-lookup"><span data-stu-id="a6c85-207">Step 4: Locating the Assembly through Codebases or Probing</span></span>

<span data-ttu-id="a6c85-208">Una vez determinada la versión correcta del ensamblado usando la información contenida en la referencia del ensamblado que realiza la llamada y en los archivos de configuración, y una vez protegida la caché global de ensamblados (solo para ensamblados con nombre seguro), Common Language Runtime intenta buscar el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-208">After the correct assembly version has been determined by using the information in the calling assembly's reference and in the configuration files, and after it has checked in the global assembly cache (only for strong-named assemblies), the common language runtime attempts to find the assembly.</span></span> <span data-ttu-id="a6c85-209">El proceso de buscar un ensamblado conlleva los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="a6c85-209">The process of locating an assembly involves the following steps:</span></span>

1. <span data-ttu-id="a6c85-210">Si se encuentra un elemento [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) en el archivo de configuración de la aplicación, el tiempo de ejecución comprueba la ubicación especificada.</span><span class="sxs-lookup"><span data-stu-id="a6c85-210">If a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element is found in the application configuration file, the runtime checks the specified location.</span></span> <span data-ttu-id="a6c85-211">Si se encuentra una coincidencia, se usa ese ensamblado y no se realiza ningún sondeo.</span><span class="sxs-lookup"><span data-stu-id="a6c85-211">If a match is found, that assembly is used and no probing occurs.</span></span> <span data-ttu-id="a6c85-212">Si no se encuentra ahí el ensamblado, se produce un error en la solicitud de enlace.</span><span class="sxs-lookup"><span data-stu-id="a6c85-212">If the assembly is not found there, the binding request fails.</span></span>

2. <span data-ttu-id="a6c85-213">Entonces, el tiempo de ejecución sondea el ensamblado al que se hace referencia usando las reglas que se especifican más adelante en esta sección.</span><span class="sxs-lookup"><span data-stu-id="a6c85-213">The runtime then probes for the referenced assembly using the rules specified later in this section.</span></span>

> [!NOTE]
> <span data-ttu-id="a6c85-214">Si tiene varias versiones de un ensamblado en un directorio y desea hacer referencia a una versión concreta de dicho ensamblado, debe usar el elemento [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) en lugar del atributo `privatePath` del elemento [\<probing>](../configure-apps/file-schema/runtime/probing-element.md).</span><span class="sxs-lookup"><span data-stu-id="a6c85-214">If you have multiple versions of an assembly in a directory and you want to reference a particular version of that assembly, you must use the [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element instead of the `privatePath` attribute of the [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element.</span></span> <span data-ttu-id="a6c85-215">Si usa el elemento [\<probing>](../configure-apps/file-schema/runtime/probing-element.md), el tiempo de ejecución detiene el sondeo la primera vez que encuentra un ensamblado que coincida con el nombre sencillo de ensamblado al que se hace referencia, tanto si es una coincidencia correcta como si no.</span><span class="sxs-lookup"><span data-stu-id="a6c85-215">If you use the [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element, the runtime stops probing the first time it finds an assembly that matches the simple assembly name referenced, whether it is a correct match or not.</span></span> <span data-ttu-id="a6c85-216">Si es una coincidencia correcta, se usa dicho ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-216">If it is a correct match, that assembly is used.</span></span> <span data-ttu-id="a6c85-217">Si no es una coincidencia correcta, detiene el sondeo y el enlace produce un error.</span><span class="sxs-lookup"><span data-stu-id="a6c85-217">If it is not a correct match, probing stops and binding fails.</span></span>

### <a name="locating-the-assembly-through-codebases"></a><span data-ttu-id="a6c85-218">Ubicar el ensamblado a través de códigos base</span><span class="sxs-lookup"><span data-stu-id="a6c85-218">Locating the Assembly through Codebases</span></span>

<span data-ttu-id="a6c85-219">Se puede proporcionar información de código base mediante un elemento [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) en un archivo de configuración.</span><span class="sxs-lookup"><span data-stu-id="a6c85-219">Codebase information can be provided by using a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element in a configuration file.</span></span> <span data-ttu-id="a6c85-220">Este código base siempre se comprueba antes de que el tiempo de ejecución intente sondear el ensamblado al que se hace referencia.</span><span class="sxs-lookup"><span data-stu-id="a6c85-220">This codebase is always checked before the runtime attempts to probe for the referenced assembly.</span></span> <span data-ttu-id="a6c85-221">Si un archivo de directiva de edición que contiene la redirección de versión final también contiene un elemento [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md), dicho elemento [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) es el que se usa.</span><span class="sxs-lookup"><span data-stu-id="a6c85-221">If a publisher policy file containing the final version redirect also contains a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element, that [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element is the one that is used.</span></span> <span data-ttu-id="a6c85-222">Por ejemplo, si el archivo de configuración de la aplicación especifica un elemento [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) y un archivo de directiva de edición que está reemplazando la información de la aplicación también especifica un elemento [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md), se usa el elemento [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) del archivo de directiva de edición.</span><span class="sxs-lookup"><span data-stu-id="a6c85-222">For example, if your application configuration file specifies a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element, and a publisher policy file that is overriding the application information also specifies a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element, the [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element in the publisher policy file is used.</span></span>

<span data-ttu-id="a6c85-223">Si no se encuentra ninguna coincidencia en la ubicación especificada por el elemento [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md), se produce un error en la solicitud de enlace y no se realizan más acciones.</span><span class="sxs-lookup"><span data-stu-id="a6c85-223">If no match is found at the location specified by the [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element, the bind request fails and no further steps are taken.</span></span> <span data-ttu-id="a6c85-224">Si el tiempo de ejecución determina que un ensamblado coincide con los criterios del ensamblado que realiza la llamada, usa dicho ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-224">If the runtime determines that an assembly matches the calling assembly's criteria, it uses that assembly.</span></span> <span data-ttu-id="a6c85-225">Cuando se carga el archivo especificado por el elemento [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) determinado, el tiempo de ejecución realiza una comprobación para asegurarse de que el nombre, la versión, la referencia cultural y la clave pública coinciden con la referencia del ensamblado de llamada.</span><span class="sxs-lookup"><span data-stu-id="a6c85-225">When the file specified by the given [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element is loaded, the runtime checks to make sure that the name, version, culture, and public key match the calling assembly's reference.</span></span>

> [!NOTE]
> <span data-ttu-id="a6c85-226">Los ensamblados a los que se hace referencia fuera del directorio raíz de la aplicación deben tener nombres seguros y deben estar instalados en la caché global de ensamblados o especificarse usando el elemento [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md).</span><span class="sxs-lookup"><span data-stu-id="a6c85-226">Referenced assemblies outside the application's root directory must have strong names and must either be installed in the global assembly cache or specified using the [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element.</span></span>

### <a name="locating-the-assembly-through-probing"></a><span data-ttu-id="a6c85-227">Ubicar el ensamblado a través del sondeo</span><span class="sxs-lookup"><span data-stu-id="a6c85-227">Locating the Assembly through Probing</span></span>

<span data-ttu-id="a6c85-228">Si no hay ningún elemento [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) en el archivo de configuración de la aplicación, el tiempo de ejecución sondea el ensamblado usando cuatro criterios:</span><span class="sxs-lookup"><span data-stu-id="a6c85-228">If there is no [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element in the application configuration file, the runtime probes for the assembly using four criteria:</span></span>

- <span data-ttu-id="a6c85-229">Base de la aplicación, que es la ubicación raíz donde se ejecuta la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-229">Application base, which is the root location where the application is being executed.</span></span>

- <span data-ttu-id="a6c85-230">Referencia cultural, que es el atributo de referencia cultural del ensamblado al que se hace referencia.</span><span class="sxs-lookup"><span data-stu-id="a6c85-230">Culture, which is the culture attribute of the assembly being referenced.</span></span>

- <span data-ttu-id="a6c85-231">Nombre, que es el nombre del ensamblado al que se hace referencia.</span><span class="sxs-lookup"><span data-stu-id="a6c85-231">Name, which is the name of the referenced assembly.</span></span>

- <span data-ttu-id="a6c85-232">El atributo `privatePath` del elemento [\<probing>](../configure-apps/file-schema/runtime/probing-element.md), que es la lista definida por el usuario de subdirectorios bajo la ubicación raíz.</span><span class="sxs-lookup"><span data-stu-id="a6c85-232">The `privatePath` attribute of the [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element, which is the user-defined list of subdirectories under the root location.</span></span> <span data-ttu-id="a6c85-233">Esta ubicación puede especificarse en el archivo de configuración de la aplicación y en el código administrado mediante la propiedad <xref:System.AppDomainSetup.PrivateBinPath?displayProperty=nameWithType> para un dominio de aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-233">This location can be specified in the application configuration file and in managed code using the <xref:System.AppDomainSetup.PrivateBinPath?displayProperty=nameWithType> property for an application domain.</span></span> <span data-ttu-id="a6c85-234">Cuando se especifica en código administrado, se sondea primero el código administrado `privatePath` , seguido de la ruta de acceso especificada en el archivo de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-234">When specified in managed code, the managed code `privatePath` is probed first, followed by the path specified in the application configuration file.</span></span>

#### <a name="probing-the-application-base-and-culture-directories"></a><span data-ttu-id="a6c85-235">Sondear los directorios de base de la aplicación y de referencia cultural</span><span class="sxs-lookup"><span data-stu-id="a6c85-235">Probing the Application Base and Culture Directories</span></span>

<span data-ttu-id="a6c85-236">El tiempo de ejecución siempre empieza a sondear en la base de la aplicación, que puede ser una dirección URL o el directorio raíz de la aplicación en un equipo.</span><span class="sxs-lookup"><span data-stu-id="a6c85-236">The runtime always begins probing in the application's base, which can be either a URL or the application's root directory on a computer.</span></span> <span data-ttu-id="a6c85-237">Si el ensamblado al que se hace referencia no se encuentra en la base de la aplicación y si no se proporciona ninguna información de referencia cultural, el tiempo de ejecución busca cualquier subdirectorio con el nombre del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-237">If the referenced assembly is not found in the application base and no culture information is provided, the runtime searches any subdirectories with the assembly name.</span></span> <span data-ttu-id="a6c85-238">Los directorios sondeados incluyen:</span><span class="sxs-lookup"><span data-stu-id="a6c85-238">The directories probed include:</span></span>

- <span data-ttu-id="a6c85-239">[base de la aplicación] / [nombre de ensamblado].dll</span><span class="sxs-lookup"><span data-stu-id="a6c85-239">[application base] / [assembly name].dll</span></span>

- <span data-ttu-id="a6c85-240">[base de la aplicación] / [nombre de ensamblado] / [nombre de ensamblado].dll</span><span class="sxs-lookup"><span data-stu-id="a6c85-240">[application base] / [assembly name] / [assembly name].dll</span></span>

<span data-ttu-id="a6c85-241">Si se especifica información de referencia cultural para el ensamblado al que se hace referencia, solo se busca en los directorios siguientes:</span><span class="sxs-lookup"><span data-stu-id="a6c85-241">If culture information is specified for the referenced assembly, only the following directories are probed:</span></span>

- <span data-ttu-id="a6c85-242">[base de la aplicación] / [referencia cultural] / [nombre de ensamblado].dll</span><span class="sxs-lookup"><span data-stu-id="a6c85-242">[application base] / [culture] / [assembly name].dll</span></span>

- <span data-ttu-id="a6c85-243">[base de la aplicación] / [referencia cultural] / [nombre de ensamblado] / [nombre de ensamblado].dll</span><span class="sxs-lookup"><span data-stu-id="a6c85-243">[application base] / [culture] / [assembly name] / [assembly name].dll</span></span>

#### <a name="probing-with-the-privatepath-attribute"></a><span data-ttu-id="a6c85-244">Sondear con el atributo privatePath</span><span class="sxs-lookup"><span data-stu-id="a6c85-244">Probing with the privatePath Attribute</span></span>

<span data-ttu-id="a6c85-245">Además de los subdirectorios de referencia cultural y los subdirectorios con el nombre del ensamblado al que se hace referencia, el tiempo de ejecución también sondea los directorios especificados mediante el atributo `privatePath` del elemento [\<probing>](../configure-apps/file-schema/runtime/probing-element.md).</span><span class="sxs-lookup"><span data-stu-id="a6c85-245">In addition to the culture subdirectories and the subdirectories named for the referenced assembly, the runtime also probes directories specified using the `privatePath` attribute of the [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element.</span></span> <span data-ttu-id="a6c85-246">Los directorios especificados mediante el atributo `privatePath` debe ser subdirectorios del directorio raíz de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a6c85-246">The directories specified using the `privatePath` attribute must be subdirectories of the application's root directory.</span></span> <span data-ttu-id="a6c85-247">Los directorios sondeados varían en función de si se incluye información de referencia cultural en la solicitud del ensamblado al que se hace referencia.</span><span class="sxs-lookup"><span data-stu-id="a6c85-247">The directories probed vary depending on whether culture information is included in the referenced assembly request.</span></span>

<span data-ttu-id="a6c85-248">El tiempo de ejecución detiene el sondeo la primera vez que encuentra un ensamblado que coincida con el nombre sencillo de ensamblado al que se hace referencia, tanto si es una coincidencia correcta como si no.</span><span class="sxs-lookup"><span data-stu-id="a6c85-248">The runtime stops probing the first time it finds an assembly that matches the simple assembly name referenced, whether it is a correct match or not.</span></span> <span data-ttu-id="a6c85-249">Si es una coincidencia correcta, se usa dicho ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-249">If it is a correct match, that assembly is used.</span></span> <span data-ttu-id="a6c85-250">Si no es una coincidencia correcta, detiene el sondeo y el enlace produce un error.</span><span class="sxs-lookup"><span data-stu-id="a6c85-250">If it is not a correct match, probing stops and binding fails.</span></span>

<span data-ttu-id="a6c85-251">Si se incluye la referencia cultural, se busca en los directorios siguientes:</span><span class="sxs-lookup"><span data-stu-id="a6c85-251">If culture is included, the following directories are probed:</span></span>

- <span data-ttu-id="a6c85-252">[base de la aplicación] / [binpath] / [referencia cultural] / [nombre de ensamblado].dll</span><span class="sxs-lookup"><span data-stu-id="a6c85-252">[application base] / [binpath] / [culture] / [assembly name].dll</span></span>

- <span data-ttu-id="a6c85-253">[base de la aplicación] / [binpath] / [referencia cultural] / [nombre de ensamblado] / [nombre de ensamblado].dll</span><span class="sxs-lookup"><span data-stu-id="a6c85-253">[application base] / [binpath] / [culture] / [assembly name] / [assembly name].dll</span></span>

<span data-ttu-id="a6c85-254">Si no se incluye información de referencia cultural, se busca en los directorios siguientes:</span><span class="sxs-lookup"><span data-stu-id="a6c85-254">If culture information is not included, the following directories are probed:</span></span>

- <span data-ttu-id="a6c85-255">[base de la aplicación] / [binpath] / [nombre de ensamblado].dll</span><span class="sxs-lookup"><span data-stu-id="a6c85-255">[application base] / [binpath] / [assembly name].dll</span></span>

- <span data-ttu-id="a6c85-256">[base de la aplicación] / [binpath] / [nombre de ensamblado] / [nombre de ensamblado].dll</span><span class="sxs-lookup"><span data-stu-id="a6c85-256">[application base] / [binpath] / [assembly name] / [assembly name].dll</span></span>

#### <a name="probing-examples"></a><span data-ttu-id="a6c85-257">Ejemplos de sondeo</span><span class="sxs-lookup"><span data-stu-id="a6c85-257">Probing Examples</span></span>

<span data-ttu-id="a6c85-258">Dada la siguiente información:</span><span class="sxs-lookup"><span data-stu-id="a6c85-258">Given the following information:</span></span>

- <span data-ttu-id="a6c85-259">Nombre del ensamblado al que se hace referencia: myAssembly</span><span class="sxs-lookup"><span data-stu-id="a6c85-259">Referenced assembly name: myAssembly</span></span>

- <span data-ttu-id="a6c85-260">Directorio raíz de la aplicación: `http://www.code.microsoft.com`</span><span class="sxs-lookup"><span data-stu-id="a6c85-260">Application root directory: `http://www.code.microsoft.com`</span></span>

- <span data-ttu-id="a6c85-261">El elemento [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) del archivo de configuración especifica: bin</span><span class="sxs-lookup"><span data-stu-id="a6c85-261">[\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element in configuration file specifies: bin</span></span>

- <span data-ttu-id="a6c85-262">Referencia cultural: de</span><span class="sxs-lookup"><span data-stu-id="a6c85-262">Culture: de</span></span>

<span data-ttu-id="a6c85-263">El tiempo de ejecución sondea las direcciones URL siguientes:</span><span class="sxs-lookup"><span data-stu-id="a6c85-263">The runtime probes the following URLs:</span></span>

- `http://www.code.microsoft.com/de/myAssembly.dll`

- `http://www.code.microsoft.com/de/myAssembly/myAssembly.dll`

- `http://www.code.microsoft.com/bin/de/myAssembly.dll`

- `http://www.code.microsoft.com/bin/de/myAssembly/myAssembly.dll`

##### <a name="multiple-assemblies-with-the-same-name"></a><span data-ttu-id="a6c85-264">Varios ensamblados con el mismo nombre</span><span class="sxs-lookup"><span data-stu-id="a6c85-264">Multiple Assemblies with the Same Name</span></span>

<span data-ttu-id="a6c85-265">En el ejemplo siguiente se muestra cómo configurar varios ensamblados con el mismo nombre.</span><span class="sxs-lookup"><span data-stu-id="a6c85-265">The following example shows how to configure multiple assemblies with the same name.</span></span>

```xml
<dependentAssembly>
   <assemblyIdentity name="Server" publicKeyToken="c0305c36380ba429" />
   <codeBase version="1.0.0.0" href="v1/Server.dll" />
   <codeBase version="2.0.0.0" href="v2/Server.dll" />
</dependentAssembly>
```

#### <a name="other-locations-probed"></a><span data-ttu-id="a6c85-266">Otras ubicaciones sondeadas</span><span class="sxs-lookup"><span data-stu-id="a6c85-266">Other Locations Probed</span></span>

<span data-ttu-id="a6c85-267">La ubicación del ensamblado también puede determinarse mediante el contexto de enlace actual.</span><span class="sxs-lookup"><span data-stu-id="a6c85-267">Assembly location can also be determined using the current binding context.</span></span> <span data-ttu-id="a6c85-268">Esto suele ocurrir cuando se usa el método <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> y en escenarios de interoperabilidad COM.</span><span class="sxs-lookup"><span data-stu-id="a6c85-268">This most often occurs when the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> method is used and in COM interop scenarios.</span></span> <span data-ttu-id="a6c85-269">Si un ensamblado usa el método <xref:System.Reflection.Assembly.LoadFrom%2A> para hacer referencia a otro ensamblado, la ubicación del ensamblado que realiza la llamada se considera una pista sobre dónde se encontrará el ensamblado al que se hace referencia.</span><span class="sxs-lookup"><span data-stu-id="a6c85-269">If an assembly uses the <xref:System.Reflection.Assembly.LoadFrom%2A> method to reference another assembly, the calling assembly's location is considered to be a hint about where to find the referenced assembly.</span></span> <span data-ttu-id="a6c85-270">Si se encuentra una coincidencia, se carga dicho ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-270">If a match is found, that assembly is loaded.</span></span> <span data-ttu-id="a6c85-271">Si no se encuentra ninguna coincidencia, el tiempo de ejecución prosigue con la semántica de búsqueda y, a continuación, consulta a Windows Installer para proporcionar el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="a6c85-271">If no match is found, the runtime continues with its search semantics and then queries the Windows Installer to provide the assembly.</span></span> <span data-ttu-id="a6c85-272">Si no se proporciona ningún ensamblado que coincida con la solicitud de enlace, se produce una excepción.</span><span class="sxs-lookup"><span data-stu-id="a6c85-272">If no assembly is provided that matches the binding request, an exception is thrown.</span></span> <span data-ttu-id="a6c85-273">Esta excepción es una <xref:System.TypeLoadException> en código administrado si se hacía referencia a un tipo, o una <xref:System.IO.FileNotFoundException> si no se encontró un ensamblado que se estuviera cargando.</span><span class="sxs-lookup"><span data-stu-id="a6c85-273">This exception is a <xref:System.TypeLoadException> in managed code if a type was referenced, or a <xref:System.IO.FileNotFoundException> if an assembly being loaded was not found.</span></span>

<span data-ttu-id="a6c85-274">Por ejemplo, si Assembly1 hace referencia a Assembly2 y Assembly1 se descargó desde `http://www.code.microsoft.com/utils`, dicha ubicación se considera una pista sobre dónde buscar Assembly2.dll.</span><span class="sxs-lookup"><span data-stu-id="a6c85-274">For example, if Assembly1 references Assembly2 and Assembly1 was downloaded from `http://www.code.microsoft.com/utils`, that location is considered to be a hint about where to find Assembly2.dll.</span></span> <span data-ttu-id="a6c85-275">Después, el runtime busca el ensamblado en `http://www.code.microsoft.com/utils/Assembly2.dll` y `http://www.code.microsoft.com/utils/Assembly2/Assembly2.dll`.</span><span class="sxs-lookup"><span data-stu-id="a6c85-275">The runtime then probes for the assembly in `http://www.code.microsoft.com/utils/Assembly2.dll` and `http://www.code.microsoft.com/utils/Assembly2/Assembly2.dll`.</span></span> <span data-ttu-id="a6c85-276">Si no se encuentra Assembly2 en ninguna de estas ubicaciones, el tiempo de ejecución consulta a Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="a6c85-276">If Assembly2 is not found at either of those locations, the runtime queries the Windows Installer.</span></span>

## <a name="see-also"></a><span data-ttu-id="a6c85-277">Vea también</span><span class="sxs-lookup"><span data-stu-id="a6c85-277">See also</span></span>

- [<span data-ttu-id="a6c85-278">Procedimientos recomendados para cargar ensamblados</span><span class="sxs-lookup"><span data-stu-id="a6c85-278">Best Practices for Assembly Loading</span></span>](best-practices-for-assembly-loading.md)
- [<span data-ttu-id="a6c85-279">Implementación</span><span class="sxs-lookup"><span data-stu-id="a6c85-279">Deployment</span></span>](index.md)
