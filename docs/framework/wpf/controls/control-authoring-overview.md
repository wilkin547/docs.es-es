---
title: Información general sobre la creación de controles
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- controls [WPF], authoring overview
- authoring overview for controls [WPF]
ms.assetid: 3d864748-cff0-4e63-9b23-d8e5a635b28f
ms.openlocfilehash: a6c2c796819924cdbd15d6eefffe10a607bad9bc
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/04/2018
ms.locfileid: "33558088"
---
# <a name="control-authoring-overview"></a><span data-ttu-id="403ad-102">Información general sobre la creación de controles</span><span class="sxs-lookup"><span data-stu-id="403ad-102">Control Authoring Overview</span></span>
<span data-ttu-id="403ad-103">La extensibilidad del modelo de control [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] reduce enormemente la necesidad de crear un nuevo control.</span><span class="sxs-lookup"><span data-stu-id="403ad-103">The extensibility of the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] control model greatly reduces the need to create a new control.</span></span> <span data-ttu-id="403ad-104">Sin embargo, en ciertos casos, puede que necesite crear un control personalizado.</span><span class="sxs-lookup"><span data-stu-id="403ad-104">However, in certain cases you may still need to create a custom control.</span></span> <span data-ttu-id="403ad-105">En este tema se describen las características que reducen la necesidad de crear un control personalizado y los diferentes modelos de creación de controles en [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="403ad-105">This topic discusses the features that minimize your need to create a custom control and the different control authoring models in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span></span> <span data-ttu-id="403ad-106">En este tema también se muestra cómo crear un nuevo control.</span><span class="sxs-lookup"><span data-stu-id="403ad-106">This topic also demonstrates how to create a new control.</span></span>  
  
 
  
<a name="when_to_write_a_new_control"></a>   
## <a name="alternatives-to-writing-a-new-control"></a><span data-ttu-id="403ad-107">Alternativas a la escritura de un nuevo control</span><span class="sxs-lookup"><span data-stu-id="403ad-107">Alternatives to Writing a New Control</span></span>  
 <span data-ttu-id="403ad-108">Históricamente, si quería obtener una experiencia personalizada con un control existente, estaba limitado a cambiar las propiedades estándar del control, como el color de fondo, el ancho del borde y el tamaño de la fuente.</span><span class="sxs-lookup"><span data-stu-id="403ad-108">Historically, if you wanted to get a customized experience from an existing control, you were limited to changing the standard properties of the control, such as background color, border width, and font size.</span></span> <span data-ttu-id="403ad-109">Si se deseara extender la apariencia o el comportamiento de un control más allá de estos parámetros predefinidos, necesitaría crear un nuevo control; para ello, lo que haría es heredarlo de un control existente e invalidar el método responsable de dibujar el control.</span><span class="sxs-lookup"><span data-stu-id="403ad-109">If you wished to extend the appearance or behavior of a control beyond these predefined parameters, you would need to create a new control, usually by inheriting from an existing control and overriding the method responsible for drawing the control.</span></span>  <span data-ttu-id="403ad-110">Aunque esto sigue siendo una opción, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] permite personalizar los controles existentes mediante su modelo de contenido enriquecido, sus estilos, plantillas y desencadenadores.</span><span class="sxs-lookup"><span data-stu-id="403ad-110">Although that is still an option, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] enables to you customize existing controls by using its rich content model, styles, templates, and triggers.</span></span> <span data-ttu-id="403ad-111">En la lista siguiente se proporcionan ejemplos de cómo se pueden usar estas características para crear experiencias personalizadas y coherentes sin tener que crear un nuevo control.</span><span class="sxs-lookup"><span data-stu-id="403ad-111">The following list gives examples of how these features can be used to create custom and consistent experiences without having to create a new control.</span></span>  
  
-   <span data-ttu-id="403ad-112">**Contenido enriquecido.**</span><span class="sxs-lookup"><span data-stu-id="403ad-112">**Rich Content.**</span></span> <span data-ttu-id="403ad-113">Muchos de los controles [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] estándar admiten contenido enriquecido.</span><span class="sxs-lookup"><span data-stu-id="403ad-113">Many of the standard [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] controls support rich content.</span></span> <span data-ttu-id="403ad-114">Por ejemplo, la propiedad de contenido de un <xref:System.Windows.Controls.Button> es de tipo <xref:System.Object>, teóricamente nada se puede mostrar en un <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="403ad-114">For example, the content property of a <xref:System.Windows.Controls.Button> is of type <xref:System.Object>, so theoretically anything can be displayed on a <xref:System.Windows.Controls.Button>.</span></span>  <span data-ttu-id="403ad-115">Para que un botón Mostrar una imagen y texto, puede agregar una imagen y un <xref:System.Windows.Controls.TextBlock> a una <xref:System.Windows.Controls.StackPanel> y asignar el <xref:System.Windows.Controls.StackPanel> a la <xref:System.Windows.Controls.ContentControl.Content%2A> propiedad.</span><span class="sxs-lookup"><span data-stu-id="403ad-115">To have a button display an image and text, you can add an image and a <xref:System.Windows.Controls.TextBlock> to a <xref:System.Windows.Controls.StackPanel> and assign the <xref:System.Windows.Controls.StackPanel> to the <xref:System.Windows.Controls.ContentControl.Content%2A> property.</span></span> <span data-ttu-id="403ad-116">Dado que los controles pueden mostrar elementos visuales [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] y datos arbitrarios, no es tan necesario crear un nuevo control o modificar un control existente para admitir una visualización compleja.</span><span class="sxs-lookup"><span data-stu-id="403ad-116">Because the controls can display [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] visual elements and arbitrary data, there is less need to create a new control or to modify an existing control to support a complex visualization.</span></span> <span data-ttu-id="403ad-117">Para obtener más información sobre el modelo de contenido <xref:System.Windows.Controls.Button> y otro contenido de los modelos de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], consulte [modelo de contenido de WPF](../../../../docs/framework/wpf/controls/wpf-content-model.md).</span><span class="sxs-lookup"><span data-stu-id="403ad-117">For more information about the content model for <xref:System.Windows.Controls.Button> and other content models in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [WPF Content Model](../../../../docs/framework/wpf/controls/wpf-content-model.md).</span></span>  
  
-   <span data-ttu-id="403ad-118">**Estilos.**</span><span class="sxs-lookup"><span data-stu-id="403ad-118">**Styles.**</span></span> <span data-ttu-id="403ad-119">A <xref:System.Windows.Style> es una colección de valores que representan las propiedades de un control.</span><span class="sxs-lookup"><span data-stu-id="403ad-119">A <xref:System.Windows.Style> is a collection of values that represent properties for a control.</span></span> <span data-ttu-id="403ad-120">Mediante el uso de estilos, puede crear una representación reutilizable de la apariencia y el comportamiento deseados de un control sin necesidad de escribir un nuevo control.</span><span class="sxs-lookup"><span data-stu-id="403ad-120">By using styles, you can create a reusable representation of a desired control appearance and behavior without writing a new control.</span></span> <span data-ttu-id="403ad-121">Por ejemplo, supongamos que desea que todos los <xref:System.Windows.Controls.TextBlock> los controles tengan fuente Arial de color rojo con un tamaño de fuente de 14.</span><span class="sxs-lookup"><span data-stu-id="403ad-121">For example, assume that you want all of your <xref:System.Windows.Controls.TextBlock> controls to have red, Arial font with a font size of 14.</span></span> <span data-ttu-id="403ad-122">Puede crear un estilo como un recurso y establecer las propiedades adecuadas según corresponda.</span><span class="sxs-lookup"><span data-stu-id="403ad-122">You can create a style as a resource and set the appropriate properties accordingly.</span></span> <span data-ttu-id="403ad-123">A continuación, cada <xref:System.Windows.Controls.TextBlock> que agregue a la aplicación tendrá la misma apariencia.</span><span class="sxs-lookup"><span data-stu-id="403ad-123">Then every <xref:System.Windows.Controls.TextBlock> that you add to your application will have the same appearance.</span></span>  
  
-   <span data-ttu-id="403ad-124">**Plantillas de datos.**</span><span class="sxs-lookup"><span data-stu-id="403ad-124">**Data Templates.**</span></span> <span data-ttu-id="403ad-125">Un <xref:System.Windows.DataTemplate> le permite personalizar cómo se muestran los datos en un control.</span><span class="sxs-lookup"><span data-stu-id="403ad-125">A <xref:System.Windows.DataTemplate> enables you to customize how data is displayed on a control.</span></span> <span data-ttu-id="403ad-126">Por ejemplo, un <xref:System.Windows.DataTemplate> puede utilizarse para especificar cómo se muestran los datos en un <xref:System.Windows.Controls.ListBox>.</span><span class="sxs-lookup"><span data-stu-id="403ad-126">For example, a <xref:System.Windows.DataTemplate> can be used to specify how data is displayed in a <xref:System.Windows.Controls.ListBox>.</span></span>  <span data-ttu-id="403ad-127">Para ver un ejemplo de esto, consulte [Data Templating Overview](../../../../docs/framework/wpf/data/data-templating-overview.md) (Introducción a las plantillas de datos).</span><span class="sxs-lookup"><span data-stu-id="403ad-127">For an example of this, see [Data Templating Overview](../../../../docs/framework/wpf/data/data-templating-overview.md).</span></span>  <span data-ttu-id="403ad-128">Además de personalizar la apariencia de los datos, un <xref:System.Windows.DataTemplate> puede incluir elementos de interfaz de usuario, que proporciona una gran flexibilidad en interfaces de usuario personalizadas.</span><span class="sxs-lookup"><span data-stu-id="403ad-128">In addition to customizing the appearance of data, a <xref:System.Windows.DataTemplate> can include UI elements, which gives you a lot of flexibility in custom UIs.</span></span>  <span data-ttu-id="403ad-129">Por ejemplo, mediante un <xref:System.Windows.DataTemplate>, puede crear un <xref:System.Windows.Controls.ComboBox> en que cada elemento contiene una casilla de verificación.</span><span class="sxs-lookup"><span data-stu-id="403ad-129">For example, by using a <xref:System.Windows.DataTemplate>, you can create a <xref:System.Windows.Controls.ComboBox> in which each item contains a check box.</span></span>  
  
-   <span data-ttu-id="403ad-130">**Plantillas de control.**</span><span class="sxs-lookup"><span data-stu-id="403ad-130">**Control Templates.**</span></span> <span data-ttu-id="403ad-131">Muchos controles de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] utilizar un <xref:System.Windows.Controls.ControlTemplate> para definir la estructura y el aspecto, que separa la apariencia de un control de la funcionalidad del control del control.</span><span class="sxs-lookup"><span data-stu-id="403ad-131">Many controls in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] use a <xref:System.Windows.Controls.ControlTemplate> to define the control's structure and appearance, which separates the appearance of a control from the functionality of the control.</span></span> <span data-ttu-id="403ad-132">Es posible cambiar drásticamente la apariencia de un control mediante la redefinición de su <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="403ad-132">You can drastically change the appearance of a control by redefining its <xref:System.Windows.Controls.ControlTemplate>.</span></span>  <span data-ttu-id="403ad-133">Por ejemplo, supongamos que desea un control que se parezca a un semáforo.</span><span class="sxs-lookup"><span data-stu-id="403ad-133">For example, suppose you want a control that looks like a stoplight.</span></span> <span data-ttu-id="403ad-134">Este control tiene una interfaz de usuario y una funcionalidad sencillas.</span><span class="sxs-lookup"><span data-stu-id="403ad-134">This control has a simple user interface and functionality.</span></span>  <span data-ttu-id="403ad-135">El control son tres círculos, y solo uno se puede iluminar cada vez.</span><span class="sxs-lookup"><span data-stu-id="403ad-135">The control is three circles, only one of which can be lit up at a time.</span></span> <span data-ttu-id="403ad-136">Después de reflexionar, es posible que consiga que un <xref:System.Windows.Controls.RadioButton> ofrece la funcionalidad de un único que se selecciona en un momento, pero la apariencia predeterminada de la <xref:System.Windows.Controls.RadioButton> nada parece las luces en un semáforo.</span><span class="sxs-lookup"><span data-stu-id="403ad-136">After some reflection, you might realize that a <xref:System.Windows.Controls.RadioButton> offers the functionality of only one being selected at a time, but the default appearance of the <xref:System.Windows.Controls.RadioButton> looks nothing like the lights on a stoplight.</span></span>  <span data-ttu-id="403ad-137">Dado que la <xref:System.Windows.Controls.RadioButton> usa una plantilla de control para definir su apariencia, es fácil volver a definir la <xref:System.Windows.Controls.ControlTemplate> para satisfacer los requisitos del control y use los botones de radio para crear el semáforo.</span><span class="sxs-lookup"><span data-stu-id="403ad-137">Because the <xref:System.Windows.Controls.RadioButton> uses a control template to define its appearance, it is easy to redefine the <xref:System.Windows.Controls.ControlTemplate> to fit the requirements of the control, and use radio buttons to make your stoplight.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="403ad-138">Aunque un <xref:System.Windows.Controls.RadioButton> puede usar un <xref:System.Windows.DataTemplate>, un <xref:System.Windows.DataTemplate> no es suficiente en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="403ad-138">Although a <xref:System.Windows.Controls.RadioButton> can use a <xref:System.Windows.DataTemplate>, a <xref:System.Windows.DataTemplate> is not sufficient in this example.</span></span>  <span data-ttu-id="403ad-139">El <xref:System.Windows.DataTemplate> define la apariencia del contenido de un control.</span><span class="sxs-lookup"><span data-stu-id="403ad-139">The <xref:System.Windows.DataTemplate> defines the appearance of the content of a control.</span></span> <span data-ttu-id="403ad-140">En el caso de un <xref:System.Windows.Controls.RadioButton>, el contenido es aquello que aparece a la derecha del círculo que indica si la <xref:System.Windows.Controls.RadioButton> está seleccionada.</span><span class="sxs-lookup"><span data-stu-id="403ad-140">In the case of a <xref:System.Windows.Controls.RadioButton>, the content is whatever appears to the right of the circle that indicates whether the <xref:System.Windows.Controls.RadioButton> is selected.</span></span>  <span data-ttu-id="403ad-141">En el ejemplo del semáforo, el botón de selección debe ser un círculo que pueda "encenderse".</span><span class="sxs-lookup"><span data-stu-id="403ad-141">In the example of the stoplight, the radio button needs just be a circle that can "light up."</span></span> <span data-ttu-id="403ad-142">Dado que el requisito de apariencia para el semáforo es tan distinto de la apariencia predeterminada de la <xref:System.Windows.Controls.RadioButton>, es necesario volver a definir la <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="403ad-142">Because the appearance requirement for the stoplight is so different than the default appearance of the <xref:System.Windows.Controls.RadioButton>, it is necessary to redefine the <xref:System.Windows.Controls.ControlTemplate>.</span></span>  <span data-ttu-id="403ad-143">Por lo general un <xref:System.Windows.DataTemplate> se utiliza para definir el contenido (o datos) de un control y un <xref:System.Windows.Controls.ControlTemplate> se utiliza para definir la estructura de un control.</span><span class="sxs-lookup"><span data-stu-id="403ad-143">In general a <xref:System.Windows.DataTemplate> is used for defining the content (or data) of a control, and a <xref:System.Windows.Controls.ControlTemplate> is used for defining how a control is structured.</span></span>  
  
-   <span data-ttu-id="403ad-144">**Desencadenadores.**</span><span class="sxs-lookup"><span data-stu-id="403ad-144">**Triggers.**</span></span> <span data-ttu-id="403ad-145">Un <xref:System.Windows.Trigger> permite cambiar dinámicamente la apariencia y el comportamiento de un control sin crear un nuevo control.</span><span class="sxs-lookup"><span data-stu-id="403ad-145">A <xref:System.Windows.Trigger> allows you to dynamically change the appearance and behavior of a control without creating a new control.</span></span> <span data-ttu-id="403ad-146">Por ejemplo, suponga que tiene varios <xref:System.Windows.Controls.ListBox> controles en la aplicación y desea que los elementos de cada <xref:System.Windows.Controls.ListBox> sea rojo y negrita cuando están seleccionadas.</span><span class="sxs-lookup"><span data-stu-id="403ad-146">For example, suppose you have multiple <xref:System.Windows.Controls.ListBox> controls in your application and want the items in each <xref:System.Windows.Controls.ListBox> to be bold and red when they are selected.</span></span> <span data-ttu-id="403ad-147">Su primer impulso podría ser crear una clase que hereda de <xref:System.Windows.Controls.ListBox> e invalide el <xref:System.Windows.Controls.Primitives.Selector.OnSelectionChanged%2A> método para cambiar la apariencia del elemento seleccionado, pero un enfoque más adecuado consiste en Agregar un desencadenador en un estilo de un <xref:System.Windows.Controls.ListBoxItem> que cambia la apariencia de el elemento seleccionado.</span><span class="sxs-lookup"><span data-stu-id="403ad-147">Your first instinct might be to create a class that inherits from <xref:System.Windows.Controls.ListBox> and override the <xref:System.Windows.Controls.Primitives.Selector.OnSelectionChanged%2A> method to change the appearance of the selected item, but a better approach is to add a trigger to a style of a <xref:System.Windows.Controls.ListBoxItem> that changes the appearance of the selected item.</span></span> <span data-ttu-id="403ad-148">Un desencadenador permite cambiar los valores de propiedad o realizar acciones según el valor de una propiedad.</span><span class="sxs-lookup"><span data-stu-id="403ad-148">A trigger enables you to change property values or take actions based on the value of a property.</span></span> <span data-ttu-id="403ad-149">Un <xref:System.Windows.EventTrigger> le permite realizar acciones cuando se produce un evento.</span><span class="sxs-lookup"><span data-stu-id="403ad-149">An <xref:System.Windows.EventTrigger> enables you to take actions when an event occurs.</span></span>  
  
 <span data-ttu-id="403ad-150">Para más información sobre los estilos, las plantillas y los desencadenadores, consulte [Aplicar estilos y plantillas](../../../../docs/framework/wpf/controls/styling-and-templating.md).</span><span class="sxs-lookup"><span data-stu-id="403ad-150">For more information about styles, templates, and triggers, see [Styling and Templating](../../../../docs/framework/wpf/controls/styling-and-templating.md).</span></span>  
  
 <span data-ttu-id="403ad-151">En general, si el control refleja la funcionalidad de un control existente, pero quiere que el control tenga un aspecto diferente, primero debe considerar si puede usar cualquiera de los métodos descritos en esta sección para cambiar la apariencia del control existente.</span><span class="sxs-lookup"><span data-stu-id="403ad-151">In general, if your control mirrors the functionality of an existing control, but you want the control to look different, you should first consider whether you can use any of the methods discussed in this section to change the existing control's appearance.</span></span>  
  
<a name="models_for_control_authoring"></a>   
## <a name="models-for-control-authoring"></a><span data-ttu-id="403ad-152">Modelos para crear controles</span><span class="sxs-lookup"><span data-stu-id="403ad-152">Models for Control Authoring</span></span>  
 <span data-ttu-id="403ad-153">El modelo de contenido enriquecido, los estilos, las plantillas y los desencadenadores reducen la necesidad de crear un nuevo control.</span><span class="sxs-lookup"><span data-stu-id="403ad-153">The rich content model, styles, templates, and triggers minimize the need for you to create a new control.</span></span> <span data-ttu-id="403ad-154">Sin embargo, si necesita crear un nuevo control, es importante comprender los diferentes modelos de creación de controles de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="403ad-154">However, if you do need to create a new control, it is important to understand the different control authoring models in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="403ad-155"> proporciona tres modelos generales para la creación de un control, cada uno de los cuales proporciona un conjunto de características y un nivel de flexibilidad diferentes.</span><span class="sxs-lookup"><span data-stu-id="403ad-155"> provides three general models for creating a control, each of which provides a different set of features and level of flexibility.</span></span> <span data-ttu-id="403ad-156">La base de las clases para los tres modelos son <xref:System.Windows.Controls.UserControl>, <xref:System.Windows.Controls.Control>, y <xref:System.Windows.FrameworkElement>.</span><span class="sxs-lookup"><span data-stu-id="403ad-156">The base classes for the three models are <xref:System.Windows.Controls.UserControl>, <xref:System.Windows.Controls.Control>, and <xref:System.Windows.FrameworkElement>.</span></span>  
  
### <a name="deriving-from-usercontrol"></a><span data-ttu-id="403ad-157">Derivación de UserControl</span><span class="sxs-lookup"><span data-stu-id="403ad-157">Deriving from UserControl</span></span>  
 <span data-ttu-id="403ad-158">La manera más sencilla de crear un control en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] es derivar de <xref:System.Windows.Controls.UserControl>.</span><span class="sxs-lookup"><span data-stu-id="403ad-158">The simplest way to create a control in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is to derive from <xref:System.Windows.Controls.UserControl>.</span></span> <span data-ttu-id="403ad-159">Cuando se crea un control que hereda de <xref:System.Windows.Controls.UserControl>, agregar componentes existentes para la <xref:System.Windows.Controls.UserControl>, los componentes de nombre y hacer referencia a los controladores de eventos en [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="403ad-159">When you build a control that inherits from <xref:System.Windows.Controls.UserControl>, you add existing components to the <xref:System.Windows.Controls.UserControl>, name the components, and reference event handlers in [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)].</span></span> <span data-ttu-id="403ad-160">Luego puede hacer referencia a los elementos con nombre y definir los controladores de eventos en el código.</span><span class="sxs-lookup"><span data-stu-id="403ad-160">You can then reference the named elements and define the event handlers in code.</span></span> <span data-ttu-id="403ad-161">Este modelo de desarrollo es muy similar al modelo utilizado para el desarrollo de aplicaciones en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="403ad-161">This development model is very similar to the model used for application development in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
 <span data-ttu-id="403ad-162">Si se creó correctamente, un <xref:System.Windows.Controls.UserControl> puede aprovechar las ventajas de contenido enriquecido, los estilos y los desencadenadores.</span><span class="sxs-lookup"><span data-stu-id="403ad-162">If built correctly, a <xref:System.Windows.Controls.UserControl> can take advantage of the benefits of rich content, styles, and triggers.</span></span> <span data-ttu-id="403ad-163">Sin embargo, si el control hereda de <xref:System.Windows.Controls.UserControl>, personas que usan el control no podrá usar un <xref:System.Windows.DataTemplate> o <xref:System.Windows.Controls.ControlTemplate> para personalizar su apariencia.</span><span class="sxs-lookup"><span data-stu-id="403ad-163">However, if your control inherits from <xref:System.Windows.Controls.UserControl>, people who use your control will not be able to use a <xref:System.Windows.DataTemplate> or <xref:System.Windows.Controls.ControlTemplate> to customize its appearance.</span></span>  <span data-ttu-id="403ad-164">Es necesario derivar desde la <xref:System.Windows.Controls.Control> clase o una de sus clases derivadas (excepto <xref:System.Windows.Controls.UserControl>) para crear un control personalizado que admita plantillas.</span><span class="sxs-lookup"><span data-stu-id="403ad-164">It is necessary to derive from the <xref:System.Windows.Controls.Control> class or one of its derived classes (other than <xref:System.Windows.Controls.UserControl>) to create a custom control that supports templates.</span></span>  
  
#### <a name="benefits-of-deriving-from-usercontrol"></a><span data-ttu-id="403ad-165">Ventajas de derivar de UserControl</span><span class="sxs-lookup"><span data-stu-id="403ad-165">Benefits of Deriving from UserControl</span></span>  
 <span data-ttu-id="403ad-166">Considere la posibilidad de derivar de <xref:System.Windows.Controls.UserControl> si se aplican todas las opciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="403ad-166">Consider deriving from <xref:System.Windows.Controls.UserControl> if all of the following apply:</span></span>  
  
-   <span data-ttu-id="403ad-167">Desea crear el control de forma similar a cómo crea una aplicación.</span><span class="sxs-lookup"><span data-stu-id="403ad-167">You want to build your control similarly to how you build an application.</span></span>  
  
-   <span data-ttu-id="403ad-168">El control solo consta de componentes existentes.</span><span class="sxs-lookup"><span data-stu-id="403ad-168">Your control consists only of existing components.</span></span>  
  
-   <span data-ttu-id="403ad-169">No se necesita personalización compleja.</span><span class="sxs-lookup"><span data-stu-id="403ad-169">You don't need to support complex customization.</span></span>  
  
### <a name="deriving-from-control"></a><span data-ttu-id="403ad-170">Derivación de Control</span><span class="sxs-lookup"><span data-stu-id="403ad-170">Deriving from Control</span></span>  
 <span data-ttu-id="403ad-171">Derivar de la <xref:System.Windows.Controls.Control> clase es el modelo utilizado por la mayoría de las existentes [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] controles.</span><span class="sxs-lookup"><span data-stu-id="403ad-171">Deriving from the <xref:System.Windows.Controls.Control> class is the model used by most of the existing [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] controls.</span></span> <span data-ttu-id="403ad-172">Cuando se crea un control que hereda de la <xref:System.Windows.Controls.Control> (clase), define su apariencia mediante plantillas.</span><span class="sxs-lookup"><span data-stu-id="403ad-172">When you create a control that inherits from the <xref:System.Windows.Controls.Control> class, you define its appearance by using templates.</span></span> <span data-ttu-id="403ad-173">Al hacerlo, se separa la lógica de funcionamiento de la representación visual.</span><span class="sxs-lookup"><span data-stu-id="403ad-173">By doing so, you separate the operational logic from the visual representation.</span></span> <span data-ttu-id="403ad-174">También puede asegurar la separación de la interfaz de usuario y la lógica mediante comandos y enlaces en lugar de eventos y evitando que hace referencia a elementos en el <xref:System.Windows.Controls.ControlTemplate> siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="403ad-174">You can also ensure the decoupling of the UI and logic by using commands and bindings instead of events and avoiding referencing elements in the <xref:System.Windows.Controls.ControlTemplate> whenever possible.</span></span>  <span data-ttu-id="403ad-175">Si la interfaz de usuario y la lógica del control están correctamente desacopladas, un usuario del control puede volver a definir el control <xref:System.Windows.Controls.ControlTemplate> para personalizar su apariencia.</span><span class="sxs-lookup"><span data-stu-id="403ad-175">If the UI and logic of your control are properly decoupled, a user of your control can redefine the control's <xref:System.Windows.Controls.ControlTemplate> to customize its appearance.</span></span> <span data-ttu-id="403ad-176">Aunque la creación de un personalizado <xref:System.Windows.Controls.Control> no es tan sencillo como crear un <xref:System.Windows.Controls.UserControl>, personalizado <xref:System.Windows.Controls.Control> proporciona la máxima flexibilidad.</span><span class="sxs-lookup"><span data-stu-id="403ad-176">Although building a custom <xref:System.Windows.Controls.Control> is not as simple as building a <xref:System.Windows.Controls.UserControl>, a custom <xref:System.Windows.Controls.Control> provides the most flexibility.</span></span>  
  
#### <a name="benefits-of-deriving-from-control"></a><span data-ttu-id="403ad-177">Ventajas de derivar de Control</span><span class="sxs-lookup"><span data-stu-id="403ad-177">Benefits of Deriving from Control</span></span>  
 <span data-ttu-id="403ad-178">Considere la posibilidad de derivar de <xref:System.Windows.Controls.Control> en lugar de usar la <xref:System.Windows.Controls.UserControl> clase si cualquiera de los casos siguientes:</span><span class="sxs-lookup"><span data-stu-id="403ad-178">Consider deriving from <xref:System.Windows.Controls.Control> instead of using the <xref:System.Windows.Controls.UserControl> class if any of the following apply:</span></span>  
  
-   <span data-ttu-id="403ad-179">Desea que la apariencia del control para ser personalizable a través de la <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="403ad-179">You want the appearance of your control to be customizable via the <xref:System.Windows.Controls.ControlTemplate>.</span></span>  
  
-   <span data-ttu-id="403ad-180">Desea que el control admita distintos temas.</span><span class="sxs-lookup"><span data-stu-id="403ad-180">You want your control to support different themes.</span></span>  
  
### <a name="deriving-from-frameworkelement"></a><span data-ttu-id="403ad-181">Derivación de FrameworkElement</span><span class="sxs-lookup"><span data-stu-id="403ad-181">Deriving from FrameworkElement</span></span>  
 <span data-ttu-id="403ad-182">Controles que derivan de <xref:System.Windows.Controls.UserControl> o <xref:System.Windows.Controls.Control> se basan en la composición de los elementos existentes.</span><span class="sxs-lookup"><span data-stu-id="403ad-182">Controls that derive from <xref:System.Windows.Controls.UserControl> or <xref:System.Windows.Controls.Control> rely upon composing existing elements.</span></span> <span data-ttu-id="403ad-183">En muchos casos, esto es una solución aceptable, porque cualquier objeto que hereda de <xref:System.Windows.FrameworkElement> puede estar en un <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="403ad-183">For many scenarios, this is an acceptable solution, because any object that inherits from <xref:System.Windows.FrameworkElement> can be in a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="403ad-184">Sin embargo, en ocasiones la apariencia de un control requiere una funcionalidad que va más allá de la simple composición de elementos.</span><span class="sxs-lookup"><span data-stu-id="403ad-184">However, there are times when a control's appearance requires more than the functionality of simple element composition.</span></span> <span data-ttu-id="403ad-185">Para estos escenarios, basar un componente en <xref:System.Windows.FrameworkElement> es la elección correcta.</span><span class="sxs-lookup"><span data-stu-id="403ad-185">For these scenarios, basing a component on <xref:System.Windows.FrameworkElement> is the right choice.</span></span>  
  
 <span data-ttu-id="403ad-186">Hay dos métodos estándares para una compilación <xref:System.Windows.FrameworkElement>-componentes basados en: dirigir la composición de elemento de representación y personalizados.</span><span class="sxs-lookup"><span data-stu-id="403ad-186">There are two standard methods for building <xref:System.Windows.FrameworkElement>-based components: direct rendering and custom element composition.</span></span> <span data-ttu-id="403ad-187">Dirigir el procesamiento implica reemplazar el <xref:System.Windows.UIElement.OnRender%2A> método <xref:System.Windows.FrameworkElement> y proporcionar <xref:System.Windows.Media.DrawingContext> operaciones que definen explícitamente los objetos visuales de componente.</span><span class="sxs-lookup"><span data-stu-id="403ad-187">Direct rendering involves overriding the <xref:System.Windows.UIElement.OnRender%2A> method of <xref:System.Windows.FrameworkElement> and providing <xref:System.Windows.Media.DrawingContext> operations that explicitly define the component visuals.</span></span> <span data-ttu-id="403ad-188">Este es el método utilizado por <xref:System.Windows.Controls.Image> y <xref:System.Windows.Controls.Border>.</span><span class="sxs-lookup"><span data-stu-id="403ad-188">This is the method used by <xref:System.Windows.Controls.Image> and <xref:System.Windows.Controls.Border>.</span></span> <span data-ttu-id="403ad-189">Composición de elementos personalizada implica el uso de objetos de tipo <xref:System.Windows.Media.Visual> para crear la apariencia del componente.</span><span class="sxs-lookup"><span data-stu-id="403ad-189">Custom element composition involves using objects of type <xref:System.Windows.Media.Visual> to compose the appearance of your component.</span></span> <span data-ttu-id="403ad-190">Para ver un ejemplo, consulte [Using DrawingVisual Objects](../../../../docs/framework/wpf/graphics-multimedia/using-drawingvisual-objects.md) (Uso de objetos DrawingVisual).</span><span class="sxs-lookup"><span data-stu-id="403ad-190">For an example, see [Using DrawingVisual Objects](../../../../docs/framework/wpf/graphics-multimedia/using-drawingvisual-objects.md).</span></span> <span data-ttu-id="403ad-191"><xref:System.Windows.Controls.Primitives.Track> es un ejemplo de un control en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] que usa la composición de elemento personalizado.</span><span class="sxs-lookup"><span data-stu-id="403ad-191"><xref:System.Windows.Controls.Primitives.Track> is an example of a control in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] that uses custom element composition.</span></span> <span data-ttu-id="403ad-192">También es posible mezclar la representación directa y la composición de elementos personalizada en el mismo control.</span><span class="sxs-lookup"><span data-stu-id="403ad-192">It is also possible to mix direct rendering and custom element composition in the same control.</span></span>  
  
#### <a name="benefits-of-deriving-from-frameworkelement"></a><span data-ttu-id="403ad-193">Ventajas de derivar de FrameworkElement</span><span class="sxs-lookup"><span data-stu-id="403ad-193">Benefits of Deriving from FrameworkElement</span></span>  
 <span data-ttu-id="403ad-194">Considere la posibilidad de derivar de <xref:System.Windows.FrameworkElement> si cualquiera de los casos siguientes:</span><span class="sxs-lookup"><span data-stu-id="403ad-194">Consider deriving from <xref:System.Windows.FrameworkElement> if any of the following apply:</span></span>  
  
-   <span data-ttu-id="403ad-195">Desea tener un control preciso sobre la apariencia del control más allá de lo que proporciona la simple composición de elementos.</span><span class="sxs-lookup"><span data-stu-id="403ad-195">You want to have precise control over the appearance of your control beyond what is provided by simple element composition.</span></span>  
  
-   <span data-ttu-id="403ad-196">Desea definir el aspecto del control definiendo una lógica de representación propia.</span><span class="sxs-lookup"><span data-stu-id="403ad-196">You want to define the appearance of your control by defining your own render logic.</span></span>  
  
-   <span data-ttu-id="403ad-197">Desea componer elementos existentes de maneras nuevas que van más allá de lo que es posible con <xref:System.Windows.Controls.UserControl> y <xref:System.Windows.Controls.Control>.</span><span class="sxs-lookup"><span data-stu-id="403ad-197">You want to compose existing elements in novel ways that go beyond what is possible with <xref:System.Windows.Controls.UserControl> and <xref:System.Windows.Controls.Control>.</span></span>  
  
<a name="control_authoring_basics"></a>   
## <a name="control-authoring-basics"></a><span data-ttu-id="403ad-198">Conceptos básicos de creación de controles</span><span class="sxs-lookup"><span data-stu-id="403ad-198">Control Authoring Basics</span></span>  
 <span data-ttu-id="403ad-199">Como se comentó anteriormente, una de las características más eficaces de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] es la posibilidad de no tener que limitarse a establecer las propiedades básicas de un control para modificar su apariencia y comportamiento, sin estar obligado a crear un control personalizado.</span><span class="sxs-lookup"><span data-stu-id="403ad-199">As discussed earlier, one of the most powerful features of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is the ability to go beyond setting basic properties of a control to change its appearance and behavior, yet still not needing to create a custom control.</span></span> <span data-ttu-id="403ad-200">Las características de estilo, enlace de datos y desencadenadores son posibles gracias al sistema de propiedades de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] y el sistema de eventos [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="403ad-200">The styling, data binding, and trigger features are made possible by the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system and the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event system.</span></span> <span data-ttu-id="403ad-201">En las próximas secciones se describen algunos procedimientos que debe seguir, independientemente del modelo que emplee para crear el control personalizado, de modo que los usuarios de su control personalizado puedan usar estas características como lo harían para un control incluido con [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="403ad-201">The following sections describe some practices that you should follow, regardless of the model you use to create the custom control, so that users of your custom control can use these features just as they would for a control that is included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
### <a name="use-dependency-properties"></a><span data-ttu-id="403ad-202">Uso de propiedades de dependencia</span><span class="sxs-lookup"><span data-stu-id="403ad-202">Use Dependency Properties</span></span>  
 <span data-ttu-id="403ad-203">Cuando una propiedad es de dependencia, es posible realizar las acciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="403ad-203">When a property is a dependency property, it is possible to do the following:</span></span>  
  
-   <span data-ttu-id="403ad-204">Establecer la propiedad en un estilo.</span><span class="sxs-lookup"><span data-stu-id="403ad-204">Set the property in a style.</span></span>  
  
-   <span data-ttu-id="403ad-205">Enlazar la propiedad a un origen de datos.</span><span class="sxs-lookup"><span data-stu-id="403ad-205">Bind the property to a data source.</span></span>  
  
-   <span data-ttu-id="403ad-206">Utilizar un recurso dinámico como valor de la propiedad.</span><span class="sxs-lookup"><span data-stu-id="403ad-206">Use a dynamic resource as the property's value.</span></span>  
  
-   <span data-ttu-id="403ad-207">Animar la propiedad.</span><span class="sxs-lookup"><span data-stu-id="403ad-207">Animate the property.</span></span>  
  
 <span data-ttu-id="403ad-208">Si desea que una propiedad del control admita esta funcionalidad, debe implementarla como una propiedad de dependencia.</span><span class="sxs-lookup"><span data-stu-id="403ad-208">If you want a property of your control to support any of this functionality, you should implement it as a dependency property.</span></span> <span data-ttu-id="403ad-209">En el ejemplo siguiente se define una propiedad de dependencia denominada `Value` mediante este procedimiento:</span><span class="sxs-lookup"><span data-stu-id="403ad-209">The following example defines a dependency property named `Value` by doing the following:</span></span>  
  
-   <span data-ttu-id="403ad-210">Definir una <xref:System.Windows.DependencyProperty> identificador denominado `ValueProperty` como un `public` `static` `readonly` campo.</span><span class="sxs-lookup"><span data-stu-id="403ad-210">Define a <xref:System.Windows.DependencyProperty> identifier named `ValueProperty` as a `public` `static` `readonly` field.</span></span>  
  
-   <span data-ttu-id="403ad-211">Registrar el nombre de propiedad con el sistema de propiedades, mediante una llamada a <xref:System.Windows.DependencyProperty.Register%2A?displayProperty=nameWithType>, para especificar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="403ad-211">Register the property name with the property system, by calling <xref:System.Windows.DependencyProperty.Register%2A?displayProperty=nameWithType>, to specify the following:</span></span>  
  
    -   <span data-ttu-id="403ad-212">Nombre de la propiedad.</span><span class="sxs-lookup"><span data-stu-id="403ad-212">The name of the property.</span></span>  
  
    -   <span data-ttu-id="403ad-213">Tipo de la propiedad.</span><span class="sxs-lookup"><span data-stu-id="403ad-213">The type of the property.</span></span>  
  
    -   <span data-ttu-id="403ad-214">El tipo al que pertenece la propiedad.</span><span class="sxs-lookup"><span data-stu-id="403ad-214">The type that owns the property.</span></span>  
  
    -   <span data-ttu-id="403ad-215">Los metadatos de la propiedad.</span><span class="sxs-lookup"><span data-stu-id="403ad-215">The metadata for the property.</span></span> <span data-ttu-id="403ad-216">Los metadatos contienen el valor predeterminado de la propiedad, un <xref:System.Windows.CoerceValueCallback> y <xref:System.Windows.PropertyChangedCallback>.</span><span class="sxs-lookup"><span data-stu-id="403ad-216">The metadata contains the property's default value, a <xref:System.Windows.CoerceValueCallback> and a <xref:System.Windows.PropertyChangedCallback>.</span></span>  
  
-   <span data-ttu-id="403ad-217">Defina una propiedad de contenedor de [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] llamada `Value`, que es el mismo nombre que se emplea para registrar la propiedad de dependencia, mediante la implementación de los descriptores de acceso `get` y `set`.</span><span class="sxs-lookup"><span data-stu-id="403ad-217">Define a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] wrapper property named `Value`, which is the same name that is used to register the dependency property, by implementing the property's `get` and `set` accessors.</span></span> <span data-ttu-id="403ad-218">Tenga en cuenta que la `get` y `set` descriptores de acceso de solo llame a <xref:System.Windows.DependencyObject.GetValue%2A> y <xref:System.Windows.DependencyObject.SetValue%2A> respectivamente.</span><span class="sxs-lookup"><span data-stu-id="403ad-218">Note that the `get` and `set` accessors only call <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> respectively.</span></span> <span data-ttu-id="403ad-219">Se recomienda que los descriptores de acceso de propiedades de dependencia no contengan lógica adicional, porque los clientes y [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] puede omitir los descriptores de acceso y la llamada <xref:System.Windows.DependencyObject.GetValue%2A> y <xref:System.Windows.DependencyObject.SetValue%2A> directamente.</span><span class="sxs-lookup"><span data-stu-id="403ad-219">It is recommended that the accessors of dependency properties not contain additional logic because clients and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] can bypass the accessors and call <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> directly.</span></span> <span data-ttu-id="403ad-220">Por ejemplo, cuando una propiedad está enlazada a un origen de datos, no se llama al descriptor de acceso `set`.</span><span class="sxs-lookup"><span data-stu-id="403ad-220">For example, when a property is bound to a data source, the property's `set` accessor is not called.</span></span>  <span data-ttu-id="403ad-221">En lugar de agregar lógica adicional para obtener y establecer los descriptores de acceso, use el <xref:System.Windows.ValidateValueCallback>, <xref:System.Windows.CoerceValueCallback>, y <xref:System.Windows.PropertyChangedCallback> delegados para responder a o compruebe el valor cuando el estado cambia.</span><span class="sxs-lookup"><span data-stu-id="403ad-221">Instead of adding additional logic to the get and set accessors, use the <xref:System.Windows.ValidateValueCallback>, <xref:System.Windows.CoerceValueCallback>, and <xref:System.Windows.PropertyChangedCallback> delegates to respond to or check the value when it changes.</span></span>  <span data-ttu-id="403ad-222">Para más información sobre estas devoluciones de llamada, consulte [Devoluciones de llamada y validación de las propiedades de dependencia](../../../../docs/framework/wpf/advanced/dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="403ad-222">For more information on these callbacks, see [Dependency Property Callbacks and Validation](../../../../docs/framework/wpf/advanced/dependency-property-callbacks-and-validation.md).</span></span>  
  
-   <span data-ttu-id="403ad-223">Defina un método para el <xref:System.Windows.CoerceValueCallback> denominado `CoerceValue`.</span><span class="sxs-lookup"><span data-stu-id="403ad-223">Define a method for the <xref:System.Windows.CoerceValueCallback> named `CoerceValue`.</span></span> <span data-ttu-id="403ad-224">`CoerceValue` garantiza que `Value` es mayor o igual que `MinValue` y menor o igual que `MaxValue`.</span><span class="sxs-lookup"><span data-stu-id="403ad-224">`CoerceValue` ensures that `Value` is greater or equal to `MinValue` and less than or equal to `MaxValue`.</span></span>  
  
-   <span data-ttu-id="403ad-225">Defina un método para el <xref:System.Windows.PropertyChangedCallback>, que se denomina `OnValueChanged`.</span><span class="sxs-lookup"><span data-stu-id="403ad-225">Define a method for the <xref:System.Windows.PropertyChangedCallback>, named `OnValueChanged`.</span></span> <span data-ttu-id="403ad-226">`OnValueChanged` crea un <xref:System.Windows.RoutedPropertyChangedEventArgs%601> objeto y lo prepara para generar el `ValueChanged` evento enrutado.</span><span class="sxs-lookup"><span data-stu-id="403ad-226">`OnValueChanged` creates a <xref:System.Windows.RoutedPropertyChangedEventArgs%601> object and prepares to raise the `ValueChanged` routed event.</span></span> <span data-ttu-id="403ad-227">Los eventos enrutados se abordan en la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="403ad-227">Routed events are discussed in the next section.</span></span>  
  
 [!code-csharp[UserControlNumericUpDown#DependencyProperty](../../../../samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDown/CSharp/NumericUpDown.xaml.cs#dependencyproperty)]
 [!code-vb[UserControlNumericUpDown#DependencyProperty](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/UserControlNumericUpDown/visualbasic/numericupdown.xaml.vb#dependencyproperty)]  
  
 <span data-ttu-id="403ad-228">Para más información, consulte [Propiedades de dependencia personalizadas](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="403ad-228">For more information, see [Custom Dependency Properties](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md).</span></span>  
  
### <a name="use-routed-events"></a><span data-ttu-id="403ad-229">Uso de eventos enrutados</span><span class="sxs-lookup"><span data-stu-id="403ad-229">Use Routed Events</span></span>  
 <span data-ttu-id="403ad-230">Al igual que las propiedades de dependencia extienden la noción de propiedades [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] con funcionalidad adicional, los eventos enrutados extienden la noción de eventos [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] estándar.</span><span class="sxs-lookup"><span data-stu-id="403ad-230">Just as dependency properties extend the notion of [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] properties with additional functionality, routed events extend the notion of standard [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] events.</span></span> <span data-ttu-id="403ad-231">Cuando se crea un nuevo control [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], también es conveniente implementar el evento como enrutado, porque un evento enrutado admite el comportamiento siguiente:</span><span class="sxs-lookup"><span data-stu-id="403ad-231">When you create a new [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] control, it is also good practice to implement your event as a routed event because a routed event supports the following behavior:</span></span>  
  
-   <span data-ttu-id="403ad-232">Los eventos se pueden controlar en un elemento primario de varios controles.</span><span class="sxs-lookup"><span data-stu-id="403ad-232">Events can be handled on a parent of multiple controls.</span></span> <span data-ttu-id="403ad-233">Si un evento es de propagación, puede suscribirse a él un elemento primario único del árbol de elementos.</span><span class="sxs-lookup"><span data-stu-id="403ad-233">If an event is a bubbling event, a single parent in the element tree can subscribe to the event.</span></span> <span data-ttu-id="403ad-234">A continuación, los autores de la aplicación pueden utilizar un mismo controlador para responder al evento de varios controles.</span><span class="sxs-lookup"><span data-stu-id="403ad-234">Then application authors can use one handler to respond to the event of multiple controls.</span></span> <span data-ttu-id="403ad-235">Por ejemplo, si el control es una parte de cada elemento de un <xref:System.Windows.Controls.ListBox> (porque está incluida en un <xref:System.Windows.DataTemplate>), el desarrollador de aplicaciones puede definir el controlador de eventos para eventos del control en el <xref:System.Windows.Controls.ListBox>.</span><span class="sxs-lookup"><span data-stu-id="403ad-235">For example, if your control is a part of each item in a <xref:System.Windows.Controls.ListBox> (because it is included in a <xref:System.Windows.DataTemplate>), the application developer can define the event handler for your control's event on the <xref:System.Windows.Controls.ListBox>.</span></span> <span data-ttu-id="403ad-236">Cada vez que se produzca el evento en cualquiera de los controles, se llamará al controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="403ad-236">Whenever the event occurs on any of the controls, the event handler is called.</span></span>  
  
-   <span data-ttu-id="403ad-237">Los eventos enrutados pueden usarse en un <xref:System.Windows.EventSetter>, lo que permite a los desarrolladores de aplicaciones especificar el controlador de un evento dentro de un estilo.</span><span class="sxs-lookup"><span data-stu-id="403ad-237">Routed events can be used in an <xref:System.Windows.EventSetter>, which enables application developers to specify the handler of an event within a style.</span></span>  
  
-   <span data-ttu-id="403ad-238">Los eventos enrutados pueden utilizarse en una <xref:System.Windows.EventTrigger>, lo que resulta útil para animar propiedades mediante el uso de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="403ad-238">Routed events can be used in an <xref:System.Windows.EventTrigger>, which is useful for animating properties by using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="403ad-239">Para obtener más información, consulte [Información general sobre animaciones](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="403ad-239">For more information, see [Animation Overview](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md).</span></span>  
  
 <span data-ttu-id="403ad-240">En el ejemplo siguiente se define un evento enrutado mediante este procedimiento:</span><span class="sxs-lookup"><span data-stu-id="403ad-240">The following example defines a routed event by doing the following:</span></span>  
  
-   <span data-ttu-id="403ad-241">Definir una <xref:System.Windows.RoutedEvent> identificador denominado `ValueChangedEvent` como un `public` `static` `readonly` campo.</span><span class="sxs-lookup"><span data-stu-id="403ad-241">Define a <xref:System.Windows.RoutedEvent> identifier named `ValueChangedEvent` as a `public` `static` `readonly` field.</span></span>  
  
-   <span data-ttu-id="403ad-242">Registre el evento enrutado mediante una llamada a la <xref:System.Windows.EventManager.RegisterRoutedEvent%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="403ad-242">Register the routed event by calling the <xref:System.Windows.EventManager.RegisterRoutedEvent%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="403ad-243">En el ejemplo se especifica la información siguiente cuando llama a <xref:System.Windows.EventManager.RegisterRoutedEvent%2A>:</span><span class="sxs-lookup"><span data-stu-id="403ad-243">The example specifies the following information when it calls <xref:System.Windows.EventManager.RegisterRoutedEvent%2A>:</span></span>  
  
    -   <span data-ttu-id="403ad-244">El nombre del evento es `ValueChanged`.</span><span class="sxs-lookup"><span data-stu-id="403ad-244">The name of the event is `ValueChanged`.</span></span>  
  
    -   <span data-ttu-id="403ad-245">La estrategia de enrutamiento es <xref:System.Windows.RoutingStrategy.Bubble>, lo que significa que un controlador de eventos en el origen (el objeto que genera el evento) se llama en primer lugar y, a continuación, se llaman a los controladores de eventos en los elementos primarios del origen en sucesión, empezando por el controlador de eventos en el más cercano elemento primario.</span><span class="sxs-lookup"><span data-stu-id="403ad-245">The routing strategy is <xref:System.Windows.RoutingStrategy.Bubble>, which means that an event handler on the source (the object that raises the event) is called first, and then event handlers on the source's parent elements are called in succession, starting with the event handler on the closest parent element.</span></span>  
  
    -   <span data-ttu-id="403ad-246">El tipo del controlador de eventos es <xref:System.Windows.RoutedPropertyChangedEventHandler%601>, construido con un <xref:System.Decimal> tipo.</span><span class="sxs-lookup"><span data-stu-id="403ad-246">The type of the event handler is <xref:System.Windows.RoutedPropertyChangedEventHandler%601>, constructed with a <xref:System.Decimal> type.</span></span>  
  
    -   <span data-ttu-id="403ad-247">El tipo de propiedad del evento es `NumericUpDown`.</span><span class="sxs-lookup"><span data-stu-id="403ad-247">The owning type of the event is `NumericUpDown`.</span></span>  
  
-   <span data-ttu-id="403ad-248">Declare un evento público denominado `ValueChanged` e incluya declaraciones de descriptores de acceso del evento.</span><span class="sxs-lookup"><span data-stu-id="403ad-248">Declare a public event named `ValueChanged` and includes event-accessor declarations.</span></span> <span data-ttu-id="403ad-249">El ejemplo se llama <xref:System.Windows.UIElement.AddHandler%2A> en el `add` declaración de descriptor de acceso y <xref:System.Windows.UIElement.RemoveHandler%2A> en el `remove` declaración de descriptor de acceso para usar el [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] servicios de eventos.</span><span class="sxs-lookup"><span data-stu-id="403ad-249">The example calls <xref:System.Windows.UIElement.AddHandler%2A> in the `add` accessor declaration and <xref:System.Windows.UIElement.RemoveHandler%2A> in the `remove` accessor declaration to use the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event services.</span></span>  
  
-   <span data-ttu-id="403ad-250">Cree un método virtual protegido denominado `OnValueChanged` que genere el evento `ValueChanged`.</span><span class="sxs-lookup"><span data-stu-id="403ad-250">Create a protected, virtual method named `OnValueChanged` that raises the `ValueChanged` event.</span></span>  
  
 [!code-csharp[UserControlNumericUpDown#RoutedEvent](../../../../samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDown/CSharp/NumericUpDown.xaml.cs#routedevent)]
 [!code-vb[UserControlNumericUpDown#RoutedEvent](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/UserControlNumericUpDown/visualbasic/numericupdown.xaml.vb#routedevent)]  
  
 <span data-ttu-id="403ad-251">Para más información, consulte [Routed Events Overview](../../../../docs/framework/wpf/advanced/routed-events-overview.md) (Introducción a los eventos enrutados) y [Create a Custom Routed Event](../../../../docs/framework/wpf/advanced/how-to-create-a-custom-routed-event.md) (Creación de un evento enrutado personalizado).</span><span class="sxs-lookup"><span data-stu-id="403ad-251">For more information, see [Routed Events Overview](../../../../docs/framework/wpf/advanced/routed-events-overview.md) and [Create a Custom Routed Event](../../../../docs/framework/wpf/advanced/how-to-create-a-custom-routed-event.md).</span></span>  
  
### <a name="use-binding"></a><span data-ttu-id="403ad-252">Uso del enlace</span><span class="sxs-lookup"><span data-stu-id="403ad-252">Use Binding</span></span>  
 <span data-ttu-id="403ad-253">Para desacoplar la interfaz de usuario del control de su lógica, puede ser conveniente utilizar el enlace de datos.</span><span class="sxs-lookup"><span data-stu-id="403ad-253">To decouple the UI of your control from its logic, consider using data binding.</span></span> <span data-ttu-id="403ad-254">Esto es especialmente importante si se define la apariencia del control mediante el uso de un <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="403ad-254">This is particularly important if you define the appearance of your control by using a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="403ad-255">Al utilizar el enlace de datos, puede que consiga eliminar la necesidad de hacer referencia a partes concretas de la interfaz de usuario desde el código.</span><span class="sxs-lookup"><span data-stu-id="403ad-255">When you use data binding, you might be able to eliminate the need to reference specific parts of the UI from the code.</span></span> <span data-ttu-id="403ad-256">Es una buena idea para evitar hacer referencia a elementos que se encuentran en el <xref:System.Windows.Controls.ControlTemplate> porque cuando el código hace referencia a elementos que se encuentran en el <xref:System.Windows.Controls.ControlTemplate> y <xref:System.Windows.Controls.ControlTemplate> se cambia, las necesidades de elemento que se hace referencia que se incluirá en el nuevo <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="403ad-256">It's a good idea to avoid referencing elements that are in the <xref:System.Windows.Controls.ControlTemplate> because when the code references elements that are in the <xref:System.Windows.Controls.ControlTemplate> and the <xref:System.Windows.Controls.ControlTemplate> is changed, the referenced element needs to be included in the new <xref:System.Windows.Controls.ControlTemplate>.</span></span>  
  
 <span data-ttu-id="403ad-257">El siguiente ejemplo se actualiza el <xref:System.Windows.Controls.TextBlock> de la `NumericUpDown` control, asignarle un nombre y haga referencia al cuadro de texto por su nombre en código.</span><span class="sxs-lookup"><span data-stu-id="403ad-257">The following example updates the <xref:System.Windows.Controls.TextBlock> of the `NumericUpDown` control, assigning a name to it and referencing the textbox by name in code.</span></span>  
  
 [!code-xaml[UserControlNumericUpDownSimple#UIRefMarkup](../../../../samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDownSimple/CSharp/NumericUpDown.xaml#uirefmarkup)]  
  
 [!code-csharp[UserControlNumericUpDownSimple#UIRefCode](../../../../samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDownSimple/CSharp/NumericUpDown.xaml.cs#uirefcode)]
 [!code-vb[UserControlNumericUpDownSimple#UIRefCode](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/UserControlNumericUpDownSimple/VisualBasic/NumericUpDown.xaml.vb#uirefcode)]  
  
 <span data-ttu-id="403ad-258">En el ejemplo siguiente se usa el enlace para lograr lo mismo.</span><span class="sxs-lookup"><span data-stu-id="403ad-258">The following example uses binding to accomplish the same thing.</span></span>  
  
 [!code-xaml[UserControlNumericUpDown#Binding](../../../../samples/snippets/csharp/VS_Snippets_Wpf/UserControlNumericUpDown/CSharp/NumericUpDown.xaml#binding)]  
  
 <span data-ttu-id="403ad-259">Para más información sobre el enlace de datos, consulte [Información general sobre el enlace de datos](../../../../docs/framework/wpf/data/data-binding-overview.md).</span><span class="sxs-lookup"><span data-stu-id="403ad-259">For more information about data binding, see [Data Binding Overview](../../../../docs/framework/wpf/data/data-binding-overview.md).</span></span>  
  
### <a name="design-for-designers"></a><span data-ttu-id="403ad-260">Diseño para diseñadores</span><span class="sxs-lookup"><span data-stu-id="403ad-260">Design for Designers</span></span>  
 <span data-ttu-id="403ad-261">Para recibir soporte técnico para controles WPF personalizados de [!INCLUDE[wpfdesigner_current_long](../../../../includes/wpfdesigner-current-long-md.md)] (por ejemplo, la edición de propiedades con la ventana Propiedades), siga estas instrucciones.</span><span class="sxs-lookup"><span data-stu-id="403ad-261">To receive support for custom WPF controls in the [!INCLUDE[wpfdesigner_current_long](../../../../includes/wpfdesigner-current-long-md.md)] (for example, property editing with the Properties window), follow these guidelines.</span></span>  <span data-ttu-id="403ad-262">Para más información sobre la programación para [!INCLUDE[wpfdesigner_current_short](../../../../includes/wpfdesigner-current-short-md.md)], consulte [WPF Designer](http://msdn.microsoft.com/library/c6c65214-8411-4e16-b254-163ed4099c26).</span><span class="sxs-lookup"><span data-stu-id="403ad-262">For more information on developing for the [!INCLUDE[wpfdesigner_current_short](../../../../includes/wpfdesigner-current-short-md.md)], see [WPF Designer](http://msdn.microsoft.com/library/c6c65214-8411-4e16-b254-163ed4099c26).</span></span>  
  
#### <a name="dependency-properties"></a><span data-ttu-id="403ad-263">Propiedades de dependencia</span><span class="sxs-lookup"><span data-stu-id="403ad-263">Dependency Properties</span></span>  
 <span data-ttu-id="403ad-264">Es importante implementar los descriptores de acceso [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] `get` y `set` como se describió anteriormente en "Uso de propiedades de dependencia".</span><span class="sxs-lookup"><span data-stu-id="403ad-264">Be sure to implement [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] `get` and `set` accessors as described earlier, in "Use Dependency Properties."</span></span> <span data-ttu-id="403ad-265">Los diseñadores pueden utilizar el contenedor para detectar la presencia de una propiedad de dependencia, pero no se les exige, al igual que a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] y a los clientes del control, llamar a los descriptores de acceso al obtener o establecer la propiedad.</span><span class="sxs-lookup"><span data-stu-id="403ad-265">Designers may use the wrapper to detect the presence of a dependency property, but they, like [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and clients of the control, are not required to call the accessors when getting or setting the property.</span></span>  
  
#### <a name="attached-properties"></a><span data-ttu-id="403ad-266">Propiedades asociadas</span><span class="sxs-lookup"><span data-stu-id="403ad-266">Attached Properties</span></span>  
 <span data-ttu-id="403ad-267">Para implementar propiedades adjuntas en controles personalizados, es recomendable que utilice las siguientes instrucciones:</span><span class="sxs-lookup"><span data-stu-id="403ad-267">You should implement attached properties on custom controls using the following guidelines:</span></span>  
  
-   <span data-ttu-id="403ad-268">Tiene una `public` `static` `readonly` <xref:System.Windows.DependencyProperty> del formulario *PropertyName* `Property` que se creó mediante la <xref:System.Windows.DependencyProperty.RegisterAttached%2A> método.</span><span class="sxs-lookup"><span data-stu-id="403ad-268">Have a `public` `static` `readonly` <xref:System.Windows.DependencyProperty> of the form *PropertyName*`Property` that was creating using the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method.</span></span> <span data-ttu-id="403ad-269">El nombre de propiedad que se pasa a <xref:System.Windows.DependencyProperty.RegisterAttached%2A> debe coincidir con *PropertyName*.</span><span class="sxs-lookup"><span data-stu-id="403ad-269">The property name that is passed to <xref:System.Windows.DependencyProperty.RegisterAttached%2A> must match *PropertyName*.</span></span>  
  
-   <span data-ttu-id="403ad-270">Implemente un par de métodos CLR `public` `static` denominados `Set`*NombreDePropiedad* y `Get`*NombreDePropiedad*.</span><span class="sxs-lookup"><span data-stu-id="403ad-270">Implement a pair of `public` `static` CLR methods named `Set`*PropertyName* and `Get`*PropertyName*.</span></span> <span data-ttu-id="403ad-271">Ambos métodos deben aceptar una clase derivada de <xref:System.Windows.DependencyProperty> como su primer argumento.</span><span class="sxs-lookup"><span data-stu-id="403ad-271">Both methods should accept a class derived from <xref:System.Windows.DependencyProperty> as their first argument.</span></span> <span data-ttu-id="403ad-272">El método `Set`*NombreDePropiedad* también acepta un argumento cuyo tipo coincida con el tipo de datos registrado para la propiedad.</span><span class="sxs-lookup"><span data-stu-id="403ad-272">The `Set`*PropertyName* method also accepts an argument whose type matches the registered data type for the property.</span></span> <span data-ttu-id="403ad-273">El método `Get` *NombreDePropiedad* método debe devolver un valor del mismo tipo.</span><span class="sxs-lookup"><span data-stu-id="403ad-273">The `Get`*PropertyName* method should return a value of the same type.</span></span> <span data-ttu-id="403ad-274">Si falta el método `Set`*NombreDePropiedad*, la propiedad se marca como de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="403ad-274">If the `Set`*PropertyName* method is missing, the property is marked read-only.</span></span>  
  
-   <span data-ttu-id="403ad-275">`Set` *PropertyName* y `Get` *PropertyName* debe enrutar directamente a la <xref:System.Windows.DependencyObject.GetValue%2A> y <xref:System.Windows.DependencyObject.SetValue%2A> objeto métodos en la dependencia de destino, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="403ad-275">`Set` *PropertyName* and `Get`*PropertyName* must route directly to the <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> methods on the target dependency object, respectively.</span></span> <span data-ttu-id="403ad-276">Los diseñadores pueden tener acceso a la propiedad adjunta mediante una llamada a través del contenedor de método o una llamada directa al objeto de dependencia de destino.</span><span class="sxs-lookup"><span data-stu-id="403ad-276">Designers may access the attached property by calling through the method wrapper or making a direct call to the target dependency object.</span></span>  
  
 <span data-ttu-id="403ad-277">Para más información sobre las propiedades adjuntas, consulte [Attached Properties Overview](../../../../docs/framework/wpf/advanced/attached-properties-overview.md) (Introducción a las propiedades adjuntas).</span><span class="sxs-lookup"><span data-stu-id="403ad-277">For more information on attached properties, see [Attached Properties Overview](../../../../docs/framework/wpf/advanced/attached-properties-overview.md).</span></span>  
  
### <a name="define-and-use-shared-resources"></a><span data-ttu-id="403ad-278">Definición y uso de recursos compartidos</span><span class="sxs-lookup"><span data-stu-id="403ad-278">Define and Use Shared Resources</span></span>  
 <span data-ttu-id="403ad-279">Puede incluir el control en el mismo ensamblado que la aplicación o bien empaquetarlo en un ensamblado independiente que se pueda utilizar en varias aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="403ad-279">You can include your control in the same assembly as your application, or you can package your control in a separate assembly that can be used in multiple applications.</span></span> <span data-ttu-id="403ad-280">En general, la información analizada en este tema es aplicable independientemente del método que se utilice.</span><span class="sxs-lookup"><span data-stu-id="403ad-280">For the most part, the information discussed in this topic applies regardless of the method you use.</span></span>  <span data-ttu-id="403ad-281">Sin embargo, hay una diferencia que vale la pena tener en cuenta.</span><span class="sxs-lookup"><span data-stu-id="403ad-281">There is one difference worth noting, however.</span></span>  <span data-ttu-id="403ad-282">Al incluir un control en el mismo ensamblado que una aplicación, puede agregar recursos globales al archivo App.xaml.</span><span class="sxs-lookup"><span data-stu-id="403ad-282">When you put a control in the same assembly as an application, you are free to add global resources to the App.xaml file.</span></span> <span data-ttu-id="403ad-283">Pero no tiene un ensamblado que contiene solo controla un <xref:System.Windows.Application> objeto asociado a él, por lo que no hay un archivo App.xaml.</span><span class="sxs-lookup"><span data-stu-id="403ad-283">But an assembly that contains only controls does not have an <xref:System.Windows.Application> object associated with it, so an App.xaml file is not available.</span></span>  
  
 <span data-ttu-id="403ad-284">Cuando una aplicación busca un recurso, la búsqueda se realiza en tres niveles en el orden que se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="403ad-284">When an application looks for a resource, it looks at three levels in the following order:</span></span>  
  
1.  <span data-ttu-id="403ad-285">El nivel de elemento.</span><span class="sxs-lookup"><span data-stu-id="403ad-285">The element level.</span></span>  
  
     <span data-ttu-id="403ad-286">El sistema empieza por el elemento que hace referencia al recurso y, a continuación, busca en los recursos del elemento primario lógico y así sucesivamente hasta que se alcanza el elemento raíz.</span><span class="sxs-lookup"><span data-stu-id="403ad-286">The system starts with the element that references the resource and then searches resources of the logical parent and so forth until the root element is reached.</span></span>  
  
2.  <span data-ttu-id="403ad-287">El nivel de aplicación.</span><span class="sxs-lookup"><span data-stu-id="403ad-287">The application level.</span></span>  
  
     <span data-ttu-id="403ad-288">Recursos definidos por el <xref:System.Windows.Application> objeto.</span><span class="sxs-lookup"><span data-stu-id="403ad-288">Resources defined by the <xref:System.Windows.Application> object.</span></span>  
  
3.  <span data-ttu-id="403ad-289">El nivel de tema.</span><span class="sxs-lookup"><span data-stu-id="403ad-289">The theme level.</span></span>  
  
     <span data-ttu-id="403ad-290">Los diccionarios del nivel de tema se almacenan en una subcarpeta denominada Temas.</span><span class="sxs-lookup"><span data-stu-id="403ad-290">Theme-level dictionaries are stored in a subfolder named Themes.</span></span>  <span data-ttu-id="403ad-291">Los archivos de la carpeta Temas corresponden a los temas.</span><span class="sxs-lookup"><span data-stu-id="403ad-291">The files in the Themes folder correspond to themes.</span></span>  <span data-ttu-id="403ad-292">Por ejemplo, podría tener Aero.NormalColor.xaml, Luna.NormalColor.xaml, Royale.NormalColor.xaml, etc.</span><span class="sxs-lookup"><span data-stu-id="403ad-292">For example, you might have Aero.NormalColor.xaml, Luna.NormalColor.xaml, Royale.NormalColor.xaml, and so on.</span></span>  <span data-ttu-id="403ad-293">También puede tener un archivo denominado generic.xaml.</span><span class="sxs-lookup"><span data-stu-id="403ad-293">You can also have a file named generic.xaml.</span></span>  <span data-ttu-id="403ad-294">Cuando el sistema busca un recurso en el nivel de temas, primero lo busca en el archivo específico del tema y, a continuación, lo busca en generic.xaml.</span><span class="sxs-lookup"><span data-stu-id="403ad-294">When the system looks for a resource at the themes level, it first looks for it in the theme-specific file and then looks for it in generic.xaml.</span></span>  
  
 <span data-ttu-id="403ad-295">Cuando el control está en un ensamblado independiente de la aplicación, debe colocar los recursos globales en el nivel de elemento o en el nivel de tema.</span><span class="sxs-lookup"><span data-stu-id="403ad-295">When your control is in an assembly that is separate from the application, you must put your global resources at the element level or at the theme level.</span></span> <span data-ttu-id="403ad-296">Ambos métodos tienen sus ventajas.</span><span class="sxs-lookup"><span data-stu-id="403ad-296">Both methods have their advantages.</span></span>  
  
#### <a name="defining-resources-at-the-element-level"></a><span data-ttu-id="403ad-297">Definición de los recursos en el nivel de elemento</span><span class="sxs-lookup"><span data-stu-id="403ad-297">Defining Resources at the Element Level</span></span>  
 <span data-ttu-id="403ad-298">Puede definir los recursos compartidos en el nivel de elemento mediante la creación de un diccionario de recursos personalizado y combinarlo con el diccionario de recursos del control.</span><span class="sxs-lookup"><span data-stu-id="403ad-298">You can define shared resources at the element level by creating a custom resource dictionary and merging it with your control’s resource dictionary.</span></span>  <span data-ttu-id="403ad-299">Cuando utiliza este método, puede nombrar el archivo de recursos que desee y este puede estar en la misma carpeta que los controles.</span><span class="sxs-lookup"><span data-stu-id="403ad-299">When you use this method, you can name your resource file anything you want, and it can be in the same folder as your controls.</span></span> <span data-ttu-id="403ad-300">Los recursos en el nivel de elemento también pueden utilizar cadenas simples como claves.</span><span class="sxs-lookup"><span data-stu-id="403ad-300">Resources at the element level can also use simple strings as keys.</span></span> <span data-ttu-id="403ad-301">En el ejemplo siguiente se crea un <xref:System.Windows.Media.LinearGradientBrush> archivo de recursos denominado Dictionary1.xaml.</span><span class="sxs-lookup"><span data-stu-id="403ad-301">The following example creates a <xref:System.Windows.Media.LinearGradientBrush> resource file named Dictionary1.xaml.</span></span>  
  
 [!code-xaml[SharedResources#1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/SharedResources/CS/Dictionary1.xaml#1)]  
  
 <span data-ttu-id="403ad-302">Una vez definido el diccionario, debe combinarlo con el diccionario de recursos del control.</span><span class="sxs-lookup"><span data-stu-id="403ad-302">Once you have defined your dictionary, you need to merge it with your control's resource dictionary.</span></span>  <span data-ttu-id="403ad-303">Para ello, utilice [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] o código.</span><span class="sxs-lookup"><span data-stu-id="403ad-303">You can do this by using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] or code.</span></span>  
  
 <span data-ttu-id="403ad-304">En el ejemplo siguiente se combina un diccionario de recursos mediante [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="403ad-304">The following example merges a resource dictionary by using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>  
  
 [!code-xaml[SharedResources#2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/SharedResources/CS/ShapeResizer.xaml#2)]  
  
 <span data-ttu-id="403ad-305">El inconveniente de este enfoque es que un <xref:System.Windows.ResourceDictionary> se crea cada vez que se hace referencia al mismo objeto.</span><span class="sxs-lookup"><span data-stu-id="403ad-305">The disadvantage to this approach is that a <xref:System.Windows.ResourceDictionary> object is created each time you reference it.</span></span>  <span data-ttu-id="403ad-306">Por ejemplo, si tiene 10 controles personalizados en la biblioteca y combinar los diccionarios de recursos compartidos de cada control mediante XAML, crear 10 idénticos <xref:System.Windows.ResourceDictionary> objetos.</span><span class="sxs-lookup"><span data-stu-id="403ad-306">For example, if you have 10 custom controls in your library and merge the shared resource dictionaries for each control by using XAML, you create 10 identical <xref:System.Windows.ResourceDictionary> objects.</span></span>  <span data-ttu-id="403ad-307">Puede evitar esto mediante la creación de una clase estática que combina los recursos de código y devuelve resultante <xref:System.Windows.ResourceDictionary>.</span><span class="sxs-lookup"><span data-stu-id="403ad-307">You can avoid this by creating a static class that merges the resources in code and returns the resulting <xref:System.Windows.ResourceDictionary>.</span></span>  
  
 <span data-ttu-id="403ad-308">En el ejemplo siguiente se crea una clase que devuelve un compartido <xref:System.Windows.ResourceDictionary>.</span><span class="sxs-lookup"><span data-stu-id="403ad-308">The following example creates a class that returns a shared <xref:System.Windows.ResourceDictionary>.</span></span>  
  
 [!code-csharp[SharedResources#3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/SharedResources/CS/SharedDictionaryManager.cs#3)]  
  
 <span data-ttu-id="403ad-309">En el ejemplo siguiente se combina el recurso compartido con los recursos de un control personalizado en el constructor del control antes de llamar a `InitializeComponent`.</span><span class="sxs-lookup"><span data-stu-id="403ad-309">The following example merges the shared resource with the resources of a custom control in the control's constructor before it calls `InitializeComponent`.</span></span>  <span data-ttu-id="403ad-310">Dado que la `SharedDictionaryManager.SharedDictionary` es una propiedad estática, el <xref:System.Windows.ResourceDictionary> se crea una sola vez.</span><span class="sxs-lookup"><span data-stu-id="403ad-310">Because the `SharedDictionaryManager.SharedDictionary` is a static property, the <xref:System.Windows.ResourceDictionary> is created only once.</span></span> <span data-ttu-id="403ad-311">Como el diccionario de recursos se combinó antes de llamar a `InitializeComponent`, los recursos están disponibles para el control en su archivo [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="403ad-311">Because the resource dictionary was merged before `InitializeComponent` was called, the resources are available to the control in its [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file.</span></span>  
  
 [!code-csharp[SharedResources#4](../../../../samples/snippets/csharp/VS_Snippets_Wpf/SharedResources/CS/ShapeResizer.xaml.cs#4)]  
  
#### <a name="defining-resources-at-the-theme-level"></a><span data-ttu-id="403ad-312">Definición de recursos en el nivel de tema</span><span class="sxs-lookup"><span data-stu-id="403ad-312">Defining Resources at the Theme Level</span></span>  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="403ad-313"> le permite crear recursos para distintos temas de Windows.</span><span class="sxs-lookup"><span data-stu-id="403ad-313"> enables you to create resources for different Windows themes.</span></span>  <span data-ttu-id="403ad-314">Como autor del control, puede definir un recurso para un tema concreto con el fin de cambiar la apariencia del control en función del tema que se emplee.</span><span class="sxs-lookup"><span data-stu-id="403ad-314">As a control author, you can define a resource for a specific theme to change your control's appearance depending on what theme is in use.</span></span> <span data-ttu-id="403ad-315">Por ejemplo, la apariencia de un <xref:System.Windows.Controls.Button> de Windows clásico (el tema predeterminado para Windows 2000) del tema difiere de un <xref:System.Windows.Controls.Button> en el tema Luna de Windows (el tema predeterminado para Windows XP) porque la <xref:System.Windows.Controls.Button> usa otra <xref:System.Windows.Controls.ControlTemplate> para cada tema.</span><span class="sxs-lookup"><span data-stu-id="403ad-315">For example, the appearance of a <xref:System.Windows.Controls.Button> in the Windows Classic theme (the default theme for Windows 2000) differs from a <xref:System.Windows.Controls.Button> in the Windows Luna theme (the default theme for Windows XP) because the <xref:System.Windows.Controls.Button> uses a different <xref:System.Windows.Controls.ControlTemplate> for each theme.</span></span>  
  
 <span data-ttu-id="403ad-316">Los recursos específicos de un tema se mantienen en un diccionario de recursos con un nombre de archivo concreto.</span><span class="sxs-lookup"><span data-stu-id="403ad-316">Resources that are specific to a theme are kept in a resource dictionary with a specific file name.</span></span> <span data-ttu-id="403ad-317">Estos archivos deben estar en una carpeta denominada `Themes` que es una subcarpeta de la carpeta que contiene el control.</span><span class="sxs-lookup"><span data-stu-id="403ad-317">These files must be in a folder named `Themes` that is a subfolder of the folder that contains the control.</span></span> <span data-ttu-id="403ad-318">En la tabla siguiente se enumeran los archivos de diccionario de recursos y el tema que está asociado a cada archivo:</span><span class="sxs-lookup"><span data-stu-id="403ad-318">The following table lists the resource dictionary files and the theme that is associated with each file:</span></span>  
  
|<span data-ttu-id="403ad-319">Nombre de archivo de diccionario de recursos</span><span class="sxs-lookup"><span data-stu-id="403ad-319">Resource dictionary file name</span></span>|<span data-ttu-id="403ad-320">Tema de Windows</span><span class="sxs-lookup"><span data-stu-id="403ad-320">Windows theme</span></span>|  
|-----------------------------------|-------------------|  
|`Classic.xaml`|<span data-ttu-id="403ad-321">Apariencia clásica de Windows 9x/2000 en Windows XP</span><span class="sxs-lookup"><span data-stu-id="403ad-321">Classic Windows 9x/2000 look on Windows XP</span></span>|  
|`Luna.NormalColor.xaml`|<span data-ttu-id="403ad-322">Tema azul predeterminado en Windows XP</span><span class="sxs-lookup"><span data-stu-id="403ad-322">Default blue theme on Windows XP</span></span>|  
|`Luna.Homestead.xaml`|<span data-ttu-id="403ad-323">Tema verde olivo en Windows XP</span><span class="sxs-lookup"><span data-stu-id="403ad-323">Olive theme on Windows XP</span></span>|  
|`Luna.Metallic.xaml`|<span data-ttu-id="403ad-324">Tema plateado en Windows XP</span><span class="sxs-lookup"><span data-stu-id="403ad-324">Silver theme on Windows XP</span></span>|  
|`Royale.NormalColor.xaml`|<span data-ttu-id="403ad-325">Tema predeterminado en Windows XP Media Center Edition</span><span class="sxs-lookup"><span data-stu-id="403ad-325">Default theme on Windows XP Media Center Edition</span></span>|  
|`Aero.NormalColor.xaml`|<span data-ttu-id="403ad-326">Tema predeterminado en Windows Vista</span><span class="sxs-lookup"><span data-stu-id="403ad-326">Default theme on Windows Vista</span></span>|  
  
 <span data-ttu-id="403ad-327">No es necesario definir un recurso para cada tema.</span><span class="sxs-lookup"><span data-stu-id="403ad-327">You do not need to define a resource for every theme.</span></span> <span data-ttu-id="403ad-328">Si no se ha definido un recurso para un tema concreto, el control comprueba `Classic.xaml` para el recurso.</span><span class="sxs-lookup"><span data-stu-id="403ad-328">If a resource is not defined for a specific theme, then the control checks `Classic.xaml` for the resource.</span></span> <span data-ttu-id="403ad-329">Si no se ha definido el recurso en el archivo correspondiente al tema actual o en `Classic.xaml`, el control utiliza el recurso genérico, que está en un archivo de diccionario de recursos denominado `generic.xaml`.</span><span class="sxs-lookup"><span data-stu-id="403ad-329">If the resource is not defined in the file that corresponds to the current theme or in `Classic.xaml`, the control uses the generic resource, which is in a resource dictionary file named `generic.xaml`.</span></span>  <span data-ttu-id="403ad-330">El archivo `generic.xaml` se encuentra en la misma carpeta que los archivos de diccionario de recursos específicos del tema.</span><span class="sxs-lookup"><span data-stu-id="403ad-330">The `generic.xaml` file is located in the same folder as the theme-specific resource dictionary files.</span></span> <span data-ttu-id="403ad-331">Aunque `generic.xaml` no corresponde a un tema específico de Windows, sigue siendo un diccionario de nivel de tema.</span><span class="sxs-lookup"><span data-stu-id="403ad-331">Although `generic.xaml` does not correspond to a specific Windows theme, it is still a theme-level dictionary.</span></span>  
  
 <span data-ttu-id="403ad-332">El [ejemplo NumericUpDown Custom Control with Theme and UI Automation Support](http://go.microsoft.com/fwlink/?LinkID=160025) contiene dos diccionarios de recursos para el control `NumericUpDown`: uno es genérico y el otro se encuentra en Luna.NormalColor.xaml.</span><span class="sxs-lookup"><span data-stu-id="403ad-332">[NumericUpDown Custom Control with Theme and UI Automation Support Sample](http://go.microsoft.com/fwlink/?LinkID=160025) contains two resource dictionaries for the `NumericUpDown` control: one is in generic.xaml and one is in Luna.NormalColor.xaml.</span></span>  <span data-ttu-id="403ad-333">Puede ejecutar la aplicación y cambiar entre el tema plateado de Windows XP y otro tema a fin de ver la diferencia entre las dos plantillas de control.</span><span class="sxs-lookup"><span data-stu-id="403ad-333">You can run the application and switch between the Silver theme in Windows XP and another theme to see the difference between the two control templates.</span></span> <span data-ttu-id="403ad-334">(Si está ejecutando Windows Vista, puede cambiar el nombre de Luna.NormalColor.xaml a Aero.NormalColor.xaml y cambiar entre dos temas, como el de Windows clásico y el tema predeterminado de Windows Vista).</span><span class="sxs-lookup"><span data-stu-id="403ad-334">(If you are running Windows Vista, you can rename Luna.NormalColor.xaml to Aero.NormalColor.xaml and switch between two themes, such as Windows Classic and the default theme for Windows Vista.)</span></span>  
  
 <span data-ttu-id="403ad-335">Cuando coloca un <xref:System.Windows.Controls.ControlTemplate> en cualquiera de los archivos de diccionario de recursos específicos del tema, debe crear un constructor estático para el control y llame a la <xref:System.Windows.DependencyProperty.OverrideMetadata%28System.Type%2CSystem.Windows.PropertyMetadata%29> método en el <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>, como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="403ad-335">When you put a <xref:System.Windows.Controls.ControlTemplate> in any of the theme-specific resource dictionary files, you must create a static constructor for your control and call the <xref:System.Windows.DependencyProperty.OverrideMetadata%28System.Type%2CSystem.Windows.PropertyMetadata%29> method on the <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>, as shown in the following example.</span></span>  
  
 [!code-csharp[CustomControlNumericUpDownOneProject#StaticConstructor](../../../../samples/snippets/csharp/VS_Snippets_Wpf/CustomControlNumericUpDownOneProject/CSharp/NumericUpDown.cs#staticconstructor)]
 [!code-vb[CustomControlNumericUpDownOneProject#StaticConstructor](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/CustomControlNumericUpDownOneProject/visualbasic/numericupdown.vb#staticconstructor)]  
  
##### <a name="defining-and-referencing-keys-for-theme-resources"></a><span data-ttu-id="403ad-336">Definición de los recursos de tema y referencia a ellos</span><span class="sxs-lookup"><span data-stu-id="403ad-336">Defining and Referencing Keys for Theme Resources</span></span>  
 <span data-ttu-id="403ad-337">Al definir un recurso en el nivel de elemento, puede asignar una cadena como su clave y obtener acceso al recurso a través de la cadena.</span><span class="sxs-lookup"><span data-stu-id="403ad-337">When you define a resource at the element level, you can assign a string as its key and access the resource via the string.</span></span> <span data-ttu-id="403ad-338">Al definir un recurso en el nivel de tema, debe usar un <xref:System.Windows.ComponentResourceKey> como la clave.</span><span class="sxs-lookup"><span data-stu-id="403ad-338">When you define a resource at the theme level, you must use a <xref:System.Windows.ComponentResourceKey> as the key.</span></span>  <span data-ttu-id="403ad-339">En el ejemplo siguiente se define un recurso en generic.xaml.</span><span class="sxs-lookup"><span data-stu-id="403ad-339">The following example defines a resource in generic.xaml.</span></span>  
  
 [!code-xaml[ThemeResourcesControlLibrary#5](../../../../samples/snippets/csharp/VS_Snippets_Wpf/ThemeResourcesControlLibrary/CS/Themes/generic.xaml#5)]  
  
 <span data-ttu-id="403ad-340">En el ejemplo siguiente se hace referencia al recurso mediante la especificación de la <xref:System.Windows.ComponentResourceKey> como la clave.</span><span class="sxs-lookup"><span data-stu-id="403ad-340">The following example references the resource by specifying the <xref:System.Windows.ComponentResourceKey> as the key.</span></span>  
  
 [!code-xaml[ThemeResourcesControlLibrary#6](../../../../samples/snippets/csharp/VS_Snippets_Wpf/ThemeResourcesControlLibrary/CS/NumericUpDown.xaml#6)]  
  
##### <a name="specifying-the-location-of-theme-resources"></a><span data-ttu-id="403ad-341">Especificación de la ubicación de los recursos de tema</span><span class="sxs-lookup"><span data-stu-id="403ad-341">Specifying the Location of Theme Resources</span></span>  
 <span data-ttu-id="403ad-342">Para buscar los recursos de un control, la aplicación host debe saber que el ensamblado contiene recursos específicos del control.</span><span class="sxs-lookup"><span data-stu-id="403ad-342">To find the resources for a control, the hosting application needs to know that the assembly contains control-specific resources.</span></span> <span data-ttu-id="403ad-343">Puede hacerlo agregando la <xref:System.Windows.ThemeInfoAttribute> al ensamblado que contiene el control.</span><span class="sxs-lookup"><span data-stu-id="403ad-343">You can accomplish that by adding the <xref:System.Windows.ThemeInfoAttribute> to the assembly that contains the control.</span></span> <span data-ttu-id="403ad-344">El <xref:System.Windows.ThemeInfoAttribute> tiene un <xref:System.Windows.ThemeInfoAttribute.GenericDictionaryLocation%2A> propiedad que especifica la ubicación de los recursos genéricos, y un <xref:System.Windows.ThemeInfoAttribute.ThemeDictionaryLocation%2A> propiedad que especifica la ubicación de los recursos específicos del tema.</span><span class="sxs-lookup"><span data-stu-id="403ad-344">The <xref:System.Windows.ThemeInfoAttribute> has a <xref:System.Windows.ThemeInfoAttribute.GenericDictionaryLocation%2A> property that specifies the location of generic resources, and a <xref:System.Windows.ThemeInfoAttribute.ThemeDictionaryLocation%2A> property that specifies the location of the theme-specific resources.</span></span>  
  
 <span data-ttu-id="403ad-345">El ejemplo siguiente se establece la <xref:System.Windows.ThemeInfoAttribute.GenericDictionaryLocation%2A> y <xref:System.Windows.ThemeInfoAttribute.ThemeDictionaryLocation%2A> propiedades para <xref:System.Windows.ResourceDictionaryLocation.SourceAssembly>, para especificar que los recursos genéricos y específicos del tema se incluyen en el mismo ensamblado que el control.</span><span class="sxs-lookup"><span data-stu-id="403ad-345">The following example sets the <xref:System.Windows.ThemeInfoAttribute.GenericDictionaryLocation%2A> and <xref:System.Windows.ThemeInfoAttribute.ThemeDictionaryLocation%2A> properties to <xref:System.Windows.ResourceDictionaryLocation.SourceAssembly>, to specify that the generic and theme-specific resources are in the same assembly as the control.</span></span>  
  
 [!code-csharp[CustomControlNumericUpDown#ThemesSection](../../../../samples/snippets/csharp/VS_Snippets_Wpf/CustomControlNumericUpDown/CSharp/CustomControlLibrary/Properties/AssemblyInfo.cs#themessection)]
 [!code-vb[CustomControlNumericUpDown#ThemesSection](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/CustomControlNumericUpDown/visualbasic/customcontrollibrary/my project/assemblyinfo.vb#themessection)]  
  
## <a name="see-also"></a><span data-ttu-id="403ad-346">Vea también</span><span class="sxs-lookup"><span data-stu-id="403ad-346">See Also</span></span>  
 [<span data-ttu-id="403ad-347">WPF Designer</span><span class="sxs-lookup"><span data-stu-id="403ad-347">WPF Designer</span></span>](http://msdn.microsoft.com/library/c6c65214-8411-4e16-b254-163ed4099c26)  
 [<span data-ttu-id="403ad-348">Identificadores URI de paquete en WPF</span><span class="sxs-lookup"><span data-stu-id="403ad-348">Pack URIs in WPF</span></span>](../../../../docs/framework/wpf/app-development/pack-uris-in-wpf.md)  
 <span data-ttu-id="403ad-349">[Control Customization](../../../../docs/framework/wpf/controls/control-customization.md) (Personalización de controles)</span><span class="sxs-lookup"><span data-stu-id="403ad-349">[Control Customization](../../../../docs/framework/wpf/controls/control-customization.md)</span></span>
