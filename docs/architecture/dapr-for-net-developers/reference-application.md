---
title: Introducción a la aplicación de referencia eShopOnDapr
description: Información general de la aplicación de referencia de eShopOnDapr y su historial.
author: amolenk
ms.date: 02/07/2021
ms.openlocfilehash: d05d47399b9be539597778a4f7856e06d3b16a6c
ms.sourcegitcommit: 42d436ebc2a7ee02fc1848c7742bc7d80e13fc2f
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/04/2021
ms.locfileid: "102401863"
---
# <a name="dapr-reference-application"></a><span data-ttu-id="91dcb-103">Aplicación de referencia DAPR</span><span class="sxs-lookup"><span data-stu-id="91dcb-103">Dapr reference application</span></span>

<span data-ttu-id="91dcb-104">Anteriormente en el libro, ha aprendido sobre las ventajas fundamentales de DAPR.</span><span class="sxs-lookup"><span data-stu-id="91dcb-104">Earlier in the book, you've learned about the foundational benefits of Dapr.</span></span> <span data-ttu-id="91dcb-105">Vio cómo DAPR puede ayudar a su equipo a construir aplicaciones distribuidas a la vez que reduce la complejidad de la arquitectura y las operaciones.</span><span class="sxs-lookup"><span data-stu-id="91dcb-105">You saw how Dapr can help your team construct distributed applications while reducing architectural and operational complexity.</span></span> <span data-ttu-id="91dcb-106">A lo largo del proceso, ha tenido la oportunidad de crear algunas pequeñas aplicaciones de DAPR.</span><span class="sxs-lookup"><span data-stu-id="91dcb-106">Along the way, you've had the opportunity to build some small Dapr apps.</span></span> <span data-ttu-id="91dcb-107">Ahora es el momento de explorar una aplicación de microservicios de un extremo a otro que muestra los componentes y los bloques de creación de DAPR.</span><span class="sxs-lookup"><span data-stu-id="91dcb-107">Now, it's time to explore an end-to-end microservice application that demonstrates Dapr building blocks and components.</span></span>

<span data-ttu-id="91dcb-108">Pero, en primer lugar, un pequeño historial.</span><span class="sxs-lookup"><span data-stu-id="91dcb-108">But, first a little history.</span></span>

## <a name="eshop-on-containers"></a><span data-ttu-id="91dcb-109">eShop en contenedores</span><span class="sxs-lookup"><span data-stu-id="91dcb-109">eShop on containers</span></span>

<span data-ttu-id="91dcb-110">Hace varios años, Microsoft, en colaboración con expertos en la comunidad líderes, lanzó un libro de orientación conocido, titulado [microservicios de .net para aplicaciones .net en contenedor](https://dotnet.microsoft.com/download/e-book/microservices-architecture/pdf).</span><span class="sxs-lookup"><span data-stu-id="91dcb-110">Several years ago, Microsoft, in partnership with leading community experts, released a popular guidance book, entitled [.NET Microservices for Containerized .NET Applications](https://dotnet.microsoft.com/download/e-book/microservices-architecture/pdf).</span></span> <span data-ttu-id="91dcb-111">En la figura 3-1 se muestra el libro:</span><span class="sxs-lookup"><span data-stu-id="91dcb-111">Figure 3-1 shows the book:</span></span>

![Diseño de aplicaciones .NET de microservicios en contenedores.](./media/reference-application/architecting-microservices-book.png)

<span data-ttu-id="91dcb-113">**Figura 3-1**.</span><span class="sxs-lookup"><span data-stu-id="91dcb-113">**Figure 3-1**.</span></span> <span data-ttu-id="91dcb-114">Microservicios de .NET: arquitectura para aplicaciones .NET en contenedor.</span><span class="sxs-lookup"><span data-stu-id="91dcb-114">.NET Microservices: Architecture for Containerized .NET Applications.</span></span>

<span data-ttu-id="91dcb-115">El libro Dove en profundidad los principios, patrones y procedimientos recomendados para la creación de aplicaciones distribuidas.</span><span class="sxs-lookup"><span data-stu-id="91dcb-115">The book dove deep into the principles, patterns, and best practices for building distributed applications.</span></span> <span data-ttu-id="91dcb-116">Incluye una aplicación de referencia de microservicios con todas las características que presentaba los conceptos arquitectónicos.</span><span class="sxs-lookup"><span data-stu-id="91dcb-116">It included a full-featured microservice reference application that showcased the architectural concepts.</span></span> <span data-ttu-id="91dcb-117">Con derecho, [eShopOnContainers](https://github.com/dotnet-architecture/eShopOnContainers), la aplicación muestra un escaparate de comercio electrónico que vende distintos elementos de .net, como ropa y tazas de café.</span><span class="sxs-lookup"><span data-stu-id="91dcb-117">Entitled, [eShopOnContainers](https://github.com/dotnet-architecture/eShopOnContainers), the application shows an e-Commerce storefront that sells various .NET items, including clothing and coffee mugs.</span></span>  <span data-ttu-id="91dcb-118">Basado en .NET Core, la aplicación es multiplataforma y se puede ejecutar en contenedores de Linux o Windows.</span><span class="sxs-lookup"><span data-stu-id="91dcb-118">Built in .NET Core, the application is cross-platform and can run in either Linux or Windows containers.</span></span> <span data-ttu-id="91dcb-119">En la figura 3-2 se muestra la arquitectura de eShop original.</span><span class="sxs-lookup"><span data-stu-id="91dcb-119">Figure 3-2 shows the original eShop architecture.</span></span>

![arquitectura de la aplicación de referencia eShopOnContainers.](./media/reference-application/eshop-on-containers.png)

<span data-ttu-id="91dcb-121">**Figura 3-2**.</span><span class="sxs-lookup"><span data-stu-id="91dcb-121">**Figure 3-2**.</span></span> <span data-ttu-id="91dcb-122">`ShopOnContainers`Aplicación de referencia original.</span><span class="sxs-lookup"><span data-stu-id="91dcb-122">Original `ShopOnContainers` reference application.</span></span>

<span data-ttu-id="91dcb-123">Como puede ver, eShopOnContainers incluye muchas partes móviles:</span><span class="sxs-lookup"><span data-stu-id="91dcb-123">As you can see, eShopOnContainers includes many moving parts:</span></span>

1. <span data-ttu-id="91dcb-124">Tres clientes front-end diferentes.</span><span class="sxs-lookup"><span data-stu-id="91dcb-124">Three different front-end clients.</span></span>
1. <span data-ttu-id="91dcb-125">Una puerta de enlace de aplicaciones para abstraer el back-end del front-end.</span><span class="sxs-lookup"><span data-stu-id="91dcb-125">An application gateway to abstract the back end from the front end.</span></span>
1. <span data-ttu-id="91dcb-126">Varios microservicios principales de back-end.</span><span class="sxs-lookup"><span data-stu-id="91dcb-126">Several back-end core microservices.</span></span>
1. <span data-ttu-id="91dcb-127">Un componente de bus de eventos que habilita la mensajería asincrónica de pub/sub.</span><span class="sxs-lookup"><span data-stu-id="91dcb-127">An event bus component that enables asynchronous pub/sub messaging.</span></span>

<span data-ttu-id="91dcb-128">La aplicación de referencia eShopOnContainers se ha aceptado ampliamente en toda la comunidad de .NET y se ha usado para modelar muchas aplicaciones de microservicios comerciales de gran tamaño.</span><span class="sxs-lookup"><span data-stu-id="91dcb-128">The eShopOnContainers reference application has been widely accepted across the .NET community and used to model many large commercial microservice applications.</span></span>

## <a name="eshop-on-dapr"></a><span data-ttu-id="91dcb-129">eShop en DAPR</span><span class="sxs-lookup"><span data-stu-id="91dcb-129">eShop on Dapr</span></span>

<span data-ttu-id="91dcb-130">Una versión alternativa de la aplicación de eShop acompaña a este libro.</span><span class="sxs-lookup"><span data-stu-id="91dcb-130">An alternative version of the eShop application accompanies this book.</span></span> <span data-ttu-id="91dcb-131">Se denomina [eShopOnDapr](https://github.com/dotnet-architecture/eShopOnDapr).</span><span class="sxs-lookup"><span data-stu-id="91dcb-131">It's called [eShopOnDapr](https://github.com/dotnet-architecture/eShopOnDapr).</span></span> <span data-ttu-id="91dcb-132">La versión actualizada evoluciona la aplicación eShopOnContainers anterior mediante la integración de los componentes y los bloques de creación de DAPR.</span><span class="sxs-lookup"><span data-stu-id="91dcb-132">The updated version evolves the earlier eShopOnContainers application by integrating Dapr building blocks and components.</span></span> <span data-ttu-id="91dcb-133">En la figura 3-3 se muestra la nueva arquitectura de solución simplificada:</span><span class="sxs-lookup"><span data-stu-id="91dcb-133">Figure 3-3 shows the new streamlined solution architecture:</span></span>  

![arquitectura de la aplicación de referencia eShopOnDapr.](./media/reference-application/eshop-on-dapr.png)

<span data-ttu-id="91dcb-135">**Figura 3-3**.</span><span class="sxs-lookup"><span data-stu-id="91dcb-135">**Figure 3-3**.</span></span> <span data-ttu-id="91dcb-136">arquitectura de la aplicación de referencia eShopOnDapr.</span><span class="sxs-lookup"><span data-stu-id="91dcb-136">eShopOnDapr reference application architecture.</span></span>

<span data-ttu-id="91dcb-137">Como el enfoque de la aplicación de referencia eShopOnDapr está en DAPR, se ha actualizado la aplicación original.</span><span class="sxs-lookup"><span data-stu-id="91dcb-137">As focus of the eShopOnDapr reference application is on Dapr, the original application has been updated.</span></span> <span data-ttu-id="91dcb-138">La arquitectura consta de:</span><span class="sxs-lookup"><span data-stu-id="91dcb-138">The architecture consists of:</span></span>

1. <span data-ttu-id="91dcb-139">Un front-end de aplicación de una [sola página](/archive/msdn-magazine/2013/november/asp-net-single-page-applications-build-modern-responsive-web-apps-with-asp-net) escrito en el conocido marco de spa de angular.</span><span class="sxs-lookup"><span data-stu-id="91dcb-139">A [Single Page Application](/archive/msdn-magazine/2013/november/asp-net-single-page-applications-build-modern-responsive-web-apps-with-asp-net) front end written in the popular Angular SPA framework.</span></span> <span data-ttu-id="91dcb-140">Envía solicitudes de usuario a un microservicio de puerta de enlace de API.</span><span class="sxs-lookup"><span data-stu-id="91dcb-140">It sends user requests to an API gateway microservice.</span></span>

1. <span data-ttu-id="91dcb-141">La puerta de enlace de API abstrae los microservicios principales de back-end del cliente front-end.</span><span class="sxs-lookup"><span data-stu-id="91dcb-141">The API gateway abstracts the back-end core microservices from the front-end client.</span></span> <span data-ttu-id="91dcb-142">Se implementa mediante el [envío](https://www.envoyproxy.io/), un proxy de servicio de código abierto de alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="91dcb-142">It's implemented using [Envoy](https://www.envoyproxy.io/), a high performant, open-source service proxy.</span></span> <span data-ttu-id="91dcb-143">El envío enruta las solicitudes entrantes a varios microservicios de back-end.</span><span class="sxs-lookup"><span data-stu-id="91dcb-143">Envoy routes  incoming requests to various back-end microservices.</span></span> <span data-ttu-id="91dcb-144">La mayoría de las solicitudes son operaciones CRUD simples (por ejemplo, obtienen la lista de marcas del catálogo) y se controlan mediante una llamada directa a un microservicio de back-end.</span><span class="sxs-lookup"><span data-stu-id="91dcb-144">Most requests are simple CRUD operations (for example, get the list of brands from the catalog) and handled by a direct call to a back-end microservice.</span></span>

1. <span data-ttu-id="91dcb-145">Otras solicitudes son lógicamente más complejas y requieren que varios microservicios funcionen juntos.</span><span class="sxs-lookup"><span data-stu-id="91dcb-145">Other requests are logically more complex and require multiple microservices to work together.</span></span> <span data-ttu-id="91dcb-146">En estos casos, eShopOnDapr implementa un [microservicio de agregador](../cloud-native/service-to-service-communication.md#service-aggregator-pattern) que organiza un flujo de trabajo a través de los microservicios necesarios para completar la operación.</span><span class="sxs-lookup"><span data-stu-id="91dcb-146">For these cases, eShopOnDapr implements an [aggregator microservice](../cloud-native/service-to-service-communication.md#service-aggregator-pattern) that orchestrates a workflow across the microservices needed to complete the operation.</span></span>

1. <span data-ttu-id="91dcb-147">El conjunto de microservicios principales de back-end incluye la funcionalidad necesaria para un almacén de comercio electrónico.</span><span class="sxs-lookup"><span data-stu-id="91dcb-147">The set of core back-end microservices includes functionality required for an e-Commerce store.</span></span> <span data-ttu-id="91dcb-148">Cada es independiente e independiente de los demás.</span><span class="sxs-lookup"><span data-stu-id="91dcb-148">Each is self-contained and independent of the others.</span></span> <span data-ttu-id="91dcb-149">A continuación de los patrones de descomposición de dominios ampliamente aceptados, cada microservicio aísla una *funcionalidad empresarial* específica:</span><span class="sxs-lookup"><span data-stu-id="91dcb-149">Following widely accepted domain decomposing patterns, each microservice isolates a specific *business capability*:</span></span>

   - <span data-ttu-id="91dcb-150">El servicio de la cesta administra la experiencia de la cesta de la compra del cliente.</span><span class="sxs-lookup"><span data-stu-id="91dcb-150">The basket service manages the customer's shopping basket experience.</span></span>
   - <span data-ttu-id="91dcb-151">El servicio de catálogo administra los elementos de productos disponibles para la venta.</span><span class="sxs-lookup"><span data-stu-id="91dcb-151">The catalog service manages product items available for sale.</span></span>
   - <span data-ttu-id="91dcb-152">El servicio de identidad administra la autenticación y la identidad.</span><span class="sxs-lookup"><span data-stu-id="91dcb-152">The identity service manages authentication and identity.</span></span>
   - <span data-ttu-id="91dcb-153">El servicio de ordenación controla todos los aspectos de colocación y administración de pedidos.</span><span class="sxs-lookup"><span data-stu-id="91dcb-153">The ordering service handles all aspects of placing and managing orders.</span></span>
   - <span data-ttu-id="91dcb-154">El servicio de pago reacciona el pago del cliente.</span><span class="sxs-lookup"><span data-stu-id="91dcb-154">The payment service transacts the customer's payment.</span></span>

   <span data-ttu-id="91dcb-155">Cada servicio tiene su propio almacenamiento persistente.</span><span class="sxs-lookup"><span data-stu-id="91dcb-155">Each service has its own persistent storage.</span></span> <span data-ttu-id="91dcb-156">Al cumplir los [procedimientos recomendados](../cloud-native/distributed-data.md#database-per-microservice-why)de microservicios, no hay ningún almacén de recursos compartido con el que interactúen todos los servicios.</span><span class="sxs-lookup"><span data-stu-id="91dcb-156">Adhering to microservice [best practices](../cloud-native/distributed-data.md#database-per-microservice-why), there's not a shared datastore with which all services interact.</span></span>

   <span data-ttu-id="91dcb-157">El diseño de cada microservicio se basa en sus requisitos individuales.</span><span class="sxs-lookup"><span data-stu-id="91dcb-157">The design of each microservice is based on its individual requirements.</span></span> <span data-ttu-id="91dcb-158">Los servicios simples usan las operaciones CRUD básicas para tener acceso a sus almacenes de datos subyacentes.</span><span class="sxs-lookup"><span data-stu-id="91dcb-158">The simple services use basic CRUD operations to access to their underlying data stores.</span></span> <span data-ttu-id="91dcb-159">Advanced Services, como la ordenación, utilizan un enfoque de diseño Domain-Driven para administrar la complejidad empresarial.</span><span class="sxs-lookup"><span data-stu-id="91dcb-159">Advanced services, like Ordering, use a  Domain-Driven Design approach to manage business complexity.</span></span> <span data-ttu-id="91dcb-160">Si es necesario, los servicios se pueden crear a través de diferentes pilas de tecnología, como .NET Core, Java, Go, NodeJS, etc.</span><span class="sxs-lookup"><span data-stu-id="91dcb-160">If necessary, services could be built across different technology stacks, such as .NET Core, Java, Go, NodeJS, and more.</span></span>

1. <span data-ttu-id="91dcb-161">Por último, el bus de eventos encapsula los componentes de publicación/suscripción de DAPR.</span><span class="sxs-lookup"><span data-stu-id="91dcb-161">Finally, the event bus wraps the Dapr publish/subscribe components.</span></span> <span data-ttu-id="91dcb-162">Permite la mensajería asincrónica de publicación/suscripción a través de microservicios.</span><span class="sxs-lookup"><span data-stu-id="91dcb-162">It enables asynchronous publish/subscribe messaging across microservices.</span></span> <span data-ttu-id="91dcb-163">Los desarrolladores pueden conectar cualquier agente de mensajes compatible con DAPR.</span><span class="sxs-lookup"><span data-stu-id="91dcb-163">Developers can plug in any Dapr-supported message broker.</span></span>

### <a name="application-of-dapr-building-blocks"></a><span data-ttu-id="91dcb-164">Aplicación de los bloques de creación de DAPR</span><span class="sxs-lookup"><span data-stu-id="91dcb-164">Application of Dapr building blocks</span></span>

<span data-ttu-id="91dcb-165">El código base eShopOnDapr es más optimizado que el código base eShopOnContainers.</span><span class="sxs-lookup"><span data-stu-id="91dcb-165">The eShopOnDapr codebase is more streamlined than the eShopOnContainers codebase.</span></span> <span data-ttu-id="91dcb-166">Los bloques de creación de DAPR reemplazan una gran cantidad de código de Fontane propenso a errores.</span><span class="sxs-lookup"><span data-stu-id="91dcb-166">Dapr building blocks replace a large amount of error-prone plumbing code.</span></span>

<span data-ttu-id="91dcb-167">En la figura 3-4 se muestra la integración de DAPR en la aplicación de referencia de eShop.</span><span class="sxs-lookup"><span data-stu-id="91dcb-167">Figure 3-4 shows the Dapr integration in the eShop reference application.</span></span>

![arquitectura de la aplicación de referencia eShopOnDapr](./media/reference-application/eshop-on-dapr-buildingblocks.png)

<span data-ttu-id="91dcb-169">**Figura 3-4**.</span><span class="sxs-lookup"><span data-stu-id="91dcb-169">**Figure 3-4**.</span></span> <span data-ttu-id="91dcb-170">Integración de DAPR en eShopOnDapr.</span><span class="sxs-lookup"><span data-stu-id="91dcb-170">Dapr integration in eShopOnDapr.</span></span>

<span data-ttu-id="91dcb-171">En la ilustración anterior, puede ver qué servicios usan los bloques de creación de DAPR.</span><span class="sxs-lookup"><span data-stu-id="91dcb-171">In the previous figure, you can see which services use which Dapr building blocks.</span></span>

1. <span data-ttu-id="91dcb-172">La aplicación eShopOnContainers original muestra los conceptos y patrones de DDD en el servicio de pedidos.</span><span class="sxs-lookup"><span data-stu-id="91dcb-172">The original eShopOnContainers application demonstrates DDD concepts and patterns in the ordering service.</span></span> <span data-ttu-id="91dcb-173">En el eShopOnDapr actualizado, el servicio de pedidos utiliza el *bloque de creación del actor* como una implementación alternativa.</span><span class="sxs-lookup"><span data-stu-id="91dcb-173">In the updated eShopOnDapr, the ordering service uses the *actor building block* as an alternative implementation.</span></span> <span data-ttu-id="91dcb-174">El modelo de acceso basado en turnos de los actores facilita la implementación de un proceso de ordenación con estado con compatibilidad para la cancelación.</span><span class="sxs-lookup"><span data-stu-id="91dcb-174">The turn-based access model of actors makes it easy to implement a stateful ordering process with support for cancellation.</span></span>
1. <span data-ttu-id="91dcb-175">El servicio de pedidos envía correos electrónicos de confirmación de pedido mediante el [bloque de creación de enlaces](bindings.md).</span><span class="sxs-lookup"><span data-stu-id="91dcb-175">The ordering service sends order confirmation e-mails using the [bindings building block](bindings.md).</span></span>
1. <span data-ttu-id="91dcb-176">Los servicios back-end se comunican de forma asincrónica mediante el [bloque de creación de publicación & suscripción](publish-subscribe.md).</span><span class="sxs-lookup"><span data-stu-id="91dcb-176">The back-end services communicate asynchronously using the [publish & subscribe building block](publish-subscribe.md).</span></span>
1. <span data-ttu-id="91dcb-177">La administración de secretos se realiza mediante el [bloque de creación de secretos](secrets.md).</span><span class="sxs-lookup"><span data-stu-id="91dcb-177">Secret management is done by the [secrets building block](secrets.md).</span></span>
1. <span data-ttu-id="91dcb-178">La puerta de enlace de API y los servicios del agregador de web Shopping usan el [bloque de creación de invocación de servicio](service-invocation.md) para invocar métodos en los servicios back-end.</span><span class="sxs-lookup"><span data-stu-id="91dcb-178">The API gateway and web shopping aggregator services use the [service invocation building block](service-invocation.md) to invoke methods on the back-end services.</span></span>
1. <span data-ttu-id="91dcb-179">El servicio de cesta utiliza el [bloque de creación de administración de estado](state-management.md) para almacenar el estado de la cesta de la compra del cliente.</span><span class="sxs-lookup"><span data-stu-id="91dcb-179">The basket service uses the [state management building block](state-management.md) to store the state of the customer's shopping basket.</span></span>

### <a name="benefits-of-applying-dapr-to-eshop"></a><span data-ttu-id="91dcb-180">Ventajas de aplicar DAPR a eShop</span><span class="sxs-lookup"><span data-stu-id="91dcb-180">Benefits of applying Dapr to eShop</span></span>

<span data-ttu-id="91dcb-181">En general, el uso de los bloques de creación de DAPR agrega posibilidades de observación y flexibilidad a la aplicación:</span><span class="sxs-lookup"><span data-stu-id="91dcb-181">In general, the use of Dapr building blocks add observability and flexibility to the application:</span></span>

1. <span data-ttu-id="91dcb-182">Observación: mediante el uso de los bloques de creación de DAPR, se obtiene un seguimiento distribuido enriquecido para ambas llamadas entre los servicios y los componentes de DAPR sin tener que escribir ningún código.</span><span class="sxs-lookup"><span data-stu-id="91dcb-182">Observability: By using the Dapr building blocks, you gain rich distributed tracing for both calls between services and to Dapr components without having to write any code.</span></span> <span data-ttu-id="91dcb-183">En eShopOnContainers, se usa una gran cantidad de registro personalizado para proporcionar información.</span><span class="sxs-lookup"><span data-stu-id="91dcb-183">In eShopOnContainers, a large amount of custom logging is used to provide insight.</span></span>
1. <span data-ttu-id="91dcb-184">Flexibilidad: ahora puede *intercambiar* la infraestructura cambiando simplemente un archivo de configuración de componentes.</span><span class="sxs-lookup"><span data-stu-id="91dcb-184">Flexibility: You can now *swap out* infrastructure simply by changing a component configuration file.</span></span> <span data-ttu-id="91dcb-185">No es necesario realizar ningún cambio en el código.</span><span class="sxs-lookup"><span data-stu-id="91dcb-185">No code changes are necessary.</span></span>

<span data-ttu-id="91dcb-186">Estos son algunos ejemplos de las ventajas que ofrecen los bloques de creación específicos:</span><span class="sxs-lookup"><span data-stu-id="91dcb-186">Here are some more examples of benefits offered by specific building blocks:</span></span>

- <span data-ttu-id="91dcb-187">**Invocación de servicio**</span><span class="sxs-lookup"><span data-stu-id="91dcb-187">**Service Invocation**</span></span>
  - <span data-ttu-id="91dcb-188">Gracias a la compatibilidad de DAPR con [mTLS](https://blog.cloudflare.com/introducing-tls-client-auth/), los servicios se comunican ahora a través de canales cifrados.</span><span class="sxs-lookup"><span data-stu-id="91dcb-188">With Dapr's support for [mTLS](https://blog.cloudflare.com/introducing-tls-client-auth/), services now communicate through encrypted channels.</span></span>
  - <span data-ttu-id="91dcb-189">Cuando se producen errores transitorios, se reintentan automáticamente las llamadas de servicio.</span><span class="sxs-lookup"><span data-stu-id="91dcb-189">When transient errors occur, service calls are automatically retried.</span></span>
  - <span data-ttu-id="91dcb-190">La detección automática de servicios reduce la cantidad de configuración necesaria para que los servicios se encuentren entre sí.</span><span class="sxs-lookup"><span data-stu-id="91dcb-190">Automatic service discovery reduces the amount of configuration needed for services to find each other.</span></span>

- <span data-ttu-id="91dcb-191">**Publicar/suscribir**</span><span class="sxs-lookup"><span data-stu-id="91dcb-191">**Publish/Subscribe**</span></span>
  - <span data-ttu-id="91dcb-192">eShopOnContainer incluía una gran cantidad de código personalizado para admitir Azure Service Bus y RabbitMQ.</span><span class="sxs-lookup"><span data-stu-id="91dcb-192">eShopOnContainer included a large amount of custom code to support both Azure Service Bus and RabbitMQ.</span></span> <span data-ttu-id="91dcb-193">Los desarrolladores usaban Azure Service Bus para producción y RabbitMQ para el desarrollo y las pruebas locales.</span><span class="sxs-lookup"><span data-stu-id="91dcb-193">Developers used Azure Service Bus for production and RabbitMQ for local development and testing.</span></span> <span data-ttu-id="91dcb-194">`IEventBus`Se creó una capa de abstracción para permitir el intercambio entre estos agentes de mensajes.</span><span class="sxs-lookup"><span data-stu-id="91dcb-194">An `IEventBus` abstraction layer was created to enable swapping between these message brokers.</span></span> <span data-ttu-id="91dcb-195">Este nivel consta de aproximadamente *700 líneas de código propenso a errores*.</span><span class="sxs-lookup"><span data-stu-id="91dcb-195">This layer consisted of approximately *700 lines of error-prone code*.</span></span> <span data-ttu-id="91dcb-196">La implementación actualizada con DAPR requiere solo *35 líneas de código*.</span><span class="sxs-lookup"><span data-stu-id="91dcb-196">The updated implementation with Dapr requires only *35 lines of code*.</span></span> <span data-ttu-id="91dcb-197">Este es el **5%** de las líneas de código originales.</span><span class="sxs-lookup"><span data-stu-id="91dcb-197">That's **5%** of the original lines of code!</span></span> <span data-ttu-id="91dcb-198">Lo que es más importante, la implementación es sencilla y fácil de comprender.</span><span class="sxs-lookup"><span data-stu-id="91dcb-198">More importantly, the implementation is straightforward and easy to understand.</span></span>
  - <span data-ttu-id="91dcb-199">eShopOnDapr usa la integración enriquecida ASP.NET Core de DAPR para usar pub/sub.</span><span class="sxs-lookup"><span data-stu-id="91dcb-199">eShopOnDapr uses Dapr's rich ASP.NET Core integration to use pub/sub.</span></span> <span data-ttu-id="91dcb-200">Agregue `Topic` atributos a métodos de controlador de ASP.net Core para suscribirse a los mensajes.</span><span class="sxs-lookup"><span data-stu-id="91dcb-200">You add `Topic` attributes to ASP.NET Core controller methods to subscribe to messages.</span></span> <span data-ttu-id="91dcb-201">Por lo tanto, no es necesario escribir un bucle de controlador de mensajes independiente para cada agente de mensajes.</span><span class="sxs-lookup"><span data-stu-id="91dcb-201">Therefore, there's no need to write a separate message handler loop for each message broker.</span></span>
  - <span data-ttu-id="91dcb-202">Los mensajes enrutados al servicio como llamadas HTTP permiten el uso de ASP.NET Core middleware para agregar funcionalidad, sin introducir nuevos conceptos o SDK para aprender.</span><span class="sxs-lookup"><span data-stu-id="91dcb-202">Messages routed to the service as HTTP calls enable the use of ASP.NET Core middleware to add functionality, without introducing new concepts or SDKs to learn.</span></span>

- <span data-ttu-id="91dcb-203">**Enlaces**</span><span class="sxs-lookup"><span data-stu-id="91dcb-203">**Bindings**</span></span>
  - <span data-ttu-id="91dcb-204">La solución eShopOnContainers contenía un elemento de *tareas pendientes* para enviar por correo electrónico una confirmación de pedido al cliente.</span><span class="sxs-lookup"><span data-stu-id="91dcb-204">The eShopOnContainers solution contained a *to-do* item for e-mailing an order confirmation to the customer.</span></span> <span data-ttu-id="91dcb-205">El pensamiento era implementar una API de correo electrónico de terceros como SendGrid.</span><span class="sxs-lookup"><span data-stu-id="91dcb-205">The thought was to eventually implement a third-party email API such as SendGrid.</span></span> <span data-ttu-id="91dcb-206">Con DAPR, la implementación de notificaciones por correo electrónico era tan fácil como configurar un enlace de recursos.</span><span class="sxs-lookup"><span data-stu-id="91dcb-206">With Dapr, implementing email notification was as easy as configuring a resource binding.</span></span> <span data-ttu-id="91dcb-207">No hubo necesidad de aprender API o SDK externos.</span><span class="sxs-lookup"><span data-stu-id="91dcb-207">There wasn't any need to learn external APIs or SDKs.</span></span>

> [!NOTE]
> <span data-ttu-id="91dcb-208">El bloque de creación de actores no se trata en la primera versión de este libro.</span><span class="sxs-lookup"><span data-stu-id="91dcb-208">The Actors building block isn't covered in the first version of this book.</span></span> <span data-ttu-id="91dcb-209">En la actualización 1,1 se incluirá un amplio capítulo sobre el bloque de creación del actor y su integración con eShopOnDapr.</span><span class="sxs-lookup"><span data-stu-id="91dcb-209">An extensive chapter on the Actor building block and its integration with eShopOnDapr will be included in the 1.1 update.</span></span>

## <a name="summary"></a><span data-ttu-id="91dcb-210">Resumen</span><span class="sxs-lookup"><span data-stu-id="91dcb-210">Summary</span></span>

<span data-ttu-id="91dcb-211">En este capítulo, se le presentará la aplicación de referencia eShopOnDapr.</span><span class="sxs-lookup"><span data-stu-id="91dcb-211">In this chapter, you're introduced to the eShopOnDapr reference application.</span></span> <span data-ttu-id="91dcb-212">Es una evolución de la popular aplicación de referencia de microservicios de eShopOnContainers.</span><span class="sxs-lookup"><span data-stu-id="91dcb-212">It's an evolution of the widely popular eShopOnContainers microservice reference application.</span></span> <span data-ttu-id="91dcb-213">eShopOnDapr reemplaza una gran cantidad de funcionalidad personalizada con los componentes y los bloques de creación de DAPR, lo que simplifica drásticamente las complejidades necesarias para compilar una aplicación de microservicios.</span><span class="sxs-lookup"><span data-stu-id="91dcb-213">eShopOnDapr replaces a large amount of custom functionality with Dapr building blocks and components, dramatically simplifying the complexities required to build a microservices application.</span></span>

### <a name="references"></a><span data-ttu-id="91dcb-214">Referencias</span><span class="sxs-lookup"><span data-stu-id="91dcb-214">References</span></span>

- [<span data-ttu-id="91dcb-215">eShopOnDapr</span><span class="sxs-lookup"><span data-stu-id="91dcb-215">eShopOnDapr</span></span>](https://github.com/dotnet-architecture/eShopOnDapr)

- [<span data-ttu-id="91dcb-216">eShopOnContainers</span><span class="sxs-lookup"><span data-stu-id="91dcb-216">eShopOnContainers</span></span>](https://github.com/dotnet-architecture/eShopOnContainers)

- [<span data-ttu-id="91dcb-217">Microservicios de .NET para aplicaciones .NET en contenedor</span><span class="sxs-lookup"><span data-stu-id="91dcb-217">.NET Microservices for Containerized .NET Applications</span></span>](https://dotnet.microsoft.com/download/e-book/microservices-architecture/pdf)

- [<span data-ttu-id="91dcb-218">Diseño de aplicaciones de Cloud-Native .NET para Azure</span><span class="sxs-lookup"><span data-stu-id="91dcb-218">Architecting Cloud-Native .NET Apps for Azure</span></span>](https://dotnet.microsoft.com/download/e-book/cloud-native-azure/pdf)

> [!div class="step-by-step"]
> <span data-ttu-id="91dcb-219">[Anterior](getting-started.md)
> [Siguiente](state-management.md)</span><span class="sxs-lookup"><span data-stu-id="91dcb-219">[Previous](getting-started.md)
[Next](state-management.md)</span></span>
