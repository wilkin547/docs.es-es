---
title: Diferencias de inicio de la aplicación entre ASP.NET MVC y ASP.NET Core
description: ASP.NET MVC y ASP.NET Core difieren significativamente en el modo en que se inician las aplicaciones. Obtenga información sobre las diferencias importantes y cómo migrar de ASP.NET MVC a ASP.NET Core.
author: ardalis
ms.date: 11/13/2020
ms.openlocfilehash: eaf8d8fac42ddebbb944273b672666e0bd2b1a67
ms.sourcegitcommit: 42d436ebc2a7ee02fc1848c7742bc7d80e13fc2f
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/04/2021
ms.locfileid: "102401824"
---
# <a name="app-startup-differences-between-aspnet-mvc-and-aspnet-core"></a><span data-ttu-id="4d255-104">Diferencias de inicio de la aplicación entre ASP.NET MVC y ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="4d255-104">App startup differences between ASP.NET MVC and ASP.NET Core</span></span>

<span data-ttu-id="4d255-105">La vida de las aplicaciones ASP.NET MVC en Internet Information Server (IIS), el servidor web principal está disponible en los sistemas operativos Windows.</span><span class="sxs-lookup"><span data-stu-id="4d255-105">ASP.NET MVC apps lived entirely within Internet Information Server (IIS), the primary web server available on Windows operating systems.</span></span> <span data-ttu-id="4d255-106">A diferencia de ASP.NET MVC, las aplicaciones ASP.NET Core son aplicaciones ejecutables.</span><span class="sxs-lookup"><span data-stu-id="4d255-106">Unlike ASP.NET MVC, ASP.NET Core apps are executable apps.</span></span> <span data-ttu-id="4d255-107">Puede ejecutarlos desde la línea de comandos mediante `dotnet run` .</span><span class="sxs-lookup"><span data-stu-id="4d255-107">You can run them from the command line, using `dotnet run`.</span></span> <span data-ttu-id="4d255-108">Tienen un método de punto de entrada como todos los programas de C#, normalmente `public static void Main()` o una variación similar (quizás con argumentos o `async` soporte técnico).</span><span class="sxs-lookup"><span data-stu-id="4d255-108">They have an entry point method like all C# programs, typically `public static void Main()` or a similar variation (perhaps with arguments or `async` support).</span></span> <span data-ttu-id="4d255-109">Tal vez sea la mayor diferencia arquitectónica entre ASP.NET Core y ASP.NET MVC, y es una de las diversas diferencias que permiten que ASP.NET Core se ejecute en sistemas que no son de Windows.</span><span class="sxs-lookup"><span data-stu-id="4d255-109">This is perhaps the biggest architectural difference between ASP.NET Core and ASP.NET MVC, and is one of several differences that allows ASP.NET Core to run on non-Windows systems.</span></span>

## <a name="aspnet-mvc-startup"></a><span data-ttu-id="4d255-110">Inicio de ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="4d255-110">ASP.NET MVC Startup</span></span>

<span data-ttu-id="4d255-111">Hospedado en IIS, las aplicaciones de ASP.NET confían en IIS para crear instancias de determinados objetos y llamar a determinados métodos cuando llega una solicitud.</span><span class="sxs-lookup"><span data-stu-id="4d255-111">Hosted within IIS, ASP.NET apps rely on IIS to instantiate certain objects and call certain methods when a request arrives.</span></span> <span data-ttu-id="4d255-112">ASP.NET crea una instancia de la clase del archivo *global. asax* , que deriva de `HttpApplication` .</span><span class="sxs-lookup"><span data-stu-id="4d255-112">ASP.NET creates an instance of the *Global.asax* file's class, which derives from `HttpApplication`.</span></span> <span data-ttu-id="4d255-113">Cuando se recibe la primera solicitud, antes de controlar la solicitud, ASP.NET llama al `Application_Start` método en la clase del archivo *global. asax* .</span><span class="sxs-lookup"><span data-stu-id="4d255-113">When the first request is received, before handling the request itself, ASP.NET calls the `Application_Start` method in the *Global.asax* file's class.</span></span> <span data-ttu-id="4d255-114">Cualquier lógica que deba ejecutarse cuando se inicie la aplicación ASP.NET MVC puede agregarse a este método.</span><span class="sxs-lookup"><span data-stu-id="4d255-114">Any logic that needs to run when the ASP.NET MVC app begins can be added to this method.</span></span>

<span data-ttu-id="4d255-115">Muchos paquetes NuGet para ASP.NET MVC y Web API usan el paquete [webactivator](https://github.com/davidebbo/WebActivator) para permitirles ejecutar código durante el inicio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4d255-115">Many NuGet packages for ASP.NET MVC and Web API use the [WebActivator](https://github.com/davidebbo/WebActivator) package to let them run some code during app startup.</span></span> <span data-ttu-id="4d255-116">Por Convención, este código normalmente se agregaría a una carpeta *App_Start* y se configuraría mediante el atributo para ejecutarse inmediatamente antes o justo después `Application_Start` .</span><span class="sxs-lookup"><span data-stu-id="4d255-116">By convention, this code would typically be added to an *App_Start* folder and would be configured via attribute to run either immediately before or just after `Application_Start`.</span></span>

<span data-ttu-id="4d255-117">También es posible usar [Open Web Interface for .net (OWIN) y Project Katana con ASP.NET MVC](/aspnet/aspnet/overview/owin-and-katana/getting-started-with-owin-and-katana).</span><span class="sxs-lookup"><span data-stu-id="4d255-117">It's also possible to use the [Open Web Interface for .NET (OWIN) and Project Katana with ASP.NET MVC](/aspnet/aspnet/overview/owin-and-katana/getting-started-with-owin-and-katana).</span></span> <span data-ttu-id="4d255-118">Al hacerlo, la aplicación incluirá un archivo *Startup.CS* que es responsable de configurar el middleware de solicitudes de una manera muy similar a la forma en que se comporta ASP.net Core.</span><span class="sxs-lookup"><span data-stu-id="4d255-118">When doing so, the app will include a *Startup.cs* file that is responsible for setting up request middleware in a way that's very similar to how ASP.NET Core behaves.</span></span>

<span data-ttu-id="4d255-119">Si necesita ejecutar código cuando se inicia la aplicación ASP.NET MVC, normalmente usará uno de estos métodos.</span><span class="sxs-lookup"><span data-stu-id="4d255-119">If you need to run code when your ASP.NET MVC app starts up, it will typically use one of these approaches.</span></span>

## <a name="aspnet-core-startup"></a><span data-ttu-id="4d255-120">Inicio de ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="4d255-120">ASP.NET Core Startup</span></span>

<span data-ttu-id="4d255-121">Como se indicó anteriormente, ASP.NET Core aplicaciones son programas independientes.</span><span class="sxs-lookup"><span data-stu-id="4d255-121">As noted previously, ASP.NET Core apps are standalone programs.</span></span> <span data-ttu-id="4d255-122">Por lo tanto, normalmente incluyen un archivo *Program.CS* que contiene el punto de entrada de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4d255-122">As such, they typically include a *Program.cs* file containing the entry point for the app.</span></span> <span data-ttu-id="4d255-123">En la figura 2-1 se muestra un ejemplo típico de este archivo.</span><span class="sxs-lookup"><span data-stu-id="4d255-123">A typical example of this file is shown in Figure 2-1.</span></span>

```csharp
public class Program
{
    public static void Main(string[] args)
    {
        CreateHostBuilder(args).Build().Run();
    }

    public static IHostBuilder CreateHostBuilder(string[] args) =>
        Host.CreateDefaultBuilder(args)
            .ConfigureWebHostDefaults(webBuilder =>
            {
                webBuilder.UseStartup<Startup>();
            });
}
```

<span data-ttu-id="4d255-124">**Figura 2-1**.</span><span class="sxs-lookup"><span data-stu-id="4d255-124">**Figure 2-1**.</span></span> <span data-ttu-id="4d255-125">Un archivo ASP.NET Core *Program.CS* típico.</span><span class="sxs-lookup"><span data-stu-id="4d255-125">A typical ASP.NET Core *Program.cs* file.</span></span>

<span data-ttu-id="4d255-126">El código que se muestra en la figura 2-1 crea un *host* para la aplicación, lo compila y lo ejecuta.</span><span class="sxs-lookup"><span data-stu-id="4d255-126">The code shown in Figure 2-1 creates a *host* for the app, builds it, and runs it.</span></span> <span data-ttu-id="4d255-127">La aplicación ASP.NET Core se ejecuta en el host configurado por el `IHostBuilder` mostrado.</span><span class="sxs-lookup"><span data-stu-id="4d255-127">The ASP.NET Core app runs within the host configured by the `IHostBuilder` shown.</span></span> <span data-ttu-id="4d255-128">Aunque es posible configurar por completo una aplicación ASP.NET Core mediante `IHostBuilder` , normalmente la mayor parte de este trabajo se realiza en una `Startup` clase.</span><span class="sxs-lookup"><span data-stu-id="4d255-128">While it's possible to completely configure an ASP.NET Core app using the `IHostBuilder`, typically the bulk of this work is done in a `Startup` class.</span></span>

<span data-ttu-id="4d255-129">La `Startup` clase expone dos métodos al host: `ConfigureServices` y `Configure` .</span><span class="sxs-lookup"><span data-stu-id="4d255-129">The `Startup` class exposes two methods to the host: `ConfigureServices` and `Configure`.</span></span> <span data-ttu-id="4d255-130">El `ConfigureServices` método se usa para definir los servicios que la aplicación usará y sus respectivas duraciones.</span><span class="sxs-lookup"><span data-stu-id="4d255-130">The `ConfigureServices` method is used to define the services the app will use and their respective lifetimes.</span></span> <span data-ttu-id="4d255-131">El `Configure` método se usa para definir cómo se administrará cada solicitud a la aplicación mediante la configuración de una canalización de solicitud formada por middleware.</span><span class="sxs-lookup"><span data-stu-id="4d255-131">The `Configure` method is used to define how each request to the app will be handled by setting up a request pipeline composed of middleware.</span></span>

<span data-ttu-id="4d255-132">Además del código relacionado con la configuración de los servicios de la aplicación o la canalización de solicitudes, las aplicaciones pueden tener otro código que se debe ejecutar cuando se inicia la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4d255-132">In addition to code related to configuring the app's services or request pipeline, apps may have other code that must run when the app begins.</span></span> <span data-ttu-id="4d255-133">Normalmente, este código se coloca en *Program.CS* o se registra como un `IHostedService` , que lo iniciará el [host genérico](/aspnet/core/fundamentals/host/generic-host?preserve-view=true&view=aspnetcore-3.1) cuando se inicie la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4d255-133">Such code is typically placed in *Program.cs* or registered as an `IHostedService`, which will be started by the [generic host](/aspnet/core/fundamentals/host/generic-host?preserve-view=true&view=aspnetcore-3.1) when the app starts.</span></span>

<span data-ttu-id="4d255-134">La `IHostedService` interfaz simplemente expone dos métodos, `StartAsync` y `StopAsync` .</span><span class="sxs-lookup"><span data-stu-id="4d255-134">The `IHostedService` interface just exposes two methods, `StartAsync` and `StopAsync`.</span></span> <span data-ttu-id="4d255-135">Registra la interfaz en `ConfigureServices` y el host realiza el resto, llamando al `StartAsync` método antes de que se inicie la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4d255-135">You register the interface in `ConfigureServices` and the host does the rest, calling the `StartAsync` method before the app starts up.</span></span>

## <a name="porting-considerations"></a><span data-ttu-id="4d255-136">Consideraciones sobre la migración</span><span class="sxs-lookup"><span data-stu-id="4d255-136">Porting considerations</span></span>

<span data-ttu-id="4d255-137">Los equipos que desean migrar sus aplicaciones de ASP.NET MVC a ASP.NET Core necesitan identificar qué código se ejecuta cuando se inicia la aplicación y determinar la ubicación adecuada para ese código en su aplicación ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="4d255-137">Teams looking to migrate their apps from ASP.NET MVC to ASP.NET Core need to identify what code is being run when their app starts up and determine the appropriate location for such code in their ASP.NET Core app.</span></span> <span data-ttu-id="4d255-138">Para el código personalizado que se debe ejecutar cuando se inicia la aplicación, especialmente el código asincrónico, el enfoque recomendado es normalmente incluir dicho código en `IHostedService` implementaciones.</span><span class="sxs-lookup"><span data-stu-id="4d255-138">For custom code needed to run when the app starts up, especially async code, the recommended approach is typically to put such code into `IHostedService` implementations.</span></span>

## <a name="references"></a><span data-ttu-id="4d255-139">Referencias</span><span class="sxs-lookup"><span data-stu-id="4d255-139">References</span></span>

- <span data-ttu-id="4d255-140">[Información general del ciclo de vida de la aplicación ASP.NET para IIS 7](/previous-versions/aspnet/bb470252(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="4d255-140">[ASP.NET Application Life Cycle Overview for IIS 7](/previous-versions/aspnet/bb470252(v=vs.100))</span></span>
- <span data-ttu-id="4d255-141">[Introducción al ciclo de vida de la aplicación ASP.NET para IIS 5 y 6](/previous-versions/aspnet/ms178473(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="4d255-141">[ASP.NET Application Life Cycle Overview for IIS 5 and 6](/previous-versions/aspnet/ms178473(v=vs.100))</span></span>
- [<span data-ttu-id="4d255-142">Introducción a OWIN y Katana</span><span class="sxs-lookup"><span data-stu-id="4d255-142">Getting Started with OWIN and Katana</span></span>](/aspnet/aspnet/overview/owin-and-katana/getting-started-with-owin-and-katana)
- [<span data-ttu-id="4d255-143">Webactivator</span><span class="sxs-lookup"><span data-stu-id="4d255-143">WebActivator</span></span>](https://github.com/davidebbo/WebActivator)
- [<span data-ttu-id="4d255-144">Inicio de la aplicación en ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="4d255-144">App Startup in ASP.NET Core</span></span>](/aspnet/core/fundamentals/startup?preserve-view=true&view=aspnetcore-3.1)
- [<span data-ttu-id="4d255-145">Host genérico de .NET en ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="4d255-145">.NET Generic Host in ASP.NET Core</span></span>](/aspnet/core/fundamentals/host/generic-host?preserve-view=true&view=aspnetcore-3.1)
- [<span data-ttu-id="4d255-146">IHostedService</span><span class="sxs-lookup"><span data-stu-id="4d255-146">IHostedService</span></span>](../microservices/multi-container-microservice-net-applications/background-tasks-with-ihostedservice.md)

>[!div class="step-by-step"]
><span data-ttu-id="4d255-147">[Anterior](architectural-differences.md)
>[Siguiente](hosting-differences.md)</span><span class="sxs-lookup"><span data-stu-id="4d255-147">[Previous](architectural-differences.md)
[Next](hosting-differences.md)</span></span>
