---
title: Identificación de la secuencia de proyectos que se van a migrar
description: Normalmente, las aplicaciones de gran tamaño no se migran a las nuevas plataformas a la vez, sino que en una serie de pasos más pequeños. Obtenga información sobre cómo planear los pasos para migrar una aplicación ASP.NET MVC a ASP.NET Core.
author: ardalis
ms.date: 11/13/2020
ms.openlocfilehash: 452898da5839f8979a5e4f9ebf5d4c21b250e1fa
ms.sourcegitcommit: 42d436ebc2a7ee02fc1848c7742bc7d80e13fc2f
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/04/2021
ms.locfileid: "102401764"
---
# <a name="identify-sequence-of-projects-to-migrate"></a><span data-ttu-id="33343-104">Identificación de la secuencia de proyectos que se van a migrar</span><span class="sxs-lookup"><span data-stu-id="33343-104">Identify sequence of projects to migrate</span></span>

<span data-ttu-id="33343-105">En el caso de las soluciones que implican varias aplicaciones front-end, es mejor migrar las aplicaciones una por una.</span><span class="sxs-lookup"><span data-stu-id="33343-105">For solutions that involve multiple front-end apps, it's best to migrate the apps one by one.</span></span> <span data-ttu-id="33343-106">Por ejemplo, cree una solución que solo incluya una aplicación front-end y sus dependencias para que pueda identificar fácilmente el ámbito de trabajo implicado.</span><span class="sxs-lookup"><span data-stu-id="33343-106">For example, create a solution that only includes one front-end app and its dependencies so you can easily identify the scope of work involved.</span></span> <span data-ttu-id="33343-107">Las soluciones son ligeras y puede incluir proyectos en varias soluciones si es necesario.</span><span class="sxs-lookup"><span data-stu-id="33343-107">Solutions are lightweight, and you can include projects in multiple solutions if needed.</span></span> <span data-ttu-id="33343-108">Aproveche las ventajas de las soluciones como una herramienta organizativa al migrar.</span><span class="sxs-lookup"><span data-stu-id="33343-108">Take advantage of solutions as an organizational tool when migrating.</span></span>

<span data-ttu-id="33343-109">Una vez que haya identificado la aplicación ASP.NET que se va a migrar y que sus proyectos dependientes se encuentren con él (idealmente en una solución), el paso siguiente consiste en identificar las dependencias de .NET Framework y NuGet.</span><span class="sxs-lookup"><span data-stu-id="33343-109">Once you've identified the ASP.NET app to migrate and have its dependent projects located with it (ideally in a solution), the next step is to identify framework and NuGet dependencies.</span></span> <span data-ttu-id="33343-110">Una vez identificadas todas las dependencias, el enfoque más sencillo de migración es un enfoque "inferior".</span><span class="sxs-lookup"><span data-stu-id="33343-110">Having identified all dependencies, the simplest migration approach is a "bottom up" approach.</span></span> <span data-ttu-id="33343-111">Con este enfoque, el nivel más bajo de dependencias se migra primero.</span><span class="sxs-lookup"><span data-stu-id="33343-111">With this approach, the lowest level of dependencies is migrated first.</span></span> <span data-ttu-id="33343-112">A continuación, se migra el siguiente nivel de dependencias, hasta que, hasta el momento, lo único que queda es la aplicación de front-end.</span><span class="sxs-lookup"><span data-stu-id="33343-112">Then the next level of dependencies is migrated, until eventually the only thing left is the front-end app.</span></span> <span data-ttu-id="33343-113">En la figura 3-1 se muestra un conjunto de proyectos de ejemplo de creación de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="33343-113">Figure 3-1 shows an example set of projects composing an app.</span></span> <span data-ttu-id="33343-114">Las bibliotecas de clases de bajo nivel se encuentran en la parte inferior y el proyecto ASP.NET MVC está en la parte superior.</span><span class="sxs-lookup"><span data-stu-id="33343-114">The low-level class libraries are at the bottom, and the ASP.NET MVC project is at the top.</span></span>

![Dependencias del proyecto](./media/Figure3-1.png)

<span data-ttu-id="33343-116">**Figura 3-1.**</span><span class="sxs-lookup"><span data-stu-id="33343-116">**Figure 3-1.**</span></span> <span data-ttu-id="33343-117">Gráfico de dependencias del proyecto.</span><span class="sxs-lookup"><span data-stu-id="33343-117">Project dependencies graph.</span></span>

<span data-ttu-id="33343-118">Elija una aplicación de front-end determinada, un proyecto de ASP.NET MVC 5/Web API 2.</span><span class="sxs-lookup"><span data-stu-id="33343-118">Choose a particular front-end app, an ASP.NET MVC 5 / Web API 2 project.</span></span> <span data-ttu-id="33343-119">Identifique sus dependencias en la solución y asigne sus dependencias hasta que tenga una lista completa.</span><span class="sxs-lookup"><span data-stu-id="33343-119">Identify its dependencies in the solution, and map out their dependencies until you have a complete list.</span></span> <span data-ttu-id="33343-120">Un diagrama como el que se muestra en la figura 3-1 puede ser útil al asignar las dependencias del proyecto.</span><span class="sxs-lookup"><span data-stu-id="33343-120">A diagram like the one shown in Figure 3-1 may be useful when mapping out project dependencies.</span></span> <span data-ttu-id="33343-121">Visual Studio puede generar un [Diagrama de dependencias para la solución](/visualstudio/modeling/create-layer-diagrams-from-your-code), en función de la edición que esté usando.</span><span class="sxs-lookup"><span data-stu-id="33343-121">Visual Studio can produce a [dependency diagram for your solution](/visualstudio/modeling/create-layer-diagrams-from-your-code), depending on which edition you're using.</span></span> <span data-ttu-id="33343-122">[El analizador de portabilidad de .net](../../standard/analyzers/portability-analyzer.md) también puede generar diagramas de dependencia.</span><span class="sxs-lookup"><span data-stu-id="33343-122">[The .NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md) can also produce dependency diagrams.</span></span>

<span data-ttu-id="33343-123">En la figura 3-2 se muestra el instalador de la [extensión de Visual Studio del analizador de portabilidad de .net](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer):</span><span class="sxs-lookup"><span data-stu-id="33343-123">Figure 3-2 shows the installer for the [.NET Portability Analyzer Visual Studio extension](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer):</span></span>

![Instalar la extensión del analizador de portabilidad de .NET](./media/Figure3-2.png)

<span data-ttu-id="33343-125">**Figura 3-2.**</span><span class="sxs-lookup"><span data-stu-id="33343-125">**Figure 3-2.**</span></span> <span data-ttu-id="33343-126">Instalador del analizador de portabilidad de .NET.</span><span class="sxs-lookup"><span data-stu-id="33343-126">.NET Portability Analyzer installer.</span></span>

<span data-ttu-id="33343-127">La extensión es compatible con Visual Studio 2017 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="33343-127">The extension supports Visual Studio 2017 and later.</span></span> <span data-ttu-id="33343-128">Una vez instalado, configúrelo en el menú de configuración **analizar** el  >  **analizador de portabilidad** , como se muestra en la figura 3-3.</span><span class="sxs-lookup"><span data-stu-id="33343-128">Once installed, you configure it from the **Analyze** > **Portability Analyzer Settings** menu, as shown in Figure 3-3.</span></span>

![Configurar la extensión del analizador de portabilidad de .NET](./media/Figure3-3.png)

<span data-ttu-id="33343-130">**Figura 3-3.**</span><span class="sxs-lookup"><span data-stu-id="33343-130">**Figure 3-3.**</span></span> <span data-ttu-id="33343-131">Configure el analizador de portabilidad de .NET.</span><span class="sxs-lookup"><span data-stu-id="33343-131">Configure the .NET Portability Analyzer.</span></span>

<span data-ttu-id="33343-132">El analizador genera un informe detallado para cada ensamblado.</span><span class="sxs-lookup"><span data-stu-id="33343-132">The analyzer produces a detailed report for each assembly.</span></span> <span data-ttu-id="33343-133">El informe:</span><span class="sxs-lookup"><span data-stu-id="33343-133">The report:</span></span>

* <span data-ttu-id="33343-134">Describe cómo es compatible cada proyecto con un marco de trabajo de destino determinado, como .NET Core 3,1 o .NET Standard 2,0.</span><span class="sxs-lookup"><span data-stu-id="33343-134">Describes how compatible each project is with a given target framework, such as .NET Core 3.1 or .NET Standard 2.0.</span></span>
* <span data-ttu-id="33343-135">Ayuda a los equipos a evaluar el esfuerzo necesario para trasladar un proyecto determinado a un marco de trabajo de destino determinado.</span><span class="sxs-lookup"><span data-stu-id="33343-135">Helps teams assess the effort required to port a particular project to a particular target framework.</span></span>

<span data-ttu-id="33343-136">Los detalles de este análisis se describen en la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="33343-136">The details of this analysis are covered in the next section.</span></span>

<span data-ttu-id="33343-137">Una vez que haya asignado los proyectos y sus relaciones entre sí, estará listo para determinar el orden en el que va a migrar los proyectos.</span><span class="sxs-lookup"><span data-stu-id="33343-137">Once you've mapped out the projects and their relationships with one another, you're ready to determine the order in which you'll migrate the projects.</span></span> <span data-ttu-id="33343-138">Comienza con proyectos que no tienen dependencias.</span><span class="sxs-lookup"><span data-stu-id="33343-138">Begin with projects that have no dependencies.</span></span> <span data-ttu-id="33343-139">A continuación, trabaje hasta el árbol para los proyectos que dependen de estos proyectos.</span><span class="sxs-lookup"><span data-stu-id="33343-139">Then, work your way up the tree to the projects that depend on these projects.</span></span>

<span data-ttu-id="33343-140">En el ejemplo que se muestra en la figura 3-1, comenzaría con el proyecto *contoso. utils* , ya que no depende de ningún otro proyecto.</span><span class="sxs-lookup"><span data-stu-id="33343-140">In the example shown in Figure 3-1, you would start with the *Contoso.Utils* project, since it doesn't depend on any other projects.</span></span> <span data-ttu-id="33343-141">A continuación, *contoso. Data* , ya que solo depende de "utils".</span><span class="sxs-lookup"><span data-stu-id="33343-141">Next, *Contoso.Data* since it only depends on "Utils".</span></span> <span data-ttu-id="33343-142">Después, migre la biblioteca "ensamblado BusinessLogic" y, por último, el proyecto de ASP.NET "Web" de front-end.</span><span class="sxs-lookup"><span data-stu-id="33343-142">Then migrate the "BusinessLogic" library, and finally the front-end ASP.NET "Web" project.</span></span> <span data-ttu-id="33343-143">Seguir este enfoque "de abajo arriba" funciona bien para aplicaciones relativamente pequeñas y bien factorizadas que se pueden migrar como una unidad una vez que se han migrado todos sus proyectos.</span><span class="sxs-lookup"><span data-stu-id="33343-143">Following this "bottom up" approach works well for relatively small and well-factored apps that can be migrated as a unit once all of their projects have migrated.</span></span> <span data-ttu-id="33343-144">Las aplicaciones más grandes con más complejidad, o más código que tardará más tiempo en migrarse, pueden tener que considerar estrategias más incrementales.</span><span class="sxs-lookup"><span data-stu-id="33343-144">Larger apps with more complexity, or more code that will take longer to migrate, may need to consider more incremental strategies.</span></span>

## <a name="unit-tests"></a><span data-ttu-id="33343-145">Pruebas unitarias</span><span class="sxs-lookup"><span data-stu-id="33343-145">Unit tests</span></span>

<span data-ttu-id="33343-146">Missing en los diagramas anteriores son proyectos de prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="33343-146">Missing from the previous diagrams are unit test projects.</span></span> <span data-ttu-id="33343-147">Espero que haya pruebas que cubran al menos parte del comportamiento existente de las bibliotecas que se van a trasladar.</span><span class="sxs-lookup"><span data-stu-id="33343-147">Hopefully there are tests covering at least some of the existing behavior of the libraries being ported.</span></span>

<span data-ttu-id="33343-148">Si tiene pruebas unitarias, es mejor convertir primero esos proyectos.</span><span class="sxs-lookup"><span data-stu-id="33343-148">If you have unit tests, it's best to convert those projects first.</span></span> <span data-ttu-id="33343-149">Querrá seguir probando los cambios en el proyecto en el que está trabajando.</span><span class="sxs-lookup"><span data-stu-id="33343-149">You'll want to continue testing changes in the project you're working on.</span></span> <span data-ttu-id="33343-150">Recuerde que la migración a .NET Core es un cambio significativo en el código base.</span><span class="sxs-lookup"><span data-stu-id="33343-150">Remember that porting to .NET Core is a significant change to your codebase.</span></span>

<span data-ttu-id="33343-151">MSTest, xUnit y NUnit funcionan en .NET Core.</span><span class="sxs-lookup"><span data-stu-id="33343-151">MSTest, xUnit, and NUnit all work on .NET Core.</span></span> <span data-ttu-id="33343-152">Si actualmente no tiene pruebas para la aplicación, considere la posibilidad de crear algunas pruebas de caracterización que comprueben el comportamiento actual del sistema.</span><span class="sxs-lookup"><span data-stu-id="33343-152">If you don't currently have tests for your app, consider building some characterization tests that verify the system's current behavior.</span></span> <span data-ttu-id="33343-153">La ventaja es que una vez completada la migración, puede confirmar que el comportamiento de la aplicación permanece inalterado.</span><span class="sxs-lookup"><span data-stu-id="33343-153">The benefit is that once the migration is complete, you can confirm the app's behavior remains unchanged.</span></span>

## <a name="considerations-for-migrating-many-apps"></a><span data-ttu-id="33343-154">Consideraciones para la migración de muchas aplicaciones</span><span class="sxs-lookup"><span data-stu-id="33343-154">Considerations for migrating many apps</span></span>

<span data-ttu-id="33343-155">Algunas organizaciones tendrán muchas aplicaciones diferentes para migrar, y la migración de cada una de ellas puede requerir que se tenable demasiados recursos.</span><span class="sxs-lookup"><span data-stu-id="33343-155">Some organizations will have many different apps to migrate, and migrating each one by hand may require too many resources to be tenable.</span></span> <span data-ttu-id="33343-156">En estas situaciones, se recomienda cierto grado de automatización.</span><span class="sxs-lookup"><span data-stu-id="33343-156">In these situations, some degree of automation is recommended.</span></span> <span data-ttu-id="33343-157">Los pasos que se siguen en este capítulo se pueden automatizar.</span><span class="sxs-lookup"><span data-stu-id="33343-157">The steps followed in this chapter can be automated.</span></span> <span data-ttu-id="33343-158">Los cambios estructurales, como las diferencias en los archivos de proyecto y las actualizaciones de los paquetes comunes, pueden aplicarse mediante scripts.</span><span class="sxs-lookup"><span data-stu-id="33343-158">Structural changes, like project file differences and updates to common packages, can be applied by scripts.</span></span> <span data-ttu-id="33343-159">Estos scripts se pueden refinar a medida que se ejecutan de forma iterativa en más proyectos.</span><span class="sxs-lookup"><span data-stu-id="33343-159">These scripts can be refined as they're run iteratively on more projects.</span></span> <span data-ttu-id="33343-160">En cada ejecución, examine los pasos manuales necesarios para cada proyecto.</span><span class="sxs-lookup"><span data-stu-id="33343-160">On each run, examine whatever manual steps are required for each project.</span></span> <span data-ttu-id="33343-161">Si es posible, automatice los pasos manuales.</span><span class="sxs-lookup"><span data-stu-id="33343-161">Automate those manual steps, if possible.</span></span> <span data-ttu-id="33343-162">Con este enfoque, la organización debe crecer más rápido y mejor a la hora de migrar sus aplicaciones a lo largo del tiempo, con una mejor automatización compatible con cada paso del proceso.</span><span class="sxs-lookup"><span data-stu-id="33343-162">Using this approach, the organization should grow faster and better at porting their apps over time, with improved automation support each step of the way.</span></span>

<span data-ttu-id="33343-163">Vea información general sobre cómo emplear este enfoque en esta [presentación de dotNetConf de Lizzy Gallagher de MasterCard](https://www.youtube.com/watch?v=C-2haqb60No).</span><span class="sxs-lookup"><span data-stu-id="33343-163">Watch an overview of how to employ this approach in this [dotNetConf presentation by Lizzy Gallagher of Mastercard](https://www.youtube.com/watch?v=C-2haqb60No).</span></span> <span data-ttu-id="33343-164">Las cinco fases empleadas en esta presentación incluyen:</span><span class="sxs-lookup"><span data-stu-id="33343-164">The five phases employed in this presentation included:</span></span>

- <span data-ttu-id="33343-165">Migración de dependencias de NuGet de terceros</span><span class="sxs-lookup"><span data-stu-id="33343-165">Migrate third-party NuGet dependencies</span></span>
- <span data-ttu-id="33343-166">Migración de aplicaciones para usar el nuevo formato de archivo *. csproj*</span><span class="sxs-lookup"><span data-stu-id="33343-166">Migrate apps to use new *.csproj* file format</span></span>
- <span data-ttu-id="33343-167">Migración de aplicaciones a ASP.NET Core (con .NET Framework de destino)</span><span class="sxs-lookup"><span data-stu-id="33343-167">Migrate apps to ASP.NET Core (targeting .NET Framework)</span></span>
- <span data-ttu-id="33343-168">Actualización de las dependencias de NuGet internas en .NET Standard</span><span class="sxs-lookup"><span data-stu-id="33343-168">Update internal NuGet dependencies to .NET Standard</span></span>
- <span data-ttu-id="33343-169">Actualice todas las aplicaciones para que tengan como destino .NET Core 3,1</span><span class="sxs-lookup"><span data-stu-id="33343-169">Update all apps to target .NET Core 3.1</span></span>

<span data-ttu-id="33343-170">Al automatizar un gran conjunto de aplicaciones, ayuda significativamente si siguen las directrices de codificación coherentes y la organización del proyecto.</span><span class="sxs-lookup"><span data-stu-id="33343-170">When automating a large suite of apps, it helps significantly if they follow consistent coding guidelines and project organization.</span></span> <span data-ttu-id="33343-171">Los esfuerzos de automatización se basan en esta coherencia para ser eficaces.</span><span class="sxs-lookup"><span data-stu-id="33343-171">Automation efforts rely on this consistency to be effective.</span></span> <span data-ttu-id="33343-172">Además de analizar y migrar archivos de proyecto, los patrones de código comunes se pueden migrar automáticamente.</span><span class="sxs-lookup"><span data-stu-id="33343-172">In addition to parsing and migrating project files, common code patterns can be migrated automatically.</span></span> <span data-ttu-id="33343-173">Algunos ejemplos de patrones de código incluyen diferencias en cómo se declaran las acciones de controlador o cómo devuelven resultados.</span><span class="sxs-lookup"><span data-stu-id="33343-173">Some code pattern examples include differences in how controller actions are declared or how they return results.</span></span>

<span data-ttu-id="33343-174">Por ejemplo, un script de migración podría buscar archivos que coincidan con *Controller.CS* para las líneas de código que coinciden con uno de estos patrones:</span><span class="sxs-lookup"><span data-stu-id="33343-174">For example, a migration script could search files matching *Controller.cs* for lines of code matching one of these patterns:</span></span>

```csharp
   return new HttpStatusCodeResult(200);
   // or
   return new HttpStatusCodeResult(HttpStatusCode.OK);
```

<span data-ttu-id="33343-175">En ASP.NET Core, cualquiera de las líneas de código anteriores se puede reemplazar por:</span><span class="sxs-lookup"><span data-stu-id="33343-175">In ASP.NET Core, either of the preceding lines of code can be replaced with:</span></span>

```csharp
    return Ok();
```

## <a name="summary"></a><span data-ttu-id="33343-176">Resumen</span><span class="sxs-lookup"><span data-stu-id="33343-176">Summary</span></span>

<span data-ttu-id="33343-177">El mejor método para migrar una aplicación de .NET Framework grande a .NET Core es:</span><span class="sxs-lookup"><span data-stu-id="33343-177">The best approach to porting a large .NET Framework app to .NET Core is to:</span></span>

1. <span data-ttu-id="33343-178">Identifique las dependencias del proyecto.</span><span class="sxs-lookup"><span data-stu-id="33343-178">Identify project dependencies.</span></span>
1. <span data-ttu-id="33343-179">Analice lo que se necesita para portar cada proyecto.</span><span class="sxs-lookup"><span data-stu-id="33343-179">Analyze what's required to port each project.</span></span>
1. <span data-ttu-id="33343-180">Empiece en orden ascendente.</span><span class="sxs-lookup"><span data-stu-id="33343-180">Start from the bottom up.</span></span>

<span data-ttu-id="33343-181">Puede usar el analizador de portabilidad de .NET para determinar cómo pueden estar las bibliotecas existentes compatibles con las plataformas de destino.</span><span class="sxs-lookup"><span data-stu-id="33343-181">You can use the .NET Portability Analyzer to determine how compatible existing libraries may be with target platforms.</span></span> <span data-ttu-id="33343-182">Las pruebas automatizadas ayudarán a garantizar que no se introducen cambios importantes a medida que se traslada la aplicación.</span><span class="sxs-lookup"><span data-stu-id="33343-182">Automated tests will help ensure no breaking changes are introduced as the app is ported.</span></span> <span data-ttu-id="33343-183">Estos proyectos de prueba deben estar entre los primeros proyectos migrados.</span><span class="sxs-lookup"><span data-stu-id="33343-183">These test projects should be among the first projects ported.</span></span>

## <a name="references"></a><span data-ttu-id="33343-184">Referencias</span><span class="sxs-lookup"><span data-stu-id="33343-184">References</span></span>

- [<span data-ttu-id="33343-185">Portabilidad de .NET Framework a .NET Core</span><span class="sxs-lookup"><span data-stu-id="33343-185">Porting from .NET Framework to .NET Core</span></span>](../../core/porting/index.md)
- [<span data-ttu-id="33343-186">Analizador de portabilidad de .NET</span><span class="sxs-lookup"><span data-stu-id="33343-186">The .NET Portability Analyzer</span></span>](../../standard/analyzers/portability-analyzer.md)
- [<span data-ttu-id="33343-187">Channel 9: un breve vistazo al analizador de portabilidad de .NET (vídeo)</span><span class="sxs-lookup"><span data-stu-id="33343-187">Channel 9: A Brief Look at the .NET Portability Analyzer (Video)</span></span>](https://channel9.msdn.com/Blogs/Seth-Juarez/A-Brief-Look-at-the-NET-Portability-Analyzer)
- [<span data-ttu-id="33343-188">2 años, 200 aplicaciones: una migración de .NET Core a escala (vídeo)</span><span class="sxs-lookup"><span data-stu-id="33343-188">2 Years, 200 Apps: A .NET Core Migration at Scale (Video)</span></span>](https://www.youtube.com/watch?v=C-2haqb60No)

>[!div class="step-by-step"]
><span data-ttu-id="33343-189">[Anterior](migrate-large-solutions.md)
>[Siguiente](understand-update-dependencies.md)</span><span class="sxs-lookup"><span data-stu-id="33343-189">[Previous](migrate-large-solutions.md)
[Next](understand-update-dependencies.md)</span></span>
