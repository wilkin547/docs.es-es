---
title: Descripción y actualización de dependencias
description: Para migrar un proyecto de .NET Framework a .NET Core, sus dependencias deben actualizarse para que funcionen con .NET Core. En esta sección se examinan las herramientas y los enfoques que se pueden usar para planear las migraciones de aplicaciones de gran tamaño.
author: ardalis
ms.date: 11/13/2020
ms.openlocfilehash: afad77860099e4737b5270dc32fc20c2025e63dd
ms.sourcegitcommit: 42d436ebc2a7ee02fc1848c7742bc7d80e13fc2f
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/04/2021
ms.locfileid: "102401686"
---
# <a name="understand-and-update-dependencies"></a><span data-ttu-id="c24ee-104">Descripción y actualización de dependencias</span><span class="sxs-lookup"><span data-stu-id="c24ee-104">Understand and update dependencies</span></span>

<span data-ttu-id="c24ee-105">Después de identificar la secuencia en la que se deben migrar los proyectos individuales de la aplicación, el siguiente paso es comprender las dependencias de cada proyecto y actualizarlas si es necesario.</span><span class="sxs-lookup"><span data-stu-id="c24ee-105">After identifying the sequence in which the app's individual projects must be migrated, the next step is to understand each project's dependencies and update them if necessary.</span></span> <span data-ttu-id="c24ee-106">En el caso de las dependencias de plataforma, la mejor manera de empezar es ejecutar el [analizador de portabilidad de .net](../../standard/analyzers/portability-analyzer.md) en el ensamblado en cuestión y, a continuación, examinar los resultados detallados que se generan.</span><span class="sxs-lookup"><span data-stu-id="c24ee-106">For platform dependencies, the best way to start is to run the [.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md) on the assembly in question, and then look at the detailed results that are generated.</span></span> <span data-ttu-id="c24ee-107">La herramienta se configura para especificar una o varias plataformas de destino, como .NET Core 3,1 o .NET Standard 2,0.</span><span class="sxs-lookup"><span data-stu-id="c24ee-107">You configure the tool to specify one or more target platforms, such as .NET Core 3.1 or .NET Standard 2.0.</span></span> <span data-ttu-id="c24ee-108">Los resultados se proporcionan con los detalles de cada plataforma de destino.</span><span class="sxs-lookup"><span data-stu-id="c24ee-108">Results are provided with details for each platform targeted.</span></span> <span data-ttu-id="c24ee-109">En la figura 3-4 se muestra un ejemplo de la salida de la herramienta.</span><span class="sxs-lookup"><span data-stu-id="c24ee-109">Figure 3-4 shows an example of the tool's output.</span></span>

![Detalles del informe del analizador de portabilidad de .NET](./media/Figure3-4.png)

<span data-ttu-id="c24ee-111">**Figura 3-4.**</span><span class="sxs-lookup"><span data-stu-id="c24ee-111">**Figure 3-4.**</span></span> <span data-ttu-id="c24ee-112">Detalles del informe del analizador de portabilidad de .NET.</span><span class="sxs-lookup"><span data-stu-id="c24ee-112">.NET Portability Analyzer report details.</span></span>

## <a name="update-class-library-dependencies"></a><span data-ttu-id="c24ee-113">Actualizar las dependencias de la biblioteca de clases</span><span class="sxs-lookup"><span data-stu-id="c24ee-113">Update class library dependencies</span></span>

<span data-ttu-id="c24ee-114">Las aplicaciones de gran tamaño normalmente implican varios proyectos, y la mayoría de los proyectos distintos del proyecto Web de MVC de ASP.NET son probablemente bibliotecas de clases.</span><span class="sxs-lookup"><span data-stu-id="c24ee-114">Large apps typically involve multiple projects, and most projects other than the ASP.NET MVC web project are likely to be class libraries.</span></span> <span data-ttu-id="c24ee-115">Las bibliotecas de clases suelen ser el puerto más sencillo entre las plataformas de .NET, especialmente en comparación con los proyectos de ASP.NET, que son entre las más difíciles (y que normalmente deben volver a crearse).</span><span class="sxs-lookup"><span data-stu-id="c24ee-115">Class libraries tend to be the easiest to port between .NET platforms, especially compared to ASP.NET projects, which are among the most difficult (and typically need to be re-created).</span></span>

<span data-ttu-id="c24ee-116">Los equipos pueden considerar la [herramienta de prueba de conversión](https://github.com/dotnet/try-convert) o la [herramienta del Asistente para actualización de .net](https://aka.ms/dotnet-upgrade-assistant) para migrar bibliotecas de clases a .net Core.</span><span class="sxs-lookup"><span data-stu-id="c24ee-116">Teams can consider the [try-convert tool](https://github.com/dotnet/try-convert) or the [.NET Upgrade Assistant tool](https://aka.ms/dotnet-upgrade-assistant) for migrating class libraries to .NET Core.</span></span> <span data-ttu-id="c24ee-117">Estas herramientas analizan un archivo de proyecto de .NET Framework e intentan migrarlo al formato de archivo de proyecto de .NET Core, lo que realiza las modificaciones que puede realizar con seguridad en el proceso.</span><span class="sxs-lookup"><span data-stu-id="c24ee-117">These tools analyze a .NET Framework project file and attempt to migrate it to the .NET Core project file format, making any modifications it can safely perform in the process.</span></span> <span data-ttu-id="c24ee-118">Las herramientas pueden requerir cierta asistencia manual para trabajar con proyectos de ASP.NET, pero normalmente pueden ayudar a acelerar el proceso de migración de bibliotecas de clases.</span><span class="sxs-lookup"><span data-stu-id="c24ee-118">The tools may require some manual assistance to work with ASP.NET projects, but can usually help speed up the process of migrating class libraries.</span></span>

<span data-ttu-id="c24ee-119">Las herramientas de prueba de actualización y del Asistente para actualización se implementan como herramientas de línea de comandos de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="c24ee-119">The try-convert and Upgrade Assistant tools are deployed as .NET Core command line tools.</span></span> <span data-ttu-id="c24ee-120">Solo se ejecutan en Windows, ya que están diseñados para funcionar con .NET Framework aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="c24ee-120">They only run on Windows, since they're designed to work with .NET Framework apps.</span></span> <span data-ttu-id="c24ee-121">Puede instalar try-Convert ejecutando el comando siguiente desde un símbolo del sistema:</span><span class="sxs-lookup"><span data-stu-id="c24ee-121">You can install try-convert by running the following command from a command prompt:</span></span>

```dotnetcli
dotnet tool install -g try-convert
```

<span data-ttu-id="c24ee-122">Una vez que haya instalado correctamente la herramienta, puede ejecutar `try-convert` en la carpeta donde se encuentra el archivo de proyecto de la biblioteca de clases.</span><span class="sxs-lookup"><span data-stu-id="c24ee-122">Once you've successfully installed the tool, you can run `try-convert` in the folder where the class library's project file is located.</span></span>

<span data-ttu-id="c24ee-123">Instale el Asistente para actualización de .NET con el siguiente comando (después de instalar try-Convert):</span><span class="sxs-lookup"><span data-stu-id="c24ee-123">Install the .NET Upgrade Assistant with the following command (after installing try-convert):</span></span>

```dotnetcli
dotnet tool install -g upgrade-assistant
```

<span data-ttu-id="c24ee-124">Ejecute la herramienta con el comando `upgrade-assistant <project>` en la carpeta donde se encuentra el archivo de proyecto.</span><span class="sxs-lookup"><span data-stu-id="c24ee-124">Run the tool with the command `upgrade-assistant <project>` in the folder where the project file is located.</span></span>

## <a name="update-nuget-package-dependencies"></a><span data-ttu-id="c24ee-125">Actualización de las dependencias de paquetes NuGet</span><span class="sxs-lookup"><span data-stu-id="c24ee-125">Update NuGet package dependencies</span></span>

<span data-ttu-id="c24ee-126">Analice el uso de paquetes de NuGet de terceros y determine si alguno de ellos todavía no admite .NET Standard (o no lo admite pero solo con una versión nueva).</span><span class="sxs-lookup"><span data-stu-id="c24ee-126">Analyze your use of third-party NuGet packages and determine if any of them don't yet support .NET Standard (or do support it but only with a new version).</span></span> <span data-ttu-id="c24ee-127">Puede ser útil [actualizar paquetes NuGet para usar `<PackageReference>` la sintaxis con la herramienta de conversión de Visual Studio](/nuget/consume-packages/migrate-packages-config-to-package-reference), de modo que las dependencias de nivel superior estén visibles.</span><span class="sxs-lookup"><span data-stu-id="c24ee-127">It can be helpful to [update NuGet packages to use `<PackageReference>` syntax using Visual Studio's converter tool](/nuget/consume-packages/migrate-packages-config-to-package-reference), so that top-level dependencies are visible.</span></span> <span data-ttu-id="c24ee-128">A continuación, compruebe si las versiones actuales o posteriores de estos paquetes son compatibles con .NET Core o .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="c24ee-128">Next, check whether the current or later versions of these packages support .NET Core or .NET Standard.</span></span> <span data-ttu-id="c24ee-129">Esta información puede encontrarse en [nuget.org] o en Visual Studio para cada paquete.</span><span class="sxs-lookup"><span data-stu-id="c24ee-129">This information can be found on [nuget.org] or within Visual Studio for each package.</span></span>

<span data-ttu-id="c24ee-130">Si existe compatibilidad con la versión del paquete que usa la aplicación actualmente, ¡ genial!</span><span class="sxs-lookup"><span data-stu-id="c24ee-130">If support exists using the version of the package the app currently uses, great!</span></span> <span data-ttu-id="c24ee-131">Si no es así, consulte si hay una versión más reciente del paquete que tenga soporte técnico e investigue lo que sería necesario para la actualización.</span><span class="sxs-lookup"><span data-stu-id="c24ee-131">If not, see if a more recent version of the package has the support and research what would be involved in upgrading.</span></span> <span data-ttu-id="c24ee-132">Puede haber cambios importantes en el paquete, especialmente si la versión principal del paquete cambia entre la versión usada actualmente y la que está actualizando.</span><span class="sxs-lookup"><span data-stu-id="c24ee-132">There may be breaking changes in the package, especially if the major version of the package changes between your currently used version and the one to which you're upgrading.</span></span>

<span data-ttu-id="c24ee-133">En algunos casos, ninguna versión de un paquete determinado funciona con .NET Core.</span><span class="sxs-lookup"><span data-stu-id="c24ee-133">In some cases, no version of a given package works with .NET Core.</span></span> <span data-ttu-id="c24ee-134">En ese caso, los equipos tienen un par de opciones.</span><span class="sxs-lookup"><span data-stu-id="c24ee-134">In that case, teams have a couple options.</span></span> <span data-ttu-id="c24ee-135">Pueden continuar dependiendo de la versión de .NET Framework, pero esto tiene limitaciones.</span><span class="sxs-lookup"><span data-stu-id="c24ee-135">They can continue depending on the .NET Framework version, but this has limitations.</span></span> <span data-ttu-id="c24ee-136">La aplicación solo se ejecutará en Windows y es posible que el equipo desee ejecutar el analizador de portabilidad en los archivos binarios del paquete para ver si hay algún problema que pueda encontrar.</span><span class="sxs-lookup"><span data-stu-id="c24ee-136">The app will only run on Windows, and the team may want to run Portability Analyzer on the package's binaries to see if there are any issues likely to be encountered.</span></span> <span data-ttu-id="c24ee-137">Ciertamente, el equipo querrá probar exhaustivamente.</span><span class="sxs-lookup"><span data-stu-id="c24ee-137">Certainly the team will want to test thoroughly.</span></span> <span data-ttu-id="c24ee-138">La otra opción es buscar un paquete diferente o, si el paquete necesario es de código abierto, actualizarlo a .NET Standard o .NET Core.</span><span class="sxs-lookup"><span data-stu-id="c24ee-138">The other option is to find a different package or, if the required package is open source, upgrade it to .NET Standard or .NET Core themselves.</span></span>

## <a name="migrate-aspnet-mvc-projects"></a><span data-ttu-id="c24ee-139">Migración de proyectos de ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="c24ee-139">Migrate ASP.NET MVC projects</span></span>

<span data-ttu-id="c24ee-140">El `System.Web` espacio de nombres y los tipos no existen en .net Core.</span><span class="sxs-lookup"><span data-stu-id="c24ee-140">The `System.Web` namespace and types don't exist in .NET Core.</span></span> <span data-ttu-id="c24ee-141">Cuando se analizan las dependencias y se usan herramientas como `try-convert` , no se ofrecen muchas sugerencias para la migración automática de proyectos de ASP.NET MVC y el código que hace referencia a ellos `System.Web` .</span><span class="sxs-lookup"><span data-stu-id="c24ee-141">When you're analyzing dependencies and using tools like `try-convert`, you'll find they don't offer many suggestions for automatic migration of ASP.NET MVC projects and any code in them that references `System.Web`.</span></span> <span data-ttu-id="c24ee-142">Para estos proyectos, deberá empezar con un nuevo proyecto Web ASP.NET Core y migrar manualmente los archivos a este proyecto.</span><span class="sxs-lookup"><span data-stu-id="c24ee-142">For these projects, you'll need to start with a new ASP.NET Core web project and manually migrate files to this project.</span></span>

<span data-ttu-id="c24ee-143">En general, se recomienda minimizar la cantidad de lógica de negocios de una aplicación en su nivel de interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="c24ee-143">In general, it's a good practice to minimize how much of an app's business logic lives in its user interface layer.</span></span> <span data-ttu-id="c24ee-144">También es mejor mantener los controladores y las vistas pequeños.</span><span class="sxs-lookup"><span data-stu-id="c24ee-144">It's also best to keep controllers and views small.</span></span> <span data-ttu-id="c24ee-145">Las aplicaciones que han seguido esta guía serán más fáciles de portar que las que tienen una cantidad significativa de lógica en el proyecto Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c24ee-145">Apps that have followed this guidance will be easier to port than those that have a significant amount of their logic in the ASP.NET web project.</span></span> <span data-ttu-id="c24ee-146">Si tiene una aplicación que está pensando en trasladar, pero aún no ha iniciado el proceso, tenga esto en cuenta a medida que la mantiene.</span><span class="sxs-lookup"><span data-stu-id="c24ee-146">If you have an app you're considering porting, but haven't begun the process yet, keep this in mind as you maintain it.</span></span> <span data-ttu-id="c24ee-147">Cualquier esfuerzo que se ponga en reducir la cantidad de código que se encuentra en el proyecto de ASP.NET MVC o Web API probablemente dará lugar a menos trabajo cuando llegue el momento de migrar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c24ee-147">Any effort you put toward minimizing how much code is in the ASP.NET MVC or Web API project will likely result in less work when the time comes to port the app.</span></span>

<span data-ttu-id="c24ee-148">En el siguiente capítulo se profundiza en los detalles sobre cómo migrar de proyectos de ASP.NET MVC y Web API a proyectos de ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="c24ee-148">The next chapter digs into details of how to migrate from ASP.NET MVC and Web API projects to ASP.NET Core projects.</span></span> <span data-ttu-id="c24ee-149">En el capítulo anterior se han explicado las principales diferencias entre las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="c24ee-149">The previous chapter called out the biggest differences between the apps.</span></span> <span data-ttu-id="c24ee-150">Una vez que la estructura básica del proyecto está en su lugar, la migración de controladores y vistas individuales suele ser sencilla, especialmente si se centra principalmente en las responsabilidades Web.</span><span class="sxs-lookup"><span data-stu-id="c24ee-150">Once the basic project structure is in place, migrating individual controllers and views is usually straightforward, especially if they're mainly focused on web responsibilities.</span></span>

## <a name="references"></a><span data-ttu-id="c24ee-151">Referencias</span><span class="sxs-lookup"><span data-stu-id="c24ee-151">References</span></span>

- [<span data-ttu-id="c24ee-152">Herramienta del Asistente para actualización de .NET</span><span class="sxs-lookup"><span data-stu-id="c24ee-152">.NET Upgrade Assistant tool</span></span>](https://aka.ms/dotnet-upgrade-assistant)
- [<span data-ttu-id="c24ee-153">herramienta try-Convert</span><span class="sxs-lookup"><span data-stu-id="c24ee-153">try-convert tool</span></span>](https://github.com/dotnet/try-convert)
- [<span data-ttu-id="c24ee-154">herramienta apiport</span><span class="sxs-lookup"><span data-stu-id="c24ee-154">apiport tool</span></span>](https://github.com/microsoft/dotnet-apiport)

>[!div class="step-by-step"]
><span data-ttu-id="c24ee-155">[Anterior](identify-migration-sequence.md)
>[Siguiente](strategies-migrating-in-production.md)</span><span class="sxs-lookup"><span data-stu-id="c24ee-155">[Previous](identify-migration-sequence.md)
[Next](strategies-migrating-in-production.md)</span></span>
