---
title: Aplicaciones monolíticas
description: Descripción de los conceptos básicos para incluir en un contenedor aplicaciones monolíticas.
ms.date: 08/06/2020
ms.openlocfilehash: c9a5baf209a47f62f421a236c0b04fe5dae37e3a
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 09/24/2020
ms.locfileid: "91163549"
---
# <a name="monolithic-applications"></a><span data-ttu-id="b7807-103">Aplicaciones monolíticas</span><span class="sxs-lookup"><span data-stu-id="b7807-103">Monolithic applications</span></span>

<span data-ttu-id="b7807-104">En este escenario, compilará una aplicación o un servicio web único y monolítico y lo implementará como un contenedor.</span><span class="sxs-lookup"><span data-stu-id="b7807-104">In this scenario, you're building a single and monolithic web application or service and deploying it as a container.</span></span> <span data-ttu-id="b7807-105">La estructura de la aplicación podría no ser monolítica, sino incluir varias bibliotecas, componentes o incluso capas (nivel de aplicación, capa de dominio, capa de acceso a datos, etc.).</span><span class="sxs-lookup"><span data-stu-id="b7807-105">Within the application, the structure might not be monolithic; it might comprise several libraries, components, or even layers (application layer, domain layer, data access layer, etc.).</span></span> <span data-ttu-id="b7807-106">Externamente es un contenedor único, como un proceso único, una aplicación web única o un servicio único.</span><span class="sxs-lookup"><span data-stu-id="b7807-106">Externally, it's a single container, like a single process, single web application, or single service.</span></span>

<span data-ttu-id="b7807-107">Para administrar este modelo, debe implementar un único contenedor para representar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b7807-107">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="b7807-108">Para escalarlo, solo tiene que agregar unas pocas copias más con un equilibrador de carga delante.</span><span class="sxs-lookup"><span data-stu-id="b7807-108">To scale it, just add a few more copies with a load balancer in front.</span></span> <span data-ttu-id="b7807-109">La simplicidad proviene de administrar una única implementación en un solo contenedor o máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="b7807-109">The simplicity comes from managing a single deployment in a single container or virtual machine (VM).</span></span>

<span data-ttu-id="b7807-110">Al seguir el principio de que un contenedor realiza una sola acción y lo hace en un proceso, el patrón monolítico entra en conflicto.</span><span class="sxs-lookup"><span data-stu-id="b7807-110">Following the principal that a container does one thing only, and does it in one process, the monolithic pattern is in conflict.</span></span> <span data-ttu-id="b7807-111">Puede incluir varios componentes, bibliotecas o capas internas en cada contenedor, como se muestra en la figura 4-1.</span><span class="sxs-lookup"><span data-stu-id="b7807-111">You can include multiple components/libraries or internal layers within each container, as illustrated in Figure 4-1.</span></span>

![Diagrama que muestra una aplicación monolítica que se escala horizontalmente mediante la clonación de la aplicación.](./media/monolithic-applications/monolithic-application-architecture-example.png)

<span data-ttu-id="b7807-113">**Figura 4-1.**</span><span class="sxs-lookup"><span data-stu-id="b7807-113">**Figure 4-1.**</span></span> <span data-ttu-id="b7807-114">Ejemplo de arquitectura de aplicaciones monolíticas</span><span class="sxs-lookup"><span data-stu-id="b7807-114">An example of monolithic application architecture</span></span>

<span data-ttu-id="b7807-115">Una aplicación monolítica tiene todas o la mayoría de sus funcionalidades en un único proceso o contenedor y está formada por capas internas o bibliotecas.</span><span class="sxs-lookup"><span data-stu-id="b7807-115">A monolithic app has all or most of its functionality within a single process or container and it's componentized in internal layers or libraries.</span></span> <span data-ttu-id="b7807-116">El inconveniente de este enfoque aparece cuando la aplicación aumenta y debe escalarse.</span><span class="sxs-lookup"><span data-stu-id="b7807-116">The downside to this approach comes if or when the application grows, requiring it to scale.</span></span> <span data-ttu-id="b7807-117">Si se escala toda la aplicación, realmente no es un problema.</span><span class="sxs-lookup"><span data-stu-id="b7807-117">If the entire application scaled, it's not really a problem.</span></span> <span data-ttu-id="b7807-118">Aun así, en la mayoría de los casos, solo unos pocos elementos de la aplicación son los puntos de obstrucción que deben escalarse, mientras que otros componentes se usan menos.</span><span class="sxs-lookup"><span data-stu-id="b7807-118">However, in most cases, a few parts of the application are the choke points that require scaling, whereas other components are used less.</span></span>

<span data-ttu-id="b7807-119">En el ejemplo típico de comercio electrónico, lo que probablemente necesite es escalar el componente de información del producto.</span><span class="sxs-lookup"><span data-stu-id="b7807-119">Using the typical e-commerce example, what you likely need is to scale the product information component.</span></span> <span data-ttu-id="b7807-120">Hay muchos más clientes que buscan productos de los que los compran.</span><span class="sxs-lookup"><span data-stu-id="b7807-120">Many more customers browse products than purchase them.</span></span> <span data-ttu-id="b7807-121">Más clientes usan la cesta en lugar de usar la canalización de pago.</span><span class="sxs-lookup"><span data-stu-id="b7807-121">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="b7807-122">Menos clientes publican comentarios o consultan su historial de compras.</span><span class="sxs-lookup"><span data-stu-id="b7807-122">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="b7807-123">Y es probable que solo cuente con un grupo reducido de empleados, en una única región, que tenga que administrar las campañas de contenido y marketing.</span><span class="sxs-lookup"><span data-stu-id="b7807-123">And you likely have only a handful of employees, in a single region, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="b7807-124">Al escalar el diseño monolítico, todo el código se implementa varias veces.</span><span class="sxs-lookup"><span data-stu-id="b7807-124">By scaling the monolithic design, all of the code is deployed multiple times.</span></span>

<span data-ttu-id="b7807-125">Además del problema de "escalarlo todo", los cambios en un único componente requieren volver a probar por completo toda la aplicación e implementar por completo todas las instancias.</span><span class="sxs-lookup"><span data-stu-id="b7807-125">In addition to the "scale-everything" problem, changes to a single component require complete retesting of the entire application as well as a complete redeployment of all the instances.</span></span>

<span data-ttu-id="b7807-126">El enfoque monolítico es habitual y muchas organizaciones realizan el desarrollo con este método de diseño.</span><span class="sxs-lookup"><span data-stu-id="b7807-126">The monolithic approach is common, and many organizations are developing with this architectural method.</span></span> <span data-ttu-id="b7807-127">Muchas disfrutan de resultados bastante buenos, mientras que otras se enfrentan a algunos límites.</span><span class="sxs-lookup"><span data-stu-id="b7807-127">Many enjoy good enough results, whereas others encounter limits.</span></span> <span data-ttu-id="b7807-128">Muchas diseñaron sus aplicaciones con este modelo, ya que crear arquitecturas orientadas a servicios (SOA) con infraestructura y herramientas resultaba demasiado difícil, y no vieron la necesidad hasta que la aplicación creció.</span><span class="sxs-lookup"><span data-stu-id="b7807-128">Many designed their applications in this model because the tools and infrastructure were too difficult to build SOAs, and they didn't see the need—until the app grew.</span></span>

<span data-ttu-id="b7807-129">Desde la perspectiva de la infraestructura, cada servidor puede ejecutar muchas aplicaciones dentro del mismo host y tener una proporción aceptable de eficacia en el uso de recursos, como se muestra en la figura 4-2.</span><span class="sxs-lookup"><span data-stu-id="b7807-129">From an infrastructure perspective, each server can run many applications within the same host and have an acceptable ratio of efficiency in your resources usage, as shown in Figure 4-2.</span></span>

![Diagrama que muestra un host con varias aplicaciones en contenedores independientes.](./media/monolithic-applications/host-with-multiple-apps-containers.png)

<span data-ttu-id="b7807-131">**Figura 4-2.**</span><span class="sxs-lookup"><span data-stu-id="b7807-131">**Figure 4-2.**</span></span> <span data-ttu-id="b7807-132">Host que ejecuta varias aplicaciones o contenedores</span><span class="sxs-lookup"><span data-stu-id="b7807-132">A host running multiple apps/containers</span></span>

<span data-ttu-id="b7807-133">Por último, desde la perspectiva de la disponibilidad, las aplicaciones monolíticas deben implementarse como un conjunto. Esto significa que, en caso de que deba *detener e iniciar*, todas las funcionalidades y todos los usuarios se verán afectados durante el período de implementación.</span><span class="sxs-lookup"><span data-stu-id="b7807-133">Finally, from an availability perspective, monolithic applications must be deployed as a whole; that means that in case you must *stop and start*, all functionality and all users will be affected during the deployment window.</span></span> <span data-ttu-id="b7807-134">En determinadas situaciones, el uso de Azure y de contenedores puede minimizar estas situaciones y reducir la probabilidad de tiempo de inactividad en la aplicación, como se aprecia en la figura 4-3.</span><span class="sxs-lookup"><span data-stu-id="b7807-134">In certain situations, the use of Azure and containers can minimize these situations and reduce the probability of downtime of your application, as you can see in Figure 4-3.</span></span>

<span data-ttu-id="b7807-135">Las aplicaciones monolíticas pueden implementarse en Azure con máquinas virtuales dedicadas para cada instancia.</span><span class="sxs-lookup"><span data-stu-id="b7807-135">You can deploy monolithic applications in Azure by using dedicated VMs for each instance.</span></span> <span data-ttu-id="b7807-136">Con [Azure VM Scale Sets](/azure/virtual-machine-scale-sets/), las máquinas virtuales se pueden escalar fácilmente.</span><span class="sxs-lookup"><span data-stu-id="b7807-136">Using [Azure VM Scale Sets](/azure/virtual-machine-scale-sets/), you can scale the VMs easily.</span></span>

<span data-ttu-id="b7807-137">También puede usar [Azure App Services](https://azure.microsoft.com/services/app-service/) para ejecutar aplicaciones monolíticas y escalar fácilmente instancias sin necesidad de administrar las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="b7807-137">You can also use [Azure App Services](https://azure.microsoft.com/services/app-service/) to run monolithic applications and easily scale instances without having to manage the VMs.</span></span> <span data-ttu-id="b7807-138">Azure App Services también puede ejecutar instancias únicas de contenedores de Docker, lo que simplifica la implementación.</span><span class="sxs-lookup"><span data-stu-id="b7807-138">Azure App Services can run single instances of Docker containers, as well, simplifying the deployment.</span></span>

<span data-ttu-id="b7807-139">Puede implementar varias máquinas virtuales como hosts de Docker y ejecutar cualquier número de contenedores por máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="b7807-139">You can deploy multiple VMs as Docker hosts and run any number of containers per VM.</span></span> <span data-ttu-id="b7807-140">Después, puede administrar el escalado mediante Azure Load Balancer, como se muestra en la figura 4-3.</span><span class="sxs-lookup"><span data-stu-id="b7807-140">Then, by using an Azure Load Balancer, as illustrated in the Figure 4-3, you can manage scaling.</span></span>

![Diagrama que muestra una aplicación monolítica escalada horizontalmente en hosts diferentes.](./media/monolithic-applications/multiple-hosts-from-single-docker-container.png)

<span data-ttu-id="b7807-142">**Figura 4-3**.</span><span class="sxs-lookup"><span data-stu-id="b7807-142">**Figure 4-3**.</span></span> <span data-ttu-id="b7807-143">Varios hosts escalan horizontalmente una única aplicación de Docker</span><span class="sxs-lookup"><span data-stu-id="b7807-143">Multiple hosts scaling out a single Docker application</span></span>

<span data-ttu-id="b7807-144">Puede administrar la implementación de los propios hosts mediante técnicas de implementación tradicionales.</span><span class="sxs-lookup"><span data-stu-id="b7807-144">You can manage the deployment of the hosts themselves via traditional deployment techniques.</span></span>

<span data-ttu-id="b7807-145">Puede administrar contenedores de Docker desde la línea de comandos mediante el uso de comandos como `docker run` y `docker-compose up`. También puede automatizar el proceso en las canalizaciones de entrega continua (CD) y realizar la implementación en hosts de Docker desde Azure DevOps Services, por ejemplo.</span><span class="sxs-lookup"><span data-stu-id="b7807-145">You can manage Docker containers from the command line by using commands like `docker run` and `docker-compose up`, and you can also automate it in Continuous Delivery (CD) pipelines and deploy to Docker hosts from Azure DevOps Services, for instance.</span></span>

## <a name="monolithic-application-deployed-as-a-container"></a><span data-ttu-id="b7807-146">Una aplicación monolítica implementada como un contenedor</span><span class="sxs-lookup"><span data-stu-id="b7807-146">Monolithic application deployed as a container</span></span>

<span data-ttu-id="b7807-147">El uso de contenedores para administrar implementaciones monolíticas tiene una serie de ventajas.</span><span class="sxs-lookup"><span data-stu-id="b7807-147">There are benefits to using containers to manage monolithic deployments.</span></span> <span data-ttu-id="b7807-148">Escalar las instancias de los contenedores es mucho más rápido y fácil que implementar máquinas virtuales adicionales.</span><span class="sxs-lookup"><span data-stu-id="b7807-148">Scaling the instances of containers is far faster and easier than deploying additional VMs.</span></span>

<span data-ttu-id="b7807-149">Implementar las actualizaciones como imágenes de Docker es mucho más rápido y eficaz en la red.</span><span class="sxs-lookup"><span data-stu-id="b7807-149">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="b7807-150">Normalmente, los contenedores de Docker se inician en segundos, lo que acelera las implementaciones.</span><span class="sxs-lookup"><span data-stu-id="b7807-150">Docker containers typically start in seconds, speeding rollouts.</span></span> <span data-ttu-id="b7807-151">Anular un contenedor de Docker es tan fácil como invocar el comando `docker stop`, que normalmente se completa en menos de un segundo.</span><span class="sxs-lookup"><span data-stu-id="b7807-151">Tearing down a Docker container is as easy as invoking the `docker stop` command, typically completing in less than a second.</span></span>

<span data-ttu-id="b7807-152">Como por diseño los contenedores son intrínsecamente inmutables, no tendrá que preocuparse de que las máquinas virtuales resulten dañadas porque un script de actualización olvidó tener en cuenta alguna configuración concreta o archivo que se conserve en disco.</span><span class="sxs-lookup"><span data-stu-id="b7807-152">Because containers are inherently immutable, by design, you never need to worry about corrupted VMs because an update script forgot to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="b7807-153">Si bien las aplicaciones monolíticas pueden beneficiarse de Docker, estamos examinando estos beneficios muy por encima.</span><span class="sxs-lookup"><span data-stu-id="b7807-153">Although monolithic apps can benefit from Docker, we're touching on only the tips of the benefits.</span></span> <span data-ttu-id="b7807-154">Las ventajas adicionales de administrar contenedores proceden de implementar con orquestadores de contenedor que administran las distintas instancias y el ciclo de vida de cada instancia del contenedor.</span><span class="sxs-lookup"><span data-stu-id="b7807-154">The larger benefits of managing containers come from deploying with container orchestrators that manage the various instances and life cycle of each container instance.</span></span> <span data-ttu-id="b7807-155">Separar la aplicación monolítica en subsistemas que se pueden escalar, desarrollar e implementar de forma individual es el punto de entrada al reino de los microservicios.</span><span class="sxs-lookup"><span data-stu-id="b7807-155">Breaking up the monolithic application into subsystems that can be scaled, developed, and deployed individually is your entry point into the realm of microservices.</span></span>

<span data-ttu-id="b7807-156">Para obtener información sobre cómo migrar aplicaciones monolíticas con contenedores mediante lift-and-shift y cómo puede modernizar las aplicaciones, lea la guía adicional de Microsoft titulada [Modernización de las aplicaciones .NET existentes con la nube de Azure y contenedores de Windows](../../modernize-with-azure-containers/index.md), que también puede descargar como PDF desde <https://aka.ms/LiftAndShiftWithContainersEbook>.</span><span class="sxs-lookup"><span data-stu-id="b7807-156">To learn about how to "lift and shift" monolithic applications with containers and how you can modernize your applications, you can read this additional Microsoft guide, [Modernize existing .NET applications with Azure cloud and Windows Containers](../../modernize-with-azure-containers/index.md), which you can also download as PDF from <https://aka.ms/LiftAndShiftWithContainersEbook>.</span></span>

## <a name="publish-a-single-docker-container-app-to-azure-app-service"></a><span data-ttu-id="b7807-157">Publicación de una única aplicación de contenedor de Docker en Azure App Service</span><span class="sxs-lookup"><span data-stu-id="b7807-157">Publish a single Docker container app to Azure App Service</span></span>

<span data-ttu-id="b7807-158">Tanto si quiere obtener la validación rápida de un contenedor implementado en Azure como si la aplicación es simplemente una aplicación de un solo contenedor, Azure App Service ofrece una excelente manera de proporcionar servicios escalables de un solo contenedor.</span><span class="sxs-lookup"><span data-stu-id="b7807-158">Either because you want to get a quick validation of a container deployed to Azure or because the app is simply a single-container app, Azure App Services provides a great way to provide scalable single-container services.</span></span>

<span data-ttu-id="b7807-159">El uso de Azure App Service es intuitivo, por lo que puede empezar a trabajar rápidamente. Gracias a su excelente integración con GIT, puede tomar el código, compilarlo en Microsoft Visual Studio e implementarlo directamente en Azure.</span><span class="sxs-lookup"><span data-stu-id="b7807-159">Using Azure App Service is intuitive and you can get up and running quickly because it provides great Git integration to take your code, build it in Microsoft Visual Studio, and directly deploy it to Azure.</span></span> <span data-ttu-id="b7807-160">Tradicionalmente (es decir, sin Docker), si necesitaba otras funcionalidades, marcos o dependencias que no son compatibles con App Service, debía esperar a que el equipo de Azure actualizase esas dependencias en App Service o cambiar a otros servicios como Service Fabric, Cloud Services o incluso simples máquinas virtuales, sobre las que tiene más control y en las que puede instalar un componente o un marco necesarios para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b7807-160">But, traditionally (with no Docker), if you needed other capabilities, frameworks, or dependencies that aren't supported in App Services, you needed to wait for it until the Azure team updates those dependencies in App Service or switched to other services like Service Fabric, Cloud Services, or even plain VMs, for which you have further control and can install a required component or framework for your application.</span></span>

<span data-ttu-id="b7807-161">Ahora, como se muestra en la figura 4-4, al usar Visual Studio 2017, la compatibilidad con contenedores en Azure App Service le ofrece la capacidad de incluir todo lo que quiera en el entorno de aplicación.</span><span class="sxs-lookup"><span data-stu-id="b7807-161">Now, as shown in Figure 4-4, when using Visual Studio 2017, container support in Azure App Service gives you the ability to include whatever you want in your app environment.</span></span> <span data-ttu-id="b7807-162">Si agregó una dependencia en la aplicación porque la ejecuta en un contenedor, podrá incluir esas dependencias en la imagen de Docker o en el archivo Dockerfile.</span><span class="sxs-lookup"><span data-stu-id="b7807-162">If you added a dependency to your app, because you're running it in a container, you get the capability of including those dependencies in your Dockerfile or Docker image.</span></span>

![Captura de pantalla del cuadro de diálogo Crear servicio de aplicaciones que muestra una instancia de Container Registry.](./media/monolithic-applications/publish-azure-app-service-container.png)

<span data-ttu-id="b7807-164">**Figura 4-4**.</span><span class="sxs-lookup"><span data-stu-id="b7807-164">**Figure 4-4**.</span></span> <span data-ttu-id="b7807-165">Publicación de un contenedor en Azure App Service desde aplicaciones o contenedores de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="b7807-165">Publishing a container to Azure App Service from Visual Studio apps/containers</span></span>

<span data-ttu-id="b7807-166">En la figura 4-4 también puede verse que el flujo de publicación inserta una imagen a través de un registro de contenedor, que puede ser Azure Container Registry (un registro cercano a las implementaciones en Azure y protegido por las cuentas y los grupos de Azure Active Directory) o cualquier otro registro de Docker, como Docker Hub o registros locales.</span><span class="sxs-lookup"><span data-stu-id="b7807-166">Figure 4-4 also shows that the publish flow pushes an image through a Container Registry, which can be the Azure Container Registry (a registry near to your deployments in Azure and secured by Azure Active Directory groups and accounts) or any other Docker Registry like Docker Hub or on-premises registries.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="b7807-167">[Anterior](common-container-design-principles.md)
>[Siguiente](state-and-data-in-docker-applications.md)</span><span class="sxs-lookup"><span data-stu-id="b7807-167">[Previous](common-container-design-principles.md)
[Next](state-and-data-in-docker-applications.md)</span></span>
