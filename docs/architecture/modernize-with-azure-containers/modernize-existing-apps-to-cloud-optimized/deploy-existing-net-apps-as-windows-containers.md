---
title: Implementación de aplicaciones .NET existentes como contenedores de Windows
description: Modernización de las aplicaciones .NET existentes con la nube de Azure y los contenedores de Windows | Implementación de aplicaciones .NET existentes como contenedores de Windows
ms.date: 12/21/2020
ms.openlocfilehash: f3f164ca0578d5358f2c5365fd5a1d2e8e22d8c5
ms.sourcegitcommit: 5d9cee27d9ffe8f5670e5f663434511e81b8ac38
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "98025361"
---
# <a name="deploy-existing-net-apps-as-windows-containers"></a><span data-ttu-id="1c331-103">Implementación de aplicaciones .NET existentes como contenedores de Windows</span><span class="sxs-lookup"><span data-stu-id="1c331-103">Deploy existing .NET apps as Windows containers</span></span>

<span data-ttu-id="1c331-104">Las implementaciones basadas en contenedores de Windows se aplican a aplicaciones optimizadas para la nube y aplicaciones nativas en la nube.</span><span class="sxs-lookup"><span data-stu-id="1c331-104">Deployments that are based on Windows Containers are applicable to Cloud-Optimized applications and Cloud-Native applications.</span></span>

<span data-ttu-id="1c331-105">Sin embargo, en esta guía y especialmente en las secciones siguientes, se centra principalmente en el uso de contenedores de Windows para aplicaciones *optimizadas para la nube* en las que no es necesario rediseñar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="1c331-105">However, in this guide and especially in the following sections, it mostly focuses on using Windows Containers for *Cloud-Optimized* applications where you don't need to rearchitect your application.</span></span>

## <a name="what-are-containers-linux-or-windows"></a><span data-ttu-id="1c331-106">¿Qué son los contenedores?</span><span class="sxs-lookup"><span data-stu-id="1c331-106">What are containers?</span></span> <span data-ttu-id="1c331-107">(Linux o Windows)</span><span class="sxs-lookup"><span data-stu-id="1c331-107">(Linux or Windows)</span></span>

<span data-ttu-id="1c331-108">Los contenedores son una manera de encapsular una aplicación en su propio paquete aislado.</span><span class="sxs-lookup"><span data-stu-id="1c331-108">Containers are a way to wrap up an application into its own isolated package.</span></span> <span data-ttu-id="1c331-109">En su contenedor, la aplicación no se ve afectada por las aplicaciones o procesos que existen fuera del contenedor.</span><span class="sxs-lookup"><span data-stu-id="1c331-109">In its container, the application is not affected by applications or processes that exist outside of the container.</span></span> <span data-ttu-id="1c331-110">Todo de lo que depende la aplicación para que se ejecute correctamente, ya que un proceso está dentro del contenedor.</span><span class="sxs-lookup"><span data-stu-id="1c331-110">Everything the application depends on to run successfully as a process is inside the container.</span></span> <span data-ttu-id="1c331-111">Siempre que el contenedor pueda moverse, se cumplirán los requisitos de la aplicación, en términos de dependencias directas, porque se incluye todo lo que necesita para ejecutarse (dependencias de biblioteca, tiempos de ejecución, etc.).</span><span class="sxs-lookup"><span data-stu-id="1c331-111">Wherever the container might move, the requirements of the application will always be met, in terms of direct dependencies, because it is bundled with everything that it needs to run (library dependencies, runtimes, and so on).</span></span>

<span data-ttu-id="1c331-112">La característica principal de un contenedor es que hace que el entorno sea el mismo en las distintas implementaciones porque el propio contenedor incluye todas las dependencias que necesita.</span><span class="sxs-lookup"><span data-stu-id="1c331-112">The main characteristic of a container is that it makes the environment the same across different deployments because the container itself comes with all the dependencies it needs.</span></span> <span data-ttu-id="1c331-113">Puede depurar la aplicación en la máquina y, a continuación, implementarla en otra máquina con el mismo entorno garantizado.</span><span class="sxs-lookup"><span data-stu-id="1c331-113">You can debug the application on your machine, and then deploy it to another machine, with the same environment guaranteed.</span></span>

<span data-ttu-id="1c331-114">Un contenedor es una instancia de una imagen de contenedor.</span><span class="sxs-lookup"><span data-stu-id="1c331-114">A container is an instance of a container image.</span></span> <span data-ttu-id="1c331-115">Una imagen de contenedor es una manera de empaquetar una aplicación o un servicio (como una instantánea) y, después, implementarla de forma confiable y reproducible.</span><span class="sxs-lookup"><span data-stu-id="1c331-115">A container image is a way to package an app or service (like a snapshot), and then deploy it in a reliable and reproducible way.</span></span> <span data-ttu-id="1c331-116">Podría decirse que Docker no solo es una tecnología, sino también una filosofía y un proceso.</span><span class="sxs-lookup"><span data-stu-id="1c331-116">You could say that Docker is not only a technology-it's also a philosophy and a process.</span></span>

<span data-ttu-id="1c331-117">A medida que los contenedores son cada vez más comunes, se están convirtiendo en una "unidad de implementación" en todo el sector.</span><span class="sxs-lookup"><span data-stu-id="1c331-117">As containers daily become more common, they are becoming an industry-wide "unit of deployment."</span></span>

## <a name="benefits-of-containers-docker-engine-on-linux-or-windows"></a><span data-ttu-id="1c331-118">Ventajas de los contenedores (motor de Docker en Linux o Windows)</span><span class="sxs-lookup"><span data-stu-id="1c331-118">Benefits of containers (Docker Engine on Linux or Windows)</span></span>

<span data-ttu-id="1c331-119">La creación de aplicaciones mediante contenedores, que también podrían definirse como bloques de creación ligeros, ofrece un aumento significativo en la agilidad para crear, enviar y ejecutar cualquier aplicación, en cualquier infraestructura.</span><span class="sxs-lookup"><span data-stu-id="1c331-119">Building applications by using containers-which also might be defined as lightweight building blocks-offers a significant increase in agility for building, shipping, and running any application, across any infrastructure.</span></span>

<span data-ttu-id="1c331-120">Con los contenedores, puede llevar cualquier aplicación del desarrollo a la producción con pocos cambios en el código, e incluso ninguno, gracias a la integración de Docker entre las herramientas de desarrollo de Microsoft, los sistemas operativos y la nube.</span><span class="sxs-lookup"><span data-stu-id="1c331-120">With containers, you can take any app from development to production with little or no code change, thanks to Docker integration across Microsoft developer tools, operating systems, and the cloud.</span></span>

<span data-ttu-id="1c331-121">Cuando se implementa en máquinas virtuales convencionales, es probable que ya tenga un método para implementar aplicaciones de ASP.NET en las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="1c331-121">When you deploy to plain VMs, you probably already have a method in place for deploying ASP.NET apps to your VMs.</span></span> <span data-ttu-id="1c331-122">Sin embargo, es probable que el método implique varios pasos manuales o complejos procesos automatizados mediante una herramienta de implementación como Puppet o una herramienta similar.</span><span class="sxs-lookup"><span data-stu-id="1c331-122">It's likely, though, that your method involves multiple manual steps or complex automated processes by using a deployment tool like Puppet, or a similar tool.</span></span> <span data-ttu-id="1c331-123">Es posible que necesite realizar tareas como la modificación de elementos de configuración, la copia de contenido de la aplicación entre servidores y la ejecución de programas de instalación interactiva basados en configuraciones .msi, seguidos de pruebas.</span><span class="sxs-lookup"><span data-stu-id="1c331-123">You might need to perform tasks like modifying configuration items, copying application content between servers, and running interactive setup programs based on .msi setups, followed by testing.</span></span> <span data-ttu-id="1c331-124">Todos estos pasos de la implementación agregan tiempo y riesgo a las implementaciones.</span><span class="sxs-lookup"><span data-stu-id="1c331-124">All those steps in the deployment add time and risk to deployments.</span></span> <span data-ttu-id="1c331-125">Obtendrá errores cada vez que una dependencia no esté presente en el entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="1c331-125">You will get failures whenever a dependency is not present in the target environment.</span></span>

<span data-ttu-id="1c331-126">En los contenedores de Windows, el proceso de empaquetado de aplicaciones está totalmente automatizado.</span><span class="sxs-lookup"><span data-stu-id="1c331-126">In Windows Containers, the process of packaging applications is fully automated.</span></span> <span data-ttu-id="1c331-127">Los contenedores de Windows se basan en la plataforma Docker, que ofrece actualizaciones automáticas y reversiones para implementaciones de contenedores.</span><span class="sxs-lookup"><span data-stu-id="1c331-127">Windows Containers is based on the Docker platform, which offers automatic updates and rollbacks for container deployments.</span></span> <span data-ttu-id="1c331-128">La mejora principal que obtiene al usar el motor de Docker es que crea imágenes, que son como las instantáneas de la aplicación, con todas sus dependencias.</span><span class="sxs-lookup"><span data-stu-id="1c331-128">The main improvement you get from using the Docker engine is that you create images, which are like snapshots of your application, with all its dependencies.</span></span> <span data-ttu-id="1c331-129">Las imágenes son imágenes de Docker (una imagen de contenedor de Windows, en este caso).</span><span class="sxs-lookup"><span data-stu-id="1c331-129">The images are Docker images (a Windows container image, in this case).</span></span> <span data-ttu-id="1c331-130">Las imágenes ejecutan aplicaciones de ASP.NET en contenedores, sin volver al código fuente.</span><span class="sxs-lookup"><span data-stu-id="1c331-130">The images run ASP.NET apps in containers, without going back to source code.</span></span> <span data-ttu-id="1c331-131">La instantánea de contenedor se convierte en la unidad de implementación.</span><span class="sxs-lookup"><span data-stu-id="1c331-131">The container snapshot becomes the unit of deployment.</span></span>

<span data-ttu-id="1c331-132">Muchas organizaciones incluyen en contenedores aplicaciones monolíticas existentes por las siguientes razones:</span><span class="sxs-lookup"><span data-stu-id="1c331-132">Many organizations are containerizing existing monolithic applications for the following reasons:</span></span>

- <span data-ttu-id="1c331-133">**Agilidad de las versiones mediante una implementación mejorada**.</span><span class="sxs-lookup"><span data-stu-id="1c331-133">**Release agility through improved deployment**.</span></span> <span data-ttu-id="1c331-134">Un contenedor ofrece un contrato de implementación coherente entre el desarrollo y las operaciones.</span><span class="sxs-lookup"><span data-stu-id="1c331-134">Containers offer a consistent deployment contract between development and operations.</span></span> <span data-ttu-id="1c331-135">Cuando se utilizan los contenedores, no escuchará a los desarrolladores decir "Si funciona en mi máquina, ¿por qué no en producción?"</span><span class="sxs-lookup"><span data-stu-id="1c331-135">When you use containers, you won't hear developers say, "It works on my machine, why not in production?"</span></span> <span data-ttu-id="1c331-136">Pueden decir "que se ejecuta como un contenedor, por lo que se ejecutará en producción".</span><span class="sxs-lookup"><span data-stu-id="1c331-136">They can say, "It runs as a container, so it will run in production."</span></span> <span data-ttu-id="1c331-137">La aplicación empaquetada, con todas sus dependencias, se puede ejecutar en cualquier entorno basado en un contenedor compatible.</span><span class="sxs-lookup"><span data-stu-id="1c331-137">The packaged application, with all its dependencies, can be executed in any supported container-based environment.</span></span> <span data-ttu-id="1c331-138">Se ejecutará de la forma en que se pretendía que se ejecutara en todos los destinos de implementación (desarrollo, control de calidad, almacenamiento provisional, producción).</span><span class="sxs-lookup"><span data-stu-id="1c331-138">It will run the way it was intended to run in all deployment targets (dev, QA, staging, production).</span></span> <span data-ttu-id="1c331-139">Los contenedores eliminan la mayoría de las fricciones cuando pasan de una fase a la siguiente, lo que mejora en gran medida la implementación, y se puede enviar más rápidamente.</span><span class="sxs-lookup"><span data-stu-id="1c331-139">Containers eliminate most frictions when they move from one stage to the next, which greatly improves deployment, and you can ship faster.</span></span>

- <span data-ttu-id="1c331-140">**Reducción de costos**.</span><span class="sxs-lookup"><span data-stu-id="1c331-140">**Cost reductions**.</span></span> <span data-ttu-id="1c331-141">Los contenedores permiten reducir los costos, ya sea mediante la consolidación y eliminación de hardware existente, o por la ejecución de aplicaciones a una densidad más alta por unidad de hardware.</span><span class="sxs-lookup"><span data-stu-id="1c331-141">Containers lead to lower costs, either by the consolidation and removal of existing hardware, or from running applications at a higher density per unit of hardware.</span></span>

- <span data-ttu-id="1c331-142">**Portabilidad**.</span><span class="sxs-lookup"><span data-stu-id="1c331-142">**Portability**.</span></span> <span data-ttu-id="1c331-143">Los contenedores son modulares y portátiles.</span><span class="sxs-lookup"><span data-stu-id="1c331-143">Containers are modular and portable.</span></span> <span data-ttu-id="1c331-144">Los contenedores de Docker se admiten en cualquier sistema operativo de servidor (Linux y Windows), en cualquier nube pública principal (Microsoft Azure, Amazon AWS, Google, IBM) y en entornos de nube locales y privados o híbridos.</span><span class="sxs-lookup"><span data-stu-id="1c331-144">Docker containers are supported on any server operating system (Linux and Windows), in any major public cloud (Microsoft Azure, Amazon AWS, Google, IBM), and in on-premises and private or hybrid cloud environments.</span></span>

- <span data-ttu-id="1c331-145">**Control**.</span><span class="sxs-lookup"><span data-stu-id="1c331-145">**Control**.</span></span> <span data-ttu-id="1c331-146">Los contenedores ofrecen un entorno flexible y seguro que se controla en el nivel de contenedor.</span><span class="sxs-lookup"><span data-stu-id="1c331-146">Containers offer a flexible and secure environment that's controlled at the container level.</span></span> <span data-ttu-id="1c331-147">Un contenedor se puede proteger, aislar e incluso limitar mediante el establecimiento de directivas de restricción de ejecución en el contenedor.</span><span class="sxs-lookup"><span data-stu-id="1c331-147">A container can be secured, isolated, and even limited by setting execution constraint policies on the container.</span></span> <span data-ttu-id="1c331-148">Tal como se detalla en la sección acerca de los contenedores de Windows, los contenedores de Windows Server 2016 y Hyper-V ofrecen opciones adicionales de soporte técnico empresarial.</span><span class="sxs-lookup"><span data-stu-id="1c331-148">As detailed in the section about Windows Containers, Windows Server 2016 and Hyper-V containers offer additional enterprise support options.</span></span>

<span data-ttu-id="1c331-149">En última instancia, las mejoras significativas en la agilidad, la portabilidad y el control conducen a importantes reducciones de costos cuando se usan contenedores para desarrollar y mantener aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="1c331-149">Significant improvements in agility, portability, and control ultimately lead to significant cost reductions when you use containers to develop and maintain applications.</span></span>

## <a name="what-is-docker"></a><span data-ttu-id="1c331-150">¿Qué es Docker?</span><span class="sxs-lookup"><span data-stu-id="1c331-150">What is Docker?</span></span>

<span data-ttu-id="1c331-151">[Docker](https://www.docker.com/) es un [proyecto de código abierto](https://github.com/docker/docker) que automatiza la implementación de aplicaciones como contenedores portátiles y autosuficientes que se pueden ejecutar en la nube o localmente.</span><span class="sxs-lookup"><span data-stu-id="1c331-151">[Docker](https://www.docker.com/) is an [open-source project](https://github.com/docker/docker) that automates the deployment of applications as portable, self-sufficient containers that can run in the cloud or on-premises.</span></span> <span data-ttu-id="1c331-152">Docker es también una [empresa](https://www.docker.com/) que promueve esta tecnología y la hace evolucionar.</span><span class="sxs-lookup"><span data-stu-id="1c331-152">Docker is also a [company](https://www.docker.com/) that promotes and evolves this technology.</span></span> <span data-ttu-id="1c331-153">La empresa funciona en colaboración con la nube, Linux y los proveedores de Windows, incluido Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1c331-153">The company works in collaboration with cloud, Linux, and Windows vendors, including Microsoft.</span></span>

![Diagrama que muestra cómo Docker implementa contenedores en la nube híbrida.](./media/deploy-existing-net-apps-as-windows-containers/docker-deploys-containers-all-layers.png)

<span data-ttu-id="1c331-155">**Figura 4-6.**</span><span class="sxs-lookup"><span data-stu-id="1c331-155">**Figure 4-6.**</span></span> <span data-ttu-id="1c331-156">Docker implementa contenedores en todas las capas de la nube híbrida</span><span class="sxs-lookup"><span data-stu-id="1c331-156">Docker deploys containers at all layers of the hybrid cloud</span></span>

<span data-ttu-id="1c331-157">Para alguien familiarizado con las máquinas virtuales, es posible que los contenedores parezcan bastante similares.</span><span class="sxs-lookup"><span data-stu-id="1c331-157">To someone familiar with virtual machines, containers might appear to be remarkably similar.</span></span> <span data-ttu-id="1c331-158">Un contenedor ejecuta un sistema operativo, tiene un sistema de archivos y se puede acceder a él a través de una red, al igual que un equipo físico o virtual.</span><span class="sxs-lookup"><span data-stu-id="1c331-158">A container runs an operating system, has a file system, and can be accessed over a network, just like a physical or virtual computer system.</span></span> <span data-ttu-id="1c331-159">Dicho esto, la tecnología y los conceptos relacionados con los contenedores son muy diferentes de las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="1c331-159">However, the technology and concepts behind containers are vastly different from virtual machines.</span></span> <span data-ttu-id="1c331-160">Desde el punto de vista del desarrollador, el contenedor debe tratarse como un único proceso.</span><span class="sxs-lookup"><span data-stu-id="1c331-160">From a developer point of view, a container must be treated more like a single process.</span></span> <span data-ttu-id="1c331-161">De hecho, el contenedor tiene un único punto de entrada para un proceso.</span><span class="sxs-lookup"><span data-stu-id="1c331-161">In fact, a container has a single entry point for one process.</span></span>

<span data-ttu-id="1c331-162">Los contenedores de Docker (por simplicidad *contenedores*) se pueden ejecutar de forma nativa en Linux y Windows.</span><span class="sxs-lookup"><span data-stu-id="1c331-162">Docker containers (for simplicity, *containers*) can run natively on Linux and Windows.</span></span> <span data-ttu-id="1c331-163">Al ejecutar contenedores normales, los contenedores de Windows solo pueden ejecutarse en hosts de Windows (un servidor host o una máquina virtual) y los contenedores de Linux solo pueden ejecutarse en hosts de Linux.</span><span class="sxs-lookup"><span data-stu-id="1c331-163">When running regular containers, Windows containers can run only on Windows hosts (a host server or a VM), and Linux containers can run only on Linux hosts.</span></span> <span data-ttu-id="1c331-164">Pero en las versiones recientes de los contenedores de Windows Server e Hyper-V, también se puede ejecutar un contenedor de Linux de forma nativa en Windows Server mediante la tecnología de aislamiento de Hyper-V que actualmente está disponible solo en los contenedores de Windows Server.</span><span class="sxs-lookup"><span data-stu-id="1c331-164">However, in recent versions of Windows Server and Hyper-V containers, a Linux container can also run natively on Windows Server by using the Hyper-V isolation technology that currently is available only in Windows Server Containers.</span></span>

<span data-ttu-id="1c331-165">En un futuro próximo, serán posibles, e incluso comunes, los entornos mixtos con contenedores de Linux y Windows.</span><span class="sxs-lookup"><span data-stu-id="1c331-165">In the near future, mixed environments that have both Linux and Windows containers will be possible and even common.</span></span>

## <a name="benefits-of-windows-containers-for-your-existing-net-applications"></a><span data-ttu-id="1c331-166">Ventajas de los contenedores de Windows para las aplicaciones .NET existentes</span><span class="sxs-lookup"><span data-stu-id="1c331-166">Benefits of Windows Containers for your existing .NET applications</span></span>

<span data-ttu-id="1c331-167">Las ventajas de usar contenedores de Windows son fundamentalmente las mismas ventajas que se obtienen de los contenedores en general.</span><span class="sxs-lookup"><span data-stu-id="1c331-167">The benefits of using Windows Containers are fundamentally the same benefits you get from containers in general.</span></span> <span data-ttu-id="1c331-168">El uso de contenedores de Windows trata de mejorar considerablemente la agilidad, la portabilidad y el control.</span><span class="sxs-lookup"><span data-stu-id="1c331-168">Using Windows Containers is about greatly improving agility, portability, and control.</span></span>

<span data-ttu-id="1c331-169">Las aplicaciones .NET existentes hacen referencia a las aplicaciones que se crearon con .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1c331-169">Existing .NET applications refer to those applications that were created using the .NET Framework.</span></span> <span data-ttu-id="1c331-170">Por ejemplo, puede tratarse de aplicaciones web de ASP.NET tradicionales; no usan .NET Core o .NET 5.0, que es más reciente y se ejecuta en varias plataformas en Linux, Windows y MacOS.</span><span class="sxs-lookup"><span data-stu-id="1c331-170">For example, they might be traditional ASP.NET web applications-they don't use .NET Core or .NET 5.0, which is newer and runs cross-platform on Linux, Windows, and MacOS.</span></span>

<span data-ttu-id="1c331-171">La dependencia principal en .NET Framework es Windows.</span><span class="sxs-lookup"><span data-stu-id="1c331-171">The main dependency in the .NET Framework is Windows.</span></span> <span data-ttu-id="1c331-172">También tiene dependencias secundarias, como IIS y System.Web en ASP.NET tradicional.</span><span class="sxs-lookup"><span data-stu-id="1c331-172">It also has secondary dependencies, like IIS, and System.Web in traditional ASP.NET.</span></span>

<span data-ttu-id="1c331-173">Una aplicación .NET Framework se debe ejecutar en Windows.</span><span class="sxs-lookup"><span data-stu-id="1c331-173">A .NET Framework application must run on Windows, period.</span></span> <span data-ttu-id="1c331-174">Si quiere incluir en contenedores las aplicaciones de .NET Framework existentes y no puede o no quiere invertir en una migración a .NET Core o versiones posteriores ("si funciona correctamente, no se migra"), la única opción que tiene para los contenedores es usar contenedores de Windows.</span><span class="sxs-lookup"><span data-stu-id="1c331-174">If you want to containerize existing .NET Framework applications and you can't or don't want to invest in a migration to .NET Core or later("If it works properly, don't migrate it"), the only choice you have for containers is to use Windows Containers.</span></span>

<span data-ttu-id="1c331-175">Por lo tanto, una de las principales ventajas de los contenedores de Windows es que ofrecen una forma de modernizar las aplicaciones .NET Framework existentes que se ejecutan en Windows a través de la inclusión en contenedores.</span><span class="sxs-lookup"><span data-stu-id="1c331-175">So, one of the main benefits of Windows Containers is that they offer you a way to modernize your existing .NET Framework applications that are running on Windows-through containerization.</span></span> <span data-ttu-id="1c331-176">En última instancia, los contenedores de Windows le aportan las ventajas que está buscando mediante contenedores: agilidad, portabilidad y un mejor control.</span><span class="sxs-lookup"><span data-stu-id="1c331-176">Ultimately, Windows Containers gets you the benefits that you are looking for by using containers-agility, portability, and better control.</span></span>

## <a name="choose-an-os-to-target-with-net-based-containers"></a><span data-ttu-id="1c331-177">Elección de un sistema operativo de destino con contenedores basados en .NET</span><span class="sxs-lookup"><span data-stu-id="1c331-177">Choose an OS to target with .NET-based containers</span></span>

<span data-ttu-id="1c331-178">Teniendo en cuenta la diversidad de sistemas operativos que son compatibles con Docker, así como las diferencias entre .NET Framework y .NET Core, debe escoger un sistema operativo de destino específico y versiones específicas basadas en la plataforma que utilice.</span><span class="sxs-lookup"><span data-stu-id="1c331-178">Given the diversity of operating systems that are supported by Docker, as well as the differences between .NET Framework and .NET Core, you should target a specific OS and specific versions based on the framework you are using.</span></span>

<span data-ttu-id="1c331-179">Para Windows, puede usar Windows Server Core o Nano Server de Windows.</span><span class="sxs-lookup"><span data-stu-id="1c331-179">For Windows, you can use Windows Server Core or Windows Nano Server.</span></span> <span data-ttu-id="1c331-180">Estas versiones de Windows proporcionan diferentes características (como IIS frente a un servidor web autohospedado, como Kestrel) que las aplicaciones de .NET Framework o .NET podrían necesitar.</span><span class="sxs-lookup"><span data-stu-id="1c331-180">These Windows versions provide different characteristics (like IIS versus a self-hosted web server like Kestrel) that might be needed by .NET Framework or .NET applications.</span></span>

<span data-ttu-id="1c331-181">Para Linux, hay varias distribuciones disponibles y compatibles en imágenes oficiales del Docker de .NET (por ejemplo, Debian).</span><span class="sxs-lookup"><span data-stu-id="1c331-181">For Linux, multiple distros are available and supported in official .NET Docker images (like Debian).</span></span>

<span data-ttu-id="1c331-182">En la figura 4-7 se muestran las versiones del sistema operativo a las que puede dirigirse, en función de la versión de la aplicación de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1c331-182">Figure 4-7 shows OS versions that you can target, depending on the app's version of the .NET Framework.</span></span>

![Diagrama que muestra el sistema operativo de destino en función de la versión de .NET Framework.](./media/deploy-existing-net-apps-as-windows-containers/dotnet-framework-operating-systems.png)

<span data-ttu-id="1c331-184">**Figura 4-7.**</span><span class="sxs-lookup"><span data-stu-id="1c331-184">**Figure 4-7.**</span></span> <span data-ttu-id="1c331-185">Sistemas operativos de destino en función de la versión de .NET Framework</span><span class="sxs-lookup"><span data-stu-id="1c331-185">Operating systems to target based on .NET Framework version</span></span>

<span data-ttu-id="1c331-186">En los escenarios de migración de aplicaciones existentes o heredadas basadas en aplicaciones .NET Framework, las dependencias principales se encuentran en Windows e IIS.</span><span class="sxs-lookup"><span data-stu-id="1c331-186">In migration scenarios for existing or legacy applications that are based on .NET Framework applications, the main dependencies are on Windows and IIS.</span></span> <span data-ttu-id="1c331-187">La única opción es usar imágenes de Docker basadas en Windows Server Core y en .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1c331-187">Your only option is to use Docker images based on Windows Server Core and the .NET Framework.</span></span>

<span data-ttu-id="1c331-188">Al agregar el nombre de imagen al archivo Dockerfile, puede seleccionar el sistema operativo y la versión mediante el uso de una etiqueta, como en los ejemplos siguientes para las imágenes de contenedores de Windows basadas en .NET Framework:</span><span class="sxs-lookup"><span data-stu-id="1c331-188">When you add the image name to your Dockerfile file, you can select the operating system and version by using a tag, as in the following examples for .NET Framework-based Windows container images:</span></span>

> | <span data-ttu-id="1c331-189">**Tag**</span><span class="sxs-lookup"><span data-stu-id="1c331-189">**Tag**</span></span> | <span data-ttu-id="1c331-190">**Sistema y versión**</span><span class="sxs-lookup"><span data-stu-id="1c331-190">**System and version**</span></span> |
> |---|---|
> | <span data-ttu-id="1c331-191">**mcr.microsoft.com/dotnet/framework/runtime:4.x-windowsservercore-20H2**</span><span class="sxs-lookup"><span data-stu-id="1c331-191">**mcr.microsoft.com/dotnet/framework/runtime:4.x-windowsservercore-20H2**</span></span> | <span data-ttu-id="1c331-192">.NET Framework 4.x en Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="1c331-192">.NET Framework 4.x on Windows Server Core</span></span> |
> | <span data-ttu-id="1c331-193">**mcr.microsoft.com/dotnet/framework/aspnet:4.x-windowsservercore-20H2**</span><span class="sxs-lookup"><span data-stu-id="1c331-193">**mcr.microsoft.com/dotnet/framework/aspnet:4.x-windowsservercore-20H2**</span></span> | <span data-ttu-id="1c331-194">.NET Framework 4.x con personalización ASP.NET adicional, en Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="1c331-194">.NET Framework 4.x with additional ASP.NET customization, on Windows Server Core</span></span> |

<span data-ttu-id="1c331-195">Para .NET (multiplataforma para Linux y Windows), las etiquetas tendrían el aspecto siguiente:</span><span class="sxs-lookup"><span data-stu-id="1c331-195">For .NET (cross-platform for Linux and Windows), the tags would look like the following:</span></span>

> | <span data-ttu-id="1c331-196">**Tag**</span><span class="sxs-lookup"><span data-stu-id="1c331-196">**Tag**</span></span> | <span data-ttu-id="1c331-197">**Sistema y versión**</span><span class="sxs-lookup"><span data-stu-id="1c331-197">**System and version**</span></span>
> |---|---|
> | <span data-ttu-id="1c331-198">**mcr.microsoft.com/dotnet/runtime:5.0**</span><span class="sxs-lookup"><span data-stu-id="1c331-198">**mcr.microsoft.com/dotnet/runtime:5.0**</span></span> | <span data-ttu-id="1c331-199">Entorno de ejecución de .NET solo en Linux</span><span class="sxs-lookup"><span data-stu-id="1c331-199">.NET runtime-only on Linux</span></span> |
> | <span data-ttu-id="1c331-200">**mcr.microsoft.com/dotnet/runtime:5.0-nanoserver-20H2**</span><span class="sxs-lookup"><span data-stu-id="1c331-200">**mcr.microsoft.com/dotnet/runtime:5.0-nanoserver-20H2**</span></span> | <span data-ttu-id="1c331-201">Entorno de ejecución de .NET solo en Windows Nano Server</span><span class="sxs-lookup"><span data-stu-id="1c331-201">.NET runtime-only on Windows Nano Server</span></span> |

### <a name="multi-arch-images"></a><span data-ttu-id="1c331-202">Imágenes multiarquitectura</span><span class="sxs-lookup"><span data-stu-id="1c331-202">Multi-arch images</span></span>

<span data-ttu-id="1c331-203">A partir de mediados de 2017, también puede usar una nueva característica de Docker llamada [imágenes multiarquitectura](https://github.com/moby/moby/issues/15866).</span><span class="sxs-lookup"><span data-stu-id="1c331-203">Beginning in mid-2017, you can also use a new feature in Docker called [multi-arch](https://github.com/moby/moby/issues/15866) images.</span></span> <span data-ttu-id="1c331-204">Las imágenes de Docker de .NET pueden usar etiquetas multiarquitectura.</span><span class="sxs-lookup"><span data-stu-id="1c331-204">.NET Docker images can use multi-arch tags.</span></span> <span data-ttu-id="1c331-205">Los archivos de Dockerfile ya no necesitan definir el sistema operativo de destino.</span><span class="sxs-lookup"><span data-stu-id="1c331-205">Your Dockerfile files no longer need to define the operating system that you are targeting.</span></span> <span data-ttu-id="1c331-206">La característica de multiarquitectura permite usar una sola etiqueta en varias configuraciones de máquina.</span><span class="sxs-lookup"><span data-stu-id="1c331-206">The multi-arch feature allows a single tag to be used across multiple machine configurations.</span></span> <span data-ttu-id="1c331-207">Por ejemplo, con la multiarquitectura, puede usar una etiqueta común: **mcr.microsoft.com/dotnet/runtime:5.0**.</span><span class="sxs-lookup"><span data-stu-id="1c331-207">For instance, with multi-arch, you can use one common tag: **mcr.microsoft.com/dotnet/runtime:5.0**.</span></span> <span data-ttu-id="1c331-208">Si extrae esa etiqueta de un entorno de contenedores de Linux, obtendrá la imagen basada en Debian.</span><span class="sxs-lookup"><span data-stu-id="1c331-208">If you pull that tag from a Linux container environment, you get the Debian-based image.</span></span> <span data-ttu-id="1c331-209">Si extrae esa etiqueta de un entorno de contenedor de Windows, obtendrá la imagen basada en Nano Server.</span><span class="sxs-lookup"><span data-stu-id="1c331-209">If you pull that tag from a Windows container environment, you get the Nano Server-based image.</span></span>

<span data-ttu-id="1c331-210">En el caso de las imágenes de .NET Framework, ya que .NET Framework tradicional solo admite Windows, no puede usar la característica de multiarquitectura.</span><span class="sxs-lookup"><span data-stu-id="1c331-210">For .NET Framework images, because the traditional .NET Framework supports only Windows, you cannot use the multi-arch feature.</span></span>

## <a name="windows-container-types"></a><span data-ttu-id="1c331-211">Tipos de contenedores de Windows</span><span class="sxs-lookup"><span data-stu-id="1c331-211">Windows container types</span></span>

<span data-ttu-id="1c331-212">Como los contenedores de Linux, los contenedores de Windows Server se administran mediante el motor de Docker.</span><span class="sxs-lookup"><span data-stu-id="1c331-212">Like Linux containers, Windows Server containers are managed by using Docker Engine.</span></span> <span data-ttu-id="1c331-213">A diferencia de los contenedores de Linux, los contenedores de Windows incluyen dos tipos diferentes de contenedores o entornos de ejecución: contenedores de Windows Server y aislamiento de Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="1c331-213">Unlike Linux containers, Windows containers include two different container types, or run times-Windows Server containers and Hyper-V isolation.</span></span>

<span data-ttu-id="1c331-214">**Contenedores de Windows Server**: ofrecen aislamiento de aplicaciones mediante la tecnología de aislamiento de proceso y de espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="1c331-214">**Windows Server containers**: Provides application isolation through process and namespace isolation technology.</span></span> <span data-ttu-id="1c331-215">Un contenedor de Windows Server comparte el kernel con el host de contenedor y con todos los contenedores que se ejecutan en el host.</span><span class="sxs-lookup"><span data-stu-id="1c331-215">A Windows Server container shares a kernel with the container host and all containers that are running on the host.</span></span> <span data-ttu-id="1c331-216">Estos contenedores no proporcionan un límite de seguridad hostil y no se deben usar para aislar el código que no es de confianza.</span><span class="sxs-lookup"><span data-stu-id="1c331-216">These containers do not provide a hostile security boundary and should not be used to isolate untrusted code.</span></span> <span data-ttu-id="1c331-217">Debido al espacio compartido del kernel, estos contenedores requieren la misma versión y configuración de kernel.</span><span class="sxs-lookup"><span data-stu-id="1c331-217">Because of the shared kernel space, these containers require the same kernel version and configuration.</span></span>

<span data-ttu-id="1c331-218">**Aislamiento de Hyper-V**: amplía el aislamiento que ofrecen los contenedores de Windows Server mediante la ejecución de cada contenedor en una máquina virtual altamente optimizada.</span><span class="sxs-lookup"><span data-stu-id="1c331-218">**Hyper-V isolation**: Expands on the isolation provided by Windows Server Containers by running each container on a highly optimized VM.</span></span> <span data-ttu-id="1c331-219">En esta configuración, el kernel del host del contenedor no se comparte con otros contenedores del mismo host.</span><span class="sxs-lookup"><span data-stu-id="1c331-219">In this configuration, the kernel of the container host is not shared with other containers on the same host.</span></span> <span data-ttu-id="1c331-220">Estos contenedores están diseñados para el hospedaje de varios inquilinos hostiles, con las mismas garantías de seguridad de una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="1c331-220">These containers are designed for hostile multitenant hosting, with the same security assurances of a VM.</span></span> <span data-ttu-id="1c331-221">Dado que estos contenedores no comparten el kernel con el host u otros contenedores en el host, pueden ejecutar los kernels con diferentes versiones y configuraciones (con versiones compatibles).</span><span class="sxs-lookup"><span data-stu-id="1c331-221">Because these containers don't share the kernel with the host or other containers on the host, they can run kernels with different versions and configurations (with supported versions).</span></span> <span data-ttu-id="1c331-222">Por ejemplo, todos los contenedores de Windows en Windows 10 usan el aislamiento de Hyper-V para utilizar la configuración y la versión del kernel de Windows Server.</span><span class="sxs-lookup"><span data-stu-id="1c331-222">For example, all Windows containers on Windows 10 use Hyper-V isolation to utilize the Windows Server kernel version and configuration.</span></span>

<span data-ttu-id="1c331-223">Ejecutar un contenedor en Windows con o sin el aislamiento de Hyper-V es una decisión en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="1c331-223">Running a container on Windows with or without Hyper-V isolation is a run-time decision.</span></span> <span data-ttu-id="1c331-224">Puede optar por crear inicialmente el contenedor con el aislamiento de Hyper-V y, en tiempo de ejecución, elegir ejecutarlo como un contenedor de Windows Server.</span><span class="sxs-lookup"><span data-stu-id="1c331-224">You might choose to create the container with Hyper-V isolation initially, and at run time, choose to run it as a Windows Server container instead.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="1c331-225">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="1c331-225">Additional resources</span></span>

- <span data-ttu-id="1c331-226">**Documentación sobre los contenedores de Windows**</span><span class="sxs-lookup"><span data-stu-id="1c331-226">**Windows Containers documentation**</span></span>

    <https://docs.microsoft.com/virtualization/windowscontainers/>

- <span data-ttu-id="1c331-227">**Aspectos básicos de los contenedores de Windows**</span><span class="sxs-lookup"><span data-stu-id="1c331-227">**Windows Containers fundamentals**</span></span>

    <https://docs.microsoft.com/virtualization/windowscontainers/about/>

- <span data-ttu-id="1c331-228">**Infografía: Microsoft y contenedores**</span><span class="sxs-lookup"><span data-stu-id="1c331-228">**Infographic: Microsoft and containers**</span></span>

    <https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf>

## <a name="the-container-ecosystem-in-azure"></a><span data-ttu-id="1c331-229">El ecosistema de contenedores de Azure</span><span class="sxs-lookup"><span data-stu-id="1c331-229">The container ecosystem in Azure</span></span>

<span data-ttu-id="1c331-230">En las secciones anteriores, se ha explicado cuáles son las ventajas de los contenedores de Docker, así como los detalles de las imágenes de contenedor específicas para aplicaciones .NET.</span><span class="sxs-lookup"><span data-stu-id="1c331-230">In previous sections, it's been explained what the benefits of Docker containers are as well as details on the specific container images for .NET applications.</span></span> <span data-ttu-id="1c331-231">Toda la información genérica es fundamental para desarrollar o incluir la aplicación en contenedores.</span><span class="sxs-lookup"><span data-stu-id="1c331-231">All that generic information is fundamental in order to develop or containerize an application.</span></span>
<span data-ttu-id="1c331-232">Sin embargo, al pensar en el entorno de implementación de producción o incluso en entornos de control de calidad y desarrollo y pruebas, Microsoft Azure proporciona una amplia variedad de opciones, un ecosistema de contenedores completo en la nube (que se muestra en el diagrama siguiente).</span><span class="sxs-lookup"><span data-stu-id="1c331-232">However, when thinking about the production deployment environment or even QA and Dev/Test environments, Microsoft Azure provides an open and broad variety of choices, a full container ecosystem in the cloud (shown in the diagram below).</span></span> <span data-ttu-id="1c331-233">En función de las necesidades específicas de la aplicación, debe elegir uno u otro producto de Azure.</span><span class="sxs-lookup"><span data-stu-id="1c331-233">Depending on your specific application's needs, you should choose one or another Azure product.</span></span>

![Diagrama del ecosistema de contenedores de Azure.](./media/deploy-existing-net-apps-as-windows-containers/azure-container-ecosystem.png)

<span data-ttu-id="1c331-235">**Figura 4-7.5.**</span><span class="sxs-lookup"><span data-stu-id="1c331-235">**Figure 4-7.5.**</span></span> <span data-ttu-id="1c331-236">El ecosistema de contenedores de Azure</span><span class="sxs-lookup"><span data-stu-id="1c331-236">The container ecosystem in Azure</span></span>

<span data-ttu-id="1c331-237">Desde el ecosistema de contenedores de Azure, los siguientes productos admiten contenedores que se consideran infraestructura:</span><span class="sxs-lookup"><span data-stu-id="1c331-237">From the container ecosystem in Azure, the following products supporting containers that are considered infrastructure:</span></span>

- <span data-ttu-id="1c331-238">**Azure Container Instances (ACI)**</span><span class="sxs-lookup"><span data-stu-id="1c331-238">**Azure Container Instances (ACI)**</span></span>
- <span data-ttu-id="1c331-239">**Azure Virtual Machines** (con compatibilidad de contenedor)</span><span class="sxs-lookup"><span data-stu-id="1c331-239">**Azure Virtual Machines** (With container's support)</span></span>
- <span data-ttu-id="1c331-240">**Azure Virtual Machine Scale Sets** (con compatibilidad de contenedor)</span><span class="sxs-lookup"><span data-stu-id="1c331-240">**Azure Virtual Machine Scale Sets** (With container's support)</span></span>

<span data-ttu-id="1c331-241">En estos tres productos, ACI ofrece una gran ventaja, que es el hecho de que no es necesario mantener el sistema operativo subyacente y no es necesario actualizar o revisar; sin embargo, ACI todavía se coloca en el nivel de infraestructura, como se explica mejor en las próximas secciones de este libro.</span><span class="sxs-lookup"><span data-stu-id="1c331-241">From those three, ACI provides a great benefit, which is the fact that you don't need to maintain the underlying OS, no need for you to upgrade/patch, etc. but ACI still is positioned in the infrastructure level, as better explained in the upcoming sections of this book.</span></span>

<span data-ttu-id="1c331-242">Los productos de Azure que admiten contenedores que están al mismo tiempo y que se colocan más en el nivel de PaaS (plataforma como servicio) son:</span><span class="sxs-lookup"><span data-stu-id="1c331-242">The products in Azure supporting containers that are at the same time positioned more in the PaaS (Platform as a Service) level are:</span></span>

- <span data-ttu-id="1c331-243">**Azure App Service**</span><span class="sxs-lookup"><span data-stu-id="1c331-243">**Azure App Service**</span></span>
- <span data-ttu-id="1c331-244">**Azure Kubernetes Service (AKS y ACS)**</span><span class="sxs-lookup"><span data-stu-id="1c331-244">**Azure Kubernetes Service (AKS and ACS)**</span></span>
- <span data-ttu-id="1c331-245">**Azure Batch**</span><span class="sxs-lookup"><span data-stu-id="1c331-245">**Azure Batch**</span></span>

<span data-ttu-id="1c331-246">A continuación, Azure Container Registry es un registro de contenedor muy escalable hospedado en Azure que puede usar desde todos los productos anteriores al registrar e implementar imágenes de contenedor personalizadas.</span><span class="sxs-lookup"><span data-stu-id="1c331-246">Then, Azure Container Registry is a high scalable container registry hosted in Azure that you can use from all the previous products when registering and deploying your custom container images.</span></span>

<span data-ttu-id="1c331-247">Además, desde los contenedores, puede consumir otros servicios administrados en Azure como Azure SQL Database, Azure Redis Cache, Azure Cosmos DB, etc.</span><span class="sxs-lookup"><span data-stu-id="1c331-247">In addition, from your containers, you can consume other managed services in Azure like Azure SQL Database, Azure Redis cache, Azure Cosmos DB, etc.</span></span> <span data-ttu-id="1c331-248">Además, hay soluciones y plataformas de terceros disponibles en Azure Marketplace, como Cloud Foundry y OpenShift, donde también puede usar contenedores en Azure.</span><span class="sxs-lookup"><span data-stu-id="1c331-248">plus there are third-party solutions/platforms available in Azure Marketplace like Cloud Foundry and OpenShift where you can also use containers within Azure.</span></span>

<span data-ttu-id="1c331-249">En las secciones siguientes, puede explorar las recomendaciones de Microsoft sobre cuándo usar cada uno de estos productos y soluciones de Azure de forma específica al dirigirse a contenedores de Windows.</span><span class="sxs-lookup"><span data-stu-id="1c331-249">In the next sections, you can explore Microsoft's recommendations on when to use each of those Azure products and solutions specifically when targeting Windows Containers.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="1c331-250">[Anterior](what-about-cloud-native-applications.md)
>[Siguiente](when-not-to-deploy-to-windows-containers.md)</span><span class="sxs-lookup"><span data-stu-id="1c331-250">[Previous](what-about-cloud-native-applications.md)
[Next](when-not-to-deploy-to-windows-containers.md)</span></span>
