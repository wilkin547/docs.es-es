---
title: Supervisión en Azure Kubernetes Service
description: Supervisión en Azure Kubernetes Service
ms.date: 01/19/2021
ms.openlocfilehash: d044337150edddac9e24218ccaeaace1f413e654
ms.sourcegitcommit: f2ab02d9a780819ca2e5310bbcf5cfe5b7993041
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/03/2021
ms.locfileid: "99506037"
---
# <a name="monitoring-in-azure-kubernetes-services"></a><span data-ttu-id="16ef4-103">Supervisión en Azure Kubernetes Service</span><span class="sxs-lookup"><span data-stu-id="16ef4-103">Monitoring in Azure Kubernetes Services</span></span>

<span data-ttu-id="16ef4-104">El registro integrado en Kubernetes es primitivo.</span><span class="sxs-lookup"><span data-stu-id="16ef4-104">The built-in logging in Kubernetes is primitive.</span></span> <span data-ttu-id="16ef4-105">Sin embargo, hay algunas opciones excelentes para obtener los registros de Kubernetes y en un lugar donde se pueden analizar correctamente.</span><span class="sxs-lookup"><span data-stu-id="16ef4-105">However, there are some great options for getting the logs out of Kubernetes and into a place where they can be properly analyzed.</span></span> <span data-ttu-id="16ef4-106">Si necesita supervisar los clústeres de AKS, la configuración de la pila elástica para Kubernetes es una solución excelente.</span><span class="sxs-lookup"><span data-stu-id="16ef4-106">If you need to monitor your AKS clusters, configuring Elastic Stack for Kubernetes is a great solution.</span></span>

## <a name="azure-monitor-for-containers"></a><span data-ttu-id="16ef4-107">Azure Monitor para contenedores</span><span class="sxs-lookup"><span data-stu-id="16ef4-107">Azure Monitor for Containers</span></span>

<span data-ttu-id="16ef4-108">[Azure monitor para contenedores](/azure/azure-monitor/insights/container-insights-overview) admite el consumo de registros no solo de Kubernetes, sino también de otros motores de orquestación como DC/os, Docker Swarm y Red Hat OpenShift.</span><span class="sxs-lookup"><span data-stu-id="16ef4-108">[Azure Monitor for Containers](/azure/azure-monitor/insights/container-insights-overview) supports consuming logs from not just Kubernetes but also from other orchestration engines such as DC/OS, Docker Swarm, and Red Hat OpenShift.</span></span>

<span data-ttu-id="16ef4-109">![Consumo de registros de varios contenedores ](./media/containers-diagram.png)
 **figura 7-10**.</span><span class="sxs-lookup"><span data-stu-id="16ef4-109">![Consuming logs from various containers](./media/containers-diagram.png)
**Figure 7-10**.</span></span> <span data-ttu-id="16ef4-110">Consumo de registros de varios contenedores</span><span class="sxs-lookup"><span data-stu-id="16ef4-110">Consuming logs from various containers</span></span>

<span data-ttu-id="16ef4-111">[Prometheus](https://prometheus.io/) es una conocida solución de supervisión de métricas de código abierto.</span><span class="sxs-lookup"><span data-stu-id="16ef4-111">[Prometheus](https://prometheus.io/) is a popular open source metric monitoring solution.</span></span> <span data-ttu-id="16ef4-112">Forma parte de la base de cálculo nativa de la nube.</span><span class="sxs-lookup"><span data-stu-id="16ef4-112">It is part of the Cloud Native Compute Foundation.</span></span> <span data-ttu-id="16ef4-113">Normalmente, el uso de Prometheus requiere la administración de un servidor de Prometheus con su propio almacén.</span><span class="sxs-lookup"><span data-stu-id="16ef4-113">Typically, using Prometheus requires managing a Prometheus server with its own store.</span></span> <span data-ttu-id="16ef4-114">Sin embargo, [Azure monitor para contenedores proporciona integración directa con puntos de conexión de métricas de Prometheus](/azure/azure-monitor/insights/container-insights-prometheus-integration), por lo que no es necesario un servidor independiente.</span><span class="sxs-lookup"><span data-stu-id="16ef4-114">However, [Azure Monitor for Containers provides direct integration with Prometheus metrics endpoints](/azure/azure-monitor/insights/container-insights-prometheus-integration), so a separate server is not required.</span></span>

<span data-ttu-id="16ef4-115">La información de registro y métrica se recopila no solo de los contenedores que se ejecutan en el clúster, sino también de los propios hosts del clúster.</span><span class="sxs-lookup"><span data-stu-id="16ef4-115">Log and metric information is gathered not just from the containers running in the cluster but also from the cluster hosts themselves.</span></span> <span data-ttu-id="16ef4-116">Permite correlacionar la información de registro de las dos, lo que hace que sea mucho más fácil realizar un seguimiento de un error.</span><span class="sxs-lookup"><span data-stu-id="16ef4-116">It allows correlating log information from the two making it much easier to track down an error.</span></span>

<span data-ttu-id="16ef4-117">La instalación de los recopiladores de registros es diferente en los clústeres de [Windows](/azure/azure-monitor/insights/containers#configure-a-log-analytics-windows-agent-for-kubernetes) y [Linux](/azure/azure-monitor/insights/containers#configure-a-log-analytics-linux-agent-for-kubernetes) .</span><span class="sxs-lookup"><span data-stu-id="16ef4-117">Installing the log collectors differs on [Windows](/azure/azure-monitor/insights/containers#configure-a-log-analytics-windows-agent-for-kubernetes) and [Linux](/azure/azure-monitor/insights/containers#configure-a-log-analytics-linux-agent-for-kubernetes) clusters.</span></span> <span data-ttu-id="16ef4-118">Sin embargo, en ambos casos, la colección de registros se implementa como un [DaemonSet](https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/)Kubernetes, lo que significa que el recopilador de registros se ejecuta como un contenedor en cada uno de los nodos.</span><span class="sxs-lookup"><span data-stu-id="16ef4-118">But in both cases the log collection is implemented as a Kubernetes [DaemonSet](https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/), meaning that the log collector is run as a container on each of the nodes.</span></span>

<span data-ttu-id="16ef4-119">Independientemente del orquestador o del sistema operativo que ejecute el demonio de Azure Monitor, la información de registro se reenvía a las mismas herramientas de Azure Monitor con las que los usuarios están familiarizados.</span><span class="sxs-lookup"><span data-stu-id="16ef4-119">No matter which orchestrator or operating system is running the Azure Monitor daemon, the log information is forwarded to the same Azure Monitor tools with which users are familiar.</span></span> <span data-ttu-id="16ef4-120">Este enfoque garantiza una experiencia paralela en entornos que mezclen distintos orígenes de registro, como un entorno híbrido de Kubernetes/Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="16ef4-120">This approach ensures a parallel experience in environments that mix different log sources such as a hybrid Kubernetes/Azure Functions environment.</span></span>

<span data-ttu-id="16ef4-121">![Un panel de ejemplo que muestra información de registro y métrica de varios contenedores en ejecución. ](./media/containers-dashboard.png)
 **Figura 7-11**.</span><span class="sxs-lookup"><span data-stu-id="16ef4-121">![A sample dashboard showing logging and metric information from a number of running containers.](./media/containers-dashboard.png)
**Figure 7-11**.</span></span> <span data-ttu-id="16ef4-122">Un panel de ejemplo que muestra información de registro y métrica de muchos contenedores en ejecución.</span><span class="sxs-lookup"><span data-stu-id="16ef4-122">A sample dashboard showing logging and metric information from many running containers.</span></span>

## <a name="logfinalize"></a><span data-ttu-id="16ef4-123">Log. Finalize ()</span><span class="sxs-lookup"><span data-stu-id="16ef4-123">Log.Finalize()</span></span>

<span data-ttu-id="16ef4-124">El registro es una de las partes más informadas y, a la mayor parte de lo importante, de la implementación de cualquier aplicación a escala.</span><span class="sxs-lookup"><span data-stu-id="16ef4-124">Logging is one of the most overlooked and yet most important parts of deploying any application at scale.</span></span> <span data-ttu-id="16ef4-125">A medida que aumentan el tamaño y la complejidad de las aplicaciones, lo que hace es la dificultad de depurarlos.</span><span class="sxs-lookup"><span data-stu-id="16ef4-125">As the size and complexity of applications increase, then so does the difficulty of debugging them.</span></span> <span data-ttu-id="16ef4-126">Tener los registros de alta calidad disponibles hace que la depuración sea mucho más fácil y la mueve del dominio "casi imposible" a la "experiencia agradable".</span><span class="sxs-lookup"><span data-stu-id="16ef4-126">Having top quality logs available makes debugging much easier and moves it from the realm of "nearly impossible" to "a pleasant experience".</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="16ef4-127">[Anterior](logging-with-elastic-stack.md)
>[Siguiente](azure-monitor.md)</span><span class="sxs-lookup"><span data-stu-id="16ef4-127">[Previous](logging-with-elastic-stack.md)
[Next](azure-monitor.md)</span></span>
