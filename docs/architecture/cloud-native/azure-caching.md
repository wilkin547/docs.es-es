---
title: Almacenamiento en caché en una aplicación nativa en la nube
description: Obtenga información sobre las estrategias de almacenamiento en caché en una aplicación nativa en la nube.
author: robvet
ms.date: 01/22/2020
ms.openlocfilehash: 2da61a01fc53233d1934df813fcba3b91a495c43
ms.sourcegitcommit: 13e79efdbd589cad6b1de634f5d6b1262b12ab01
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/28/2020
ms.locfileid: "76795120"
---
# <a name="caching-in-a-cloud-native-app"></a><span data-ttu-id="2beff-103">Almacenamiento en caché en una aplicación nativa en la nube</span><span class="sxs-lookup"><span data-stu-id="2beff-103">Caching in a cloud-native app</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="2beff-104">Las ventajas del almacenamiento en caché se entienden bien.</span><span class="sxs-lookup"><span data-stu-id="2beff-104">The benefits of caching are well understood.</span></span> <span data-ttu-id="2beff-105">La técnica funciona mediante la copia temporal de los datos a los que se accede con frecuencia desde un almacén de datos de back-end a un *almacenamiento rápido* que se encuentra más cerca de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="2beff-105">The technique works by temporarily copying frequently accessed data from a backend data store to *fast storage* that's located closer to the application.</span></span> <span data-ttu-id="2beff-106">El almacenamiento en caché se implementa a menudo...</span><span class="sxs-lookup"><span data-stu-id="2beff-106">Caching is often implemented where...</span></span>

- <span data-ttu-id="2beff-107">Los datos permanecen relativamente estáticos.</span><span class="sxs-lookup"><span data-stu-id="2beff-107">Data remains relatively static.</span></span>
- <span data-ttu-id="2beff-108">El acceso a los datos es lento, especialmente en comparación con la velocidad de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="2beff-108">Data access is slow, especially compared to the speed of the cache.</span></span>
- <span data-ttu-id="2beff-109">Los datos están sujetos a altos niveles de contención.</span><span class="sxs-lookup"><span data-stu-id="2beff-109">Data is subject to high levels of contention.</span></span>

## <a name="why"></a><span data-ttu-id="2beff-110">¿Por qué?</span><span class="sxs-lookup"><span data-stu-id="2beff-110">Why?</span></span>

<span data-ttu-id="2beff-111">Como se describe en la [Guía de almacenamiento en caché de Microsoft](https://docs.microsoft.com/azure/architecture/best-practices/caching), el almacenamiento en caché puede aumentar el rendimiento, la escalabilidad y la disponibilidad de microservicios individuales y del sistema en su conjunto.</span><span class="sxs-lookup"><span data-stu-id="2beff-111">As discussed in the [Microsoft caching guidance](https://docs.microsoft.com/azure/architecture/best-practices/caching), caching can increase performance, scalability, and availability for individual microservices and the system as a whole.</span></span> <span data-ttu-id="2beff-112">Reduce la latencia y la contención de administrar grandes volúmenes de solicitudes simultáneas en un almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="2beff-112">It reduces the latency and contention of handling large volumes of concurrent requests to a data store.</span></span> <span data-ttu-id="2beff-113">A medida que el volumen de datos y el número de usuarios aumentan, mayores son las ventajas del almacenamiento en caché.</span><span class="sxs-lookup"><span data-stu-id="2beff-113">As data volume and the number of users increase, the greater the benefits of caching become.</span></span>

<span data-ttu-id="2beff-114">El almacenamiento en caché es más eficaz cuando un cliente Lee repetidamente datos que son inmutables o que cambian con poca frecuencia.</span><span class="sxs-lookup"><span data-stu-id="2beff-114">Caching is most effective when a client repeatedly reads data that is immutable or that changes infrequently.</span></span> <span data-ttu-id="2beff-115">Entre los ejemplos se incluye información de referencia, como información de productos y precios, o recursos estáticos compartidos que son costosos de construir.</span><span class="sxs-lookup"><span data-stu-id="2beff-115">Examples include reference information such as product and pricing information, or shared static resources that are costly to construct.</span></span>

<span data-ttu-id="2beff-116">Aunque los microservicios no deben tener estado, una caché distribuida puede admitir el acceso simultáneo a los datos de estado de sesión cuando es absolutamente necesario.</span><span class="sxs-lookup"><span data-stu-id="2beff-116">While microservices should be stateless, a distributed cache can support concurrent access to session state data when absolutely required.</span></span>

<span data-ttu-id="2beff-117">Considere también el almacenamiento en caché para evitar cálculos repetitivos.</span><span class="sxs-lookup"><span data-stu-id="2beff-117">Also consider caching to avoid repetitive computations.</span></span> <span data-ttu-id="2beff-118">Si una operación transforma datos o realiza un cálculo complicado, almacene en caché el resultado de las solicitudes posteriores.</span><span class="sxs-lookup"><span data-stu-id="2beff-118">If an operation transforms data or performs a complicated calculation, cache the result for subsequent requests.</span></span>

## <a name="caching-architecture"></a><span data-ttu-id="2beff-119">Arquitectura de almacenamiento en caché</span><span class="sxs-lookup"><span data-stu-id="2beff-119">Caching architecture</span></span>

<span data-ttu-id="2beff-120">Las aplicaciones nativas en la nube suelen implementar una arquitectura de almacenamiento en caché distribuida.</span><span class="sxs-lookup"><span data-stu-id="2beff-120">Cloud native applications typically implement a distributed caching architecture.</span></span> <span data-ttu-id="2beff-121">La memoria caché se hospeda como un servicio de [respaldo](./definition.md#backing-services)basado en la nube, independiente de los microservicios.</span><span class="sxs-lookup"><span data-stu-id="2beff-121">The cache is hosted as a cloud-based [backing service](./definition.md#backing-services), separate from the microservices.</span></span> <span data-ttu-id="2beff-122">En la figura 5-20 se muestra la arquitectura.</span><span class="sxs-lookup"><span data-stu-id="2beff-122">Figure 5-20 shows the architecture.</span></span>

![Almacenamiento en caché en una aplicación nativa en la nube](media/caching-in-a-cloud-native-app.png)

<span data-ttu-id="2beff-124">**Figura 5-19**: almacenamiento en caché en una aplicación nativa en la nube</span><span class="sxs-lookup"><span data-stu-id="2beff-124">**Figure 5-19**: Caching in a cloud native app</span></span>

<span data-ttu-id="2beff-125">En la ilustración anterior, observe cómo la memoria caché es independiente y compartida por los microservicios.</span><span class="sxs-lookup"><span data-stu-id="2beff-125">In the previous figure, note how the cache is independent of and shared by the microservices.</span></span> <span data-ttu-id="2beff-126">En este escenario, la [puerta de enlace de API](./front-end-communication.md)invoca la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="2beff-126">In this scenario, the cache is invoked by the [API Gateway](./front-end-communication.md).</span></span> <span data-ttu-id="2beff-127">Como se describe en el capítulo 4, la puerta de enlace actúa como front-end para todas las solicitudes entrantes.</span><span class="sxs-lookup"><span data-stu-id="2beff-127">As discussed in chapter 4, the gateway serves as a front end for all incoming requests.</span></span> <span data-ttu-id="2beff-128">La caché distribuida aumenta la capacidad de respuesta del sistema al devolver los datos almacenados en caché siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="2beff-128">The distributed cache increases system responsiveness by returning cached data whenever possible.</span></span> <span data-ttu-id="2beff-129">Además, la separación de la memoria caché de los servicios permite escalar vertical u horizontalmente la memoria caché de forma independiente para satisfacer mayores demandas de tráfico.</span><span class="sxs-lookup"><span data-stu-id="2beff-129">Additionally, separating the cache from the services allows the cache to scale up or out independently to meet increased traffic demands.</span></span>

<span data-ttu-id="2beff-130">En la ilustración se muestra un patrón de almacenamiento en caché común conocido como [patrón de reserva de caché](https://docs.microsoft.com/azure/architecture/patterns/cache-aside).</span><span class="sxs-lookup"><span data-stu-id="2beff-130">The figure presents a common caching pattern known as the [cache-aside pattern](https://docs.microsoft.com/azure/architecture/patterns/cache-aside).</span></span> <span data-ttu-id="2beff-131">En el caso de una solicitud entrante, primero se consulta la caché (paso \#1) para obtener una respuesta.</span><span class="sxs-lookup"><span data-stu-id="2beff-131">For an incoming request, you first query the cache (step \#1) for a response.</span></span> <span data-ttu-id="2beff-132">Si se encuentra, los datos se devuelven inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="2beff-132">If found, the data is returned immediately.</span></span> <span data-ttu-id="2beff-133">Si los datos no existen en la memoria caché (lo que se conoce como un error de [caché](https://www.techopedia.com/definition/6308/cache-miss)), se recuperan de una base de datos local en un servicio de nivel inferior (\#paso 2).</span><span class="sxs-lookup"><span data-stu-id="2beff-133">If the data doesn't exist in the cache (known as a [cache miss](https://www.techopedia.com/definition/6308/cache-miss)), it's retrieved from a local database in a downstream service (step \#2).</span></span> <span data-ttu-id="2beff-134">A continuación, se escribe en la memoria caché para las solicitudes futuras (paso \#3) y se devuelve al autor de la llamada.</span><span class="sxs-lookup"><span data-stu-id="2beff-134">It's then written to the cache for future requests (step \#3), and returned to the caller.</span></span> <span data-ttu-id="2beff-135">Se debe tener cuidado de expulsar periódicamente los datos almacenados en caché para que el sistema siga siendo puntual y coherente.</span><span class="sxs-lookup"><span data-stu-id="2beff-135">Care must be taken to periodically evict cached data so that the system remains timely and consistent.</span></span>

<span data-ttu-id="2beff-136">A medida que crece la memoria caché compartida, es posible que resulte beneficioso particionar sus datos en varios nodos.</span><span class="sxs-lookup"><span data-stu-id="2beff-136">As a shared cache grows, it might prove beneficial to partition its data across multiple nodes.</span></span> <span data-ttu-id="2beff-137">Esto puede ayudar a minimizar la contención y mejorar la escalabilidad.</span><span class="sxs-lookup"><span data-stu-id="2beff-137">Doing so can help minimize contention and improve scalability.</span></span> <span data-ttu-id="2beff-138">Muchos servicios de almacenamiento en caché admiten la capacidad de agregar y quitar nodos de forma dinámica y de reequilibrar los datos entre las particiones.</span><span class="sxs-lookup"><span data-stu-id="2beff-138">Many Caching services support the ability to dynamically add and remove nodes and rebalance data across partitions.</span></span> <span data-ttu-id="2beff-139">Normalmente, este enfoque implica la agrupación en clústeres.</span><span class="sxs-lookup"><span data-stu-id="2beff-139">This approach typically involves clustering.</span></span> <span data-ttu-id="2beff-140">La agrupación en clústeres expone una colección de nodos federados como una sola memoria caché sin problemas.</span><span class="sxs-lookup"><span data-stu-id="2beff-140">Clustering exposes a collection of federated nodes as a seamless, single cache.</span></span> <span data-ttu-id="2beff-141">Sin embargo, internamente, los datos están dispersos en los nodos después de una estrategia de distribución predefinida que equilibra la carga uniformemente.</span><span class="sxs-lookup"><span data-stu-id="2beff-141">Internally, however, the data is dispersed across the nodes following a predefined distribution strategy that balances the load evenly.</span></span>

## <a name="azure-cache-for-redis"></a><span data-ttu-id="2beff-142">Azure Cache for Redis</span><span class="sxs-lookup"><span data-stu-id="2beff-142">Azure Cache for Redis</span></span>

<span data-ttu-id="2beff-143">[Caché de Azure para Redis](https://azure.microsoft.com/services/cache/) es un servicio de agente de mensajería y almacenamiento en caché de datos seguro, totalmente administrado por Microsoft.</span><span class="sxs-lookup"><span data-stu-id="2beff-143">[Azure Cache for Redis](https://azure.microsoft.com/services/cache/) is a secure data caching and messaging broker service, fully managed by Microsoft.</span></span> <span data-ttu-id="2beff-144">Se consume como una oferta de plataforma como servicio (PaaS), que proporciona un alto rendimiento y un acceso de baja latencia a los datos.</span><span class="sxs-lookup"><span data-stu-id="2beff-144">Consumed as a Platform as a Service (PaaS) offering, it provides high throughput and low-latency access to data.</span></span> <span data-ttu-id="2beff-145">El servicio es accesible para cualquier aplicación dentro o fuera de Azure.</span><span class="sxs-lookup"><span data-stu-id="2beff-145">The service is accessible to any application within or outside of Azure.</span></span>

<span data-ttu-id="2beff-146">La caché de Azure para el servicio ReDiS administra el acceso a los servidores de Redis de código abierto hospedados en los centros de datos de Azure.</span><span class="sxs-lookup"><span data-stu-id="2beff-146">The Azure Cache for Redis service manages access to open-source Redis servers hosted across Azure data centers.</span></span> <span data-ttu-id="2beff-147">El servicio actúa como una fachada que proporciona administración, control de acceso y seguridad.</span><span class="sxs-lookup"><span data-stu-id="2beff-147">The service acts as a facade providing management, access control, and security.</span></span> <span data-ttu-id="2beff-148">El servicio admite de forma nativa un amplio conjunto de estructuras de datos, como cadenas, valores hash, listas y conjuntos.</span><span class="sxs-lookup"><span data-stu-id="2beff-148">The service natively supports a rich set of data structures, including strings, hashes, lists, and sets.</span></span> <span data-ttu-id="2beff-149">Si su aplicación ya usa Redis, funcionará tal cual con la memoria caché de Azure para Redis.</span><span class="sxs-lookup"><span data-stu-id="2beff-149">If your application already uses Redis, it will work as-is with Azure Cache for Redis.</span></span>

<span data-ttu-id="2beff-150">La caché de Azure para Redis es más que un servidor de caché simple.</span><span class="sxs-lookup"><span data-stu-id="2beff-150">Azure Cache for Redis is more than a simple cache server.</span></span> <span data-ttu-id="2beff-151">Puede admitir varios escenarios para mejorar una arquitectura de microservicios:</span><span class="sxs-lookup"><span data-stu-id="2beff-151">It can support a number of scenarios to enhance a microservices architecture:</span></span>

- <span data-ttu-id="2beff-152">Un almacén de datos en memoria</span><span class="sxs-lookup"><span data-stu-id="2beff-152">An in-memory data store</span></span>
- <span data-ttu-id="2beff-153">Una base de datos no relacional distribuida</span><span class="sxs-lookup"><span data-stu-id="2beff-153">A distributed non-relational database</span></span>
- <span data-ttu-id="2beff-154">Un agente de mensajes</span><span class="sxs-lookup"><span data-stu-id="2beff-154">A message broker</span></span>
- <span data-ttu-id="2beff-155">Un servidor de configuración o de detección</span><span class="sxs-lookup"><span data-stu-id="2beff-155">A configuration or discovery server</span></span>
  
<span data-ttu-id="2beff-156">En el caso de escenarios avanzados, una copia de los datos en caché puede [almacenarse en el disco](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-how-to-premium-persistence).</span><span class="sxs-lookup"><span data-stu-id="2beff-156">For advanced scenarios, a copy of the cached data can be [persisted to disk](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-how-to-premium-persistence).</span></span> <span data-ttu-id="2beff-157">Si un evento catastrófico deshabilita las cachés principal y de réplica, la memoria caché se reconstruye a partir de la instantánea más reciente.</span><span class="sxs-lookup"><span data-stu-id="2beff-157">If a catastrophic event disables both the primary and replica caches, the cache is reconstructed from the most recent snapshot.</span></span>

<span data-ttu-id="2beff-158">Azure Redis Cache está disponible en varias configuraciones predefinidas y planes de tarifa.</span><span class="sxs-lookup"><span data-stu-id="2beff-158">Azure Redis Cache is available across a number of predefined configurations and pricing tiers.</span></span>  <span data-ttu-id="2beff-159">El [nivel Premium](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-premium-tier-intro) incluye muchas características de nivel empresarial, como la agrupación en clústeres, la persistencia de datos, la replicación geográfica y el aislamiento de red virtual.</span><span class="sxs-lookup"><span data-stu-id="2beff-159">The [Premium tier](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-premium-tier-intro) features many enterprise-level features such as clustering, data persistence, geo-replication, and virtual-network isolation.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="2beff-160">[Anterior](relational-vs-nosql-data.md)
>[Siguiente](elastic-search-in-azure.md)</span><span class="sxs-lookup"><span data-stu-id="2beff-160">[Previous](relational-vs-nosql-data.md)
[Next](elastic-search-in-azure.md)</span></span>
