---
title: 'Consideraciones sobre la arquitectura sin servidor: aplicaciones sin servidor'
description: Comprenda los desafíos de diseñar aplicaciones sin servidor, desde la administración de estados y el almacenamiento persistente hasta el escalado, el registro, el seguimiento y el diagnóstico.
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: c856683cf6910be98661e634246cd003b93a6d76
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/14/2020
ms.locfileid: "72522430"
---
# <a name="serverless-architecture-considerations"></a><span data-ttu-id="94ea2-103">Consideraciones sobre la arquitectura sin servidor</span><span class="sxs-lookup"><span data-stu-id="94ea2-103">Serverless architecture considerations</span></span>

<span data-ttu-id="94ea2-104">La adopción de una arquitectura sin servidor conlleva algunos desafíos.</span><span class="sxs-lookup"><span data-stu-id="94ea2-104">Adopting a serverless architecture does come with certain challenges.</span></span> <span data-ttu-id="94ea2-105">En esta sección se exploran algunas de las consideraciones más comunes que deben tenerse en cuenta.</span><span class="sxs-lookup"><span data-stu-id="94ea2-105">This section explores some of the more common considerations to be aware of.</span></span> <span data-ttu-id="94ea2-106">Todos estos desafíos tienen soluciones.</span><span class="sxs-lookup"><span data-stu-id="94ea2-106">All of these challenges have solutions.</span></span> <span data-ttu-id="94ea2-107">Como ocurre con todas las opciones de arquitectura, la decisión de cambiar a sin servidor debe tomarse solo tras considerarse cuidadosamente las ventajas e inconvenientes.</span><span class="sxs-lookup"><span data-stu-id="94ea2-107">As with all architecture choices, the decision to go serverless should be made only after carefully considering the pros and cons.</span></span> <span data-ttu-id="94ea2-108">Dependiendo de las necesidades de su aplicación, puede decidir que una implementación sin servidor no es la solución adecuada para algunos componentes.</span><span class="sxs-lookup"><span data-stu-id="94ea2-108">Depending on the needs of your application, you may decide a serverless implementation isn't the right solution for certain components.</span></span>

## <a name="managing-state"></a><span data-ttu-id="94ea2-109">Administración de estados</span><span class="sxs-lookup"><span data-stu-id="94ea2-109">Managing state</span></span>

<span data-ttu-id="94ea2-110">Las funciones sin servidor, como ocurre con los microservicios en general, carecen de estado de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="94ea2-110">Serverless functions, as with microservices in general, are stateless by default.</span></span> <span data-ttu-id="94ea2-111">Evitar el estado permite a sin servidor ser efímero, escalar horizontalmente y proporcionar resistencia sin un punto de error central.</span><span class="sxs-lookup"><span data-stu-id="94ea2-111">Avoiding state enables serverless to be ephemeral, to scale out, and to provide resiliency without a central point of failure.</span></span> <span data-ttu-id="94ea2-112">En algunas circunstancias, los procesos empresariales requieren estado.</span><span class="sxs-lookup"><span data-stu-id="94ea2-112">In some circumstances, business processes require state.</span></span> <span data-ttu-id="94ea2-113">Si su proceso requiere estado, tiene dos opciones.</span><span class="sxs-lookup"><span data-stu-id="94ea2-113">If your process requires state, you have two options.</span></span> <span data-ttu-id="94ea2-114">Puede adoptar un modelo distinto de sin servidor o interactuar con un servicio independiente que proporcione el estado.</span><span class="sxs-lookup"><span data-stu-id="94ea2-114">You can adopt a model other than serverless, or interact with a separate service that provides state.</span></span> <span data-ttu-id="94ea2-115">Agregar estado puede complicar la solución y hacer que sea más difícil de escalar, además de crear potencialmente un solo punto de error.</span><span class="sxs-lookup"><span data-stu-id="94ea2-115">Adding state can complicate the solution and make it harder to scale, and potentially create a single point of failure.</span></span> <span data-ttu-id="94ea2-116">Considere detenidamente si su función requiere, sin duda, estado.</span><span class="sxs-lookup"><span data-stu-id="94ea2-116">Carefully consider whether your function absolutely requires state.</span></span> <span data-ttu-id="94ea2-117">Si la respuesta es "sí", determine si aún tiene sentido implementarlo con sin servidor.</span><span class="sxs-lookup"><span data-stu-id="94ea2-117">If the answer is "yes," determine whether it still makes sense to implement it with serverless.</span></span>

<span data-ttu-id="94ea2-118">Hay varias soluciones para adoptar el estado sin poner en peligro las ventajas de sin servidor.</span><span class="sxs-lookup"><span data-stu-id="94ea2-118">There are several solutions to adopt state without compromising the benefits of serverless.</span></span> <span data-ttu-id="94ea2-119">Entre algunas de las soluciones más populares se incluyen las siguientes:</span><span class="sxs-lookup"><span data-stu-id="94ea2-119">Some of the more popular solutions include:</span></span>

- <span data-ttu-id="94ea2-120">Usar un almacén de datos temporal o una memoria caché distribuida, como Redis</span><span class="sxs-lookup"><span data-stu-id="94ea2-120">Use a temporary data store or distributed cache, like Redis</span></span>
- <span data-ttu-id="94ea2-121">Almacenar el estado en una base de datos, como SQL o CosmosDB</span><span class="sxs-lookup"><span data-stu-id="94ea2-121">Store state in a database, like SQL or CosmosDB</span></span>
- <span data-ttu-id="94ea2-122">Controlar el estado a través de un motor de flujo de trabajo como funciones duraderas</span><span class="sxs-lookup"><span data-stu-id="94ea2-122">Handle state through a workflow engine like durable functions</span></span>

<span data-ttu-id="94ea2-123">En resumidas cuentas, debe ser consciente de la necesidad de cualquier administración de estados en aquellos procesos que tiene en mente implementar con sin servidor.</span><span class="sxs-lookup"><span data-stu-id="94ea2-123">The bottom line is that you should be aware of the need for any state management within processes you're considering to implement with serverless.</span></span>

## <a name="long-running-processes"></a><span data-ttu-id="94ea2-124">Procesos de larga ejecución</span><span class="sxs-lookup"><span data-stu-id="94ea2-124">Long-running processes</span></span>

<span data-ttu-id="94ea2-125">Muchas ventajas de sin servidor dependen de que los procesos sean efímeros.</span><span class="sxs-lookup"><span data-stu-id="94ea2-125">Many benefits of serverless rely on the processes being ephemeral.</span></span> <span data-ttu-id="94ea2-126">Los tiempos de ejecución breves facilitan al proveedor sin servidor liberar recursos a medida que finalizan las funciones y compartir funciones entre hosts.</span><span class="sxs-lookup"><span data-stu-id="94ea2-126">Short run times make it easier for the serverless provider to free up resources as functions end and share functions across hosts.</span></span> <span data-ttu-id="94ea2-127">La mayoría de los proveedores de nube limitan el tiempo total que puede ejecutar su función a unos 10 minutos.</span><span class="sxs-lookup"><span data-stu-id="94ea2-127">Most cloud providers limit the total time your function can run to around 10 minutes.</span></span> <span data-ttu-id="94ea2-128">Ante la posibilidad de que su proceso dure más tiempo, puede considerar una implementación alternativa.</span><span class="sxs-lookup"><span data-stu-id="94ea2-128">If your process may take longer, you might consider an alternative implementation.</span></span>

<span data-ttu-id="94ea2-129">Hay algunas excepciones y soluciones.</span><span class="sxs-lookup"><span data-stu-id="94ea2-129">There are a few exceptions and solutions.</span></span> <span data-ttu-id="94ea2-130">Una solución puede ser dividir su proceso en componentes más pequeños que, individualmente, tardan menos tiempo en ejecutarse.</span><span class="sxs-lookup"><span data-stu-id="94ea2-130">One solution may be to break your process into smaller components that individually take less time to run.</span></span> <span data-ttu-id="94ea2-131">Si su proceso se ejecuta durante mucho tiempo debido a las dependencias, también puede considerar un flujo de trabajo asincrónico mediante una solución como funciones duraderas.</span><span class="sxs-lookup"><span data-stu-id="94ea2-131">If your process runs long because of dependencies, you can also consider an asynchronous workflow using a solution like durable functions.</span></span> <span data-ttu-id="94ea2-132">Las funciones duraderas pausan y mantienen el estado de su proceso mientras espera a que finalice un proceso externo.</span><span class="sxs-lookup"><span data-stu-id="94ea2-132">Durable functions pause and maintain the state of your process while it's waiting on an external process to finish.</span></span> <span data-ttu-id="94ea2-133">El control asincrónico reduce el tiempo de ejecución del proceso real.</span><span class="sxs-lookup"><span data-stu-id="94ea2-133">Asynchronous handling reduces the time the actual process runs.</span></span>

## <a name="startup-time"></a><span data-ttu-id="94ea2-134">Tiempo de inicio</span><span class="sxs-lookup"><span data-stu-id="94ea2-134">Startup time</span></span>

<span data-ttu-id="94ea2-135">Una preocupación potencial con respecto a las implementaciones sin servidor es el tiempo de inicio.</span><span class="sxs-lookup"><span data-stu-id="94ea2-135">One potential concern with serverless implementations is startup time.</span></span> <span data-ttu-id="94ea2-136">Para conservar los recursos, muchos proveedores sin servidor crean infraestructura "a petición".</span><span class="sxs-lookup"><span data-stu-id="94ea2-136">To conserve resources, many serverless providers create infrastructure "on demand."</span></span> <span data-ttu-id="94ea2-137">Cuando una función sin servidor se desencadena transcurrido un período de tiempo, es posible que sea necesario crear o reiniciar los recursos que van a hospedar la función.</span><span class="sxs-lookup"><span data-stu-id="94ea2-137">When a serverless function is triggered after a period of time, the resources to host the function may need to be created or restarted.</span></span> <span data-ttu-id="94ea2-138">En algunas situaciones, los arranques en frío pueden dar lugar a retrasos de varios segundos.</span><span class="sxs-lookup"><span data-stu-id="94ea2-138">In some situations, cold starts may result in delays of several seconds.</span></span> <span data-ttu-id="94ea2-139">El tiempo de inicio varía entre proveedores y niveles de servicio.</span><span class="sxs-lookup"><span data-stu-id="94ea2-139">Startup time varies across providers and service levels.</span></span> <span data-ttu-id="94ea2-140">Hay algunos enfoques para abordar el tiempo de inicio si es importante minimizarlo para el éxito de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="94ea2-140">There are a few approaches to address startup time if it's important to minimize for the success of the app.</span></span>

- <span data-ttu-id="94ea2-141">Algunos proveedores permiten a los usuarios pagar por los niveles de servicio que garantizan que la infraestructura esté "siempre activada".</span><span class="sxs-lookup"><span data-stu-id="94ea2-141">Some providers allow users to pay for service levels that guarantee infrastructure is "always on".</span></span>
- <span data-ttu-id="94ea2-142">Implemente un mecanismo de supervivencia (haga ping al punto de conexión para mantenerlo "activo").</span><span class="sxs-lookup"><span data-stu-id="94ea2-142">Implement a keep-alive mechanism (ping the endpoint to keep it "awake").</span></span>
- <span data-ttu-id="94ea2-143">Use la orquestación como Kubernetes con un enfoque de función en contenedores (el host ya se está ejecutando, por lo que se ponen en marcha nuevas instancias de forma muy rápida).</span><span class="sxs-lookup"><span data-stu-id="94ea2-143">Use orchestration like Kubernetes with a containerized function approach (the host is already running so spinning up new instances is extremely fast).</span></span>

## <a name="database-updates-and-migrations"></a><span data-ttu-id="94ea2-144">Migraciones y actualizaciones de la base de datos</span><span class="sxs-lookup"><span data-stu-id="94ea2-144">Database updates and migrations</span></span>

<span data-ttu-id="94ea2-145">Una ventaja del código sin servidor es que puede lanzar nuevas funciones sin tener que volver a implementar toda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="94ea2-145">An advantage of serverless code is that you can release new functions without having to redeploy the entire application.</span></span> <span data-ttu-id="94ea2-146">Esta ventaja puede transformarse en una desventaja si hay una base de datos relacional implicada.</span><span class="sxs-lookup"><span data-stu-id="94ea2-146">This advantage can become a disadvantage when there's a relational database involved.</span></span> <span data-ttu-id="94ea2-147">Los cambios en los esquemas de la base de datos son difíciles de sincronizar con las actualizaciones sin servidor.</span><span class="sxs-lookup"><span data-stu-id="94ea2-147">Changes to database schemas are difficult to synchronize with serverless updates.</span></span> <span data-ttu-id="94ea2-148">Si se producen errores y deben revertirse los cambios, se plantean desafíos adicionales.</span><span class="sxs-lookup"><span data-stu-id="94ea2-148">Additional challenges are posed when things go wrong and the changes must be rolled back.</span></span> <span data-ttu-id="94ea2-149">La integridad de datos es una de las razones por las que un procedimiento recomendado para microservicios y funciones sin servidor consiste en que poseen sus propios datos.</span><span class="sxs-lookup"><span data-stu-id="94ea2-149">Data integrity is one reason that a best practice for microservices and serverless functions is that they own their own data.</span></span> <span data-ttu-id="94ea2-150">Es posible implementar los cambios como una sola unidad de proceso y datos.</span><span class="sxs-lookup"><span data-stu-id="94ea2-150">It is possible to deploy changes as a single unit of compute and data.</span></span> <span data-ttu-id="94ea2-151">La realidad es que muchos sistemas heredados incluyen una base de datos de back-end de gran tamaño que debe reconciliarse con la arquitectura sin servidor.</span><span class="sxs-lookup"><span data-stu-id="94ea2-151">The reality is that many legacy systems feature a large back-end database that must be reconciled with the serverless architecture.</span></span>

<span data-ttu-id="94ea2-152">Un enfoque popular para resolver la versión del esquema es no modificar nunca las propiedades y columnas existentes, sino agregar nueva información en su lugar.</span><span class="sxs-lookup"><span data-stu-id="94ea2-152">A popular approach to solve schema versioning is to never modify existing properties and columns, but instead add new information.</span></span> <span data-ttu-id="94ea2-153">Por ejemplo, considere un cambio para pasar de una marca "completada" booleana para una lista de tareas pendientes a una "fecha de finalización".</span><span class="sxs-lookup"><span data-stu-id="94ea2-153">For example, consider a change to move from a Boolean "completed" flag for a todo list to a "completed date."</span></span> <span data-ttu-id="94ea2-154">En lugar de quitar el campo anterior, el cambio de base de datos hará lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="94ea2-154">Instead of removing the old field, the database change will:</span></span>

1. <span data-ttu-id="94ea2-155">Agregará un nuevo campo "fecha de finalización".</span><span class="sxs-lookup"><span data-stu-id="94ea2-155">Add a new "completed date" field.</span></span>
1. <span data-ttu-id="94ea2-156">Transformará el campo booleano "completado" en una función calculada que evalúe si la fecha de finalización es posterior a la fecha actual.</span><span class="sxs-lookup"><span data-stu-id="94ea2-156">Transform the "completed" Boolean field to a computed function that evaluates whether the completed date is after the current date.</span></span>
1. <span data-ttu-id="94ea2-157">Agregue un desencadenador para establecer la fecha de finalización en la fecha actual al establecerse el valor booleano completado en true.</span><span class="sxs-lookup"><span data-stu-id="94ea2-157">Add a trigger to set the completed date to the current date when the completed Boolean is set to true.</span></span>

<span data-ttu-id="94ea2-158">La secuencia de cambios garantiza que el código heredado siga ejecutándose "tal cual", mientras que funciones sin servidor más recientes pueden aprovechar el nuevo campo.</span><span class="sxs-lookup"><span data-stu-id="94ea2-158">The sequence of changes ensures that legacy code continues to run "as is" while newer serverless functions can take advantage of the new field.</span></span>

<span data-ttu-id="94ea2-159">Para obtener más información sobre los datos de las arquitecturas sin servidor, consulte [Desafíos y soluciones de la administración de datos distribuidos](../microservices/architect-microservice-container-applications/distributed-data-management.md).</span><span class="sxs-lookup"><span data-stu-id="94ea2-159">For more information about data in serverless architectures, see [Challenges and solutions for distributed data management](../microservices/architect-microservice-container-applications/distributed-data-management.md).</span></span>

## <a name="scaling"></a><span data-ttu-id="94ea2-160">Cambiar escala</span><span class="sxs-lookup"><span data-stu-id="94ea2-160">Scaling</span></span>

<span data-ttu-id="94ea2-161">Un concepto erróneo muy común es que sin servidor significa "ningún servidor".</span><span class="sxs-lookup"><span data-stu-id="94ea2-161">It's a common misconception that serverless means "no server."</span></span> <span data-ttu-id="94ea2-162">Significa, de hecho, "menos servidor".</span><span class="sxs-lookup"><span data-stu-id="94ea2-162">It's in fact "less server."</span></span> <span data-ttu-id="94ea2-163">El hecho de que haya una infraestructura de respaldo es importante para comprender cuándo se trata de escalado.</span><span class="sxs-lookup"><span data-stu-id="94ea2-163">The fact there is a backing infrastructure is important to understand when it comes to scaling.</span></span> <span data-ttu-id="94ea2-164">La mayoría de las plataformas sin servidor proporcionan un conjunto de controles para controlar cómo debe escalarse la infraestructura al aumentar la densidad de eventos.</span><span class="sxs-lookup"><span data-stu-id="94ea2-164">Most serverless platforms provide a set of controls to handle how the infrastructure should scale when event density increases.</span></span> <span data-ttu-id="94ea2-165">Puede elegir entre varias opciones, pero su estrategia puede variar dependiendo de la función.</span><span class="sxs-lookup"><span data-stu-id="94ea2-165">You can choose from a variety of options, but your strategy may vary depending on the function.</span></span> <span data-ttu-id="94ea2-166">Además, las funciones suelen ejecutarse en un host relacionado de modo que las funciones del mismo host tengan las mismas opciones de escala.</span><span class="sxs-lookup"><span data-stu-id="94ea2-166">Furthermore, functions are typically run under a related host, so that functions on the same host have the same scale options.</span></span> <span data-ttu-id="94ea2-167">Por lo tanto, es necesario organizar y elaborar estrategias sobre qué funciones se hospedan juntas en función de los requisitos de escala.</span><span class="sxs-lookup"><span data-stu-id="94ea2-167">Therefore it is necessary to organize and strategize which functions are hosted together based on scale requirements.</span></span>

<span data-ttu-id="94ea2-168">Las reglas suelen especificar cómo escalar verticalmente (aumentar los recursos de host) y escalar horizontalmente (aumentar el número de instancias de host) en función de diferentes parámetros.</span><span class="sxs-lookup"><span data-stu-id="94ea2-168">Rules often specify how to scale-up (increase the host resources) and scale-out (increase the number of host instances) based on varying parameters.</span></span> <span data-ttu-id="94ea2-169">Los desencadenadores para escalas pueden incluir programación, tasas de solicitudes, uso de CPU y uso de memoria.</span><span class="sxs-lookup"><span data-stu-id="94ea2-169">Triggers for scales may include schedule, request rates, CPU utilization, and memory usage.</span></span> <span data-ttu-id="94ea2-170">Un mayor rendimiento suele acarrear un costo más elevado.</span><span class="sxs-lookup"><span data-stu-id="94ea2-170">Higher performance often comes at a greater cost.</span></span> <span data-ttu-id="94ea2-171">Es posible que los enfoques basados en el consumo más económicos no se escalen tan rápido cuando la tasa de solicitudes aumente de forma repentina.</span><span class="sxs-lookup"><span data-stu-id="94ea2-171">The less expensive, consumption-based approaches may not scale as quickly when the request rate suddenly increases.</span></span> <span data-ttu-id="94ea2-172">Existe un equilibrio entre pagar por adelantado el "costo del seguro" frente a efectuar un pago "por uso" de forma estricta y arriesgar respuestas más lentas debido a repentinos aumentos de la demanda.</span><span class="sxs-lookup"><span data-stu-id="94ea2-172">There is a trade-off between paying up front "insurance cost" versus paying strictly "as you go" and risking slower responses due to sudden increases in demand.</span></span>

## <a name="monitoring-tracing-and-logging"></a><span data-ttu-id="94ea2-173">Supervisión, seguimiento y registro</span><span class="sxs-lookup"><span data-stu-id="94ea2-173">Monitoring, tracing, and logging</span></span>

<span data-ttu-id="94ea2-174">Un aspecto que a menudo se pasa por alto de DevOps es la supervisión de aplicaciones una vez implementadas.</span><span class="sxs-lookup"><span data-stu-id="94ea2-174">An often overlooked aspect of DevOps is monitoring applications once deployed.</span></span> <span data-ttu-id="94ea2-175">Es importante tener una estrategia para supervisar funciones sin servidor.</span><span class="sxs-lookup"><span data-stu-id="94ea2-175">It's important to have a strategy for monitoring serverless functions.</span></span> <span data-ttu-id="94ea2-176">El mayor desafío suele ser la correlación, o bien reconocer cuándo llama un usuario a varias funciones como parte de la misma interacción.</span><span class="sxs-lookup"><span data-stu-id="94ea2-176">The biggest challenge is often correlation, or recognizing when a user calls multiple functions as part of the same interaction.</span></span> <span data-ttu-id="94ea2-177">La mayoría de las plataformas sin servidor permiten un registro de consolas que se puede importar en herramientas de terceros.</span><span class="sxs-lookup"><span data-stu-id="94ea2-177">Most serverless platforms allow console logging that can be imported into third-party tools.</span></span> <span data-ttu-id="94ea2-178">También hay opciones para automatizar la recopilación de telemetría, generar y realizar un seguimiento de identificadores de correlación y supervisar acciones específicas para proporcionar información detallada.</span><span class="sxs-lookup"><span data-stu-id="94ea2-178">There are also options to automate collection of telemetry, generate and track correlation IDs, and monitor specific actions to provide detailed insights.</span></span> <span data-ttu-id="94ea2-179">Azure proporciona la [plataforma de Application Insights](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) avanzada para la supervisión y el análisis.</span><span class="sxs-lookup"><span data-stu-id="94ea2-179">Azure provides the advanced [Application Insights platform](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) for monitoring and analytics.</span></span>

## <a name="inter-service-dependencies"></a><span data-ttu-id="94ea2-180">Dependencias entre servicios</span><span class="sxs-lookup"><span data-stu-id="94ea2-180">Inter-service dependencies</span></span>

<span data-ttu-id="94ea2-181">Una arquitectura sin servidor puede incluir funciones dependientes de otras funciones.</span><span class="sxs-lookup"><span data-stu-id="94ea2-181">A serverless architecture may include functions that rely on other functions.</span></span> <span data-ttu-id="94ea2-182">De hecho, no es raro en una arquitectura sin servidor tener varios servicios que se llamen entre sí como parte de una interacción o transacción distribuida.</span><span class="sxs-lookup"><span data-stu-id="94ea2-182">In fact, it isn't uncommon in a serverless architecture to have multiple services call each other as part of an interaction or distributed transaction.</span></span> <span data-ttu-id="94ea2-183">Para evitar un acoplamiento fuerte, se recomienda que los servicios no se hagan referencia entre sí directamente.</span><span class="sxs-lookup"><span data-stu-id="94ea2-183">To avoid strong coupling, it's recommended that services don't reference each other directly.</span></span> <span data-ttu-id="94ea2-184">Si es necesario que el punto de conexión para un servicio cambie, las referencias directas pueden dar lugar a una refactorización importante.</span><span class="sxs-lookup"><span data-stu-id="94ea2-184">When the endpoint for a service needs to change, direct references could result in major refactoring.</span></span> <span data-ttu-id="94ea2-185">Una solución recomendada consiste en proporcionar un mecanismo de detección de servicios, como un registro, que proporciona el punto de conexión adecuado para un tipo de solicitud.</span><span class="sxs-lookup"><span data-stu-id="94ea2-185">A suggested solution is to provide a service discovery mechanism, such as a registry, that provides the appropriate end point for a request type.</span></span> <span data-ttu-id="94ea2-186">Otra solución es aprovechar servicios de mensajería como colas o temas para la comunicación entre servicios.</span><span class="sxs-lookup"><span data-stu-id="94ea2-186">Another solution is to leverage messaging services like queues or topics for communication between services.</span></span>

## <a name="managing-failure-and-providing-resiliency"></a><span data-ttu-id="94ea2-187">Error al administrar y provisión de resistencia</span><span class="sxs-lookup"><span data-stu-id="94ea2-187">Managing failure and providing resiliency</span></span>

<span data-ttu-id="94ea2-188">También es importante tener en cuenta el *patrón de interruptor*: Si, por algún motivo, un servicio sigue dando error, no es aconsejable llamar a ese servicio de manera repetida.</span><span class="sxs-lookup"><span data-stu-id="94ea2-188">It's also important to consider the *circuit-breaker pattern*: If, for some reason, a service continues to fail, it isn't advisable to call that service repeatedly.</span></span> <span data-ttu-id="94ea2-189">En su lugar, se llama a un servicio alternativo o se devuelve un mensaje hasta que se restablece el estado del servicio dependiente.</span><span class="sxs-lookup"><span data-stu-id="94ea2-189">Instead, an alternative service is called or a message returned until the health of the dependent service is re-established.</span></span> <span data-ttu-id="94ea2-190">La arquitectura sin servidor debe tener en cuenta la estrategia para resolver y administrar las dependencias entre servicios.</span><span class="sxs-lookup"><span data-stu-id="94ea2-190">The serverless architecture needs to take into account the strategy for resolving and managing inter-service dependencies.</span></span>

<span data-ttu-id="94ea2-191">Para proseguir con el patrón de interruptor, los servicios deben ser tolerantes a errores y resistentes.</span><span class="sxs-lookup"><span data-stu-id="94ea2-191">To continue the circuit-breaker pattern, services need to be fault tolerant and resilient.</span></span> <span data-ttu-id="94ea2-192">La tolerancia a errores hace referencia a la capacidad de su aplicación para seguir ejecutándose incluso después de encontrarse excepciones inesperadas o estados no válidos.</span><span class="sxs-lookup"><span data-stu-id="94ea2-192">Fault tolerance refers to the ability of your application to continue running even after unexpected exceptions or invalid states are encountered.</span></span> <span data-ttu-id="94ea2-193">La tolerancia a errores suele ser una función del propio código y cómo se escribe para controlar las excepciones.</span><span class="sxs-lookup"><span data-stu-id="94ea2-193">Fault tolerance is typically a function of the code itself and how it's written to handle exceptions.</span></span> <span data-ttu-id="94ea2-194">La resistencia hace referencia a la capacidad de la aplicación para recuperarse de los errores.</span><span class="sxs-lookup"><span data-stu-id="94ea2-194">Resiliency refers to how capable the app is at recovering from failures.</span></span> <span data-ttu-id="94ea2-195">La plataforma sin servidor suele administrar la resistencia.</span><span class="sxs-lookup"><span data-stu-id="94ea2-195">Resiliency is often managed by the serverless platform.</span></span> <span data-ttu-id="94ea2-196">La plataforma debe poder poner en marcha una nueva instancia de función sin servidor cuando se produce un error en la existente.</span><span class="sxs-lookup"><span data-stu-id="94ea2-196">The platform should be able to spin up a new serverless function instance when the existing one fails.</span></span> <span data-ttu-id="94ea2-197">La plataforma también debe ser lo suficientemente inteligente como para poner en marcha nuevas instancias cuando se produce un error en todas las instancias nuevas.</span><span class="sxs-lookup"><span data-stu-id="94ea2-197">The platform should also be intelligent enough to stop spinning up new instances when every new instance fails.</span></span>

<span data-ttu-id="94ea2-198">Para más información, consulte [Implementar el patrón de interruptor](../microservices/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="94ea2-198">For more information, see [Implementing the Circuit Breaker pattern](../microservices/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span></span>

## <a name="versioning-and-greenblue-deployments"></a><span data-ttu-id="94ea2-199">Control de versiones e implementaciones azul-verde</span><span class="sxs-lookup"><span data-stu-id="94ea2-199">Versioning and green/blue deployments</span></span>

<span data-ttu-id="94ea2-200">Una ventaja importante de sin servidor es la capacidad de actualizar una función específica sin tener que volver a implementar toda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="94ea2-200">A major benefit of serverless is the ability to upgrade a specific function without having to redeploy the entire application.</span></span> <span data-ttu-id="94ea2-201">Para que las actualizaciones se realicen correctamente, se deben realizar versiones de las funciones de modo que los servicios que las llaman se enruten a la versión correcta del código.</span><span class="sxs-lookup"><span data-stu-id="94ea2-201">For upgrades to be successful, functions must be versioned so that services calling them are routed to the correct version of code.</span></span> <span data-ttu-id="94ea2-202">Una estrategia para implementar nuevas versiones también es importante.</span><span class="sxs-lookup"><span data-stu-id="94ea2-202">A strategy for deploying new versions is also important.</span></span> <span data-ttu-id="94ea2-203">Un enfoque habitual es usar "implementaciones azul-verde".</span><span class="sxs-lookup"><span data-stu-id="94ea2-203">A common approach is to use "green/blue deployments."</span></span> <span data-ttu-id="94ea2-204">La implementación verde es la función actual.</span><span class="sxs-lookup"><span data-stu-id="94ea2-204">The green deployment is the current function.</span></span> <span data-ttu-id="94ea2-205">Una nueva versión "azul" se implementa en producción y se prueba.</span><span class="sxs-lookup"><span data-stu-id="94ea2-205">A new "blue" version is deployed to production and tested.</span></span> <span data-ttu-id="94ea2-206">Al superarse las pruebas, las versiones verde y azul se intercambian, de modo que la nueva versión se pone en marcha.</span><span class="sxs-lookup"><span data-stu-id="94ea2-206">When testing passes, the green and blue versions are swapped so the new version comes live.</span></span> <span data-ttu-id="94ea2-207">Si se detecta algún problema, pueden volver a intercambiarse.</span><span class="sxs-lookup"><span data-stu-id="94ea2-207">If any issues are encountered, they can be swapped back.</span></span> <span data-ttu-id="94ea2-208">La compatibilidad con el control de versiones y las implementaciones azul-verde requiere una combinación de creación de las funciones para alojar los cambios de versión y trabajo con la plataforma sin servidor para controlar las implementaciones.</span><span class="sxs-lookup"><span data-stu-id="94ea2-208">Supporting versioning and green/blue deployments requires a combination of authoring the functions to accommodate version changes and working with the serverless platform to handle deployments.</span></span> <span data-ttu-id="94ea2-209">Un posible enfoque consiste en usar servidores proxy, que se describen en el capítulo [Plataforma sin servidor de Azure](azure-functions.md#proxies).</span><span class="sxs-lookup"><span data-stu-id="94ea2-209">One possible approach is to use proxies, which are described in the [Azure serverless platform](azure-functions.md#proxies) chapter.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="94ea2-210">[Anterior](serverless-architecture.md)
>[Siguiente](serverless-design-examples.md)</span><span class="sxs-lookup"><span data-stu-id="94ea2-210">[Previous](serverless-architecture.md)
[Next](serverless-design-examples.md)</span></span>
