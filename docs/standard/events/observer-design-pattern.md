---
title: Modelo de diseño de observador
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- IObserver(Of T) interface
- IObservable<T> interface
- IObserver<T> interface
- IObservable(Of T) interface
- observer design pattern [.NET Framework]
ms.assetid: 3680171f-f522-453c-aa4a-54f755a78f88
ms.openlocfilehash: 817337cec604a431f9f7d4eacb04378ee0d3c227
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/15/2020
ms.locfileid: "73131571"
---
# <a name="observer-design-pattern"></a><span data-ttu-id="b5d92-102">Modelo de diseño de observador</span><span class="sxs-lookup"><span data-stu-id="b5d92-102">Observer Design Pattern</span></span>

<span data-ttu-id="b5d92-103">El modelo de diseño de observador permite que un suscriptor se registre con un proveedor y reciba notificaciones de dicho proveedor.</span><span class="sxs-lookup"><span data-stu-id="b5d92-103">The observer design pattern enables a subscriber to register with and receive notifications from a provider.</span></span> <span data-ttu-id="b5d92-104">Este modelo es adecuado para cualquier escenario que requiera notificaciones push.</span><span class="sxs-lookup"><span data-stu-id="b5d92-104">It is suitable for any scenario that requires push-based notification.</span></span> <span data-ttu-id="b5d92-105">El modelo define un *proveedor* (también conocido como un *tema* o una *observable*) y cero, uno o más *observadores*.</span><span class="sxs-lookup"><span data-stu-id="b5d92-105">The pattern defines a *provider* (also known as a *subject* or an *observable*) and zero, one, or more *observers*.</span></span> <span data-ttu-id="b5d92-106">Los observadores se registran con el proveedor y siempre que se produce una condición predefinida, un evento o un cambio de estado, el proveedor notifica automáticamente a todos los observadores mediante la llamada a uno de sus métodos.</span><span class="sxs-lookup"><span data-stu-id="b5d92-106">Observers register with the provider, and whenever a predefined condition, event, or state change occurs, the provider automatically notifies all observers by calling one of their methods.</span></span> <span data-ttu-id="b5d92-107">En esta llamada al método, el proveedor puede proporcionar también información sobre el estado actual a los observadores.</span><span class="sxs-lookup"><span data-stu-id="b5d92-107">In this method call, the provider can also provide current state information to observers.</span></span> <span data-ttu-id="b5d92-108">En .NET Framework, el modelo de diseño de observador se aplica con la implementación de las interfaces genéricas <xref:System.IObservable%601?displayProperty=nameWithType> y <xref:System.IObserver%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="b5d92-108">In the .NET Framework, the observer design pattern is applied by implementing the generic <xref:System.IObservable%601?displayProperty=nameWithType> and <xref:System.IObserver%601?displayProperty=nameWithType> interfaces.</span></span> <span data-ttu-id="b5d92-109">El parámetro de tipo genérico representa el tipo que proporciona información de notificación.</span><span class="sxs-lookup"><span data-stu-id="b5d92-109">The generic type parameter represents the type that provides notification information.</span></span>

## <a name="applying-the-pattern"></a><span data-ttu-id="b5d92-110">Aplicación del modelo</span><span class="sxs-lookup"><span data-stu-id="b5d92-110">Applying the Pattern</span></span>

<span data-ttu-id="b5d92-111">El modelo de diseño de observador es adecuado para las notificaciones distribuidas mediante push, ya que admite una separación clara entre dos componentes diferentes o capas de aplicación, como una capa de origen de datos (lógica de negocios) y una capa de interfaz de usuario (pantalla).</span><span class="sxs-lookup"><span data-stu-id="b5d92-111">The observer design pattern is suitable for distributed push-based notifications, because it supports a clean separation between two different components or application layers, such as a data source (business logic) layer and a user interface (display) layer.</span></span> <span data-ttu-id="b5d92-112">El modelo puede implementarse cada vez que un proveedor usa devoluciones de llamada para proporcionar información actual a sus clientes.</span><span class="sxs-lookup"><span data-stu-id="b5d92-112">The pattern can be implemented whenever a provider uses callbacks to supply its clients with current information.</span></span>

<span data-ttu-id="b5d92-113">Para implementar el modelo, es necesario proporcionar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="b5d92-113">Implementing the pattern requires that you provide the following:</span></span>

- <span data-ttu-id="b5d92-114">Un proveedor o un tema, que es el objeto que envía notificaciones a los observadores.</span><span class="sxs-lookup"><span data-stu-id="b5d92-114">A provider or subject, which is the object that sends notifications to observers.</span></span> <span data-ttu-id="b5d92-115">Un proveedor es una clase o estructura que implementa la interfaz <xref:System.IObservable%601>.</span><span class="sxs-lookup"><span data-stu-id="b5d92-115">A provider is a class or structure that implements the <xref:System.IObservable%601> interface.</span></span> <span data-ttu-id="b5d92-116">El proveedor debe implementar un único método, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType>, al que llaman los observadores que desean recibir notificaciones del proveedor.</span><span class="sxs-lookup"><span data-stu-id="b5d92-116">The provider must implement a single method, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType>, which is called by observers that wish to receive notifications from the provider.</span></span>

- <span data-ttu-id="b5d92-117">Un observador, que es un objeto que recibe notificaciones de un proveedor.</span><span class="sxs-lookup"><span data-stu-id="b5d92-117">An observer, which is an object that receives notifications from a provider.</span></span> <span data-ttu-id="b5d92-118">Un observador es una clase o estructura que implementa la interfaz <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="b5d92-118">An observer is a class or structure that implements the <xref:System.IObserver%601> interface.</span></span> <span data-ttu-id="b5d92-119">El observador debe implementar tres métodos, a los que llama el proveedor:</span><span class="sxs-lookup"><span data-stu-id="b5d92-119">The observer must implement three methods, all of which are called by the provider:</span></span>

  - <span data-ttu-id="b5d92-120"><xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType>, que proporciona al observador información nueva o actual.</span><span class="sxs-lookup"><span data-stu-id="b5d92-120"><xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType>, which supplies the observer with new or current information.</span></span>

  - <span data-ttu-id="b5d92-121"><xref:System.IObserver%601.OnError%2A?displayProperty=nameWithType>, que informa al observador de que se ha producido un error.</span><span class="sxs-lookup"><span data-stu-id="b5d92-121"><xref:System.IObserver%601.OnError%2A?displayProperty=nameWithType>, which informs the observer that an error has occurred.</span></span>

  - <span data-ttu-id="b5d92-122"><xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType>, que indica que el proveedor ha terminado de enviar notificaciones.</span><span class="sxs-lookup"><span data-stu-id="b5d92-122"><xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType>, which indicates that the provider has finished sending notifications.</span></span>

- <span data-ttu-id="b5d92-123">Un mecanismo que permite al proveedor realizar el seguimiento de observadores.</span><span class="sxs-lookup"><span data-stu-id="b5d92-123">A mechanism that allows the provider to keep track of observers.</span></span> <span data-ttu-id="b5d92-124">Normalmente, el proveedor usa un objeto contenedor, como <xref:System.Collections.Generic.List%601?displayProperty=nameWithType>, para mantener las referencias a las implementaciones de <xref:System.IObserver%601> que se han suscrito a las notificaciones.</span><span class="sxs-lookup"><span data-stu-id="b5d92-124">Typically, the provider uses a container object, such as a <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> object, to hold references to the <xref:System.IObserver%601> implementations that have subscribed to notifications.</span></span> <span data-ttu-id="b5d92-125">Gracias a un contenedor de almacenamiento específico para este fin, el proveedor puede controlar desde cero a un número ilimitado de observadores.</span><span class="sxs-lookup"><span data-stu-id="b5d92-125">Using a storage container for this purpose enables the provider to handle zero to an unlimited number of observers.</span></span> <span data-ttu-id="b5d92-126">El orden en que los observadores reciben las notificaciones no está definido y el proveedor es libre de usar cualquier método para determinar el orden.</span><span class="sxs-lookup"><span data-stu-id="b5d92-126">The order in which observers receive notifications is not defined; the provider is free to use any method to determine the order.</span></span>

- <span data-ttu-id="b5d92-127">Una implementación de <xref:System.IDisposable> que permite al proveedor quitar los observadores cuando se completa la notificación.</span><span class="sxs-lookup"><span data-stu-id="b5d92-127">An <xref:System.IDisposable> implementation that enables the provider to remove observers when notification is complete.</span></span> <span data-ttu-id="b5d92-128">Los observadores reciben una referencia a la implementación de <xref:System.IDisposable> desde el método <xref:System.IObservable%601.Subscribe%2A>, por lo que también pueden llamar al método <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> para cancelar la suscripción antes de que el proveedor termine de enviar las notificaciones.</span><span class="sxs-lookup"><span data-stu-id="b5d92-128">Observers receive a reference to the <xref:System.IDisposable> implementation from the <xref:System.IObservable%601.Subscribe%2A> method, so they can also call the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method to unsubscribe before the provider has finished sending notifications.</span></span>

- <span data-ttu-id="b5d92-129">Un objeto que contiene los datos que el proveedor envía a sus observadores.</span><span class="sxs-lookup"><span data-stu-id="b5d92-129">An object that contains the data that the provider sends to its observers.</span></span> <span data-ttu-id="b5d92-130">El tipo de este objeto se corresponde con el parámetro de tipo genérico de las interfaces <xref:System.IObservable%601> y <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="b5d92-130">The type of this object corresponds to the generic type parameter of the <xref:System.IObservable%601> and <xref:System.IObserver%601> interfaces.</span></span> <span data-ttu-id="b5d92-131">Aunque este objeto puede ser el mismo que la implementación de <xref:System.IObservable%601>, normalmente es un tipo diferente.</span><span class="sxs-lookup"><span data-stu-id="b5d92-131">Although this object can be the same as the <xref:System.IObservable%601> implementation, most commonly it is a separate type.</span></span>

> [!NOTE]
> <span data-ttu-id="b5d92-132">Además de implementar el modelo de diseño de observador, es posible que le interese explorar las bibliotecas que se compilan con las interfaces <xref:System.IObservable%601> y <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="b5d92-132">In addition to implementing the observer design pattern, you may be interested in exploring libraries that are built using the <xref:System.IObservable%601> and <xref:System.IObserver%601> interfaces.</span></span> <span data-ttu-id="b5d92-133">Por ejemplo, las [extensiones reactivas para .NET (Rx)](https://docs.microsoft.com/previous-versions/dotnet/reactive-extensions/hh242985(v=vs.103)) constan de un conjunto de métodos de extensión y los operadores de secuencia estándar de LINQ para admitir la programación asincrónica.</span><span class="sxs-lookup"><span data-stu-id="b5d92-133">For example, [Reactive Extensions for .NET (Rx)](https://docs.microsoft.com/previous-versions/dotnet/reactive-extensions/hh242985(v=vs.103)) consist of a set of extension methods and LINQ standard sequence operators to support asynchronous programming.</span></span>

## <a name="implementing-the-pattern"></a><span data-ttu-id="b5d92-134">Implementación del modelo</span><span class="sxs-lookup"><span data-stu-id="b5d92-134">Implementing the Pattern</span></span>

<span data-ttu-id="b5d92-135">En el ejemplo siguiente se usa el modelo de diseño de observador para implementar un sistema de información de recogida de equipaje en un aeropuerto.</span><span class="sxs-lookup"><span data-stu-id="b5d92-135">The following example uses the observer design pattern to implement an airport baggage claim information system.</span></span> <span data-ttu-id="b5d92-136">Una clase `BaggageInfo` proporciona información sobre la llegada de los vuelos y la cinta de recogida de equipaje correspondiente a cada vuelo.</span><span class="sxs-lookup"><span data-stu-id="b5d92-136">A `BaggageInfo` class provides information about arriving flights and the carousels where baggage from each flight is available for pickup.</span></span> <span data-ttu-id="b5d92-137">Esta implementación se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="b5d92-137">It is shown in the following example.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#1)]
[!code-vb[Conceptual.ObserverDesignPattern#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#1)]

<span data-ttu-id="b5d92-138">Una clase `BaggageHandler` es la responsable de recibir la información sobre la llegada de los vuelos y las cintas de recogida de equipaje.</span><span class="sxs-lookup"><span data-stu-id="b5d92-138">A `BaggageHandler` class is responsible for receiving information about arriving flights and baggage claim carousels.</span></span> <span data-ttu-id="b5d92-139">Internamente, mantiene dos colecciones:</span><span class="sxs-lookup"><span data-stu-id="b5d92-139">Internally, it maintains two collections:</span></span>

- <span data-ttu-id="b5d92-140">`observers`: colección de clientes que recibirán información actualizada.</span><span class="sxs-lookup"><span data-stu-id="b5d92-140">`observers` - A collection of clients that will receive updated information.</span></span>

- <span data-ttu-id="b5d92-141">`flights`: colección de los vuelos y sus cintas asignadas.</span><span class="sxs-lookup"><span data-stu-id="b5d92-141">`flights` - A collection of flights and their assigned carousels.</span></span>

<span data-ttu-id="b5d92-142">Ambas colecciones están representadas por objetos <xref:System.Collections.Generic.List%601> genéricos de los que se crean instancias en el constructor de clase `BaggageHandler`.</span><span class="sxs-lookup"><span data-stu-id="b5d92-142">Both collections are represented by generic <xref:System.Collections.Generic.List%601> objects that are instantiated in the `BaggageHandler` class constructor.</span></span> <span data-ttu-id="b5d92-143">El código fuente de la clase `BaggageHandler` se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="b5d92-143">The source code for the `BaggageHandler` class is shown in the following example.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#2)]
[!code-vb[Conceptual.ObserverDesignPattern#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#2)]

<span data-ttu-id="b5d92-144">Los clientes que deseen recibir información actualizada llaman al método `BaggageHandler.Subscribe`.</span><span class="sxs-lookup"><span data-stu-id="b5d92-144">Clients that wish to receive updated information call the `BaggageHandler.Subscribe` method.</span></span> <span data-ttu-id="b5d92-145">Si el cliente no se ha suscrito previamente a las notificaciones, en la colección de `observers` se agrega una referencia a la implementación de <xref:System.IObserver%601> del cliente.</span><span class="sxs-lookup"><span data-stu-id="b5d92-145">If the client has not previously subscribed to notifications, a reference to the client's <xref:System.IObserver%601> implementation is added to the `observers` collection.</span></span>

<span data-ttu-id="b5d92-146">Se puede llamar al método `BaggageHandler.BaggageStatus` sobrecargado para indicar que el equipaje de un vuelo se está descargando o ya no se está descargando.</span><span class="sxs-lookup"><span data-stu-id="b5d92-146">The overloaded `BaggageHandler.BaggageStatus` method can be called to indicate that baggage from a flight either is being unloaded or is no longer being unloaded.</span></span> <span data-ttu-id="b5d92-147">En el primer caso, se pasa al método un número de vuelo, el aeropuerto de origen del vuelo y la cinta en la que se está descargando el equipaje.</span><span class="sxs-lookup"><span data-stu-id="b5d92-147">In the first case, the method is passed a flight number, the airport from which the flight originated, and the carousel where baggage is being unloaded.</span></span> <span data-ttu-id="b5d92-148">En el segundo caso, solo se pasa al método un número de vuelo.</span><span class="sxs-lookup"><span data-stu-id="b5d92-148">In the second case, the method is passed only a flight number.</span></span> <span data-ttu-id="b5d92-149">Para el equipaje que se está descargado, el método comprueba si la información `BaggageInfo` que se pasa al método existe en la colección `flights`.</span><span class="sxs-lookup"><span data-stu-id="b5d92-149">For baggage that is being unloaded, the method checks whether the `BaggageInfo` information passed to the method exists in the `flights` collection.</span></span> <span data-ttu-id="b5d92-150">Si no es así, el método agrega la información y llama al método `OnNext` de cada observador.</span><span class="sxs-lookup"><span data-stu-id="b5d92-150">If it does not, the method adds the information and calls each observer's `OnNext` method.</span></span> <span data-ttu-id="b5d92-151">Para los vuelos cuyo equipaje ya no se está descargando, el método comprueba si la información del vuelo se almacena en la colección `flights`.</span><span class="sxs-lookup"><span data-stu-id="b5d92-151">For flights whose baggage is no longer being unloaded, the method checks whether information on that flight is stored in the `flights` collection.</span></span> <span data-ttu-id="b5d92-152">Si es así, el método llama al método `OnNext` de cada observador y quita el objeto `BaggageInfo` de la colección `flights`.</span><span class="sxs-lookup"><span data-stu-id="b5d92-152">If it is, the method calls each observer's `OnNext` method and removes the `BaggageInfo` object from the `flights` collection.</span></span>

<span data-ttu-id="b5d92-153">Una vez que aterrice el último vuelo del día y se procese su equipaje, se llama al método `BaggageHandler.LastBaggageClaimed`.</span><span class="sxs-lookup"><span data-stu-id="b5d92-153">When the last flight of the day has landed and its baggage has been processed, the `BaggageHandler.LastBaggageClaimed` method is called.</span></span> <span data-ttu-id="b5d92-154">Este método llama al método `OnCompleted` de cada observador para indicar que se han completado todas las notificaciones y, a continuación, borra la colección `observers`.</span><span class="sxs-lookup"><span data-stu-id="b5d92-154">This method calls each observer's `OnCompleted` method to indicate that all notifications have completed, and then clears the `observers` collection.</span></span>

<span data-ttu-id="b5d92-155">El método <xref:System.IObservable%601.Subscribe%2A> del proveedor devuelve una implementación <xref:System.IDisposable> que permite a los observadores dejar de recibir notificaciones antes de que se llame al método <xref:System.IObserver%601.OnCompleted%2A>.</span><span class="sxs-lookup"><span data-stu-id="b5d92-155">The provider's <xref:System.IObservable%601.Subscribe%2A> method returns an <xref:System.IDisposable> implementation that enables observers to stop receiving notifications before the <xref:System.IObserver%601.OnCompleted%2A> method is called.</span></span> <span data-ttu-id="b5d92-156">El código fuente para esta clase `Unsubscriber(Of BaggageInfo)` se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="b5d92-156">The source code for this `Unsubscriber(Of BaggageInfo)` class is shown in the following example.</span></span> <span data-ttu-id="b5d92-157">Cuando se crea una instancia de la clase en el método `BaggageHandler.Subscribe`, se pasa una referencia a la colección `observers` y una referencia al observador que se agrega a la colección.</span><span class="sxs-lookup"><span data-stu-id="b5d92-157">When the class is instantiated in the `BaggageHandler.Subscribe` method, it is passed a reference to the `observers` collection and a reference to the observer that is added to the collection.</span></span> <span data-ttu-id="b5d92-158">Estas referencias se asignan a variables locales.</span><span class="sxs-lookup"><span data-stu-id="b5d92-158">These references are assigned to local variables.</span></span> <span data-ttu-id="b5d92-159">Cuando se llama al método `Dispose` del objeto, comprueba si el observador todavía existe en la colección `observers` y, si es así, se quita el observador.</span><span class="sxs-lookup"><span data-stu-id="b5d92-159">When the object's `Dispose` method is called, it checks whether the observer still exists in the `observers` collection, and, if it does, removes the observer.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#3)]
[!code-vb[Conceptual.ObserverDesignPattern#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#3)]

<span data-ttu-id="b5d92-160">En el ejemplo siguiente se proporciona una implementación de <xref:System.IObserver%601> denominada `ArrivalsMonitor`, que es una clase base que muestra información sobre la recogida de equipaje.</span><span class="sxs-lookup"><span data-stu-id="b5d92-160">The following example provides an <xref:System.IObserver%601> implementation named `ArrivalsMonitor`, which is a base class that displays baggage claim information.</span></span> <span data-ttu-id="b5d92-161">La información se muestra por orden alfabético, según el nombre de la ciudad de origen.</span><span class="sxs-lookup"><span data-stu-id="b5d92-161">The information is displayed alphabetically, by the name of the originating city.</span></span> <span data-ttu-id="b5d92-162">Los métodos de `ArrivalsMonitor` se marcan como `overridable` (en Visual Basic) o `virtual` (en C#), por lo que se pueden invalidar mediante una clase derivada.</span><span class="sxs-lookup"><span data-stu-id="b5d92-162">The methods of `ArrivalsMonitor` are marked as `overridable` (in Visual Basic) or `virtual` (in C#), so they can all be overridden by a derived class.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/observer.cs#4)]
[!code-vb[Conceptual.ObserverDesignPattern#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/observer.vb#4)]

<span data-ttu-id="b5d92-163">La clase `ArrivalsMonitor` contiene los métodos `Subscribe` y `Unsubscribe`.</span><span class="sxs-lookup"><span data-stu-id="b5d92-163">The `ArrivalsMonitor` class includes the `Subscribe` and `Unsubscribe` methods.</span></span> <span data-ttu-id="b5d92-164">El método `Subscribe` permite que la clase guarde la implementación de <xref:System.IDisposable> devuelta por la llamada a <xref:System.IObservable%601.Subscribe%2A> a una variable privada.</span><span class="sxs-lookup"><span data-stu-id="b5d92-164">The `Subscribe` method enables the class to save the <xref:System.IDisposable> implementation returned by the call to <xref:System.IObservable%601.Subscribe%2A> to a private variable.</span></span> <span data-ttu-id="b5d92-165">El método `Unsubscribe` permite que la clase cancele la suscripción a notificaciones mediante una llamada a la implementación de <xref:System.IDisposable.Dispose%2A> del proveedor.</span><span class="sxs-lookup"><span data-stu-id="b5d92-165">The `Unsubscribe` method enables the class to unsubscribe from notifications by calling the provider's <xref:System.IDisposable.Dispose%2A> implementation.</span></span> <span data-ttu-id="b5d92-166">`ArrivalsMonitor` también proporciona implementaciones de los métodos <xref:System.IObserver%601.OnNext%2A>, <xref:System.IObserver%601.OnError%2A> y <xref:System.IObserver%601.OnCompleted%2A>.</span><span class="sxs-lookup"><span data-stu-id="b5d92-166">`ArrivalsMonitor` also provides implementations of the <xref:System.IObserver%601.OnNext%2A>, <xref:System.IObserver%601.OnError%2A>, and <xref:System.IObserver%601.OnCompleted%2A> methods.</span></span> <span data-ttu-id="b5d92-167">Tan solo la implementación de <xref:System.IObserver%601.OnNext%2A> contiene una cantidad significativa de código.</span><span class="sxs-lookup"><span data-stu-id="b5d92-167">Only the <xref:System.IObserver%601.OnNext%2A> implementation contains a significant amount of code.</span></span> <span data-ttu-id="b5d92-168">El método funciona con un objeto <xref:System.Collections.Generic.List%601> privado, ordenado y genérico que posee información sobre los aeropuertos de origen de los vuelos de llegada y las cintas en las que está disponible el correspondiente equipaje.</span><span class="sxs-lookup"><span data-stu-id="b5d92-168">The method works with a private, sorted, generic <xref:System.Collections.Generic.List%601> object that maintains information about the airports of origin for arriving flights and the carousels on which their baggage is available.</span></span> <span data-ttu-id="b5d92-169">Si la clase `BaggageHandler` notifica la llegada de un nuevo vuelo, la implementación del método <xref:System.IObserver%601.OnNext%2A> agrega información sobre ese vuelo a la lista.</span><span class="sxs-lookup"><span data-stu-id="b5d92-169">If the `BaggageHandler` class reports a new flight arrival, the <xref:System.IObserver%601.OnNext%2A> method implementation adds information about that flight to the list.</span></span> <span data-ttu-id="b5d92-170">Si la clase `BaggageHandler` informa de que el equipaje del vuelo se ha descargado, el método <xref:System.IObserver%601.OnNext%2A> quita este vuelo de la lista.</span><span class="sxs-lookup"><span data-stu-id="b5d92-170">If the `BaggageHandler` class reports that the flight's baggage has been unloaded, the <xref:System.IObserver%601.OnNext%2A> method removes that flight from the list.</span></span> <span data-ttu-id="b5d92-171">Cada vez que se produce un cambio, la lista se ordena y se muestra en la consola.</span><span class="sxs-lookup"><span data-stu-id="b5d92-171">Whenever a change is made, the list is sorted and displayed to the console.</span></span>

<span data-ttu-id="b5d92-172">El ejemplo siguiente contiene el punto de entrada de la aplicación que crea una instancia de la clase `BaggageHandler`, así como dos instancias de la clase `ArrivalsMonitor`, y usa el método `BaggageHandler.BaggageStatus` para agregar y quitar información sobre los vuelos de llegada.</span><span class="sxs-lookup"><span data-stu-id="b5d92-172">The following example contains the application entry point that instantiates the `BaggageHandler` class as well as two instances of the `ArrivalsMonitor` class, and uses the `BaggageHandler.BaggageStatus` method to add and remove information about arriving flights.</span></span> <span data-ttu-id="b5d92-173">En cada caso, los observadores reciben actualizaciones y muestran correctamente la información de recogida de equipaje.</span><span class="sxs-lookup"><span data-stu-id="b5d92-173">In each case, the observers receive updates and correctly display baggage claim information.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/program.cs#5)]
[!code-vb[Conceptual.ObserverDesignPattern#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/module1.vb#5)]

## <a name="related-topics"></a><span data-ttu-id="b5d92-174">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="b5d92-174">Related Topics</span></span>

|<span data-ttu-id="b5d92-175">Título</span><span class="sxs-lookup"><span data-stu-id="b5d92-175">Title</span></span>|<span data-ttu-id="b5d92-176">Description</span><span class="sxs-lookup"><span data-stu-id="b5d92-176">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="b5d92-177">Procedimientos recomendados para modelos de diseño de observador</span><span class="sxs-lookup"><span data-stu-id="b5d92-177">Observer Design Pattern Best Practices</span></span>](../../../docs/standard/events/observer-design-pattern-best-practices.md)|<span data-ttu-id="b5d92-178">Describe los procedimientos recomendados que deben adoptarse en el desarrollo de aplicaciones que implementan el modelo de diseño de observador.</span><span class="sxs-lookup"><span data-stu-id="b5d92-178">Describes best practices to adopt when developing applications that implement the observer design pattern.</span></span>|
|[<span data-ttu-id="b5d92-179">Implementar un proveedor</span><span class="sxs-lookup"><span data-stu-id="b5d92-179">How to: Implement a Provider</span></span>](../../../docs/standard/events/how-to-implement-a-provider.md)|<span data-ttu-id="b5d92-180">Proporciona una implementación detallada de un proveedor para una aplicación de supervisión de temperatura.</span><span class="sxs-lookup"><span data-stu-id="b5d92-180">Provides a step-by-step implementation of a provider for a temperature monitoring application.</span></span>|
|[<span data-ttu-id="b5d92-181">Implementar un observador</span><span class="sxs-lookup"><span data-stu-id="b5d92-181">How to: Implement an Observer</span></span>](../../../docs/standard/events/how-to-implement-an-observer.md)|<span data-ttu-id="b5d92-182">Proporciona una implementación detallada de un observador para una aplicación de supervisión de temperatura.</span><span class="sxs-lookup"><span data-stu-id="b5d92-182">Provides a step-by-step implementation of an observer for a temperature monitoring application.</span></span>|
