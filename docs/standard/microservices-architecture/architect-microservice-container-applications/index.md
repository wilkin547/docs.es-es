---
title: Diseñar la arquitectura de aplicaciones basadas en contenedores y microservicios
description: Arquitectura de microservicios de .NET para aplicaciones .NET en contenedor | Diseñar la arquitectura de aplicaciones basadas en contenedores y microservicios
keywords: Docker, microservicios, ASP.NET, contenedor
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 9b3088d93ead589c0b295bc3d2807fc98ee8ea75
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 12/23/2017
---
# <a name="architecting-container--and-microservice-based-applications"></a><span data-ttu-id="a7b3d-104">Diseñar la arquitectura de aplicaciones basadas en contenedores y microservicios</span><span class="sxs-lookup"><span data-stu-id="a7b3d-104">Architecting Container- and Microservice-Based Applications</span></span>

<span data-ttu-id="a7b3d-105">*Los microservicios ofrecen grandes ventajas, pero también generan nuevos desafíos enormes. Los patrones de arquitectura de microservicios son los pilares fundamentales a la hora de crear una aplicación basada en microservicios.*</span><span class="sxs-lookup"><span data-stu-id="a7b3d-105">*Microservices offer great benefits but also raise huge new challenges. Microservice architecture patterns are fundamental pillars when creating a microservice-based application.*</span></span>

<span data-ttu-id="a7b3d-106">Previamente en esta guía, ha aprendido los conceptos básicos sobre los contenedores y Docker.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-106">Earlier in this guide, you learned basic concepts about containers and Docker.</span></span> <span data-ttu-id="a7b3d-107">Con esa información mínima, ya puede empezar a trabajar con contenedores.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-107">That was the minimum information you need in order to get started with containers.</span></span> <span data-ttu-id="a7b3d-108">Aunque los contenedores son habilitadores y se consideran una gran elección para microservicios, no son obligatorios para una arquitectura de microservicios, y muchos conceptos arquitectónicos de esta sección sobre la arquitectura también se podrían aplicar sin contenedores.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-108">Although, even when containers are enablers and a great fit for microservices, they are not mandatory for a microservice architecture and many architectural concepts in this architecture section could be applied without containers, too.</span></span> <span data-ttu-id="a7b3d-109">A pesar de ello, esta guía se centra en la intersección de ambos debido a la importancia actual de los contenedores.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-109">However, this guidance focuses on the intersection of both due to the already introduced importance of containers.</span></span>

<span data-ttu-id="a7b3d-110">Las aplicaciones empresariales pueden ser complejas y, a menudo, se componen de varios servicios en lugar de una sola aplicación basada en servicios.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-110">Enterprise applications can be complex and are often composed of multiple services instead of a single service-based application.</span></span> <span data-ttu-id="a7b3d-111">En esos casos, debe comprender otros enfoques de arquitectura, como son los microservicios y determinados patrones de diseño guiado por el dominio (DDD), además de conceptos de orquestación de contenedores.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-111">For those cases, you need to understand additional architectural approaches, such as the microservices and certain Domain-Driven Design (DDD) patterns plus container orchestration concepts.</span></span> <span data-ttu-id="a7b3d-112">Tenga en cuenta que en este capítulo no solo se describen los microservicios en contenedor, sino cualquier aplicación en contenedor.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-112">Note that this chapter describes not just microservices on containers, but any containerized application, as well.</span></span>

## <a name="container-design-principles"></a><span data-ttu-id="a7b3d-113">Principios de diseño de contenedores</span><span class="sxs-lookup"><span data-stu-id="a7b3d-113">Container design principles</span></span>

<span data-ttu-id="a7b3d-114">En el modelo de contenedor, una instancia de imagen de contenedor representa un único proceso.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-114">In the container model, a container image instance represents a single process.</span></span> <span data-ttu-id="a7b3d-115">Al definir una imagen de contenedor como un límite de proceso, puede crear primitivas que se usen para escalar el proceso o para procesarlo por lotes.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-115">By defining a container image as a process boundary, you can create primitives that can be used to scale the process or to batch it.</span></span>

<span data-ttu-id="a7b3d-116">Cuando diseñe una imagen de contenedor, verá una definición [ENTRYPOINT](https://docs.docker.com/engine/reference/builder/) en el archivo Dockerfile.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-116">When you design a container image, you will see an [ENTRYPOINT](https://docs.docker.com/engine/reference/builder/) definition in the Dockerfile.</span></span> <span data-ttu-id="a7b3d-117">Esto define el proceso cuya duración controla la duración del contenedor.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-117">This defines the process whose lifetime controls the lifetime of the container.</span></span> <span data-ttu-id="a7b3d-118">Cuando se completa el proceso, finaliza el ciclo de vida del contenedor.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-118">When the process completes, the container lifecycle ends.</span></span> <span data-ttu-id="a7b3d-119">Los contenedores pueden representar procesos de ejecución prolongada como servidores web, pero también pueden representar procesos de corta duración, como trabajos por lotes, que anteriormente se implementarían como [WebJobs](https://docs.microsoft.com/azure/app-service-web/websites-webjobs-resources) de Azure.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-119">Containers might represent long-running processes like web servers, but can also represent short-lived processes like batch jobs, which formerly might have been implemented as Azure [WebJobs](https://docs.microsoft.com/azure/app-service-web/websites-webjobs-resources).</span></span>

<span data-ttu-id="a7b3d-120">Si se produce un error en el proceso, el contenedor finaliza y lo sustituye el orquestador.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-120">If the process fails, the container ends, and the orchestrator takes over.</span></span> <span data-ttu-id="a7b3d-121">Si el orquestador está configurado para mantener cinco instancias en ejecución y se produce un error en una de ellas, el orquestador creará otra instancia del contenedor para reemplazar al proceso con error.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-121">If the orchestrator was configured to keep five instances running and one fails, the orchestrator will create another container instance to replace the failed process.</span></span> <span data-ttu-id="a7b3d-122">En un trabajo por lotes, el proceso se inicia con parámetros.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-122">In a batch job, the process is started with parameters.</span></span> <span data-ttu-id="a7b3d-123">Cuando el proceso finalice, el trabajo se habrá completado.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-123">When the process completes, the work is complete.</span></span> <span data-ttu-id="a7b3d-124">Más adelante en esta guía se exploran en profundidad los orquestadores.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-124">This guidance drills-down on orchestrators, later on.</span></span>

<span data-ttu-id="a7b3d-125">Es posible que en algún momento le interese que varios procesos se ejecuten en un solo contenedor.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-125">You might find a scenario where you want multiple processes running in a single container.</span></span> <span data-ttu-id="a7b3d-126">En ese caso, dado que solo puede haber un punto de entrada por contenedor, puede ejecutar dentro del contenedor un script que inicie todos los programas que sean necesarios.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-126">For that scenario, since there can be only one entry point per container, you could run a script within the container that launches as many programs as needed.</span></span> <span data-ttu-id="a7b3d-127">Por ejemplo, puede usar [Supervisor](http://supervisord.org/) o una herramienta similar para que se encargue de iniciar varios procesos dentro de un único contenedor.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-127">For example, you can use [Supervisor](http://supervisord.org/) or a similar tool to take care of launching multiple processes inside a single container.</span></span> <span data-ttu-id="a7b3d-128">Este método no es muy habitual, aunque existan arquitecturas que contengan varios procesos por contenedor.</span><span class="sxs-lookup"><span data-stu-id="a7b3d-128">However, even though you can find architectures that hold multiple processes per container, that approach it is not very common.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="a7b3d-129">[Anterior] (../net-core-net-framework-containers/official-net-docker-images.md) [Siguiente] (containerize-monolithic-applications.md)</span><span class="sxs-lookup"><span data-stu-id="a7b3d-129">[Previous] (../net-core-net-framework-containers/official-net-docker-images.md) [Next] (containerize-monolithic-applications.md)</span></span>
