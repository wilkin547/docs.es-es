---
title: "Cómo: Mostrar información localizada de fecha y hora a usuarios web"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- formatting [.NET Framework], dates
- parsing strings [.NET Framework], date and time strings
- localization [.NET Framework], date and time displays
- formatting [.NET Framework], localized data
- displaying date and time data
- localized date displays [.NET Framework]
ms.assetid: 377fe93c-32be-421a-a30a-be639a46ede8
caps.latest.revision: "8"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: 21493e0e0c9e42cf5efc42d86c8f126fbae9b392
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/21/2017
---
# <a name="how-to-display-localized-date-and-time-information-to-web-users"></a><span data-ttu-id="4171e-102">Cómo: Mostrar información localizada de fecha y hora a usuarios web</span><span class="sxs-lookup"><span data-stu-id="4171e-102">How to: Display Localized Date and Time Information to Web Users</span></span>
<span data-ttu-id="4171e-103">Dado que una página Web puede mostrarse en cualquier lugar del mundo, las operaciones que analizarán y dar formato a valores de fecha y hora no deben confiar en un formato predeterminado (que suele ser el formato de referencia cultural local del servidor Web) al interactuar con el usuario.</span><span class="sxs-lookup"><span data-stu-id="4171e-103">Because a Web page can be displayed anywhere in the world, operations that parse and format date and time values should not rely on a default format (which most often is the format of the Web server's local culture) when interacting with the user.</span></span> <span data-ttu-id="4171e-104">En su lugar, formularios Web forms que controlen la fecha y hora de entrada de cadenas por el usuario deben analizar estas cadenas usando la referencia cultural preferida del usuario.</span><span class="sxs-lookup"><span data-stu-id="4171e-104">Instead, Web forms that handle date and time strings input by the user should parse the strings using the user's preferred culture.</span></span> <span data-ttu-id="4171e-105">De forma similar, los datos de fecha y hora deben mostrarse al usuario en un formato que se ajusta a la referencia cultural del usuario.</span><span class="sxs-lookup"><span data-stu-id="4171e-105">Similarly, date and time data should be displayed to the user in a format that conforms to the user's culture.</span></span> <span data-ttu-id="4171e-106">En este tema se explica cómo hacerlo.</span><span class="sxs-lookup"><span data-stu-id="4171e-106">This topic shows how to do this.</span></span>  
  
### <a name="to-parse-date-and-time-strings-input-by-the-user"></a><span data-ttu-id="4171e-107">Analizar la fecha y hora en cadenas de datos proporcionados por el usuario</span><span class="sxs-lookup"><span data-stu-id="4171e-107">To parse date and time strings input by the user</span></span>  
  
1.  <span data-ttu-id="4171e-108">Determinar si la matriz de cadena devueltos por la <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> propiedad se rellena.</span><span class="sxs-lookup"><span data-stu-id="4171e-108">Determine whether the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated.</span></span> <span data-ttu-id="4171e-109">Si no es así, vaya al paso 6.</span><span class="sxs-lookup"><span data-stu-id="4171e-109">If it is not, continue to step 6.</span></span>  
  
2.  <span data-ttu-id="4171e-110">Si la matriz de cadenas devuelta por la <xref:System.Web.HttpRequest.UserLanguages%2A> propiedad se rellena, recupere el primer elemento.</span><span class="sxs-lookup"><span data-stu-id="4171e-110">If the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is populated, retrieve its first element.</span></span> <span data-ttu-id="4171e-111">El primer elemento indica el usuario predeterminado o idioma preferido y región.</span><span class="sxs-lookup"><span data-stu-id="4171e-111">The first element indicates the user's default or preferred language and region.</span></span>  
  
3.  <span data-ttu-id="4171e-112">Crear una instancia de un <xref:System.Globalization.CultureInfo> objeto que representa al usuario preferido referencia cultural mediante una llamada a la <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructor.</span><span class="sxs-lookup"><span data-stu-id="4171e-112">Instantiate a <xref:System.Globalization.CultureInfo> object that represents the user's preferred culture by calling the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructor.</span></span>  
  
4.  <span data-ttu-id="4171e-113">Llamar a la `TryParse` o `Parse` método de la <xref:System.DateTime> o <xref:System.DateTimeOffset> tipo intentar la conversión.</span><span class="sxs-lookup"><span data-stu-id="4171e-113">Call either the `TryParse` or the `Parse` method of the <xref:System.DateTime> or <xref:System.DateTimeOffset> type to try the conversion.</span></span> <span data-ttu-id="4171e-114">Use una sobrecarga de la `TryParse` o `Parse` método con un `provider` parámetro y pasar cualquiera de las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="4171e-114">Use an overload of the `TryParse` or the `Parse` method with a `provider` parameter, and pass it either of the following:</span></span>  
  
    -   <span data-ttu-id="4171e-115">La <xref:System.Globalization.CultureInfo> objeto creado en el paso 3.</span><span class="sxs-lookup"><span data-stu-id="4171e-115">The <xref:System.Globalization.CultureInfo> object created in step 3.</span></span>  
  
    -   <span data-ttu-id="4171e-116">El <xref:System.Globalization.DateTimeFormatInfo> objeto devuelto por la <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> propiedad de la <xref:System.Globalization.CultureInfo> objeto creado en el paso 3.</span><span class="sxs-lookup"><span data-stu-id="4171e-116">The <xref:System.Globalization.DateTimeFormatInfo> object that is returned by the <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> property of the <xref:System.Globalization.CultureInfo> object created in step 3.</span></span>  
  
5.  <span data-ttu-id="4171e-117">Si se produce un error en la conversión, repita los pasos del 2 al 4 para cada elemento restante en la matriz de cadenas devueltos por la <xref:System.Web.HttpRequest.UserLanguages%2A> propiedad.</span><span class="sxs-lookup"><span data-stu-id="4171e-117">If the conversion fails, repeat steps 2 through 4 for each remaining element in the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property.</span></span>  
  
6.  <span data-ttu-id="4171e-118">Si todavía se produce un error en la conversión o si la matriz de cadenas devuelta por la <xref:System.Web.HttpRequest.UserLanguages%2A> propiedad está vacía, analizar la cadena usando la referencia cultural, lo que es devuelto por la <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> propiedad.</span><span class="sxs-lookup"><span data-stu-id="4171e-118">If the conversion still fails or if the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is empty, parse the string by using the invariant culture, which is returned by the <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span>  
  
### <a name="to-parse-the-local-date-and-time-of-the-users-request"></a><span data-ttu-id="4171e-119">Analizar la fecha y hora local de la solicitud del usuario</span><span class="sxs-lookup"><span data-stu-id="4171e-119">To parse the local date and time of the user's request</span></span>  
  
1.  <span data-ttu-id="4171e-120">Agregar un <xref:System.Web.UI.WebControls.HiddenField> control a un formulario Web Forms.</span><span class="sxs-lookup"><span data-stu-id="4171e-120">Add a <xref:System.Web.UI.WebControls.HiddenField> control to a Web form.</span></span>  
  
2.  <span data-ttu-id="4171e-121">Crear una función de JavaScript que controla la `onClick` eventos de un `Submit` botón escribiendo la fecha y hora actuales y desplazamiento de la zona horaria local de la hora Universal coordinada (UTC) para el <xref:System.Web.UI.WebControls.HiddenField.Value%2A> propiedad.</span><span class="sxs-lookup"><span data-stu-id="4171e-121">Create a JavaScript function that handles the `onClick` event of a `Submit` button by writing the current date and time and the local time zone's offset from Coordinated Universal Time (UTC) to the <xref:System.Web.UI.WebControls.HiddenField.Value%2A> property.</span></span> <span data-ttu-id="4171e-122">Use un delimitador (por ejemplo, un punto y coma) para separar los dos componentes de la cadena.</span><span class="sxs-lookup"><span data-stu-id="4171e-122">Use a delimiter (such as a semicolon) to separate the two components of the string.</span></span>  
  
3.  <span data-ttu-id="4171e-123">Utilizar el formulario Web <xref:System.Web.UI.Control.PreRender> flujo de salida de evento para insertar la función en el código HTML, pasando el texto de la secuencia de comandos para la <xref:System.Web.UI.ClientScriptManager.RegisterClientScriptBlock%28System.Type%2CSystem.String%2CSystem.String%2CSystem.Boolean%29?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="4171e-123">Use the Web form's <xref:System.Web.UI.Control.PreRender> event to inject the function into the HTML output stream by passing the text of the script to the <xref:System.Web.UI.ClientScriptManager.RegisterClientScriptBlock%28System.Type%2CSystem.String%2CSystem.String%2CSystem.Boolean%29?displayProperty=nameWithType> method.</span></span>  
  
4.  <span data-ttu-id="4171e-124">Conectar el controlador de eventos para el `Submit` del botón `onClick` eventos proporcionando el nombre de la función JavaScript a la `OnClientClick` atributo de la `Submit` botón.</span><span class="sxs-lookup"><span data-stu-id="4171e-124">Connect the event handler to the `Submit` button's `onClick` event by providing the name of the JavaScript function to the `OnClientClick` attribute of the `Submit` button.</span></span>  
  
5.  <span data-ttu-id="4171e-125">Crear un controlador para el `Submit` del botón <xref:System.Web.UI.WebControls.Button.Click> eventos.</span><span class="sxs-lookup"><span data-stu-id="4171e-125">Create a handler for the `Submit` button's <xref:System.Web.UI.WebControls.Button.Click> event.</span></span>  
  
6.  <span data-ttu-id="4171e-126">En el controlador de eventos, determine si la matriz de cadena devueltos por la <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> propiedad se rellena.</span><span class="sxs-lookup"><span data-stu-id="4171e-126">In the event handler, determine whether the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated.</span></span> <span data-ttu-id="4171e-127">Si no es así, vaya al paso 14.</span><span class="sxs-lookup"><span data-stu-id="4171e-127">If it is not, continue to step 14.</span></span>  
  
7.  <span data-ttu-id="4171e-128">Si la matriz de cadenas devuelta por la <xref:System.Web.HttpRequest.UserLanguages%2A> propiedad se rellena, recupere el primer elemento.</span><span class="sxs-lookup"><span data-stu-id="4171e-128">If the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is populated, retrieve its first element.</span></span> <span data-ttu-id="4171e-129">El primer elemento indica el usuario predeterminado o idioma preferido y región.</span><span class="sxs-lookup"><span data-stu-id="4171e-129">The first element indicates the user's default or preferred language and region.</span></span>  
  
8.  <span data-ttu-id="4171e-130">Crear una instancia de un <xref:System.Globalization.CultureInfo> objeto que representa al usuario preferido referencia cultural mediante una llamada a la <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructor.</span><span class="sxs-lookup"><span data-stu-id="4171e-130">Instantiate a <xref:System.Globalization.CultureInfo> object that represents the user's preferred culture by calling the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructor.</span></span>  
  
9. <span data-ttu-id="4171e-131">Pase la cadena asignada a la <xref:System.Web.UI.WebControls.HiddenField.Value%2A> propiedad a la <xref:System.String.Split%2A> método utilizado para almacenar la representación de cadena de fecha local del usuario y la hora y la representación de cadena de ajuste de zona horaria local del usuario en elementos de matriz independiente.</span><span class="sxs-lookup"><span data-stu-id="4171e-131">Pass the string assigned to the <xref:System.Web.UI.WebControls.HiddenField.Value%2A> property to the <xref:System.String.Split%2A> method to store the string representation of the user's local date and time and the string representation of the user's local time zone offset in separate array elements.</span></span>  
  
10. <span data-ttu-id="4171e-132">Llamar a la <xref:System.DateTime.Parse%2A?displayProperty=nameWithType> o <xref:System.DateTime.TryParse%28System.String%2CSystem.IFormatProvider%2CSystem.Globalization.DateTimeStyles%2CSystem.DateTime%40%29?displayProperty=nameWithType> método para convertir la fecha y hora de la solicitud del usuario a un <xref:System.DateTime> valor.</span><span class="sxs-lookup"><span data-stu-id="4171e-132">Call either the <xref:System.DateTime.Parse%2A?displayProperty=nameWithType> or <xref:System.DateTime.TryParse%28System.String%2CSystem.IFormatProvider%2CSystem.Globalization.DateTimeStyles%2CSystem.DateTime%40%29?displayProperty=nameWithType> method to convert the date and time of the user's request to a <xref:System.DateTime> value.</span></span> <span data-ttu-id="4171e-133">Use una sobrecarga del método con un `provider` parámetro y pasar cualquiera de las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="4171e-133">Use an overload of the method with a `provider` parameter, and pass it either of the following:</span></span>  
  
    -   <span data-ttu-id="4171e-134">La <xref:System.Globalization.CultureInfo> objeto creado en el paso 8.</span><span class="sxs-lookup"><span data-stu-id="4171e-134">The <xref:System.Globalization.CultureInfo> object created in step 8.</span></span>  
  
    -   <span data-ttu-id="4171e-135">El <xref:System.Globalization.DateTimeFormatInfo> objeto devuelto por la <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> propiedad de la <xref:System.Globalization.CultureInfo> objeto creado en el paso 8.</span><span class="sxs-lookup"><span data-stu-id="4171e-135">The <xref:System.Globalization.DateTimeFormatInfo> object that is returned by the <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> property of the <xref:System.Globalization.CultureInfo> object created in step 8.</span></span>  
  
11. <span data-ttu-id="4171e-136">Si se produce un error en la operación de análisis en el paso 10, vaya al paso 13.</span><span class="sxs-lookup"><span data-stu-id="4171e-136">If the parse operation in step 10 fails, go to step 13.</span></span> <span data-ttu-id="4171e-137">De lo contrario, llame a la <xref:System.UInt32.Parse%28System.String%29?displayProperty=nameWithType> método para convertir la representación de cadena de ajuste de zona horaria del usuario en un entero.</span><span class="sxs-lookup"><span data-stu-id="4171e-137">Otherwise, call the <xref:System.UInt32.Parse%28System.String%29?displayProperty=nameWithType> method to convert the string representation of the user's time zone offset to an integer.</span></span>  
  
12. <span data-ttu-id="4171e-138">Crear una instancia de un <xref:System.DateTimeOffset> que representa la hora local del usuario mediante una llamada a la <xref:System.DateTimeOffset.%23ctor%28System.DateTime%2CSystem.TimeSpan%29?displayProperty=nameWithType> constructor.</span><span class="sxs-lookup"><span data-stu-id="4171e-138">Instantiate a <xref:System.DateTimeOffset> that represents the user's local time by calling the <xref:System.DateTimeOffset.%23ctor%28System.DateTime%2CSystem.TimeSpan%29?displayProperty=nameWithType> constructor.</span></span>  
  
13. <span data-ttu-id="4171e-139">Si se produce un error en la conversión en el paso 10, repita los pasos del 7 al 12 para cada elemento restante en la matriz de cadenas devueltas por la <xref:System.Web.HttpRequest.UserLanguages%2A> propiedad.</span><span class="sxs-lookup"><span data-stu-id="4171e-139">If the conversion in step 10 fails, repeat steps 7 through 12 for each remaining element in the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property.</span></span>  
  
14. <span data-ttu-id="4171e-140">Si todavía se produce un error en la conversión o si la matriz de cadenas devuelta por la <xref:System.Web.HttpRequest.UserLanguages%2A> propiedad está vacía, analizar la cadena usando la referencia cultural, lo que es devuelto por la <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> propiedad.</span><span class="sxs-lookup"><span data-stu-id="4171e-140">If the conversion still fails or if the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is empty, parse the string by using the invariant culture, which is returned by the <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="4171e-141">A continuación, repita los pasos del 7 al 12.</span><span class="sxs-lookup"><span data-stu-id="4171e-141">Then repeat steps 7 through 12.</span></span>  
  
 <span data-ttu-id="4171e-142">El resultado es un <xref:System.DateTimeOffset> objeto que representa la hora local del usuario de la página Web.</span><span class="sxs-lookup"><span data-stu-id="4171e-142">The result is a <xref:System.DateTimeOffset> object that represents the local time of the user of your Web page.</span></span> <span data-ttu-id="4171e-143">A continuación, puede determinar la hora UTC equivalente mediante una llamada a la <xref:System.DateTimeOffset.ToUniversalTime%2A> método.</span><span class="sxs-lookup"><span data-stu-id="4171e-143">You can then determine the equivalent UTC by calling the <xref:System.DateTimeOffset.ToUniversalTime%2A> method.</span></span> <span data-ttu-id="4171e-144">También puede determinar la fecha y hora equivalente en el servidor Web mediante una llamada a la <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29?displayProperty=nameWithType> método y se pasa un valor de <xref:System.TimeZoneInfo.Local%2A?displayProperty=nameWithType> como la zona horaria para convertir el tiempo.</span><span class="sxs-lookup"><span data-stu-id="4171e-144">You can also determine the equivalent date and time on your Web server by calling the <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29?displayProperty=nameWithType> method and passing a value of <xref:System.TimeZoneInfo.Local%2A?displayProperty=nameWithType> as the time zone to convert the time to.</span></span>  
  
## <a name="example"></a><span data-ttu-id="4171e-145">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="4171e-145">Example</span></span>  
 <span data-ttu-id="4171e-146">El ejemplo siguiente contiene el código fuente HTML y el código de un formulario Web de ASP.NET que pide al usuario a un valor de fecha y hora de entrada.</span><span class="sxs-lookup"><span data-stu-id="4171e-146">The following example contains both the HTML source and the code for an ASP.NET Web form that asks the user to input a date and time value.</span></span> <span data-ttu-id="4171e-147">Un script del lado cliente también escribe información en la fecha local y la hora de la solicitud del usuario y el desplazamiento de zona horaria del usuario a la hora UTC en un campo oculto.</span><span class="sxs-lookup"><span data-stu-id="4171e-147">A client-side script also writes information on the local date and time of the user's request and the offset of the user's time zone from UTC to a hidden field.</span></span> <span data-ttu-id="4171e-148">Esta información, a continuación, se analiza el servidor, que devuelve una página Web que muestra la entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="4171e-148">This information is then parsed by the server, which returns a Web page that displays the user's input.</span></span> <span data-ttu-id="4171e-149">También muestra la fecha y hora de la solicitud del usuario mediante la hora local del usuario, la hora en el servidor y la hora UTC.</span><span class="sxs-lookup"><span data-stu-id="4171e-149">It also displays the date and time of the user's request using the user's local time, the time on the server, and UTC.</span></span>  
  
 [!code-aspx-csharp[Formatting.HowTo.ParseDateInput#1](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.ParseDateInput/cs/GetDateInfo.aspx#1)]
 [!code-aspx-vb[Formatting.HowTo.ParseDateInput#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.ParseDateInput/vb/GetDateInfo.aspx#1)]
  
 <span data-ttu-id="4171e-150">El script de cliente llama a JavaScript `toLocaleString` método.</span><span class="sxs-lookup"><span data-stu-id="4171e-150">The client-side script calls the JavaScript `toLocaleString` method.</span></span> <span data-ttu-id="4171e-151">Esto genera una cadena que sigue las convenciones de formato de la configuración regional del usuario, que es más probable que se analizó correctamente en el servidor.</span><span class="sxs-lookup"><span data-stu-id="4171e-151">This produces a string that follows the formatting conventions of the user's locale, which is more likely to be successfully parsed on the server.</span></span>  
  
 <span data-ttu-id="4171e-152">El <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> propiedad se rellena a partir de los nombres de referencia cultural que se encuentran en `Accept-Language` encabezados incluidos en una solicitud HTTP.</span><span class="sxs-lookup"><span data-stu-id="4171e-152">The <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated from the culture names that are contained in `Accept-Language` headers included in an HTTP request.</span></span> <span data-ttu-id="4171e-153">Sin embargo, no todos los exploradores incluyen `Accept-Language` encabezados en sus solicitudes y los usuarios también pueden suprimir los encabezados por completo.</span><span class="sxs-lookup"><span data-stu-id="4171e-153">However, not all browsers include `Accept-Language` headers in their requests, and users can also suppress the headers completely.</span></span> <span data-ttu-id="4171e-154">Esto hace que sea importante tener una referencia cultural de reserva al analizar proporcionados por el usuario.</span><span class="sxs-lookup"><span data-stu-id="4171e-154">This makes it important to have a fallback culture when parsing user input.</span></span> <span data-ttu-id="4171e-155">Normalmente, la referencia cultural de reserva es la referencia cultural invariable devuelta por <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4171e-155">Typically the fallback culture is the invariant culture returned by <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="4171e-156">Los usuarios también pueden proporcionar Internet Explorer con nombres de referencia cultural escribiéndolos en un cuadro de texto, que crea la posibilidad de que los nombres de referencia cultural pueden no ser válidos.</span><span class="sxs-lookup"><span data-stu-id="4171e-156">Users can also provide Internet Explorer with culture names that they input in a text box, which creates the possibility that the culture names may not be valid.</span></span> <span data-ttu-id="4171e-157">Esto hace que sea importante para usar el control de excepciones al crear instancias de un <xref:System.Globalization.CultureInfo> objeto.</span><span class="sxs-lookup"><span data-stu-id="4171e-157">This makes it important to use exception handling when instantiating a <xref:System.Globalization.CultureInfo> object.</span></span>  
  
 <span data-ttu-id="4171e-158">Cuando se recuperan de una solicitud HTTP enviada por Internet Explorer, la <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> matriz se rellena en orden de preferencia de usuario.</span><span class="sxs-lookup"><span data-stu-id="4171e-158">When retrieved from an HTTP request submitted by Internet Explorer, the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> array is populated in order of user preference.</span></span> <span data-ttu-id="4171e-159">El primer elemento de la matriz contiene el nombre de referencia cultural/región principal del usuario.</span><span class="sxs-lookup"><span data-stu-id="4171e-159">The first element in the array contains the name of the user's primary culture/region.</span></span> <span data-ttu-id="4171e-160">Si la matriz contiene los elementos adicionales, Internet Explorer le asigna arbitrariamente un especificador de calidad, que está delimitado del nombre de referencia cultural de un punto y coma.</span><span class="sxs-lookup"><span data-stu-id="4171e-160">If the array contains any additional items, Internet Explorer arbitrarily assigns them a quality specifier, which is delimited from the culture name by a semicolon.</span></span> <span data-ttu-id="4171e-161">Por ejemplo, una entrada para la referencia cultural fr-FR podría tener el formato `fr-FR;q=0.7`.</span><span class="sxs-lookup"><span data-stu-id="4171e-161">For example, an entry for the fr-FR culture might take the form `fr-FR;q=0.7`.</span></span>  
  
 <span data-ttu-id="4171e-162">El ejemplo se llama el <xref:System.Globalization.CultureInfo.%23ctor%2A> constructor con su `useUserOverride` parámetro establecido en `false` para crear un nuevo <xref:System.Globalization.CultureInfo> objeto.</span><span class="sxs-lookup"><span data-stu-id="4171e-162">The example calls the <xref:System.Globalization.CultureInfo.%23ctor%2A> constructor with its `useUserOverride` parameter set to `false` to create a new <xref:System.Globalization.CultureInfo> object.</span></span> <span data-ttu-id="4171e-163">Esto garantiza que, si el nombre de referencia cultural es el nombre de la referencia cultural predeterminada en el servidor, el nuevo <xref:System.Globalization.CultureInfo> objeto creado por el constructor de clase contiene la configuración predeterminada de una referencia cultural y no refleja las configuraciones invalidadas con el servidor  **Regional y de idioma** aplicación.</span><span class="sxs-lookup"><span data-stu-id="4171e-163">This ensures that, if the culture name is the default culture name on the server, the new <xref:System.Globalization.CultureInfo> object created by the class constructor contains a culture's default settings and does not reflect any settings overridden by using the server's **Regional and Language Options** application.</span></span> <span data-ttu-id="4171e-164">Los valores de una configuración invalidada en el servidor son poco probable que exista en el sistema del usuario o para que se refleje en la entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="4171e-164">The values from any overridden settings on the server are unlikely to exist on the user's system or to be reflected in the user's input.</span></span>  
  
 <span data-ttu-id="4171e-165">Dado que este ejemplo analizan dos representaciones de cadena de una fecha y hora (un valor proporcionado por el usuario, otro valor almacenado en el campo oculto), define los posibles <xref:System.Globalization.CultureInfo> objetos que podrían ser necesarios de antemano.</span><span class="sxs-lookup"><span data-stu-id="4171e-165">Because this example parses two string representations of a date and time (one input by the user, the other stored to the hidden field), it defines the possible <xref:System.Globalization.CultureInfo> objects that may be required in advance.</span></span> <span data-ttu-id="4171e-166">Crea una matriz de <xref:System.Globalization.CultureInfo> objetos que es una unidad mayor que el número de elementos devueltos por la <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> propiedad.</span><span class="sxs-lookup"><span data-stu-id="4171e-166">It creates an array of <xref:System.Globalization.CultureInfo> objects that is one greater than the number of elements returned by the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="4171e-167">A continuación, crea una instancia de un <xref:System.Globalization.CultureInfo> objeto para cada cadena de idioma y región y también crea una instancia de un <xref:System.Globalization.CultureInfo> objeto que representa <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4171e-167">It then instantiates a <xref:System.Globalization.CultureInfo> object for each language/region string, and also instantiates a <xref:System.Globalization.CultureInfo> object that represents <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="4171e-168">El código puede llamar a la <xref:System.DateTime.Parse%2A> o <xref:System.DateTime.TryParse%2A> método para convertir la representación de cadena del usuario de una fecha y hora a la que un <xref:System.DateTime> valor.</span><span class="sxs-lookup"><span data-stu-id="4171e-168">Your code can call either the <xref:System.DateTime.Parse%2A> or the <xref:System.DateTime.TryParse%2A> method to convert the user's string representation of a date and time to a <xref:System.DateTime> value.</span></span> <span data-ttu-id="4171e-169">Las llamadas repetidas a un método de análisis pueden resultar necesarias para una única operación de análisis.</span><span class="sxs-lookup"><span data-stu-id="4171e-169">Repeated calls to a parse method may be required for a single parsing operation.</span></span> <span data-ttu-id="4171e-170">Como resultado, el <xref:System.DateTime.TryParse%2A> métodos es mejor porque devuelve `false` si se produce un error en una operación de análisis.</span><span class="sxs-lookup"><span data-stu-id="4171e-170">As a result, the <xref:System.DateTime.TryParse%2A> method is better because it returns `false` if a parse operation fails.</span></span> <span data-ttu-id="4171e-171">En cambio, controlar las excepciones repetidas que pueden producir el <xref:System.DateTime.Parse%2A> método puede ser una propuesta muy costosa en una aplicación Web.</span><span class="sxs-lookup"><span data-stu-id="4171e-171">In contrast, handling the repeated exceptions that may be thrown by the <xref:System.DateTime.Parse%2A> method can be a very expensive proposition in a Web application.</span></span>  
  
## <a name="compiling-the-code"></a><span data-ttu-id="4171e-172">Compilar el código</span><span class="sxs-lookup"><span data-stu-id="4171e-172">Compiling the Code</span></span>  
 <span data-ttu-id="4171e-173">Para compilar el código, cree un [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] página Web sin un código subyacente.</span><span class="sxs-lookup"><span data-stu-id="4171e-173">To compile the code, create an [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] Web page without a code-behind.</span></span> <span data-ttu-id="4171e-174">A continuación, copie el ejemplo en la página Web para que lo reemplace todo el código existente.</span><span class="sxs-lookup"><span data-stu-id="4171e-174">Then copy the example into the Web page so that it replaces all the existing code.</span></span> <span data-ttu-id="4171e-175">La [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] página Web debe contener los siguientes controles:</span><span class="sxs-lookup"><span data-stu-id="4171e-175">The [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] Web page should contain the following controls:</span></span>  
  
-   <span data-ttu-id="4171e-176">Un <xref:System.Web.UI.WebControls.Label> control, que no se hace referencia en el código.</span><span class="sxs-lookup"><span data-stu-id="4171e-176">A <xref:System.Web.UI.WebControls.Label> control, which is not referenced in code.</span></span> <span data-ttu-id="4171e-177">Establecer su <xref:System.Web.UI.WebControls.TextBox.Text%2A> propiedad en "Escriba un número:".</span><span class="sxs-lookup"><span data-stu-id="4171e-177">Set its <xref:System.Web.UI.WebControls.TextBox.Text%2A> property to "Enter a Number:".</span></span>  
  
-   <span data-ttu-id="4171e-178">Un control <xref:System.Web.UI.WebControls.TextBox> llamado `DateString`.</span><span class="sxs-lookup"><span data-stu-id="4171e-178">A <xref:System.Web.UI.WebControls.TextBox> control named `DateString`.</span></span>  
  
-   <span data-ttu-id="4171e-179">Un control <xref:System.Web.UI.WebControls.Button> llamado `OKButton`.</span><span class="sxs-lookup"><span data-stu-id="4171e-179">A <xref:System.Web.UI.WebControls.Button> control named `OKButton`.</span></span> <span data-ttu-id="4171e-180">Establecer su <xref:System.Web.UI.WebControls.Button.Text%2A> propiedad en "Aceptar".</span><span class="sxs-lookup"><span data-stu-id="4171e-180">Set its <xref:System.Web.UI.WebControls.Button.Text%2A> property to "OK".</span></span>  
  
-   <span data-ttu-id="4171e-181">Control <xref:System.Web.UI.WebControls.HiddenField> denominado `DateInfo`.</span><span class="sxs-lookup"><span data-stu-id="4171e-181">A <xref:System.Web.UI.WebControls.HiddenField> control named `DateInfo`.</span></span>  
  
## <a name="net-framework-security"></a><span data-ttu-id="4171e-182">Seguridad de .NET Framework</span><span class="sxs-lookup"><span data-stu-id="4171e-182">.NET Framework Security</span></span>  
 <span data-ttu-id="4171e-183">Para evitar que un usuario inserte el script en el flujo HTML, los proporcionados por el usuario nunca deben devolverse directamente en la respuesta del servidor.</span><span class="sxs-lookup"><span data-stu-id="4171e-183">To prevent a user from injecting script into the HTML stream, user input should never be directly echoed back in the server response.</span></span> <span data-ttu-id="4171e-184">En su lugar, debe codificarse utilizando el <xref:System.Web.HttpServerUtility.HtmlEncode%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="4171e-184">Instead, it should be encoded by using the <xref:System.Web.HttpServerUtility.HtmlEncode%2A?displayProperty=nameWithType> method.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4171e-185">Vea también</span><span class="sxs-lookup"><span data-stu-id="4171e-185">See Also</span></span>  
 [<span data-ttu-id="4171e-186">Efectuar operaciones de formato</span><span class="sxs-lookup"><span data-stu-id="4171e-186">Performing Formatting Operations</span></span>](../../../docs/standard/base-types/performing-formatting-operations.md)  
 [<span data-ttu-id="4171e-187">Standard Date and Time Format Strings</span><span class="sxs-lookup"><span data-stu-id="4171e-187">Standard Date and Time Format Strings</span></span>](../../../docs/standard/base-types/standard-date-and-time-format-strings.md)  
 [<span data-ttu-id="4171e-188">Custom Date and Time Format Strings</span><span class="sxs-lookup"><span data-stu-id="4171e-188">Custom Date and Time Format Strings</span></span>](../../../docs/standard/base-types/custom-date-and-time-format-strings.md)  
 [<span data-ttu-id="4171e-189">Análisis de cadenas de fecha y hora</span><span class="sxs-lookup"><span data-stu-id="4171e-189">Parsing Date and Time Strings</span></span>](../../../docs/standard/base-types/parsing-datetime.md)
